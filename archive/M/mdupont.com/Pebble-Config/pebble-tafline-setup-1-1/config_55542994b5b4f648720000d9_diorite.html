<!DOCTYPE html>
<html lang="en" xmlns="http://mdupont.com">

<head>
    <!--META-->
    <title>TAFline Config 1.1</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--LINK-->
    <link rel="stylesheet" href="/mdupont.com/Pebble-Config/css/slate.css">
</head>

<body>

    <!-- Google Tag Manager -->
    <noscript><iframe src="/www.googletagmanager.com//ns_118547415.html" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-5B6F45');</script>
    <!-- End Google Tag Manager -->
    
    <form id="main-form">
        <h2 style="margin-top:10px;margin-bottom:-10px;text-align:center;">TAFline Config 1.1</h2>
        <div class="item-container">
            <div class="item-container-content">
                <div class="item">
                    <p>More projects: mdupont.com</p>
                    <p>Get some value? Give some back.</p>
                    <form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
                        <input type="hidden" name="cmd" value="_s-xclick">
                        <input type="hidden" name="encrypted" value="-----BEGIN PKCS7-----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-----END PKCS7-----">
                        <input type="image" src="/www.paypalobjects.com/en_US/i/btn/btn_donate_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
                        <img alt="" border="0" src="/www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
                    </form>
                </div>
            </div>
        </div>
        
        <div class="item-container">
            <div class="item-container-header">Station ID</div>
                <div class="item-container-content">
                <label class="item">
                    <div class="item-input-wrapper">
                        <input type="text" class="item-input" name="stationID" id="stationID" placeholder="(KJFK)">
                    </div>
                </label>
            </div>
        </div>
        
        <div class="item-container">
            <div class="item-container-header">Other Options</div>
            <div class="item-container-content">
                <label class="item">
                    Translate
                    <input type="checkbox" class="item-toggle" name="translate" id="translate">
                </label>
            </div>
            <div class="item-container-content">
                <label class="item">
                    Use Nearest Station
                    <input type="checkbox" class="item-toggle" name="getNearest" id="getNearest">
                </label>
            </div>
            <div class="item-container-footer">
                Requires location permissions
            </div>
        </div>
        
        <div class="item-container">
            <div class="button-container">
                <input type="button" class="item-button" id="b-submit" value="SEND">
            </div>
        </div>
    </form>
    
    <script type="text/javascript" src="/mdupont.com/Pebble-Config/js/slate.js"></script>
    <script>
        function sanitizeID(id) {
            if (id.length > 4) { id = id.substring(0,4); }
            id = id.toUpperCase();
            return id;
        }
        
        function saveOptions() {
            var options = {
                'stationID': sanitizeID($("#stationID").val()),
                'getNearest': document.getElementById("getNearest").checked,
                'translate': document.getElementById("translate").checked
            };
            console.log(JSON.stringify(options))
            return options;
        }
        
        /*$.urlParam = function(name){
            var results = new RegExp('[\\?&]' + name + '=([^&#]*)').exec(window.location.href);
            return results[1] || 0;
        }*/

        $().ready(function() {
            /*if ($.urlParam('station') !== null) {
                document.getElementById("stationID").value = $.urlParam('station');
            }
            
            if ($.urlParam('near') == 'true') {
                document.getElementById("getNearest").checked = true;
            }
            
            if ($.urlParam('trans') == 'true') {
                document.getElementById("translate").checked = true;
            }*/

            $("#b-submit").click(function() {
                console.log("Submit");
                var location = "pebblejs://close#" + encodeURIComponent(JSON.stringify(saveOptions()));
                console.log("Warping to: " + location);
                console.log(location);
                document.location = location;
            });

        });
    </script>
</body>

</html>
