
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <title>Kiezel Watchfaces Configuration Pages</title>

    <!-- Autocomplete textbox -->
    <style>
        .autocomplete-suggestions { border: 1px solid #999; background: #FFF; cursor: default; overflow: auto; -webkit-box-shadow: 1px 4px 3px rgba(50, 50, 50, 0.64); -moz-box-shadow: 1px 4px 3px rgba(50, 50, 50, 0.64); box-shadow: 1px 4px 3px rgba(50, 50, 50, 0.64); }
        .autocomplete-suggestion { padding: 2px 5px; white-space: nowrap; overflow: hidden; }
        .autocomplete-no-suggestion { padding: 2px 5px;}
        .autocomplete-selected { background: #F0F0F0; }
        .autocomplete-suggestions strong { font-weight: bold; color: #000; }
        .autocomplete-group { padding: 2px 5px; }
        .autocomplete-group strong { font-weight: bold; font-size: 16px; color: #000; display: block; border-bottom: 1px solid #000; }
    </style>

    <!-- Path to Framework7 Library CSS-->
    <link rel="stylesheet" href="/kiezelwatchfaces.com/watchfaceConfig/css/framework7.css">
    <!-- Path to your custom app styles-->
    <link rel="stylesheet" href="/kiezelwatchfaces.com/watchfaceConfig/css/my-app.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="/maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.css">
    <!-- Google Fonts -->
    <link href='//fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,400italic,500,500italic,700,700italic,900,900italic' rel='stylesheet' type='text/css'>

    <script type="text/javascript" src="/kiezelwatchfaces.com/watchfaceConfig/js/jquery.js"></script>
    <script type="text/javascript" src="/kiezelwatchfaces.com/watchfaceConfig/js/jquery.js"></script>
</head>
<body>
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-64095502-1', 'auto');
    ga('send', 'pageview');

</script>
    <!-- Views-->
    <div class="views">
        <!-- Your main view, should have "view-main" class-->
        <div class="view view-main">
            <!-- Top Navbar-->
            <div class="navbar">
                <div class="navbar-inner">
                    <!-- We have home navbar without left link-->
                    <div class="center sliding" id="header-logo">KIEZEL</div>
                </div>
            </div>
            <!-- Pages, because we need fixed-through navbar and toolbar, it has additional appropriate classes-->
            <div class="pages navbar-through toolbar-through">
                <!-- Page, data-page contains page name-->
                <div data-page="index" class="page">
                    <!-- Scrollable page content-->
                    <div class="page-content">

                                                        <div class="col-100 list-block-label intro-text">In order to fully customize this face you need to sign in or buy a license. Click the button below to purchase.</div>
                                                        <div class="row">
                                <div class="col-100">
                                    <a href="/www.kiezelwatchfaces.com/purchase/index_1382986532.html" class="button purchase-button external">Purchase package</a>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-100">
                                    <a href="/kiezelwatchfaces.com/watchfaceConfig/login_1382986532.html" class="button signin-button external">Sign In</a>
                                </div>
                            </div>
                                                        <div class='content-block-title'>YOU MIGHT ALSO LIKE</div>
                            <div data-pagination='.swiper-pagination-c3' data-space-between='10' data-slides-per-view='3' class='swiper-container swiper-init ks-carousel-slider preset-thumbnails'>
                                <div class='swiper-pagination'></div>
                                <div class='swiper-wrapper'>
                                                                        <div class='swiper-slide'><a href='/www.kiezelwatchfaces.com/purchase/index_1382986532.html' class="external">
                                        <img src='/www.kiezelwatchfaces.com/images/top/image1c.png'></a>
                                    </div>
                                                                        <div class='swiper-slide'><a href='/www.kiezelwatchfaces.com/purchase/index_1382986532.html' class="external">
                                        <img src='/www.kiezelwatchfaces.com/images/top/image2c.png'></a>
                                    </div>
                                                                        <div class='swiper-slide'><a href='/www.kiezelwatchfaces.com/purchase/index_1382986532.html' class="external">
                                        <img src='/www.kiezelwatchfaces.com/images/top/image3c.png'></a>
                                    </div>
                                                                        <div class='swiper-slide'><a href='/www.kiezelwatchfaces.com/purchase/index_1382986532.html' class="external">
                                        <img src='/www.kiezelwatchfaces.com/images/top/image4c.png'></a>
                                    </div>
                                                                        <div class='swiper-slide'><a href='/www.kiezelwatchfaces.com/purchase/index_1382986532.html' class="external">
                                        <img src='/www.kiezelwatchfaces.com/images/top/image5c.png'></a>
                                    </div>
                                                                        <div class='swiper-slide'><a href='/www.kiezelwatchfaces.com/purchase/index_1382986532.html' class="external">
                                        <img src='/www.kiezelwatchfaces.com/images/top/image6c.png'></a>
                                    </div>
                                                                        <div class='swiper-slide'><a href='/www.kiezelwatchfaces.com/purchase/index_1382986532.html' class="external">
                                        <img src='/www.kiezelwatchfaces.com/images/top/image7c.png'></a>
                                    </div>
                                                                        <div class='swiper-slide'><a href='/www.kiezelwatchfaces.com/purchase/index_1382986532.html' class="external">
                                        <img src='/www.kiezelwatchfaces.com/images/top/image8c.png'></a>
                                    </div>
                                                                    </div>
                            </div>
                                            </div>
                </div>
            </div>

                    </div>
        <div id="googleAttributions"></div>
    </div>

    <!-- Path to Framework7 Library JS-->
    <script type="text/javascript" src="/kiezelwatchfaces.com/watchfaceConfig/js/framework7.js"></script>

    <!-- Path to your app js-->
    <script type="text/javascript" src="/kiezelwatchfaces.com/watchfaceConfig/js/my-app.js"></script>

    <script>
<!--<pre>-->
                //variable that will hold all selected colors
        var selectedColors = [];

        
        $().ready(function () {
            
            
            //get a callback when the colorpicker page is loaded
            myApp.onPageBeforeAnimation("colorpick", function (page) {
                //set the correct title so the user knows for which item he/she is picking a color
                var maxLength = 30;
                if (activeColorPickerOptionName.length > maxLength) {
                    $('#colorPickerTitle').text(activeColorPickerOptionName.substring(0, maxLength - 3) + "...");
                }
                else {
                    $('#colorPickerTitle').text(activeColorPickerOptionName);
                }
            });

            $(':text').focus(function(){
                $(this).one('mouseup', function(event){
                    event.preventDefault();
                }).select();
            });
        });

        
        //catch save button click
        $("#save").click(function() {
            try {
                ga('send', 'event', 'button', 'click', 'save');
            }
            catch (e) {}

            //json containing the config settings
                        var configJson = {
                "email": null,"licenseCode": "",
                "licenseCheck": ""            };
            
            
            //add all color settings
            for (var key in selectedColors) {
                configJson[key] = selectedColors[key];
            }

            //put all config settings in the json object
            
            
            var configSettingsAsJson = JSON.stringify(configJson);

                        // to allow debugging with cloudpebble
            console.log(configSettingsAsJson);
            var return_to = getQueryParam('return_to', 'pebblejs://close#');
            //var encodedData = encodeURIComponent(configSettingsAsJson).replace(/%2B/g, "%252B");
			var encodedData = encodeURIComponent(configSettingsAsJson);
            //console.log(encodedData);
            document.location = return_to + encodedData;
                    });

        $('#loginButton').on('click', function() {
            try {
                ga('send', 'event', 'button', 'click', 'login');
            }
            catch (e) {}
        });
        $('#purchaseButton').on('click', function() {
            try {
                ga('send', 'event', 'button', 'click', 'purchase');
            }
            catch (e) {}
        });

        function getQueryParam(variable, default_) {
            var query = location.search.substring(1);
            var vars = query.split('&');
            for (var i = 0; i < vars.length; i++) {
                var pair = vars[i].split('=');
                if (pair[0] == variable)
                    return decodeURIComponent(pair[1]);
            }
            return default_ || false;
        }

        var activeColorPicker = null;
        var activeColorPickerOptionName = null;
        function setActiveColorPicker(pickerId, optionName) {
            activeColorPicker = pickerId;
            activeColorPickerOptionName = optionName;
        }

        function setColor(color) {
            //store selected color
            selectedColors[activeColorPicker] = hexToEightBitColor(color);

            //also show to the user
            $('#' + activeColorPicker + '_preview').css('background-color', EightBitColorToHex(selectedColors[activeColorPicker]));
        }

        function hexToEightBitColor(hex) {
            // Expand shorthand form (e.g. "03F") to full form (e.g. "0033FF")
            var shorthandRegex = /^#?([a-f\d])([a-f\d])([a-f\d])$/i;
            hex = hex.replace(shorthandRegex, function(m, r, g, b) {
                return r + r + g + g + b + b;
            });

            var result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);

            //convert 32 bits rgb value to 8 bits argb color integer value
            return 192 + ((parseInt(result[1], 16) / 85) * 16) + ((parseInt(result[2], 16) / 85) * 4) + (parseInt(result[3], 16) / 85);
        }

        function EightBitColorToHex(color) {
            color -= 192;   //remove alpha channel
            var eightBitR = Math.floor(color / 16);
            color -= (eightBitR * 16);
            var eightBitG = Math.floor(color / 4);
            color -= (eightBitG * 4);
            var eightBitB = color;

            //convert to hex
            return rgbToHex(eightBitR*85, eightBitG*85, eightBitB*85);
        }

        function componentToHex(c) {
            var hex = c.toString(16);
            return hex.length == 1 ? "0" + hex : hex;
        }

        function rgbToHex(r, g, b) {
            return "#" + componentToHex(r) + componentToHex(g) + componentToHex(b);
        }

        //function value getter and setter helpers
        var controltypes = {};
        function getControlValue(controlId) {
            if (controlId && controltypes[controlId]) {
                switch(controltypes[controlId]) {
                    case "checkbox":
                        return $('#' + controlId).prop('checked');
                    case "dropdown":
                    case "textbox":
                        return $('#' + controlId).val();
                    case "colorpicker":
                        return selectedColors[controlId];
                }
            }
        }

        function setControlValue(controlId, value) {
            if (controlId && controltypes[controlId]) {
                switch (controltypes[controlId]) {
                    case "checkbox":
                        $('#' + controlId).prop('checked', value);
                        break;
                    case "dropdown":
                        $('#' + controlId + ' option[value=\'' + value + '\']').prop('selected', true);
                        break;
                    case "textbox":
                        $('#' + controlId).val(value);
                        break;
                    case "colorpicker":
                        selectedColors[controlId] = hexToEightBitColor(value);
                        $('#' + controlId + '_preview').css('background-color', value);
                        break;
                }
            }
        }

        //set all preset values in the set
        function setPresetValues(presetValues) {
            for (var controlId in presetValues) {
                if (presetValues.hasOwnProperty(controlId)) {
                    setControlValue(controlId, presetValues[controlId]);
                }
            }
        }

        //trial countdown timer!
        //http://stackoverflow.com/questions/20618355/the-simplest-possible-javascript-countdown-timer
        function startTrialExpirationTimer(duration, display) {
            var start = Date.now(),
                diff,
                hours,
                minutes;
            function timer() {
                // get the number of seconds that have elapsed since
                // startTimer() was called
                diff = duration - (((Date.now() - start) / 1000) | 0);
                trialDurationInSeconds = diff;      //store the final duration to send to the watch!

                // does the same job as parseInt truncates the float
                hours = (diff / 3600) | 0;
                diff -= (hours*3600);
                minutes = (diff / 60) | 0;

                hours = hours < 10 ? "0" + hours : hours;
                minutes = minutes < 10 ? "0" + minutes : minutes;

                display.textContent = "(trial ends: " + hours + "hr " + minutes + "m)";
            };
            // we don't want to wait a full second before the timer starts
            timer();
            setInterval(timer, 60000);
        }
    </script>
    <!--</pre>
    </div>-->

    </body>
</html>

