<!DOCTYPE html>
<html>
<head>
<title>Kunveni Config</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="/code.jquery.com/mobile/1.3.2/jquery.css">
<script src="/code.jquery.com//jquery-1.js"></script>
<script src="/code.jquery.com/mobile/1.3.2/jquery.js"></script>
</head>
<body>
<div data-role="page" id="main">
<div data-role="header" class="jqm-header">
  <h1>Kunveni Config</h1>
</div>

<div data-role="content">

  <fieldset data-role="controlgroup" data-type="horizontal">
  <legend>Color scheme:</legend>
  <input name="color-scheme" id="color-scheme-a" value="wonb" checked="checked" type="radio">
  <label for="color-scheme-a">White-on-black</label>
  <input name="color-scheme" id="color-scheme-b" value="bonw" type="radio">
  <label for="color-scheme-b">Black-on-white</label>
  </fieldset>
  
  <fieldset data-role="controlgroup" data-type="horizontal">
  <legend>Date mode:</legend>
  <input name="date-mode" id="date-mode-a" value="dayof" checked="checked" type="radio">
  <label for="date-mode-a">Day of the week</label>
  <input name="date-mode" id="date-mode-b" value="month" type="radio">
  <label for="date-mode-b">Month</label>
  </fieldset>

<div class="ui-body ui-body-b">
  <fieldset class="ui-grid-a">
<div class="ui-block-a"><button type="submit" data-theme="d" id="b-cancel">Cancel</button></div>
<div class="ui-block-b"><button type="submit" data-theme="a" id="b-submit">Submit</button></div>
</fieldset>
</div>
</div>
</div>

<script>
function saveOptions() {
var options = {
'color-scheme': $("input[name=color-scheme]:checked").val(),
'date-mode': $("input[name=date-mode]:checked").val(),
}
return options;
}

$().ready(function() {
$("#b-cancel").click(function() {
console.log("Cancel");
document.location = "pebblejs://close";
});

$("#b-submit").click(function() {
console.log("Submit");

console.log(JSON.stringify(saveOptions()));
var location = "pebblejs://close#" + encodeURIComponent(JSON.stringify(saveOptions()));
console.log("Warping to: " + location);
console.log(location);
document.location = location;
});

});
</script>
</body>
</html>
