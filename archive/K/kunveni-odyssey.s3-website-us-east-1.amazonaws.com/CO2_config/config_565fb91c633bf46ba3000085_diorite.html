<!DOCTYPE html>
<html>
<head>
<title>CO2 Config</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="/code.jquery.com/mobile/1.3.2/jquery.css">
<script src="/code.jquery.com//jquery-1.js"></script>
<script src="/code.jquery.com/mobile/1.3.2/jquery.js"></script>
</head>
<body>
<div data-role="page" id="main">
<div data-role="header" class="jqm-header">
  <h1>CO2 Config</h1>
</div>

<div data-role="content">

  <fieldset data-role="controlgroup">
  <legend>Date mode:</legend>
  <input name="date-mode" id="date-mode-a" value="full_us_day___" checked="checked" type="radio">
  <label for="date-mode-a">Tuesday<br>September 22</label>
  <input name="date-mode" id="date-mode-b" value="full_us_year__" type="radio">
  <label for="date-mode-b">2015<br>September 22</label>
  <input name="date-mode" id="date-mode-c" value="full_euro_day_" type="radio">
  <label for="date-mode-c">Tuesday<br>22 September</label>
  <input name="date-mode" id="date-mode-d" value="full_euro_year" type="radio">
  <label for="date-mode-d">2015<br>22 September</label>
  <input name="date-mode" id="date-mode-e" value="abbrev_us_____" type="radio">
  <label for="date-mode-e">Tuesday<br>9/22/2015</label>
  <input name="date-mode" id="date-mode-f" value="abbrev_euro___" type="radio">
  <label for="date-mode-f">Tuesday<br>22/9/2015</label>
  </fieldset>

<div class="ui-body ui-body-b">
  <fieldset class="ui-grid-a">
<div class="ui-block-a"><button type="submit" data-theme="d" id="b-cancel">Cancel</button></div>
<div class="ui-block-b"><button type="submit" data-theme="a" id="b-submit">Submit</button></div>
</fieldset>
</div>
</div>
</div>

<script>
function saveOptions() {
var options = {
'date-mode': $("input[name=date-mode]:checked").val()
}
return options;
}

$().ready(function() {
$("#b-cancel").click(function() {
console.log("Cancel");
document.location = "pebblejs://close";
});

$("#b-submit").click(function() {
console.log("Submit");

console.log(JSON.stringify(saveOptions()));
var location = "pebblejs://close#" + encodeURIComponent(JSON.stringify(saveOptions()));
console.log("Warping to: " + location);
console.log(location);
document.location = location;
});

});
</script>
</body>
</html>
