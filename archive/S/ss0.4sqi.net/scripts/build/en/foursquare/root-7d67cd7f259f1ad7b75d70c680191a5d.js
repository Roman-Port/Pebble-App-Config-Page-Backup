/*

//     Underscore.js 1.2.2
//     (c) 2011 Jeremy Ashkenas, DocumentCloud Inc.
//     Underscore is freely distributable under the MIT license.
//     Portions of Underscore are inspired or borrowed from Prototype,
//     Oliver Steele's Functional, and John Resig's Micro-Templating.
//     For all details and documentation:
//     http://documentcloud.github.com/underscore
*/
fourSq.aboutfoursquareeight={};fourSq.actionpage={};fourSq.actionpage.page={};fourSq.admin={};fourSq.admin.blastguide={};fourSq.adscampaigns={};fourSq.adscampaigns.desktop={};fourSq.api={};fourSq.api.caches={};fourSq.api.collections={};fourSq.api.controllers={};fourSq.api.models={};fourSq.api.models.companion={};fourSq.api.models.companion.category={};fourSq.api.models.companion.checkin={};fourSq.api.models.companion.entity={};fourSq.api.models.companion.explore={};
fourSq.api.models.companion.geo={};fourSq.api.models.companion.lists={};fourSq.api.models.companion.log={};fourSq.api.models.companion.tip={};fourSq.api.models.companion.typedmodel={};fourSq.api.models.companion.user={};fourSq.api.models.companion.venue={};fourSq.api.net={};fourSq.api.services={};fourSq.api.services.paths={};fourSq.api.services.utils={};fourSq.applewatch={};fourSq.attributionmicrosite={};fourSq.auth={};fourSq.autocomplete={};fourSq.autocomplete.desktop={};
fourSq.autocomplete.desktop.core={};fourSq.autocomplete.desktop.type={};fourSq.autocomplete.desktop.venue={};fourSq.autocomplete.desktop.view={};fourSq.bestof={};fourSq.brandmanagement={};fourSq.brandmanagement.views={};fourSq.brandmanagement.views.carousel={};fourSq.canadadayinfographic2016={};fourSq.canadadayinfographic2016.desktop={};fourSq.chain={};fourSq.chain.pages={};fourSq.chainlocations={};fourSq.chainlocations.common={};fourSq.chainlocations.desktop={};fourSq.charts={};fourSq.checkin={};
fourSq.chrome={};fourSq.citypages={};fourSq.citypages.views={};fourSq.collection={};fourSq.connections={};fourSq.connections.desktop={};fourSq.dataportability={};fourSq.debug={};fourSq.demo={};fourSq.demo.labsdemov1={};fourSq.demo.simple={};fourSq.demo.simple.event={};fourSq.demo.widgets={};fourSq.download={};fourSq.editplace={};fourSq.editplace.page={};fourSq.editplace.views={};fourSq.enterprisemicrosite={};fourSq.explore={};fourSq.explore.pin={};fourSq.explore.shared={};fourSq.facebook={};
fourSq.falloffthewagonthursdayinfographic={};fourSq.falloffthewagonthursdayinfographic.desktop={};fourSq.forgood={};fourSq.forms={};fourSq.google={};fourSq.heinekenbrewlock={};fourSq.heinekenbrewlock.desktop={};fourSq.i18n={};fourSq.impressions={};fourSq.intent={};fourSq.intent.model={};fourSq.inviteLanding={};fourSq.inviteLanding.page={};fourSq.jobs={};fourSq.legal={};fourSq.legal.page={};fourSq.lib={};fourSq.lib.suTools={};fourSq.lists={};fourSq.localqueriesindex={};
fourSq.localqueriesindex.desktop={};fourSq.localquerydetail={};fourSq.localquerydetail.common={};fourSq.localquerydetail.desktop={};fourSq.locationsettings={};fourSq.login={};fourSq.login.intent={};fourSq.managementtools={};fourSq.map={};fourSq.map.control={};fourSq.map.icon={};fourSq.map.markers={};fourSq.maps={};fourSq.marsbotappmicrosite={};fourSq.martymcfly={};fourSq.martymcfly.ui={};fourSq.merchanttools={};fourSq.nationalwinterguideinfographic2016={};
fourSq.nationalwinterguideinfographic2016.desktop={};fourSq.net={};fourSq.net.ImageUploader={};fourSq.newactivitystream={};fourSq.newactivitystream.pages={};fourSq.newautocomplete={};fourSq.newhomepage={};fourSq.newhomepage.pages={};fourSq.newhomepage.types={};fourSq.newhomepage.views={};fourSq.newpin={};fourSq.northeastwinterguideinfographic2016={};fourSq.northeastwinterguideinfographic2016.desktop={};fourSq.oauth={};fourSq.opinionator={};fourSq.pages={};fourSq.pages.admin={};
fourSq.pages.admin.venueattributes={};fourSq.pagessettings={};fourSq.pagessettings.desktop={};fourSq.photo={};fourSq.photo.pages={};fourSq.photo.views={};fourSq.postLoginAction={};fourSq.privacy={};fourSq.privacy.common={};fourSq.privacy.desktop={};fourSq.profilesettings={};fourSq.profilesettings.desktop={};fourSq.profilesettings.shared={};fourSq.retina={};fourSq.search={};fourSq.sharedtastes={};fourSq.sharing={};fourSq.sharing.desktop={};fourSq.signup={};fourSq.signup.page={};fourSq.slackapp={};
fourSq.slackapp.desktop={};fourSq.soyhelpers={};fourSq.special={};fourSq.special.pages={};fourSq.special.views={};fourSq.stats={};fourSq.stats.action={};fourSq.suTools={};fourSq.suTools.ui={};fourSq.suTools.ui.categoryQueue={};fourSq.suTools.ui.chainQueue={};fourSq.suTools.ui.mergeQueue={};fourSq.suTools.ui.woeSet={};fourSq.summerguide2017infographic={};fourSq.summerguide2017infographic.chicago={};fourSq.summerguide2017infographic.chicago.desktop={};fourSq.summerguide2017infographic.desktop={};
fourSq.summerguide2017infographic.la={};fourSq.summerguide2017infographic.la.desktop={};fourSq.summerguide2017infographic.nyc={};fourSq.summerguide2017infographic.nyc.desktop={};fourSq.superusermarketinglanding={};fourSq.superusermarketinglanding.desktop={};fourSq.swarm={};fourSq.swarm.views={};fourSq.taste={};fourSq.taste.page={};fourSq.test={};fourSq.testerregistration={};fourSq.testerregistration.views={};fourSq.testerregistration.views.autocomplete={};fourSq.tip={};fourSq.tip.intent={};
fourSq.tip.intent.addtip={};fourSq.tip.intent.services={};fourSq.tip.services={};fourSq.tip.stream={};fourSq.tip.stream.pages={};fourSq.tip.stream.views={};fourSq.tip.views={};fourSq.tiplists={};fourSq.tiplists.discovery={};fourSq.top50={};fourSq.top50.common={};fourSq.top50.desktop={};fourSq.travel={};fourSq.travel.desktop={};fourSq.travelplanner={};fourSq.travelplanner.common={};fourSq.travelplanner.desktop={};fourSq.travelwizard={};fourSq.travelwizard.desktop={};fourSq.twitter={};fourSq.ui={};
fourSq.ui.categoryautocompleter={};fourSq.ui.chainautocompleter={};fourSq.ui.dialog={};fourSq.ui.liking={};fourSq.ui.list={};fourSq.ui.lists={};fourSq.ui.lists.editor={};fourSq.ui.lists.viewer={};fourSq.ui.mobile={};fourSq.ui.save={};fourSq.ui.share={};fourSq.ui.tip={};fourSq.ui.util={};fourSq.user={};fourSq.user.view={};fourSq.userprofile2={};fourSq.userprofile2.common={};fourSq.userprofile2.desktop={};fourSq.userunlock={};fourSq.userunlock.desktop={};fourSq.util={};fourSq.util.mobile={};
fourSq.util.mobile.urlfactory={};fourSq.venue={};fourSq.venue.editing={};fourSq.venue.pages={};fourSq.venue.util={};fourSq.venue.views={};fourSq.venue2={};fourSq.venue2.common={};fourSq.venue2.desktop={};fourSq.venue2.desktop.map={};fourSq.venue2.desktop.tips={};fourSq.venueflag={};fourSq.venueflag.models={};fourSq.venueflag.pages={};fourSq.venueflag.views={};fourSq.venueflag.views.remove={};fourSq.views={};fourSq.views.PilgrimPCheckins={};fourSq.views.PilgrimPings={};
fourSq.views.adminBulkUsers={};fourSq.views.adminUserQueue={};fourSq.views.events={};fourSq.views.hours={};fourSq.views.photowoe={};fourSq.views.settings={};fourSq.views.suTools={};fourSq.yearinreview2015infographic={};fourSq.yearinreview2015infographic.desktop={};fourSq.yearinreview2016infographic={};fourSq.yearinreview2016infographic.desktop={};
(function(){function a(b,c,d){if(b===c)return 0!==b||1/b==1/c;if(null==b||null==c)return b===c;b._chain&&(b=b._wrapped);c._chain&&(c=c._wrapped);if(r.isFunction(b.isEqual))return b.isEqual(c);if(r.isFunction(c.isEqual))return c.isEqual(b);var e=l.call(b);if(e!=l.call(c))return!1;switch(e){case "[object String]":return String(b)==String(c);case "[object Number]":return b=+b,c=+c,b!=b?c!=c:0==b?1/b==1/c:b==c;case "[object Date]":case "[object Boolean]":return+b==+c;case "[object RegExp]":return b.source==
c.source&&b.global==c.global&&b.multiline==c.multiline&&b.ignoreCase==c.ignoreCase}if("object"!=typeof b||"object"!=typeof c)return!1;for(var f=d.length;f--;)if(d[f]==b)return!0;d.push(b);var f=0,g=!0;if("[object Array]"==e){if(f=b.length,g=f==c.length)for(;f--&&(g=f in b==f in c&&a(b[f],c[f],d)););}else{if("constructor"in b!="constructor"in c||b.constructor!=c.constructor)return!1;for(var h in b)if(m.call(b,h)&&(f++,!(g=m.call(c,h)&&a(b[h],c[h],d))))break;if(g){for(h in c)if(m.call(c,h)&&!f--)break;
g=!f}}d.pop();return g}var b=this,c=b._,d={},e=Array.prototype,f=Object.prototype,g=e.slice,h=e.unshift,l=f.toString,m=f.hasOwnProperty,q=e.forEach,s=e.map,u=e.reduce,v=e.reduceRight,y=e.filter,z=e.every,D=e.some,k=e.indexOf,O=e.lastIndexOf,f=Array.isArray,E=Object.keys,G=Function.prototype.bind,r=function(a){return new B(a)};"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=r),exports._=r):"function"===typeof define&&define.amd?define("underscore",
function(){return r}):b._=r;r.VERSION="1.2.2";var F=r.each=r.forEach=function(a,b,c){if(null!=a)if(q&&a.forEach===q)a.forEach(b,c);else if(a.length===+a.length)for(var e=0,f=a.length;e<f&&!(e in a&&b.call(c,a[e],e,a)===d);e++);else for(e in a)if(m.call(a,e)&&b.call(c,a[e],e,a)===d)break};r.map=function(a,b,c){var d=[];if(null==a)return d;if(s&&a.map===s)return a.map(b,c);F(a,function(a,e,f){d[d.length]=b.call(c,a,e,f)});return d};r.reduce=r.foldl=r.inject=function(a,b,c,d){var e=void 0!==c;null==
a&&(a=[]);if(u&&a.reduce===u)return d&&(b=fourSq.bind(b,d)),e?a.reduce(b,c):a.reduce(b);F(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)});if(!e)throw new TypeError("Reduce of empty array with no initial value");return c};r.reduceRight=r.foldr=function(a,b,c,d){null==a&&(a=[]);if(v&&a.reduceRight===v)return d&&(b=fourSq.bind(b,d)),void 0!==c?a.reduceRight(b,c):a.reduceRight(b);a=(r.isArray(a)?a.slice():r.toArray(a)).reverse();return r.reduce(a,b,c,d)};r.find=r.detect=function(a,b,c){var d;P(a,
function(a,e,f){if(b.call(c,a,e,f))return d=a,!0});return d};r.filter=r.select=function(a,b,c){var d=[];if(null==a)return d;if(y&&a.filter===y)return a.filter(b,c);F(a,function(a,e,f){b.call(c,a,e,f)&&(d[d.length]=a)});return d};r.reject=function(a,b,c){var d=[];if(null==a)return d;F(a,function(a,e,f){b.call(c,a,e,f)||(d[d.length]=a)});return d};r.every=r.all=function(a,b,c){var e=!0;if(null==a)return e;if(z&&a.every===z)return a.every(b,c);F(a,function(a,f,g){if(!(e=e&&b.call(c,a,f,g)))return d});
return e};var P=r.some=r.any=function(a,b,c){b=b||r.identity;var e=!1;if(null==a)return e;if(D&&a.some===D)return a.some(b,c);F(a,function(a,f,g){if(e||(e=b.call(c,a,f,g)))return d});return!!e};r.include=r.contains=function(a,b){var c=!1;return null==a?c:k&&a.indexOf===k?-1!=a.indexOf(b):c=P(a,function(a){return a===b})};r.invoke=function(a,b){var c=g.call(arguments,2);return r.map(a,function(a){return(b.call?b||a:a[b]).apply(a,c)})};r.pluck=function(a,b){return r.map(a,function(a){return a[b]})};
r.max=function(a,b,c){if(!b&&r.isArray(a))return Math.max.apply(Math,a);if(!b&&r.isEmpty(a))return-Infinity;var d={computed:-Infinity};F(a,function(a,e,f){e=b?b.call(c,a,e,f):a;e>=d.computed&&(d={value:a,computed:e})});return d.value};r.min=function(a,b,c){if(!b&&r.isArray(a))return Math.min.apply(Math,a);if(!b&&r.isEmpty(a))return Infinity;var d={computed:Infinity};F(a,function(a,e,f){e=b?b.call(c,a,e,f):a;e<d.computed&&(d={value:a,computed:e})});return d.value};r.shuffle=function(a){var b=[],c;
F(a,function(a,d,e){0==d?b[0]=a:(c=Math.floor(Math.random()*(d+1)),b[d]=b[c],b[c]=a)});return b};r.sortBy=function(a,b,c){return r.pluck(r.map(a,function(a,d,e){return{value:a,criteria:b.call(c,a,d,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;return c<d?-1:c>d?1:0}),"value")};r.groupBy=function(a,b){var c={},d=r.isFunction(b)?b:function(a){return a[b]};F(a,function(a,b){var e=d(a,b);(c[e]||(c[e]=[])).push(a)});return c};r.sortedIndex=function(a,b,c){c||(c=r.identity);for(var d=0,e=a.length;d<
e;){var f=d+e>>1;c(a[f])<c(b)?d=f+1:e=f}return d};r.toArray=function(a){return a?a.toArray?a.toArray():r.isArray(a)||r.isArguments(a)?g.call(a):r.values(a):[]};r.size=function(a){return r.toArray(a).length};r.first=r.head=function(a,b,c){return null==b||c?a[0]:g.call(a,0,b)};r.initial=function(a,b,c){return g.call(a,0,a.length-(null==b||c?1:b))};r.last=function(a,b,c){return null==b||c?a[a.length-1]:g.call(a,Math.max(a.length-b,0))};r.rest=r.tail=function(a,b,c){return g.call(a,null==b||c?1:b)};r.compact=
function(a){return r.filter(a,function(a){return!!a})};r.flatten=function(a,b){return r.reduce(a,function(a,c){if(r.isArray(c))return a.concat(b?c:r.flatten(c));a[a.length]=c;return a},[])};r.without=function(a){return r.difference(a,g.call(arguments,1))};r.uniq=r.unique=function(a,b,c){c=c?r.map(a,c):a;var d=[];r.reduce(c,function(c,e,f){0!=f&&(!0===b?r.last(c)==e:r.include(c,e))||(c[c.length]=e,d[d.length]=a[f]);return c},[]);return d};r.union=function(){return r.uniq(r.flatten(arguments,!0))};
r.intersection=r.intersect=function(a){var b=g.call(arguments,1);return r.filter(r.uniq(a),function(a){return r.every(b,function(b){return 0<=r.indexOf(b,a)})})};r.difference=function(a,b){return r.filter(a,function(a){return!r.include(b,a)})};r.zip=function(){for(var a=g.call(arguments),b=r.max(r.pluck(a,"length")),c=Array(b),d=0;d<b;d++)c[d]=r.pluck(a,""+d);return c};r.indexOf=function(a,b,c){if(null==a)return-1;var d;if(c)return c=r.sortedIndex(a,b),a[c]===b?c:-1;if(k&&a.indexOf===k)return a.indexOf(b);
c=0;for(d=a.length;c<d;c++)if(a[c]===b)return c;return-1};r.lastIndexOf=function(a,b){if(null==a)return-1;if(O&&a.lastIndexOf===O)return a.lastIndexOf(b);for(var c=a.length;c--;)if(a[c]===b)return c;return-1};r.range=function(a,b,c){1>=arguments.length&&(b=a||0,a=0);c=arguments[2]||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=0,f=Array(d);e<d;)f[e++]=a,a+=c;return f};var K=function(){};r.bind=function(a,b){var c,d;if(a.bind===G&&G)return G.apply(a,g.call(arguments,1));if(!r.isFunction(a))throw new TypeError;
d=g.call(arguments,2);return c=function(){if(!(this instanceof c))return a.apply(b,d.concat(g.call(arguments)));K.prototype=a.prototype;var e=new K,f=a.apply(e,d.concat(g.call(arguments)));return Object(f)===f?f:e}};r.bindAll=function(a){var b=g.call(arguments,1);0==b.length&&(b=r.functions(a));F(b,function(b){a[b]=fourSq.bind(a[b],a)});return a};r.memoize=function(a,b){var c={};b||(b=r.identity);return function(){var d=b.apply(this,arguments);return m.call(c,d)?c[d]:c[d]=a.apply(this,arguments)}};
r.delay=function(a,b){var c=g.call(arguments,2);return setTimeout(function(){return a.apply(a,c)},b)};r.defer=function(a){return r.delay.apply(r,[a,1].concat(g.call(arguments,1)))};r.throttle=function(a,b){var c,d,e,f,g,h=r.debounce(function(){g=f=!1},b);return function(){c=this;d=arguments;e||(e=setTimeout(function(){e=null;g&&a.apply(c,d);h()},b));f?g=!0:a.apply(c,d);h();f=!0}};r.debounce=function(a,b){var c;return function(){var d=this,e=arguments;clearTimeout(c);c=setTimeout(function(){c=null;
a.apply(d,e)},b)}};r.once=function(a){var b=!1,c;return function(){if(b)return c;b=!0;return c=a.apply(this,arguments)}};r.wrap=function(a,b){return function(){var c=[a].concat(g.call(arguments));return b.apply(this,c)}};r.compose=function(){var a=g.call(arguments);return function(){for(var b=g.call(arguments),c=a.length-1;0<=c;c--)b=[a[c].apply(this,b)];return b[0]}};r.after=function(a,b){return 0>=a?b():function(){if(1>--a)return b.apply(this,arguments)}};r.keys=E||function(a){if(a!==Object(a))throw new TypeError("Invalid object");
var b=[],c;for(c in a)m.call(a,c)&&(b[b.length]=c);return b};r.values=function(a){return r.map(a,r.identity)};r.functions=r.methods=function(a){var b=[],c;for(c in a)r.isFunction(a[c])&&b.push(c);return b.sort()};r.extend=function(a){F(g.call(arguments,1),function(b){for(var c in b)void 0!==b[c]&&(a[c]=b[c])});return a};r.defaults=function(a){F(g.call(arguments,1),function(b){for(var c in b)null==a[c]&&(a[c]=b[c])});return a};r.clone=function(a){return r.isObject(a)?r.isArray(a)?a.slice():r.extend({},
a):a};r.tap=function(a,b){b(a);return a};r.isEqual=function(b,c){return a(b,c,[])};r.isEmpty=function(a){if(r.isArray(a)||r.isString(a))return 0===a.length;for(var b in a)if(m.call(a,b))return!1;return!0};r.isElement=function(a){return!(!a||1!=a.nodeType)};r.isArray=f||function(a){return"[object Array]"==l.call(a)};r.isObject=function(a){return a===Object(a)};"[object Arguments]"==l.call(arguments)?r.isArguments=function(a){return"[object Arguments]"==l.call(a)}:r.isArguments=function(a){return!(!a||
!m.call(a,"callee"))};r.isFunction=function(a){return"[object Function]"==l.call(a)};r.isString=function(a){return"[object String]"==l.call(a)};r.isNumber=function(a){return"[object Number]"==l.call(a)};r.isNaN=function(a){return a!==a};r.isBoolean=function(a){return!0===a||!1===a||"[object Boolean]"==l.call(a)};r.isDate=function(a){return"[object Date]"==l.call(a)};r.isRegExp=function(a){return"[object RegExp]"==l.call(a)};r.isNull=function(a){return null===a};r.isUndefined=function(a){return void 0===
a};r.noConflict=function(){b._=c;return this};r.identity=function(a){return a};r.times=function(a,b,c){for(var d=0;d<a;d++)b.call(c,d)};r.escape=function(a){return(""+a).replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;").replace(/"/g,"\x26quot;").replace(/'/g,"\x26#x27;").replace(/\//g,"\x26#x2F;")};r.mixin=function(a){F(r.functions(a),function(b){R(b,r[b]=a[b])})};var A=0;r.uniqueId=function(a){var b=A++;return a?a+b:b};r.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,
escape:/<%-([\s\S]+?)%>/g};r.template=function(a,b){var c=r.templateSettings,c="var __p\x3d[],print\x3dfunction(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+a.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(c.escape,function(a,b){return"',_.escape("+b.replace(/\\'/g,"'")+"),'"}).replace(c.interpolate,function(a,b){return"',"+b.replace(/\\'/g,"'")+",'"}).replace(c.evaluate||null,function(a,b){return"');"+b.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+";__p.push('"}).replace(/\r/g,
"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');",d=new Function("obj","_",c);return b?d(b,r):function(a){return d(a,r)}};var B=function(a){this._wrapped=a};r.prototype=B.prototype;var T=function(a,b){return b?r(a).chain():a},R=function(a,b){B.prototype[a]=function(){var a=g.call(arguments);h.call(a,this._wrapped);return T(b.apply(r,a),this._chain)}};r.mixin(r);F("pop push reverse shift sort splice unshift".split(" "),function(a){var b=e[a];B.prototype[a]=function(){b.apply(this._wrapped,
arguments);return T(this._wrapped,this._chain)}});F(["concat","join","slice"],function(a){var b=e[a];B.prototype[a]=function(){return T(b.apply(this._wrapped,arguments),this._chain)}});B.prototype.chain=function(){this._chain=!0;return this};B.prototype.value=function(){return this._wrapped}}).call(this);(function(a){a.fn.placeholder=function(b){return this.each(function(){var c=a(this),d=c.attr("placeholder"),e=b&&b.clearOnFocus||!1;if(d){c.removeAttr("placeholder");var f=c.wrap(a(document.createElement("span")).addClass("input-holder")).parent(),g=a(document.createElement("span")).text(d).addClass("input-default");f.append(g);g.click(function(){c.focus()});var h=function(){0===c.val().length?g.show():g.hide()};h();e?(c.focus(function(a){g.hide()}),c.blur(h)):(c.keydown(function(a){"8"!==a.keyCode&&
"9"!==a.keyCode&&"16"!==a.keyCode&&h()}),c.keyup(h));c.change(h)}})}})(jQuery);(function(a){var b=function(b,c){this.target=a(b);this.touch=c;this.startX=this.currentX=c.screenX;this.startY=this.currentY=c.screenY;this.eventType=null};b.latestTap=null;b.prototype.move=function(a){this.currentX=a.screenX;this.currentY=a.screenY};b.prototype.process=function(a){var b=this.offsetX=this.currentX-this.startX,c=this.offsetY=this.currentY-this.startY;void 0===a?(0==b&&0==c?this.checkForDoubleTap():(Math.abs(c)>Math.abs(b)?this.eventType=0<c?"swipedown":"swipeup":this.eventType=0<b?
"swiperight":"swipeleft",this.target.trigger("swipe",[this])),this.target.trigger(this.eventType,[this]),this.target.trigger("touch",[this])):this.target.trigger("move",[this])};b.prototype.checkForDoubleTap=function(){b.latestTap&&400>new Date-b.latestTap&&(this.eventType="doubletap");this.eventType||(this.eventType="tap");b.latestTap=new Date};var c=function(a){a.bind("touchstart",this.touchStart);a.bind("touchmove",this.touchMove);a.bind("touchcancel",this.touchCancel);a.bind("touchend",this.touchEnd)};
c.prototype.touchStart=function(a){var e=this;c.eachTouch(a,function(a){c.touches[a.identifier]=new b(e,a)})};c.prototype.touchMove=function(a){c.eachTouch(a,function(a){var b=c.touches[a.identifier];b&&(b.move(a),b.process(!1))})};c.prototype.touchCancel=function(a){c.eachTouch(a,function(a){c.purge(a,!0)})};c.prototype.touchEnd=function(a){c.eachTouch(a,function(a){c.purge(a)})};c.touches={};c.purge=function(a,b){if(!b){var f=c.touches[a.identifier];f&&f.process()}delete c.touches[a.identifier]};
c.eachTouch=function(a,b){a=a.originalEvent;for(var c=a.changedTouches.length,g=0;g<c;g++)b(a.changedTouches[g])};a.fn.addSwipeEvents=function(a){new c(this);a&&this.bind("touch",a);return this}})(jQuery);var goog=goog||{};goog.DEBUG=!1;goog.inherits=function(a,b){function c(){}c.prototype=b.prototype;a.superClass_=b.prototype;a.prototype=new c;a.prototype.constructor=a};goog.userAgent||(goog.userAgent=function(){var a="";"undefined"!==typeof navigator&&navigator&&"string"==typeof navigator.userAgent&&(a=navigator.userAgent);var b=0==a.indexOf("Opera");return{jscript:{HAS_JSCRIPT:"ScriptEngine"in this},OPERA:b,IE:!b&&-1!=a.indexOf("MSIE"),WEBKIT:!b&&-1!=a.indexOf("WebKit")}}());
goog.asserts||(goog.asserts={assert:function(a){if(!a)throw Error("Assertion error");},fail:function(a){}});goog.dom||(goog.dom={},goog.dom.DomHelper=function(a){this.document_=a||document},goog.dom.DomHelper.prototype.getDocument=function(){return this.document_},goog.dom.DomHelper.prototype.createElement=function(a){return this.document_.createElement(a)},goog.dom.DomHelper.prototype.createDocumentFragment=function(){return this.document_.createDocumentFragment()});
goog.format||(goog.format={insertWordBreaks:function(a,b){a=String(a);for(var c=[],d=0,e=!1,f=!1,g=0,h=0,l=0,m=a.length;l<m;++l){var q=a.charCodeAt(l);g>=b&&32!=q&&(c[d++]=a.substring(h,l),h=l,c[d++]=goog.format.WORD_BREAK,g=0);if(e)62==q&&(e=!1);else if(f)switch(q){case 59:f=!1;++g;break;case 60:f=!1;e=!0;break;case 32:f=!1,g=0}else switch(q){case 60:e=!0;break;case 38:f=!0;break;case 32:g=0;break;default:++g}}c[d++]=a.substring(h);return c.join("")},WORD_BREAK:goog.userAgent.WEBKIT?"\x3cwbr\x3e\x3c/wbr\x3e":
goog.userAgent.OPERA?"\x26shy;":"\x3cwbr\x3e"});goog.i18n||(goog.i18n={bidi:{detectRtlDirectionality:function(a,b){a=soyshim.$$bidiStripHtmlIfNecessary_(a,b);return soyshim.$$bidiRtlWordRatio_(a)>soyshim.$$bidiRtlDetectionThreshold_}}});goog.i18n.bidi.Dir={RTL:-1,UNKNOWN:0,LTR:1};goog.i18n.bidi.toDir=function(a){return"number"==typeof a?0<a?goog.i18n.bidi.Dir.LTR:0>a?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.UNKNOWN:a?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR};
goog.i18n.BidiFormatter=function(a){this.dir_=goog.i18n.bidi.toDir(a)};goog.i18n.BidiFormatter.prototype.dirAttr=function(a,b){var c=soy.$$bidiTextDir(a,b);return c&&c!=this.dir_?0>c?'dir\x3d"rtl"':'dir\x3d"ltr"':""};goog.i18n.BidiFormatter.prototype.endEdge=function(){return 0>this.dir_?"left":"right"};goog.i18n.BidiFormatter.prototype.mark=function(){return 0<this.dir_?"\u200e":0>this.dir_?"\u200f":""};
goog.i18n.BidiFormatter.prototype.markAfter=function(a,b){var c=soy.$$bidiTextDir(a,b);return soyshim.$$bidiMarkAfterKnownDir_(this.dir_,c,a,b)};goog.i18n.BidiFormatter.prototype.spanWrap=function(a,b){a=String(a);var c=soy.$$bidiTextDir(a,!0),d=soyshim.$$bidiMarkAfterKnownDir_(this.dir_,c,a,!0);0<c&&0>=this.dir_?a='\x3cspan dir\x3d"ltr"\x3e'+a+"\x3c/span\x3e":0>c&&0<=this.dir_&&(a='\x3cspan dir\x3d"rtl"\x3e'+a+"\x3c/span\x3e");return a+d};
goog.i18n.BidiFormatter.prototype.startEdge=function(){return 0>this.dir_?"right":"left"};goog.i18n.BidiFormatter.prototype.unicodeWrap=function(a,b){a=String(a);var c=soy.$$bidiTextDir(a,!0),d=soyshim.$$bidiMarkAfterKnownDir_(this.dir_,c,a,!0);0<c&&0>=this.dir_?a="\u202a"+a+"\u202c":0>c&&0<=this.dir_&&(a="\u202b"+a+"\u202c");return a+d};
goog.string={newLineToBr:function(a,b){a=String(a);return goog.string.NEWLINE_TO_BR_RE_.test(a)?a.replace(/(\r\n|\r|\n)/g,b?"\x3cbr /\x3e":"\x3cbr\x3e"):a},urlEncode:encodeURIComponent,NEWLINE_TO_BR_RE_:/[\r\n]/};goog.string.StringBuffer=function(a,b){this.buffer_=goog.userAgent.jscript.HAS_JSCRIPT?[]:"";null!=a&&this.append.apply(this,arguments)};goog.string.StringBuffer.prototype.bufferLength_=0;
goog.string.StringBuffer.prototype.append=function(a,b,c){if(goog.userAgent.jscript.HAS_JSCRIPT)if(null==b)this.buffer_[this.bufferLength_++]=a;else{var d=this.buffer_;d.push.apply(d,arguments);this.bufferLength_=this.buffer_.length}else if(this.buffer_+=a,null!=b)for(d=1;d<arguments.length;d++)this.buffer_+=arguments[d];return this};goog.string.StringBuffer.prototype.clear=function(){goog.userAgent.jscript.HAS_JSCRIPT?this.bufferLength_=this.buffer_.length=0:this.buffer_=""};
goog.string.StringBuffer.prototype.toString=function(){if(goog.userAgent.jscript.HAS_JSCRIPT){var a=this.buffer_.join("");this.clear();a&&this.append(a);return a}return this.buffer_};goog.soy||(goog.soy={renderAsElement:function(a,b,c,d){return soyshim.$$renderWithWrapper_(a,b,d,!0,c)},renderAsFragment:function(a,b,c,d){return soyshim.$$renderWithWrapper_(a,b,d,!1,c)},renderElement:function(a,b,c,d){a.innerHTML=b(c,null,d)},data:{}});
goog.soy.data.SanitizedContentKind={HTML:{},JS:goog.DEBUG?{sanitizedContentJsStrChars:!0}:{},JS_STR_CHARS:{},URI:{},ATTRIBUTES:goog.DEBUG?{sanitizedContentHtmlAttribute:!0}:{},CSS:{},TEXT:{}};goog.soy.data.SanitizedContent=function(){throw Error("Do not instantiate directly");};goog.soy.data.SanitizedContent.prototype.toString=function(){return this.content};
var soy={esc:{}},soydata={VERY_UNSAFE:{}},soyshim={$$DEFAULT_TEMPLATE_DATA_:{},$$renderWithWrapper_:function(a,b,c,d,e){var f=c||document;c=f.createElement("div");c.innerHTML=a(b||soyshim.$$DEFAULT_TEMPLATE_DATA_,void 0,e);if(1==c.childNodes.length&&(a=c.firstChild,!d||1==a.nodeType))return a;if(d)return c;for(d=f.createDocumentFragment();c.firstChild;)d.appendChild(c.firstChild);return d},$$bidiMarkAfterKnownDir_:function(a,b,c,d){return 0<a&&(0>b||soyshim.$$bidiIsRtlExitText_(c,d))?"\u200e":0>a&&
(0<b||soyshim.$$bidiIsLtrExitText_(c,d))?"\u200f":""},$$bidiStripHtmlIfNecessary_:function(a,b){return b?a.replace(soyshim.$$BIDI_HTML_SKIP_RE_," "):a},$$BIDI_HTML_SKIP_RE_:/<[^>]*>|&[^;]+;/g,$$bidiLtrChars_:"A-Za-z\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02b8\u0300-\u0590\u0800-\u1fff\u2c00-\ufb1c\ufdfe-\ufe6f\ufefd-\uffff",$$bidiNeutralChars_:"\x00- !-@[-`{-\u00bf\u00d7\u00f7\u02b9-\u02ff\u2000-\u2bff",$$bidiRtlChars_:"\u0591-\u07ff\ufb1d-\ufdfd\ufe70-\ufefc"};
soyshim.$$bidiRtlDirCheckRe_=new RegExp("^[^"+soyshim.$$bidiLtrChars_+"]*["+soyshim.$$bidiRtlChars_+"]");soyshim.$$bidiNeutralDirCheckRe_=new RegExp("^["+soyshim.$$bidiNeutralChars_+"]*$|^http://");soyshim.$$bidiIsRtlText_=function(a){return soyshim.$$bidiRtlDirCheckRe_.test(a)};soyshim.$$bidiIsNeutralText_=function(a){return soyshim.$$bidiNeutralDirCheckRe_.test(a)};soyshim.$$bidiRtlDetectionThreshold_=.4;
soyshim.$$bidiRtlWordRatio_=function(a){var b=0,c=0;a=a.split(" ");for(var d=0;d<a.length;d++)soyshim.$$bidiIsRtlText_(a[d])?(b++,c++):soyshim.$$bidiIsNeutralText_(a[d])||c++;return 0==c?0:b/c};soyshim.$$bidiLtrExitDirCheckRe_=new RegExp("["+soyshim.$$bidiLtrChars_+"][^"+soyshim.$$bidiRtlChars_+"]*$");soyshim.$$bidiRtlExitDirCheckRe_=new RegExp("["+soyshim.$$bidiRtlChars_+"][^"+soyshim.$$bidiLtrChars_+"]*$");soyshim.$$bidiIsLtrExitText_=function(a,b){a=soyshim.$$bidiStripHtmlIfNecessary_(a,b);return soyshim.$$bidiLtrExitDirCheckRe_.test(a)};
soyshim.$$bidiIsRtlExitText_=function(a,b){a=soyshim.$$bidiStripHtmlIfNecessary_(a,b);return soyshim.$$bidiRtlExitDirCheckRe_.test(a)};soy.StringBuilder=goog.string.StringBuffer;soydata.SanitizedContentKind=goog.soy.data.SanitizedContentKind;soydata.SanitizedHtml=function(){goog.soy.data.SanitizedContent.call(this)};goog.inherits(soydata.SanitizedHtml,goog.soy.data.SanitizedContent);soydata.SanitizedHtml.prototype.contentKind=soydata.SanitizedContentKind.HTML;soydata.SanitizedJs=function(){goog.soy.data.SanitizedContent.call(this)};
goog.inherits(soydata.SanitizedJs,goog.soy.data.SanitizedContent);soydata.SanitizedJs.prototype.contentKind=soydata.SanitizedContentKind.JS;soydata.SanitizedJsStrChars=function(){goog.soy.data.SanitizedContent.call(this)};goog.inherits(soydata.SanitizedJsStrChars,goog.soy.data.SanitizedContent);soydata.SanitizedJsStrChars.prototype.contentKind=soydata.SanitizedContentKind.JS_STR_CHARS;soydata.SanitizedUri=function(){goog.soy.data.SanitizedContent.call(this)};goog.inherits(soydata.SanitizedUri,goog.soy.data.SanitizedContent);
soydata.SanitizedUri.prototype.contentKind=soydata.SanitizedContentKind.URI;soydata.SanitizedHtmlAttribute=function(){goog.soy.data.SanitizedContent.call(this)};goog.inherits(soydata.SanitizedHtmlAttribute,goog.soy.data.SanitizedContent);soydata.SanitizedHtmlAttribute.prototype.contentKind=soydata.SanitizedContentKind.ATTRIBUTES;soydata.SanitizedCss=function(){goog.soy.data.SanitizedContent.call(this)};goog.inherits(soydata.SanitizedCss,goog.soy.data.SanitizedContent);
soydata.SanitizedCss.prototype.contentKind=soydata.SanitizedContentKind.CSS;soydata.UnsanitizedText=function(a){this.content=String(a)};goog.inherits(soydata.UnsanitizedText,goog.soy.data.SanitizedContent);soydata.UnsanitizedText.prototype.contentKind=soydata.SanitizedContentKind.TEXT;soydata.$$makeSanitizedContentFactory_=function(a){function b(){}b.prototype=a.prototype;return function(a){var d=new b;d.content=String(a);return d}};soydata.markUnsanitizedText=function(a){return new soydata.UnsanitizedText(a)};
soydata.VERY_UNSAFE.ordainSanitizedHtml=soydata.$$makeSanitizedContentFactory_(soydata.SanitizedHtml);soydata.VERY_UNSAFE.ordainSanitizedJs=soydata.$$makeSanitizedContentFactory_(soydata.SanitizedJs);soydata.VERY_UNSAFE.ordainSanitizedJsStrChars=soydata.$$makeSanitizedContentFactory_(soydata.SanitizedJsStrChars);soydata.VERY_UNSAFE.ordainSanitizedUri=soydata.$$makeSanitizedContentFactory_(soydata.SanitizedUri);soydata.VERY_UNSAFE.ordainSanitizedHtmlAttribute=soydata.$$makeSanitizedContentFactory_(soydata.SanitizedHtmlAttribute);
soydata.VERY_UNSAFE.ordainSanitizedCss=soydata.$$makeSanitizedContentFactory_(soydata.SanitizedCss);soy.renderElement=goog.soy.renderElement;soy.renderAsFragment=function(a,b,c,d){return goog.soy.renderAsFragment(a,b,d,new goog.dom.DomHelper(c))};soy.renderAsElement=function(a,b,c,d){return goog.soy.renderAsElement(a,b,d,new goog.dom.DomHelper(c))};soy.$$augmentMap=function(a,b){function c(){}c.prototype=a;var d=new c,e;for(e in b)d[e]=b[e];return d};
soy.$$checkMapKey=function(a){if("string"!=typeof a)throw Error("Map literal's key expression must evaluate to string (encountered type \""+typeof a+'").');return a};soy.$$getMapKeys=function(a){var b=[],c;for(c in a)b.push(c);return b};soy.$$getDelTemplateId=function(a){return a};soy.$$DELEGATE_REGISTRY_PRIORITIES_={};soy.$$DELEGATE_REGISTRY_FUNCTIONS_={};
soy.$$registerDelegateFn=function(a,b,c,d){var e="key_"+a+":"+b,f=soy.$$DELEGATE_REGISTRY_PRIORITIES_[e];if(void 0===f||c>f)soy.$$DELEGATE_REGISTRY_PRIORITIES_[e]=c,soy.$$DELEGATE_REGISTRY_FUNCTIONS_[e]=d;else if(c==f)throw Error('Encountered two active delegates with the same priority ("'+a+":"+b+'").');};
soy.$$getDelegateFn=function(a,b,c){var d=soy.$$DELEGATE_REGISTRY_FUNCTIONS_["key_"+a+":"+b];d||""==b||(d=soy.$$DELEGATE_REGISTRY_FUNCTIONS_["key_"+a+":"]);if(d)return d;if(c)return soy.$$EMPTY_TEMPLATE_FN_;throw Error('Found no active impl for delegate call to "'+a+":"+b+'" (and not allowemptydefault\x3d"true").');};soy.$$EMPTY_TEMPLATE_FN_=function(a,b,c){return""};
soy.$$escapeHtml=function(a){return a&&a.contentKind&&a.contentKind===goog.soy.data.SanitizedContentKind.HTML?(goog.asserts.assert(a.constructor===soydata.SanitizedHtml),a.content):soy.esc.$$escapeHtmlHelper(a)};soy.$$cleanHtml=function(a){return a&&a.contentKind&&a.contentKind===goog.soy.data.SanitizedContentKind.HTML?(goog.asserts.assert(a.constructor===soydata.SanitizedHtml),a.content):soy.$$stripHtmlTags(a,soy.esc.$$SAFE_TAG_WHITELIST_)};
soy.$$escapeHtmlRcdata=function(a){return a&&a.contentKind&&a.contentKind===goog.soy.data.SanitizedContentKind.HTML?(goog.asserts.assert(a.constructor===soydata.SanitizedHtml),soy.esc.$$normalizeHtmlHelper(a.content)):soy.esc.$$escapeHtmlHelper(a)};soy.$$HTML5_VOID_ELEMENTS_=/^<(?:area|base|br|col|command|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)\b/;
soy.$$stripHtmlTags=function(a,b){if(!b)return String(a).replace(soy.esc.$$HTML_TAG_REGEX_,"").replace(soy.esc.$$LT_REGEX_,"\x26lt;");var c=String(a).replace(/\[/g,"\x26#91;"),d=[],c=c.replace(soy.esc.$$HTML_TAG_REGEX_,function(a,c){if(c&&(c=c.toLowerCase(),b.hasOwnProperty(c)&&b[c])){var e="/"===a.charAt(1)?"\x3c/":"\x3c",l=d.length;d[l]=e+c+"\x3e";return"["+l+"]"}return""}),c=soy.esc.$$normalizeHtmlHelper(c),e=soy.$$balanceTags_(d),c=c.replace(/\[(\d+)\]/g,function(a,b){return d[b]});return c+e};
soy.$$balanceTags_=function(a){for(var b=[],c=0,d=a.length;c<d;++c){var e=a[c];if("/"===e.charAt(1)){for(var f=b.length-1;0<=f&&b[f]!=e;)f--;0>f?a[c]="":(a[c]=b.slice(f).reverse().join(""),b.length=f)}else soy.$$HTML5_VOID_ELEMENTS_.test(e)||b.push("\x3c/"+e.substring(1))}return b.reverse().join("")};
soy.$$escapeHtmlAttribute=function(a){return a&&a.contentKind&&a.contentKind===goog.soy.data.SanitizedContentKind.HTML?(goog.asserts.assert(a.constructor===soydata.SanitizedHtml),soy.esc.$$normalizeHtmlHelper(soy.$$stripHtmlTags(a.content))):soy.esc.$$escapeHtmlHelper(a)};
soy.$$escapeHtmlAttributeNospace=function(a){return a&&a.contentKind&&a.contentKind===goog.soy.data.SanitizedContentKind.HTML?(goog.asserts.assert(a.constructor===soydata.SanitizedHtml),soy.esc.$$normalizeHtmlNospaceHelper(soy.$$stripHtmlTags(a.content))):soy.esc.$$escapeHtmlNospaceHelper(a)};
soy.$$filterHtmlAttributes=function(a){return a&&a.contentKind===goog.soy.data.SanitizedContentKind.ATTRIBUTES?(goog.asserts.assert(a.constructor===soydata.SanitizedHtmlAttribute),a.content.replace(/([^"'\s])$/,"$1 ")):soy.esc.$$filterHtmlAttributesHelper(a)};soy.$$filterHtmlElementName=function(a){return soy.esc.$$filterHtmlElementNameHelper(a)};soy.$$escapeJs=function(a){return soy.$$escapeJsString(a)};
soy.$$escapeJsString=function(a){return a&&a.contentKind===goog.soy.data.SanitizedContentKind.JS_STR_CHARS?(goog.asserts.assert(a.constructor===soydata.SanitizedJsStrChars),a.content):soy.esc.$$escapeJsStringHelper(a)};
soy.$$escapeJsValue=function(a){if(null==a)return" null ";if(a.contentKind==goog.soy.data.SanitizedContentKind.JS)return goog.asserts.assert(a.constructor===soydata.SanitizedJs),a.content;switch(typeof a){case "boolean":case "number":return" "+a+" ";default:return"'"+soy.esc.$$escapeJsStringHelper(String(a))+"'"}};soy.$$escapeJsRegex=function(a){return soy.esc.$$escapeJsRegexHelper(a)};soy.$$problematicUriMarks_=/['()]/g;soy.$$pctEncode_=function(a){return"%"+a.charCodeAt(0).toString(16)};
soy.$$escapeUri=function(a){if(a&&a.contentKind===goog.soy.data.SanitizedContentKind.URI)return goog.asserts.assert(a.constructor===soydata.SanitizedUri),soy.$$normalizeUri(a);a=soy.esc.$$escapeUriHelper(a);soy.$$problematicUriMarks_.lastIndex=0;return soy.$$problematicUriMarks_.test(a)?a.replace(soy.$$problematicUriMarks_,soy.$$pctEncode_):a};soy.$$normalizeUri=function(a){return soy.esc.$$normalizeUriHelper(a)};
soy.$$filterNormalizeUri=function(a){return a&&a.contentKind==goog.soy.data.SanitizedContentKind.URI?(goog.asserts.assert(a.constructor===soydata.SanitizedUri),soy.$$normalizeUri(a)):soy.esc.$$filterNormalizeUriHelper(a)};soy.$$escapeCssString=function(a){return soy.esc.$$escapeCssStringHelper(a)};soy.$$filterCssValue=function(a){return a&&a.contentKind===goog.soy.data.SanitizedContentKind.CSS?(goog.asserts.assert(a.constructor===soydata.SanitizedCss),a.content):null==a?"":soy.esc.$$filterCssValueHelper(a)};
soy.$$filterNoAutoescape=function(a){return a&&a.contentKind===goog.soy.data.SanitizedContentKind.TEXT?(goog.asserts.fail("Tainted SanitizedContentKind.TEXT for |noAutoescape: `%s`",[a.content]),"zSoyz"):String(a)};soy.$$changeNewlineToBr=function(a){return goog.string.newLineToBr(String(a),!1)};soy.$$insertWordBreaks=function(a,b){return goog.format.insertWordBreaks(String(a),b)};
soy.$$truncate=function(a,b,c){a=String(a);if(a.length<=b)return a;c&&(3<b?b-=3:c=!1);soy.$$isHighSurrogate_(a.charAt(b-1))&&soy.$$isLowSurrogate_(a.charAt(b))&&(b-=1);a=a.substring(0,b);c&&(a+="...");return a};soy.$$isHighSurrogate_=function(a){return 55296<=a&&56319>=a};soy.$$isLowSurrogate_=function(a){return 56320<=a&&57343>=a};soy.$$bidiFormatterCache_={};soy.$$getBidiFormatterInstance_=function(a){return soy.$$bidiFormatterCache_[a]||(soy.$$bidiFormatterCache_[a]=new goog.i18n.BidiFormatter(a))};
soy.$$bidiTextDir=function(a,b){return a?goog.i18n.bidi.detectRtlDirectionality(a,b)?-1:1:0};soy.$$bidiDirAttr=function(a,b,c){return soydata.VERY_UNSAFE.ordainSanitizedHtmlAttribute(soy.$$getBidiFormatterInstance_(a).dirAttr(b,c))};soy.$$bidiMarkAfter=function(a,b,c){return soy.$$getBidiFormatterInstance_(a).markAfter(b,c)};soy.$$bidiSpanWrap=function(a,b){return soy.$$getBidiFormatterInstance_(a).spanWrap(b+"",!0)};
soy.$$bidiUnicodeWrap=function(a,b){return soy.$$getBidiFormatterInstance_(a).unicodeWrap(b+"",!0)};soy.esc.$$escapeUriHelper=function(a){return goog.string.urlEncode(String(a))};
soy.esc.$$ESCAPE_MAP_FOR_ESCAPE_HTML__AND__NORMALIZE_HTML__AND__ESCAPE_HTML_NOSPACE__AND__NORMALIZE_HTML_NOSPACE_={"\x00":"\x26#0;",'"':"\x26quot;","\x26":"\x26amp;","'":"\x26#39;","\x3c":"\x26lt;","\x3e":"\x26gt;","\t":"\x26#9;","\n":"\x26#10;","\x0B":"\x26#11;","\f":"\x26#12;","\r":"\x26#13;"," ":"\x26#32;","-":"\x26#45;","/":"\x26#47;","\x3d":"\x26#61;","`":"\x26#96;","\u0085":"\x26#133;","\u00a0":"\x26#160;","\u2028":"\x26#8232;","\u2029":"\x26#8233;"};
soy.esc.$$REPLACER_FOR_ESCAPE_HTML__AND__NORMALIZE_HTML__AND__ESCAPE_HTML_NOSPACE__AND__NORMALIZE_HTML_NOSPACE_=function(a){return soy.esc.$$ESCAPE_MAP_FOR_ESCAPE_HTML__AND__NORMALIZE_HTML__AND__ESCAPE_HTML_NOSPACE__AND__NORMALIZE_HTML_NOSPACE_[a]};
soy.esc.$$ESCAPE_MAP_FOR_ESCAPE_JS_STRING__AND__ESCAPE_JS_REGEX_={"\x00":"\\x00","\b":"\\x08","\t":"\\t","\n":"\\n","\x0B":"\\x0b","\f":"\\f","\r":"\\r",'"':"\\x22","\x26":"\\x26","'":"\\x27","/":"\\/","\x3c":"\\x3c","\x3d":"\\x3d","\x3e":"\\x3e","\\":"\\\\","\u0085":"\\x85","\u2028":"\\u2028","\u2029":"\\u2029",$:"\\x24","(":"\\x28",")":"\\x29","*":"\\x2a","+":"\\x2b",",":"\\x2c","-":"\\x2d",".":"\\x2e",":":"\\x3a","?":"\\x3f","[":"\\x5b","]":"\\x5d","^":"\\x5e","{":"\\x7b","|":"\\x7c","}":"\\x7d"};
soy.esc.$$REPLACER_FOR_ESCAPE_JS_STRING__AND__ESCAPE_JS_REGEX_=function(a){return soy.esc.$$ESCAPE_MAP_FOR_ESCAPE_JS_STRING__AND__ESCAPE_JS_REGEX_[a]};
soy.esc.$$ESCAPE_MAP_FOR_ESCAPE_CSS_STRING_={"\x00":"\\0 ","\b":"\\8 ","\t":"\\9 ","\n":"\\a ","\x0B":"\\b ","\f":"\\c ","\r":"\\d ",'"':"\\22 ","\x26":"\\26 ","'":"\\27 ","(":"\\28 ",")":"\\29 ","*":"\\2a ","/":"\\2f ",":":"\\3a ",";":"\\3b ","\x3c":"\\3c ","\x3d":"\\3d ","\x3e":"\\3e ","@":"\\40 ","\\":"\\5c ","{":"\\7b ","}":"\\7d ","\u0085":"\\85 ","\u00a0":"\\a0 ","\u2028":"\\2028 ","\u2029":"\\2029 "};soy.esc.$$REPLACER_FOR_ESCAPE_CSS_STRING_=function(a){return soy.esc.$$ESCAPE_MAP_FOR_ESCAPE_CSS_STRING_[a]};
soy.esc.$$ESCAPE_MAP_FOR_NORMALIZE_URI__AND__FILTER_NORMALIZE_URI_={"\x00":"%00","\u0001":"%01","\u0002":"%02","\u0003":"%03","\u0004":"%04","\u0005":"%05","\u0006":"%06","\u0007":"%07","\b":"%08","\t":"%09","\n":"%0A","\x0B":"%0B","\f":"%0C","\r":"%0D","\u000e":"%0E","\u000f":"%0F","\u0010":"%10","\u0011":"%11","\u0012":"%12","\u0013":"%13","\u0014":"%14","\u0015":"%15","\u0016":"%16","\u0017":"%17","\u0018":"%18","\u0019":"%19","\u001a":"%1A","\u001b":"%1B","\u001c":"%1C","\u001d":"%1D","\u001e":"%1E",
"\u001f":"%1F"," ":"%20",'"':"%22","'":"%27","(":"%28",")":"%29","\x3c":"%3C","\x3e":"%3E","\\":"%5C","{":"%7B","}":"%7D","\u007f":"%7F","\u0085":"%C2%85","\u00a0":"%C2%A0","\u2028":"%E2%80%A8","\u2029":"%E2%80%A9","\uff01":"%EF%BC%81","\uff03":"%EF%BC%83","\uff04":"%EF%BC%84","\uff06":"%EF%BC%86","\uff07":"%EF%BC%87","\uff08":"%EF%BC%88","\uff09":"%EF%BC%89","\uff0a":"%EF%BC%8A","\uff0b":"%EF%BC%8B","\uff0c":"%EF%BC%8C","\uff0f":"%EF%BC%8F","\uff1a":"%EF%BC%9A","\uff1b":"%EF%BC%9B","\uff1d":"%EF%BC%9D",
"\uff1f":"%EF%BC%9F","\uff20":"%EF%BC%A0","\uff3b":"%EF%BC%BB","\uff3d":"%EF%BC%BD"};soy.esc.$$REPLACER_FOR_NORMALIZE_URI__AND__FILTER_NORMALIZE_URI_=function(a){return soy.esc.$$ESCAPE_MAP_FOR_NORMALIZE_URI__AND__FILTER_NORMALIZE_URI_[a]};soy.esc.$$MATCHER_FOR_ESCAPE_HTML_=/[\x00\x22\x26\x27\x3c\x3e]/g;soy.esc.$$MATCHER_FOR_NORMALIZE_HTML_=/[\x00\x22\x27\x3c\x3e]/g;soy.esc.$$MATCHER_FOR_ESCAPE_HTML_NOSPACE_=/[\x00\x09-\x0d \x22\x26\x27\x2d\/\x3c-\x3e`\x85\xa0\u2028\u2029]/g;
soy.esc.$$MATCHER_FOR_NORMALIZE_HTML_NOSPACE_=/[\x00\x09-\x0d \x22\x27\x2d\/\x3c-\x3e`\x85\xa0\u2028\u2029]/g;soy.esc.$$MATCHER_FOR_ESCAPE_JS_STRING_=/[\x00\x08-\x0d\x22\x26\x27\/\x3c-\x3e\\\x85\u2028\u2029]/g;soy.esc.$$MATCHER_FOR_ESCAPE_JS_REGEX_=/[\x00\x08-\x0d\x22\x24\x26-\/\x3a\x3c-\x3f\x5b-\x5e\x7b-\x7d\x85\u2028\u2029]/g;soy.esc.$$MATCHER_FOR_ESCAPE_CSS_STRING_=/[\x00\x08-\x0d\x22\x26-\x2a\/\x3a-\x3e@\\\x7b\x7d\x85\xa0\u2028\u2029]/g;
soy.esc.$$MATCHER_FOR_NORMALIZE_URI__AND__FILTER_NORMALIZE_URI_=/[\x00- \x22\x27-\x29\x3c\x3e\\\x7b\x7d\x7f\x85\xa0\u2028\u2029\uff01\uff03\uff04\uff06-\uff0c\uff0f\uff1a\uff1b\uff1d\uff1f\uff20\uff3b\uff3d]/g;soy.esc.$$FILTER_FOR_FILTER_CSS_VALUE_=/^(?!-*(?:expression|(?:moz-)?binding))(?:[.#]?-?(?:[_a-z0-9-]+)(?:-[_a-z0-9-]+)*-?|-?(?:[0-9]+(?:\.[0-9]*)?|\.[0-9]+)(?:[a-z]{1,2}|%)?|!important|)$/i;soy.esc.$$FILTER_FOR_FILTER_NORMALIZE_URI_=/^(?:(?:https?|mailto):|[^&:\/?#]*(?:[\/?#]|$))/i;
soy.esc.$$FILTER_FOR_FILTER_HTML_ATTRIBUTES_=/^(?!style|on|action|archive|background|cite|classid|codebase|data|dsync|href|longdesc|src|usemap)(?:[a-z0-9_$:-]*)$/i;soy.esc.$$FILTER_FOR_FILTER_HTML_ELEMENT_NAME_=/^(?!script|style|title|textarea|xmp|no)[a-z0-9_$:-]*$/i;soy.esc.$$escapeHtmlHelper=function(a){return String(a).replace(soy.esc.$$MATCHER_FOR_ESCAPE_HTML_,soy.esc.$$REPLACER_FOR_ESCAPE_HTML__AND__NORMALIZE_HTML__AND__ESCAPE_HTML_NOSPACE__AND__NORMALIZE_HTML_NOSPACE_)};
soy.esc.$$normalizeHtmlHelper=function(a){return String(a).replace(soy.esc.$$MATCHER_FOR_NORMALIZE_HTML_,soy.esc.$$REPLACER_FOR_ESCAPE_HTML__AND__NORMALIZE_HTML__AND__ESCAPE_HTML_NOSPACE__AND__NORMALIZE_HTML_NOSPACE_)};soy.esc.$$escapeHtmlNospaceHelper=function(a){return String(a).replace(soy.esc.$$MATCHER_FOR_ESCAPE_HTML_NOSPACE_,soy.esc.$$REPLACER_FOR_ESCAPE_HTML__AND__NORMALIZE_HTML__AND__ESCAPE_HTML_NOSPACE__AND__NORMALIZE_HTML_NOSPACE_)};
soy.esc.$$normalizeHtmlNospaceHelper=function(a){return String(a).replace(soy.esc.$$MATCHER_FOR_NORMALIZE_HTML_NOSPACE_,soy.esc.$$REPLACER_FOR_ESCAPE_HTML__AND__NORMALIZE_HTML__AND__ESCAPE_HTML_NOSPACE__AND__NORMALIZE_HTML_NOSPACE_)};soy.esc.$$escapeJsStringHelper=function(a){return String(a).replace(soy.esc.$$MATCHER_FOR_ESCAPE_JS_STRING_,soy.esc.$$REPLACER_FOR_ESCAPE_JS_STRING__AND__ESCAPE_JS_REGEX_)};
soy.esc.$$escapeJsRegexHelper=function(a){return String(a).replace(soy.esc.$$MATCHER_FOR_ESCAPE_JS_REGEX_,soy.esc.$$REPLACER_FOR_ESCAPE_JS_STRING__AND__ESCAPE_JS_REGEX_)};soy.esc.$$escapeCssStringHelper=function(a){return String(a).replace(soy.esc.$$MATCHER_FOR_ESCAPE_CSS_STRING_,soy.esc.$$REPLACER_FOR_ESCAPE_CSS_STRING_)};soy.esc.$$filterCssValueHelper=function(a){a=String(a);return soy.esc.$$FILTER_FOR_FILTER_CSS_VALUE_.test(a)?a:(goog.asserts.fail("Bad value `%s` for |filterCssValue",[a]),"zSoyz")};
soy.esc.$$normalizeUriHelper=function(a){return String(a).replace(soy.esc.$$MATCHER_FOR_NORMALIZE_URI__AND__FILTER_NORMALIZE_URI_,soy.esc.$$REPLACER_FOR_NORMALIZE_URI__AND__FILTER_NORMALIZE_URI_)};
soy.esc.$$filterNormalizeUriHelper=function(a){a=String(a);return soy.esc.$$FILTER_FOR_FILTER_NORMALIZE_URI_.test(a)?a.replace(soy.esc.$$MATCHER_FOR_NORMALIZE_URI__AND__FILTER_NORMALIZE_URI_,soy.esc.$$REPLACER_FOR_NORMALIZE_URI__AND__FILTER_NORMALIZE_URI_):(goog.asserts.fail("Bad value `%s` for |filterNormalizeUri",[a]),"#zSoyz")};
soy.esc.$$filterHtmlAttributesHelper=function(a){a=String(a);return soy.esc.$$FILTER_FOR_FILTER_HTML_ATTRIBUTES_.test(a)?a:(goog.asserts.fail("Bad value `%s` for |filterHtmlAttributes",[a]),"zSoyz")};soy.esc.$$filterHtmlElementNameHelper=function(a){a=String(a);return soy.esc.$$FILTER_FOR_FILTER_HTML_ELEMENT_NAME_.test(a)?a:(goog.asserts.fail("Bad value `%s` for |filterHtmlElementName",[a]),"zSoyz")};soy.esc.$$HTML_TAG_REGEX_=/<(?:!|\/?([a-zA-Z][a-zA-Z0-9:\-]*))(?:[^>'"]|"[^"]*"|'[^']*')*>/g;
soy.esc.$$LT_REGEX_=/</g;soy.esc.$$SAFE_TAG_WHITELIST_={b:1,br:1,em:1,i:1,s:1,sub:1,sup:1,u:1};(function(){function a(a,b,c){this.w=b||B.j;this.P=c||R;this.C=40;this.p=1;this.F=0;this.s=3;this.D=this.q=0;this.M=!1;this.B=this.t="";this.r="-";this.u="";this.A=1;this.I=3;this.G=this.J=!1;this.v=Q;if("number"==typeof a)switch(a){case 1:d(this,B.c);break;case 2:d(this,B.o);break;case 3:d(this,B.m);break;case 4:a=B.i;b=["0"];c=T[this.w][0]&7;if(0<c){b.push(".");for(var f=0;f<c;f++)b.push("0")}a=a.replace(/0.00/g,b.join(""));d(this,a);break;case 5:e(this,1);break;case 6:e(this,2);break;default:throw Error("Unsupported pattern type.");
}else d(this,a)}function b(a,b){if(b>a.s)throw Error("Min value must be less than max value");if(0<a.F&&0<b)throw Error("Can't combine significant digits and minimum fraction digits");a.q=b}function c(a,b){if(a.q>b)throw Error("Min value must be less than max value");a.s=b}function d(a,b){a.R=b.replace(/ /g,"\u00a0");var c=[0];a.t=m(a,b,c);for(var d=c[0],e=-1,f=0,g=0,h=0,l=-1,k=b.length,q=!0;c[0]<k&&q;c[0]++)switch(b.charAt(c[0])){case "#":0<g?h++:f++;0<=l&&0>e&&l++;break;case "0":if(0<h)throw Error('Unexpected "0" in pattern "'+
b+'"');g++;0<=l&&0>e&&l++;break;case ",":l=0;break;case ".":if(0<=e)throw Error('Multiple decimal separators in pattern "'+b+'"');e=f+g+h;break;case "E":if(a.G)throw Error('Multiple exponential symbols in pattern "'+b+'"');a.G=!0;a.D=0;for(c[0]+1<k&&"+"==b.charAt(c[0]+1)&&(c[0]++,a.M=!0);c[0]+1<k&&"0"==b.charAt(c[0]+1);)c[0]++,a.D++;if(1>f+g||1>a.D)throw Error('Malformed exponential pattern "'+b+'"');q=!1;break;default:c[0]--,q=!1}0==g&&0<f&&0<=e&&(g=e,0==g&&g++,h=f-g,f=g-1,g=1);if(0>e&&0<h||0<=e&&
(e<f||e>f+g)||0==l)throw Error('Malformed pattern "'+b+'"');h=f+g+h;a.s=0<=e?h-e:0;0<=e&&(a.q=f+g-e,0>a.q&&(a.q=0));a.p=(0<=e?e:h)-f;a.G&&(a.C=f+a.p,0==a.s&&0==a.p&&(a.p=1));a.I=Math.max(0,l);a.J=0==e||e==h;d=c[0]-d;a.B=m(a,b,c);c[0]<b.length&&b.charAt(c[0])==X?(c[0]++,a.r=m(a,b,c),c[0]+=d,a.u=m(a,b,c)):(a.r=a.t+a.r,a.u+=a.B)}function e(a,e){a.v=e;d(a,B.c);b(a,0);c(a,2);if(0<a.q)throw Error("Can't combine significant digits and minimum fraction digits");a.F=2}function f(a,b){var c=Math.pow(10,a.s),
d;if(0>=a.F)d=Math.round(b*c);else{d=b*c;var e=a.s;if(d){var f=a.F-s(d)-1;f<-e?(e=Math.pow(10,e),d=Math.round(d/e)*e):(e=Math.pow(10,f),d=Math.round(d*e)/e)}d=Math.floor(d)}e=d;isFinite(e)?(d=Math.floor(e/c),c=Math.floor(e-d*c)):(d=b,c=0);return{K:d,Q:c}}function g(a,b,c,d){var e=f(a,b);b=Math.pow(10,a.s);for(var g=e.K,h=e.Q,l=0<a.q||0<h,k="",e=g;1E20<e;)k="0"+k,e=Math.round(e/10);var k=e+k,m=B.d,q=B.f,e=B.b.charCodeAt(0),s=k.length;if(0<g||0<c){for(g=s;g<c;g++)d.push(String.fromCharCode(e));for(g=
0;g<s;g++)d.push(String.fromCharCode(e+1*k.charAt(g))),1<s-g&&0<a.I&&1==(s-g)%a.I&&d.push(q)}else l||d.push(String.fromCharCode(e));(a.J||l)&&d.push(m);c=""+(h+b);for(b=c.length;"0"==c.charAt(b-1)&&b>a.q+1;)b--;for(g=1;g<b;g++)d.push(String.fromCharCode(e+1*c.charAt(g)))}function h(a,b,c){c.push(B.e);0>b?(b=-b,c.push(B.k)):a.M&&c.push(B.n);b=""+b;for(var d=B.b,e=b.length;e<a.D;e++)c.push(d);c.push(b)}function l(a){a=a.charCodeAt(0);if(48<=a&&58>a)return a-48;var b=B.b.charCodeAt(0);return b<=a&&a<
b+10?a-b:-1}function m(a,b,c){for(var d="",e=!1,f=b.length;c[0]<f;c[0]++){var g=b.charAt(c[0]);if("'"==g)c[0]+1<f&&"'"==b.charAt(c[0]+1)?(c[0]++,d+="'"):e=!e;else if(e)d+=g;else switch(g){case "#":case "0":case ",":case ".":case X:return d;case "\u00a4":if(c[0]+1<f&&"\u00a4"==b.charAt(c[0]+1))c[0]++,d+=a.w;else switch(a.P){case R:d+=T[a.w][1];break;case 2:var g=a.w,h=T[g],d=d+(g==h[1]?g:g+" "+h[1]);break;case 1:d+=T[a.w][2]}break;case "%":if(1!=a.A)throw Error("Too many percent/permill");a.A=100;
d+=B.g;break;case "\u2030":if(1!=a.A)throw Error("Too many percent/permill");a.A=1E3;d+=B.h;break;default:d+=g}}return d}function q(a,b){var c=1==a.v?v.O:v.N;if(3>b)return U;b=Math.min(14,b);c=c[Math.pow(10,b)];return c?(c=c.other)&&"0"!=c?(c=/([^0]*)(0+)(.*)/.exec(c))?{prefix:c[1],L:c[3],H:b-(c[2].length-1)}:U:U:U}function s(a){for(var b=0;1<=(a/=10);)b++;return b}var u={O:{1E3:{other:"0K"},1E4:{other:"00K"},1E5:{other:"000K"},1E6:{other:"0M"},1E7:{other:"00M"},1E8:{other:"000M"},1E9:{other:"0B"},
1E10:{other:"00B"},1E11:{other:"000B"},1E12:{other:"0T"},1E13:{other:"00T"},1E14:{other:"000T"}},N:{1E3:{other:"0 thousand"},1E4:{other:"00 thousand"},1E5:{other:"000 thousand"},1E6:{other:"0 million"},1E7:{other:"00 million"},1E8:{other:"000 million"},1E9:{other:"0 billion"},1E10:{other:"00 billion"},1E11:{other:"000 billion"},1E12:{other:"0 trillion"},1E13:{other:"00 trillion"},1E14:{other:"000 trillion"}}},v=u,v=u,y={d:",",f:".",g:"%",b:"0",n:"+",k:"-",e:"E",h:"\u2030",a:"\u221e",l:"NaN",c:"#,##0.###",
o:"#E0",m:"#,##0\u00a0%",i:"#,##0.00\u00a0\u00a4",j:"EUR"},z={d:".",f:",",g:"%",b:"0",n:"+",k:"-",e:"E",h:"\u2030",a:"\u221e",l:"NaN",c:"#,##0.###",o:"#E0",m:"#,##0%",i:"\u00a4#,##0.00;(\u00a4#,##0.00)",j:"USD"},D={d:",",f:".",g:"%",b:"0",n:"+",k:"-",e:"E",h:"\u2030",a:"\u221e",l:"NaN",c:"#,##0.###",o:"#E0",m:"#,##0%",i:"#,##0.00\u00a0\u00a4",j:"EUR"},k={d:",",f:"\u00a0",g:"%",b:"0",n:"+",k:"-",e:"E",h:"\u2030",a:"\u221e",l:"NaN",c:"#,##0.###",o:"#E0",m:"#,##0\u00a0%",i:"#,##0.00\u00a0\u00a4;(#,##0.00\u00a0\u00a4)",
j:"EUR"},O={d:",",f:".",g:"%",b:"0",n:"+",k:"-",e:"E",h:"\u2030",a:"\u221e",l:"NaN",c:"#,##0.###",o:"#E0",m:"#,##0%",i:"\u00a4#,##0.00",j:"IDR"},E={d:",",f:".",g:"%",b:"0",n:"+",k:"-",e:"E",h:"\u2030",a:"\u221e",l:"NaN",c:"#,##0.###",o:"#E0",m:"#,##0%",i:"\u00a4\u00a0#,##0.00",j:"EUR"},G={d:".",f:",",g:"%",b:"0",n:"+",k:"-",e:"E",h:"\u2030",a:"\u221e",l:"NaN",c:"#,##0.###",o:"#E0",m:"#,##0%",i:"\u00a4#,##0.00",j:"JPY"},r={d:".",f:",",g:"%",b:"0",n:"+",k:"-",e:"E",h:"\u2030",a:"\u221e",l:"NaN",c:"#,##0.###",
o:"#E0",m:"#,##0%",i:"\u00a4#,##0.00;(\u00a4#,##0.00)",j:"KRW"},F={d:",",f:".",g:"%",b:"0",n:"+",k:"-",e:"E",h:"\u2030",a:"\u221e",l:"NaN",c:"#,##0.###",o:"#E0",m:"#,##0%",i:"\u00a4#,##0.00;(\u00a4#,##0.00)",j:"BRL"},P={d:",",f:"\u00a0",g:"%",b:"0",n:"+",k:"-",e:"E",h:"\u2030",a:"\u221e",l:"\u043d\u0435\u00a0\u0447\u0438\u0441\u043b\u043e",c:"#,##0.###",o:"#E0",m:"#,##0\u00a0%",i:"#,##0.00\u00a0\u00a4",j:"RUB"},K={d:".",f:",",g:"%",b:"0",n:"+",k:"-",e:"E",h:"\u2030",a:"\u221e",l:"NaN",c:"#,##0.###",
o:"#E0",m:"#,##0%",i:"\u00a4#,##0.00;(\u00a4#,##0.00)",j:"THB"},A={d:",",f:".",g:"%",b:"0",n:"+",k:"-",e:"E",h:"\u2030",a:"\u221e",l:"NaN",c:"#,##0.###",o:"#E0",m:"%#,##0",i:"#,##0.00\u00a0\u00a4;(#,##0.00\u00a0\u00a4)",j:"TRY"},B=z,B=z,T={AED:[2,"dh","\u062f.\u0625.","DH"],AUD:[2,"$","AU$"],BDT:[2,"\u09f3","Tk"],BRL:[2,"R$","R$"],CAD:[2,"$","C$"],CHF:[2,"CHF","CHF"],CLP:[0,"$","CL$"],CNY:[2,"\u00a5","RMB\u00a5"],COP:[0,"$","COL$"],CRC:[0,"\u20a1","CR\u20a1"],CZK:[2,"K\u010d","K\u010d"],DKK:[18,"kr",
"kr"],DOP:[2,"$","RD$"],EGP:[2,"\u00a3","LE"],EUR:[18,"\u20ac","\u20ac"],GBP:[2,"\u00a3","GB\u00a3"],HKD:[2,"$","HK$"],ILS:[2,"\u20aa","IL\u20aa"],INR:[2,"\u20b9","Rs"],ISK:[0,"kr","kr"],JMD:[2,"$","JA$"],JPY:[0,"\u00a5","JP\u00a5"],KRW:[0,"\u20a9","KR\u20a9"],LKR:[2,"Rs","SLRs"],MNT:[0,"\u20ae","MN\u20ae"],MXN:[2,"$","Mex$"],MYR:[2,"RM","RM"],NOK:[18,"kr","NOkr"],PAB:[2,"B/.","B/."],PEN:[2,"S/.","S/."],PHP:[2,"\u20b1","Php"],PKR:[0,"Rs","PKRs."],RUB:[42,"\u0440\u0443\u0431.","\u0440\u0443\u0431."],
SAR:[2,"Rial","Rial"],SEK:[2,"kr","kr"],SGD:[2,"$","S$"],THB:[2,"\u0e3f","THB"],TRY:[2,"TL","YTL"],TWD:[2,"NT$","NT$"],USD:[2,"$","US$"],UYU:[2,"$","UY$"],VND:[0,"\u20ab","VN\u20ab"],YER:[0,"Rial","Rial"],ZAR:[2,"R","ZAR"]},R=0,Q=0;a.prototype.parse=function(a,b){var c=b||[0];if(this.v!=Q)throw Error("Parsing of compact numbers is unimplemented");var d=NaN;a=a.replace(/ /g,"\u00a0");var e=a.indexOf(this.t,c[0])==c[0],f=a.indexOf(this.r,c[0])==c[0];e&&f&&(this.t.length>this.r.length?f=!1:this.t.length<
this.r.length&&(e=!1));e?c[0]+=this.t.length:f&&(c[0]+=this.r.length);if(a.indexOf(B.a,c[0])==c[0])c[0]+=B.a.length,d=Infinity;else{var d=a,g=!1,h=!1,k=!1,m=1,q=B.d,s=B.f,r=B.e;if(this.v!=Q)throw Error("Parsing of compact style numbers is not implemented");for(var u="";c[0]<d.length;c[0]++){var v=d.charAt(c[0]),y=l(v);if(0<=y&&9>=y)u+=y,k=!0;else if(v==q.charAt(0)){if(g||h)break;u+=".";g=!0}else if(v==s.charAt(0)&&("\u00a0"!=s.charAt(0)||c[0]+1<d.length&&0<=l(d.charAt(c[0]+1)))){if(g||h)break}else if(v==
r.charAt(0)){if(h)break;u+="E";h=!0}else if("+"==v||"-"==v)u+=v;else if(v==B.g.charAt(0)){if(1!=m)break;m=100;if(k){c[0]++;break}}else if(v==B.h.charAt(0)){if(1!=m)break;m=1E3;if(k){c[0]++;break}}else break}d=parseFloat(u)/m}if(e){if(a.indexOf(this.B,c[0])!=c[0])return NaN;c[0]+=this.B.length}else if(f){if(a.indexOf(this.u,c[0])!=c[0])return NaN;c[0]+=this.u.length}return f?-d:d};a.prototype.format=function(a){if(isNaN(a))return B.l;var b=[],c;c=a;if(this.v==Q)c=U;else{c=Math.abs(c);var d=q(this,
1>=c?0:s(c)).H;c=q(this,d+s(f(this,c/Math.pow(10,d)).K))}a/=Math.pow(10,c.H);b.push(c.prefix);d=0>a||0==a&&0>1/a;b.push(d?this.r:this.t);if(isFinite(a))if(a=a*(d?-1:1)*this.A,this.G)if(0==a)g(this,a,this.p,b),h(this,0,b);else{var e=Math.floor(Math.log(a)/Math.log(10));a/=Math.pow(10,e);var l=this.p;if(1<this.C&&this.C>this.p){for(;0!=e%this.C;)a*=10,e--;l=1}else 1>this.p?(e++,a/=10):(e-=this.p-1,a*=Math.pow(10,this.p-1));g(this,a,l,b);h(this,e,b)}else g(this,a,this.p,b);else b.push(B.a);b.push(d?
this.u:this.B);b.push(c.L);return b.join("")};var X=";",U={prefix:"",L:"",H:0};window.fourSq.i18n.goog={};(function(d){function e(a){switch(a){case "it":B=E;break;case "de":B=y;break;case "es":B=D;break;case "fr":B=k;break;case "ja":B=G;break;case "th":B=K;break;case "ko":B=r;break;case "ru":B=P;break;case "pt":B=F;break;case "id":B=O;break;case "tr":B=A;break;default:B=z}}d.formatCurrency=function(d,f,g){e(f);f=new a(4,"USD");"undefined"!=typeof g&&null!==g&&(b(f,0),c(f,g),b(f,g));return f.format(d)};
d.formatNumber=function(d,f,g){e(f);f=new a(1);"undefined"!=typeof g&&null!==g&&(b(f,0),c(f,g),b(f,g));return f.format(d)};d.parseNumber=function(b,c){e(c);return(new a(1)).parse(b)};d.formatPercent=function(d,f,g){e(f);f=new a(3);"undefined"!=typeof g&&null!==g&&(b(f,0),c(f,g),b(f,g));return f.format(d)}})(window.fourSq.i18n.goog)})();(function(a){a.fn.jTruncate=function(b){b=a.extend({length:300,minTrail:20,moreText:"more",lessText:"less",ellipsisText:"...",moreAni:"fast",lessAni:"fast"},b);return this.each(function(){var c=a(this),d=c.html();if(d.length>b.length+b.minTrail){var e=d.indexOf(" ",b.length);if(-1!=e){var e=d.indexOf(" ",b.length),f=d.substring(0,e),d=d.substring(e,d.length);c.html(f+'\x3cspan class\x3d"truncate_ellipsis"\x3e'+b.ellipsisText+'\x3c/span\x3e\x3cspan class\x3d"truncate_more"\x3e'+d+"\x3c/span\x3e");
c.find(".truncate_more").css("display","none");c.append('\x3cspan class\x3d"truncate_more_link link" style\x3d"margin-left: 5px;"\x3e'+b.moreText+"\x3c/span\x3e");var g=a(".truncate_more_link",c),h=a(".truncate_more",c).css("display","inline-block").hide(),l=a(".truncate_ellipsis",c);g.click(function(){g.text()==b.moreText?(h.slideDown(b.moreAni,function(){a(this).css("display","inline")}),g.text(b.lessText),l.css("display","none")):(h.slideUp(b.lessAni),g.text(b.moreText),l.css("display","inline"));
return!1})}}})}})(jQuery);(function(a){function b(a,b){return function(){b&&(a=b+"."+a);var c=Array.prototype.slice.call(arguments);c.unshift(a);window.mParticle.config.rq.push(c)}}window.mParticle=window.mParticle||{};window.mParticle.eCommerce={Cart:{}};window.mParticle.Identity={};window.mParticle.config=window.mParticle.config||{};window.mParticle.config.rq=[];window.mParticle.ready=function(a){window.mParticle.config.rq.push(a)};"endSession logError logEvent logForm logLink logPageView setSessionAttribute setAppName setAppVersion setOptOut setPosition startNewSession startTrackingLocation stopTrackingLocation".split(" ").forEach(function(a){window.mParticle[a]=
b(a)});["setCurrencyCode","logCheckout"].forEach(function(a){window.mParticle.eCommerce[a]=b(a,"eCommerce")});["login","logout","modify"].forEach(function(a){window.mParticle.Identity[a]=b(a,"Identity")});var c=document.createElement("script");c.type="text/javascript";c.async=!0;c.src=("https:"==document.location.protocol?"https://jssdkcdns":"http://jssdkcdn")+".mparticle.com/js/v2/"+a+"/mparticle.js";a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(c,a)})("838111077223164097503c48978188bc");
$.fn.tooltip=function(a){function b(b){if("undefined"!=typeof a)return a[b]}var c="focus"==b("event")?"focus":"hover";if("focus"==c||!fourSq.util.devices.isTouchIncludingIPad()||b("allowTouch")){2>$(".hoverTip").length&&$("body").append('\x3cdiv class\x3d"hoverTip hoverTipBottom"\x3e\x3cdiv class\x3d"hoverTipInner"\x3e\x3c/div\x3e\x3c/div\x3e');var d=$(".hoverTip:last");this.each(function(){var a=$(this),f="title";1==b("useAlt")&&(f="alt");var g="none";void 0!=b("tipWidth")&&(g=b("tipWidth"));if(!a.data("tooltipped")){a.data("tooltipped",
!0);a.data(f,a.attr(f)).attr(f,"");var h=function(){if(fourSq.isDefinedAndNotNull(a.data(f))&&""!=a.data(f)){b("html")?$(".hoverTipInner",d).html(a.data(f)):$(".hoverTipInner",d).text(a.data(f));var c=b("position")||"top";d.css("backgroundPosition","");switch(c){case "top":d.removeClass().addClass("hoverTip hoverTipBottom");var c=Math.ceil($(this).offset().left),h=$(this).width(),c=c+Math.ceil(h/2)-31+"px",h=Math.ceil($(this).offset().top),l=d.height()+15;d.css({top:h-l+"px",left:c,"max-width":g});
break;case "bottom":d.removeClass().addClass("hoverTip hoverTipTop");c=Math.ceil($(this).offset().left);h=$(this).width();c=c+Math.ceil(h/2)-31+"px";h=Math.ceil($(this).offset().top);l=$(this).height();d.css({top:h+l+15+"px",left:c,"max-width":g});break;case "topLeft":d.removeClass().addClass("hoverTip hoverTipBottom");c=Math.ceil($(this).offset().left);$(this).width();c+=10;h=Math.ceil($(this).offset().top);l=d.height()+15;d.css({top:h-l+"px",left:c,"max-width":g});break;case "right":d.removeClass().addClass("hoverTip hoverTipRight");
c=Math.ceil($(this).offset().left);c=c-d.width()-15+"px";h=Math.ceil($(this).offset().top);l=$(this).height()/2;d.css({top:h-l+"px",left:c,"max-width":g});break;case "left":d.removeClass().addClass("hoverTip hoverTipLeft"),c=Math.ceil($(this).offset().left),c=c+a.width()+5+"px",h=Math.ceil($(this).offset().top),l=d.height()/2-$(this).height()/2,d.css({top:h-l-4+"px",left:c,"max-width":g})}b("extraClass")&&d.addClass(b("extraClass"));$(d).show()}},l=function(){$(d).hide()};"hover"==c?a.hover(h,l):
"focus"==c&&(a.focus(h),a.blur(l),$(window).resize(function(){a.is(":focus")&&(l(),h())}))}})}};fourSq.i18n._cookieName="lang-pref";fourSq.i18n.langInfo_=function(a){if(fourSq.isDefinedAndNotNull(fourSq.config.i18n))return _.find(fourSq.config.i18n.langs,function(b){return b.lang==a})};fourSq.i18n.browserPref=function(){return window.navigator.language?window.navigator.language:window.navigator.userLanguage};fourSq.i18n.cookiePref=function(){if("undefined"!=typeof $.cookie)return $.cookie(fourSq.i18n._cookieName)};fourSq.i18n.userLocale=function(){if(fourSq.config&&fourSq.config.user)return fourSq.config.user.LOCALE};
fourSq.i18n.userLocaleCountry=function(){return(fourSq.i18n.userLocale()||"").split("_")[1]};fourSq.i18n.userLocaleLang=function(){return fourSq.i18n.userLocale()?fourSq.i18n.userLocale().split("_")[0]:void 0};fourSq.i18n.setLang=function(a){"undefined"!=typeof $.cookie&&($.cookie(fourSq.i18n._cookieName,a,{expires:365,path:"/",domain:"."+fourSq.i18n.baseDomain()}),fourSq.i18n.redirect())};fourSq.i18n.currentLang=function(){var a=fourSq.i18n.langInfo_(fourSq.i18n.languagePref());return a?a.name:"English"};
fourSq.i18n.languagePref=function(){var a=fourSq.i18n.browserPref();fourSq.i18n.cookiePref()?a=fourSq.i18n.cookiePref():fourSq.i18n.userLocaleLang()&&(a=fourSq.i18n.userLocaleLang());void 0==a&&(a="en");a=a.split("-")[0].toLowerCase();return fourSq.isDefinedAndNotNull(fourSq.i18n.langInfo_(a))?a:"en"};fourSq.i18n.baseDomain=function(){var a="www"==fourSq.location.hostname.split(".")[0];return"en"!=fourSq.i18n.currentDomain()||a?fourSq.location.hostname.split(".").slice(1).join("."):fourSq.location.hostname};
fourSq.i18n.currentDomain=function(){var a="en";_.each(fourSq.config.i18n.langs,function(b){try{b.host&&b.host==fourSq.location.hostname.split(".")[0]&&(a=b.host)}catch(c){}});return a};fourSq.i18n.preferredDomain=function(){var a=fourSq.i18n.langInfo_(fourSq.i18n.languagePref());return a&&a.host||"en"};
fourSq.i18n.redirect=function(){var a=fourSq.i18n.preferredDomain();a!=fourSq.i18n.currentDomain()&&(a="en"==a?fourSq.i18n.baseDomain():a+"."+fourSq.i18n.baseDomain(),fourSq.util.redirect(window.location.protocol+"//"+a+(window.location.port?":"+window.location.port:"")+window.location.pathname+window.location.search))};
fourSq.i18n.formatNumber=function(a,b,c,d){return fourSq.isUndefinedOrNull(a)||!isFinite(a)||isNaN(a)?d:"decimal"!==b&&b?"percent"===b?fourSq.i18n.goog.formatPercent(parseFloat(a),fourSq.i18n.languagePref(),c):"currency"===b?fourSq.i18n.goog.formatCurrency(parseFloat(a),fourSq.i18n.languagePref(),c):a.toString():fourSq.i18n.goog.formatNumber(parseFloat(a),fourSq.i18n.languagePref(),c)};fourSq.i18n.parseNumber=function(a){return fourSq.i18n.goog.parseNumber(a,fourSq.i18n.languagePref())};fourSq.isDefined=function(a){return"undefined"!=typeof a};fourSq.isNull=function(a){return null===a};fourSq.isDefinedAndNotNull=function(a){return fourSq.isDefined(a)&&!fourSq.isNull(a)};fourSq.isUndefinedOrNull=function(a){return void 0==a};fourSq.emptyFunction=function(){};fourSq.onPageReady=function(a){var b=!1,c,d=[],e=function(){b=!0;c=a();_.each(d,function(a){a(c)})};fourSq.util.devices.isMsie8()?$(e):e();return{onReady:function(a){b?a(c):d.push(a)}}};
fourSq.forEachKey=function(a,b,c){var d=_.keys(a);_.each(d,function(d){b.call(c,a[d],d,a)})};fourSq.bind=function(a,b){return _.bind.apply(this,arguments)};fourSq.curry=function(a,b,c,d){return _.bind.apply(this,arguments)};fourSq.abstractMethod=function(){throw Error("Unimplemented abstract method!");};fourSq.withoutPropagation=function(a,b){return function(c){c.stopPropagation();a.call(b,c)}};fourSq.withoutDefault=function(a,b){return function(c){c.preventDefault();a.call(b,c)}};
fourSq.withoutPropagationAndDefault=function(a,b){return function(c){fourSq.stopPropagationAndDefault(c);a.call(b,c)}};fourSq.stopPropagationAndDefault=function(a){a.stopPropagation();a.preventDefault()};fourSq.location=window.location;
fourSq.util.redirect=function(a){var b=a,c=a,d=window.top.location.pathname,e=/(^[^\.\:]+)(\:\/\/)(.*)$/.exec(b);fourSq.isUndefinedOrNull(e)?("?"===c.charAt(0)||"#"===c.charAt(0)?c=d+c:"/"!=c.charAt(0)&&(b=d.split("/").slice(1),b[b.length-1]=a,c="/"+b.join("/")),b=window.top.location.protocol+"//"+window.top.location.host+c,window.top.location.href=b):"http"==e[1]||"https"==e[1]?window.top.location.href=b:window.location=b};fourSq.util.isFoursquareUrl=function(a){return/http[s]?:\/\/([^\/]+\.)?foursquare.com/.test(a)};
fourSq.util.isRelativeUrl=function(a){return!/^(?:[a-z]+:)?\/\//i.test(a)};fourSq.util.isInternalReferrer=function(){return fourSq.util.isFoursquareUrl(window.document.referrer)};fourSq.util.isExternalReferrer=function(){return!fourSq.util.isInternalReferrer()};fourSq.util.escapeHtml=function(a){return soy.$$escapeHtml(a)};fourSq.util.stripHtml=function(a){return $("\x3cdiv\x3e"+a+"\x3c/div\x3e").text()};
fourSq.util.safeSubstring=function(a,b,c){return fourSq.isUndefinedOrNull(a)?"":fourSq.isUndefinedOrNull(c)?a.substring(b):b<=c&&0<=b&&c<=a.length?a.substring(b,c):""};fourSq.util.size=function(a){return fourSq.isDefinedAndNotNull(a.length)?a.length:_.size(a)};fourSq.util.trim=function(a){var b=String.prototype.trim;return fourSq.isUndefinedOrNull(a)?"":fourSq.isDefinedAndNotNull(b)?b.call(new String(a)):String(a).replace(RegExp("^\\s+|\\s+$","g"),"")};
fourSq.util.capitalize=function(a){return a.charAt(0).toUpperCase()+a.substring(1)};fourSq.util.capitalizeWords=function(a){return _.map(a.split(" "),function(a){return fourSq.util.capitalize(a)}).join(" ")};fourSq.util.padString=function(a,b,c,d){a+="";b=b||0;c=c||" ";if(b>a.length)switch(b-=a.length,d||"left"){case "right":return a+Array(b+1).join(c);case "both":return d=Math.floor(b/2),Array(b-d+1).join(c)+a+Array(d+1).join(c);default:return Array(b+1).join(c)+a}return a};
fourSq.util.appendParams=function(a,b){var c=a,d="\x26",e=_.isArray(b);switch(c.indexOf("?")){case -1:d="?";break;case c.length-1:d="?",c=c.substring(0,c.length-1)}_(b).each(function(a,g){e?2===a.length&&fourSq.isDefinedAndNotNull(b[0])&&fourSq.isDefinedAndNotNull(a[1])&&(c+=d+encodeURIComponent(a[0])+"\x3d"+encodeURIComponent(a[1])):fourSq.isDefinedAndNotNull(a)&&(c+=d+encodeURIComponent(g)+"\x3d"+encodeURIComponent(a));"\x26"!==d&&(d="\x26")},this);return c};
fourSq.util.parseParams=function(a){a=a||fourSq.location.href;var b={};a.replace(/[?&]+([^=&#]+)=([^&#]*)/gi,function(a,d,e){b[d]=decodeURIComponent(e.replace(/\+/g,"%20"))});return b};fourSq.util.setHash=function(a,b){var c="#"+fourSq.util.appendParams("",a).substring(1);b?window.location.replace("#"+fourSq.util.appendParams("",a).substring(1)):window.location.hash=c};fourSq.util.parseHashParams=function(){return fourSq.util.parseParams("?"+window.location.hash.substring(1))};
fourSq.util.dateParts=function(a,b){if(b&&!_.isNumber(b))throw Error("Invalid non-number input for timezone offset");var c=a?1E3*a:+new Date,d=b?6E4*b+6E4*(new Date(c)).getTimezoneOffset():0,c=new Date(c+d);return{minute:c.getMinutes(),hour:c.getHours(),day:c.getDay(),month:c.getMonth(),date:c.getDate(),year:c.getFullYear()}};fourSq.util.clickOpensInNewTab=function(a,b){var c=2===a.which,d=a.ctrlKey||a.metaKey,e="a"===b.get(0).tagName.toLowerCase()&&b.attr("target");return c||d||e};
fourSq.util.timeDiff=function(a,b){var c=b||new Date;"number"==typeof c&&(c=new Date(1E3*c));"number"==typeof a&&(a=new Date(1E3*a));var d=function(b){b=(c-a)/b;return 0<b?Math.floor(b):Math.ceil(b)};return{seconds:d(1E3),minutes:d(6E4),hours:d(36E5),days:d(864E5),weeks:d(6048E5)}};fourSq.util.fullDate=function(a,b){var c=fourSq.util.dateParts(a,b);return"January February March April May June July August September October November December".split(" ")[c.month]+" "+c.day+", "+c.year};
fourSq.util.smartDate=function(a,b){"number"==typeof a&&(a=new Date(1E3*a));var c=b||new Date;"number"==typeof c&&(c=new Date(1E3*c));var d=fourSq.util.timeDiff(a,c),e="January February March April May June July August September October November December".split(" ");return 10>d.seconds?"just now":4>d.weeks?(c=0,e="",1>d.minutes?(c=d.seconds,e="second"):1>d.hours?(c=d.minutes,e="minute"):1>d.days?(c=d.hours,e="hour"):1>d.weeks?(c=d.days,e="day"):(c=d.weeks,e="week"),1==c?c+" "+e+" ago":c+" "+e+"s ago"):
c.getFullYear()==a.getFullYear()?e[a.getMonth()]+" "+a.getDate():e[a.getMonth()]+" "+a.getDate()+", "+a.getFullYear()};
fourSq.util.detectCreditCardType=function(a){var b=a.replace(/[^\d]/g,"");return _([{cardType:"visa",typeString:"Visa",regex:/^4/},{cardType:"mastercard",typeString:"MasterCard",regex:/^5[1-5]/},{cardType:"amex",typeString:"American Express",regex:/^3[47]/},{cardType:"dinersclub",typeString:"Diners Club",regex:/^3(?:0[0-5]|[68])/},{cardType:"discover",typeString:"Discover",regex:/^6(?:011|5)/},{cardType:"jcb",typeString:"JCB",regex:/^(?:2131|1800|35)/},{cardType:"default",typeString:"",regex:/^/}]).find(function(a){return a.regex.test(b)})};
fourSq.util.caretTo=function(a,b){if(a.createTextRange){var c=a.createTextRange();c.move("character",b);c.select()}else null!=a.selectionStart&&(a.focus(),a.setSelectionRange(b,b))};fourSq.util.getCaretPos=function(a){if("selectionStart"in a)return a.selectionStart;a.focus();var b=document.selection.createRange();if(fourSq.isDefinedAndNotNull(b.text)){var b=b.text,c=b.length;b.moveStart("character",-a.value.length);return b.text.length-c}return-1};
fourSq.util.soyFlattenHelper=function(a,b){return _.filter(a,function(a){b&&(a=a[b]);return!fourSq.isUndefinedOrNull(a)})};fourSq.util.toSlug=function(a){a=a.toLowerCase().split(/\s+/).join("-");return encodeURIComponent(a)};fourSq.util.approximatelyEqual=function(a,b,c){var d=a>b;return(d?a:b)-(d?b:a)<=c};fourSq.util.KeyConstants={ENTER:13,ESCAPE:27,BACKSPACE:8,DELETE:46,LEFT:37,UP:38,RIGHT:39,DOWN:40};
fourSq.util.KeyConstants.isVisible=function(a){return a===fourSq.util.KeyConstants.BACKSPACE||a===fourSq.util.KeyConstants.DELETE||47<a&&91>a||95<a&&112>a||185<a};fourSq.util.constructAppsflyerIdForInviteLanding=function(a){return"inviteVia-"+a};fourSq.util.devices={IPHONE:"iphone",IPAD:"ipad",ANDROID:"android",WINDOWS_PHONE:"windowsphone",TIZEN:"tizen",BLACKBERRY:"blackberry",BLACKBERRY10:"bb10",FIREFOX:"firefox",MSIE:"msie",SAFARI:"safari",OPERA:"opera",CHROME:"chrome",OTHER:"other"};
fourSq.util.devices.detect=function(){var a=fourSq.util.devices.getUserAgent().toLowerCase();return-1!==a.indexOf("iemobile")||-1!==a.indexOf("windows phone")?fourSq.util.devices.WINDOWS_PHONE:-1!==a.indexOf("iphone")||-1!==a.indexOf("ipod")?fourSq.util.devices.IPHONE:-1!==a.indexOf("ipad")?fourSq.util.devices.IPAD:-1!==a.indexOf("android")?fourSq.util.devices.ANDROID:-1!==a.indexOf("blackberry")?fourSq.util.devices.BLACKBERRY:-1!==a.indexOf("bb10")?fourSq.util.devices.BLACKBERRY10:-1!==a.indexOf("opera")?
fourSq.util.devices.OPERA:-1!==a.indexOf("msie")?fourSq.util.devices.MSIE:-1!==a.indexOf("firefox")?fourSq.util.devices.FIREFOX:-1!==a.indexOf("chrome")?fourSq.util.devices.CHROME:-1!==a.indexOf("tizen")?fourSq.util.devices.TIZEN:-1!==a.indexOf("safari")?fourSq.util.devices.SAFARI:fourSq.util.devices.OTHER};fourSq.util.devices.getUserAgent=function(){return navigator.userAgent};
fourSq.util.devices.getVersion=function(a){if(a||fourSq.isUndefinedOrNull(fourSq.util.devices.calculatedVersion_))a=fourSq.util.devices.getUserAgent().toLowerCase().match(/(opera|ie|firefox|chrome|version)[\s\/:]([\w\d\.]+)?.*?(safari|version[\s\/:]([\w\d\.]+)|$)/)||[null,"unknown",0],fourSq.util.devices.calculatedVersion_=parseFloat("opera"==a[1]&&a[4]?a[4]:a[2]);return fourSq.util.devices.calculatedVersion_};fourSq.util.devices.isTouchscreen="ontouchstart"in window;
fourSq.util.devices.isIPhone=function(){return fourSq.util.devices.detect()==fourSq.util.devices.IPHONE};fourSq.util.devices.isIPod=function(){return-1!==fourSq.util.devices.getUserAgent().toLowerCase().indexOf("ipod")};fourSq.util.devices.isIPhoneEmbedded=function(){return fourSq.util.devices.detect()==fourSq.util.devices.IPHONE&&-1==fourSq.util.devices.getUserAgent().toLowerCase().indexOf("safari")};fourSq.util.devices.isIPad=function(){return fourSq.util.devices.detect()==fourSq.util.devices.IPAD};
fourSq.util.devices.isAndroid=function(){return fourSq.util.devices.detect()==fourSq.util.devices.ANDROID};fourSq.util.devices.isBlackberry=function(){return fourSq.util.devices.detect()==fourSq.util.devices.BLACKBERRY||fourSq.util.devices.detect()==fourSq.util.devices.BLACKBERRY10};fourSq.util.devices.isFirefox=function(){return fourSq.util.devices.detect()==fourSq.util.devices.FIREFOX};fourSq.util.devices.isMsie=function(){return fourSq.util.devices.detect()==fourSq.util.devices.MSIE};
fourSq.util.devices.isMsie8=function(){return fourSq.util.devices.detect()===fourSq.util.devices.MSIE&&0===$.browser.version.indexOf("8.")};fourSq.util.devices.isWindowsPhone=function(){return fourSq.util.devices.detect()==fourSq.util.devices.WINDOWS_PHONE};fourSq.util.devices.isTizen=function(){return fourSq.util.devices.detect()==fourSq.util.devices.TIZEN};fourSq.util.devices.isSafari=function(){return fourSq.util.devices.detect()==fourSq.util.devices.SAFARI};
fourSq.util.devices.isOpera=function(){return fourSq.util.devices.detect()==fourSq.util.devices.OPERA};fourSq.util.devices.isChrome=function(){return fourSq.util.devices.detect()==fourSq.util.devices.CHROME};fourSq.util.devices.isChromeIos=function(){return 0<=fourSq.util.devices.getUserAgent().toLowerCase().indexOf("crios")};fourSq.util.devices.isIos9=function(){return fourSq.util.devices.isIPhone()&&0<=fourSq.util.devices.getUserAgent().toLowerCase().indexOf("iphone os 9_")};
fourSq.util.devices.isChromeAndroidGte25=function(){var a=fourSq.util.devices.getUserAgent().toLowerCase().match(/android.+chrome\/(\d+)/);return!!a&&25<=a[1]};fourSq.util.devices.isAndroidLte2p3pX=function(){var a=fourSq.util.devices.getUserAgent().toLowerCase().match(/android (\d+)\.(\d+)\./);return!!a&&2>=a[1]&&3>=a[2]};fourSq.util.devices.isTwitterEmbed=function(){return-1!==fourSq.util.devices.getUserAgent().toLowerCase().indexOf("twitter")};
fourSq.util.devices.isTouch=function(){return fourSq.util.devices.isIPhone()||fourSq.util.devices.isAndroid()};fourSq.util.devices.isTouchIncludingIPad=function(){return fourSq.util.devices.isTouch()||fourSq.util.devices.isIPad()};fourSq.exportSymbol=function(a,b){var c=a.split("."),d=c.splice(c.length-1),e=window;_.each(c,function(a){e=e[a]=e[a]||{}});e[d]=b};fourSq.util.randomInt=function(a,b){return Math.floor(Math.random()*(b-a+1))+a};
fourSq.util.randomBoolean=function(){return!!fourSq.util.randomInt(0,1)};fourSq.isString=function(a){return"[object String]"===window.toString.call(a)};fourSq.collection.CollectionHelper={mergeQueues:function(a,b,c,d){a=_.reject(a,function(a){return 0==a.length});if(0==a.length)return[];if(1==a.length){b=0<c?Math.min(c,a[0].length):a[0].length;b=a[0].length-b;var e=a[0].slice(b);d&&(a[0].length=b);return e}for(var e=[],f=0,g=0;g<a.length;g++)e.push(a[g].length-1),f+=a[g].length;c=0<c?Math.min(c,f):f;c=f-c;g=[];for(f-=1;f>=c;f--){for(var h=-1,l=null,m=0;m<a.length;m++)if(0<=e[m]){var q=b(a[m][e[m]]);0>h?(h=m,l=q):q>l&&(h=m,l=q)}g[f-c]=a[h][e[h]];
d&&a[h].pop();e[h]--}return g},toMap:function(a,b){return _.foldl(a,function(a,d){a[b(d)]=d;return a},{})},toSet:function(a){return _.foldl(a,function(a,c){a[c]=!0;return a},{})},keys:function(a){var b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push(c);return b},partition:function(a,b){var c=[],d=[];_(a).each(function(a){b(a)?c.push(a):d.push(a)});return[c,d]}};fourSq.inherits=function(a,b){function c(){}c.prototype=b.prototype;a.__super__=b.prototype;a.prototype=new c;a.prototype.constructor=a};fourSq.classExtend=function(a,b,c){var d=function(){a.apply(this,arguments)};_.extend(d,a);fourSq.inherits(d,a);fourSq.isDefinedAndNotNull(b)&&_.extend(d.prototype,b);fourSq.isDefinedAndNotNull(c)&&_.extend(d,c);return d};fourSq.classInit=function(){function a(){return b.apply(this,c)}var b=this,c=arguments;a.prototype=b.prototype;return new a};
fourSq.Class=function(){this.initialize.apply(this,arguments)};fourSq.Class.prototype.initialize=function(){};fourSq.Class.extend=function(a,b){var c=fourSq.classExtend(this,a,b);c.extend=fourSq.Class.extend;return c};fourSq.EventTarget=function(a,b){};
fourSq.EventTarget=fourSq.Class.extend({on:function(a,b,c){return this.on_(a,b,c)},bind:function(){return this.on.apply(this,arguments)},onOnce:function(a,b,c){return this.on_(a,b,c,!0)},on_:function(a,b,c,d){if(fourSq.isUndefinedOrNull(b))throw Error("Event callback not specified.");b={callback:b,context:c,once:d};this.listeners_=this.listeners_||{};(this.listeners_[a]=this.listeners_[a]||[]).push(b);return this},off:function(a,b,c){if(fourSq.isUndefinedOrNull(a))return delete this.listeners_,this;
if(!this.listeners_)return this;this.listeners_[a]=_.filter(this.listeners_[a],function(a){return!!(b&&a.callback!==b||c&&a.context!==c)});return this},trigger:function(a,b){var c;if(fourSq.isUndefinedOrNull(this.listeners_)||fourSq.isUndefinedOrNull(c=this.listeners_[a]))return this;var d=Array.prototype.slice.call(arguments,1),e=this,f;_.each(c,function(a){a.callback.apply(a.context||e,d);a.once&&(f=f||[],f.push(a))});f&&_.each(f,function(b){e.off(a,b.callback,b.context)});return this}});fourSq.retina.COOKIE_NAME="PixelDensity";fourSq.retina.init=function(){if(fourSq.isDefinedAndNotNull(window.matchMedia)){var a=window.matchMedia("(-webkit-min-device-pixel-ratio: 1.5),(min-resolution: 1.5dppx)");a&&a.addListener(fourSq.retina.updateCookie)}fourSq.isUndefinedOrNull($.cookie(fourSq.retina.COOKIE_NAME))?fourSq.retina.setCookie():fourSq.retina.updateCookie()};fourSq.retina.setCookie=function(){$.cookie(fourSq.retina.COOKIE_NAME,(window.devicePixelRatio||1).toString(),{expires:365,path:"/"})};
fourSq.retina.updateCookie=function(){var a=$.cookie(fourSq.retina.COOKIE_NAME);parseInt(a,10)!==(window.devicePixelRatio||1)&&fourSq.retina.setCookie()};fourSq.retina.isRetina=function(){return 1<window.devicePixelRatio};fourSq.util.Geo={getCurrentPosition:function(a,b,c){navigator.geolocation&&navigator.geolocation.watchPosition?(c=_.extend({maximumAge:3E5,timeout:1E4},c),navigator.geolocation.getCurrentPosition(a,b,c)):b()}};fourSq.util.History=function(a,b){};
fourSq.util.History=fourSq.EventTarget.extend({initialize:function(){this.isSupported_=fourSq.util.History.isSupported();this.statePushed_=!1;if(this.isSupported_)$(window).on("popstate",fourSq.bind(this.onPopState_,this))},onPopState_:function(a){this.statePushed_&&this.trigger(fourSq.util.History.Events.CHANGE,a.originalEvent.state)},onChange:function(a){this.on(fourSq.util.History.Events.CHANGE,a)},back:function(){this.isSupported_&&window.history.back()},replace:function(a,b){if(this.isSupported_){this.statePushed_=
!0;var c=b||{};fourSq.isDefinedAndNotNull(a)&&""!==a?window.history.replaceState(c,"state",a):window.history.replaceState(c,"state")}},push:function(a,b){if(this.isSupported_){this.statePushed_=!0;var c;window.history.pushState(b||c,"state",a)}}},{isSupported:function(){return!(!window.history||!window.history.pushState)},Events:{CHANGE:"change"}});fourSq.util.Hours={MaxOpenHour:36,normalizeTime:function(a,b){var c=a.replace(/[^0-9]/g,""),d=0,e="00";return c&&4>=c.length&&0<c.length?(3<c.length?(d=parseInt(c.slice(0,2),10),e=c.slice(2,4)):2<c.length?(d=parseInt(c.slice(0,1),10),e=c.slice(1,3)):0<c.length&&(d=parseInt(c,10),e="00"),b&&12>d?d+=12:b||12!==d||(d=0),fourSq.util.Hours.padTimes(d+e)):null},denormalizeTime:function(a){var b=parseInt(a.slice(0,2),10);a=a.slice(2,4);return{time:(0===b?12:12<b?b-12:b)+a,pm:12<=b}},padTimes:function(a){a=
a.replace(/([^0-9]|^)([0-9]{3})([^0-9]|$)/g,"$10$2$3");a=a.replace(/([^0-9]|^)([0-9]{3})([^0-9]|$)/g,"$10$2$3");a=a.replace(/([^0-9]|^)([0-9]{2})([^0-9]|$)/g,"$1$200$3");a=a.replace(/([^0-9]|^)([0-9]{2})([^0-9]|$)/g,"$1$200$3");a=a.replace(/([^0-9]|^)([0-9])([^0-9]|$)/g,"$10$200$3");return a=a.replace(/([^0-9]|^)([0-9])([^0-9]|$)/g,"$10$200$3")},toTimeframe:function(a,b,c){b>=c&&c<=60*(fourSq.util.Hours.MaxOpenHour-24)&&(c+=1440);b=fourSq.util.Hours.formatMinutes(b);c=fourSq.util.Hours.formatMinutes(c);
return{days:a,open:[{start:b,end:c}]}},minutesAfterMidnight:function(a,b,c){a=parseInt(a,10);b=void 0!==b?parseInt(b,10):0;12===a&&c&&(a-=12);c&&"p"===c[0]&&(a+=12);return 60*a+b},stringifyWeeklyTimeframe:function(a){var b=[];_.each(a.days,function(c){_.each(a.open,function(a){b.push(c+","+a.start+","+a.end)})});return b.join(";")},stringifyTimeframes:function(a){var b=[],c=[];_.each(a,function(a){if(void 0===a.startMonth)b.push(fourSq.util.Hours.stringifyWeeklyTimeframe(a));else{var e=[];_.each(a.timeframes,
function(a){e.push(fourSq.util.Hours.stringifyWeeklyTimeframe(a))});var f=e.join(";"),f=f+("/"+a.startMonth+","+a.startDay+","+a.endMonth+","+a.endDay);c.push(f)}});a=[];b.length&&a.push(b.join(";"));return a.concat(c)},toParams:function(a){return fourSq.util.Hours.stringifyTimeframes(a.timeframes)},toParam:function(a){return fourSq.util.Hours.toParams(a).join(":")},fromParam:function(a){var b=parseInt(a.slice(-2),10),c=parseInt(a.slice(-4,-2),10);"+"===a.slice(0,1)&&(c+=24);return 60*c+b},formatMinutes:function(a){var b=
Math.floor(a/60);a%=60;var c=b%24!==b,b=b%24;b%10===b&&(b="0"+b);c&&(b="+"+b);a%10===a&&(a="0"+a);return b+""+a}};fourSq.util.HoursParser={parse:function(a){a=a.toLowerCase();a=a.replace(/\n/g," ; ");a=a.replace(/(12|12:00)?midnight/g,"1200a");a=a.replace(/(12|12:00)?noon/g,"1200p");a=a.replace(/(open)?\s*24\s*hours?/g,"1200a-1200a");a=a.replace(/(7|seven)\s*days(\s*a)?\s*(week|wk)/g,"monday-sunday");a=a.replace(/\s*(and|,|\+|&)\s*/g,"\x26");a=a.replace(/\s*(-|to|thru|through|till?|'till?|until)\s*/g,"-");a=a.replace(/\s*a\.?m?\.?/g,"a");a=a.replace(/\s*p\.?m?\.?/g,"p");a=a.replace(/([0-9])(h|:|\.)([0-9])([^0-9]|$)/g,
"$1$2$30$4");a=a.replace(/([0-9]+)\s*[^0-9]\s*([0-9]{2})([^0-9]+?)([0-9]+)\s*[^0-9]\s*([0-9]{2})/g,"$1$2$3$4$5");a=a.replace(/([0-9]+)\s*(h|:|\.)\s*([0-9]{2})/g,"$1$3");a=fourSq.util.Hours.padTimes(a);var b=_.map(_.range(1,8),function(b){b=fourSq.util.HoursParser.dayAliases(b);var c=_.head(b);b=_.tail(b);b.reverse();c&&b&&_.each(b,function(b){a=a.replace(new RegExp(b,"g"),c)});return c}),c="("+b.join("|")+")",d="([0-9]{4}\\s*[ap]?[^0-9]+[0-9]{4}\\s*[ap]?).*?"+c,e=a.search(new RegExp(c+".*?([0-9]{4}\\s*[ap]?[^0-9]+[0-9]{4}\\s*[ap]?)")),
d=a.search(new RegExp(d)),f=-1!==e&&e<=d||-1===d;if(f)for(e=new RegExp(c+"\x26"+c+"[^\x26]*?([0-9]{4}\\s*[ap]?[^0-9]+[0-9]{4}\\s*[ap]?)","g"),d=0;d<b.length;++d)a=a.replace(e,"$1 $3; $2 $3; ");else for(e=new RegExp("([0-9]{4}\\s*[ap]?[^0-9]+[0-9]{4}\\s*[ap]?)([^0-9]*?)"+c+"\x26"+c,"g"),d=0;d<b.length;++d)a=a.replace(e,"$1 $2 $3; $1 $4; ");c=c+"[^a-z0-9]*"+c+"?";e=new RegExp(f?c+".*?([0-9][0-9])([0-9][0-9])\\s*([ap])?[^0-9]*([0-9][0-9])([0-9][0-9])\\s*([ap])?":"([0-9][0-9])([0-9][0-9])\\s*([ap])?[^0-9]*([0-9][0-9])([0-9][0-9])\\s*([ap])?.*?"+
c,"g");c=[];do(d=e.exec(a))&&c.push(d);while(d);0>=c.length&&(e=/(@!ZfW#)?(@!ZfW#)?([0-9][0-9])([0-9][0-9])\s*([ap])?[^0-9]*([0-9][0-9])([0-9][0-9])\s*([ap])?/.exec(a))&&c.push(e);c=_.map(c,function(a){fourSq.debug.debug("match",a);var c=f?a[1]:a[7],d=f?a[2]:a[8],e=void 0!==c?b.indexOf(c):0,q=null;void 0!==d?void 0===c?e=b.indexOf(d):q=b.indexOf(d):void 0===c&&(q=7);null===q&&(q=e);q<e&&(q+=7);c=7===q-e?_.range(e,q):_.range(e,q+1);c=_.map(c,function(a){return a%7+1});d=f?a[6]:a[4];e=f?a[7]:a[5];q=
f?a[8]:a[6];a=fourSq.util.Hours.minutesAfterMidnight(f?a[3]:a[1],f?a[4]:a[2],f?a[5]:a[3]);d=fourSq.util.Hours.minutesAfterMidnight(d,e,q);return fourSq.util.Hours.toTimeframe(c,a,d)});return c.length?{timeframes:c}:null},dayAliases:function(a){var b="";switch(a){case 1:b=templates.fourSq.venue.hours.mondayAliases();break;case 2:b=templates.fourSq.venue.hours.tuesdayAliases();break;case 3:b=templates.fourSq.venue.hours.wednesdayAliases();break;case 4:b=templates.fourSq.venue.hours.thursdayAliases();
break;case 5:b=templates.fourSq.venue.hours.fridayAliases();break;case 6:b=templates.fourSq.venue.hours.saturdayAliases();break;case 7:b=templates.fourSq.venue.hours.sundayAliases();break;default:return[]}a=_.map(b.split(","),$.trim);return _.sortBy(a,function(a){return a.length})},miscAliases:function(a){a=[templates.fourSq.venue.hours.weekendAliases(),templates.fourSq.venue.hours.weekdayAliases()];return _.map(a,function(a){a=_.map(a.split(","),$.trim);return _.sortBy(a,function(a){return a.length})})}};fourSq.util.Storage=function(a){};
fourSq.util.Storage=fourSq.Class.extend({initialize:function(a){fourSq.util.Storage.__super__.initialize.apply(this,arguments);this.storage_=a},enabled:function(){if(fourSq.isUndefinedOrNull(this.isEnabled_))if(fourSq.isDefinedAndNotNull(this.storage_)){try{this.storage_.setItem("test","t")}catch(a){this.isEnabled_=!1}this.storage_.removeItem("test");this.isEnabled_=!0}else this.isEnabled_=!1;return this.isEnabled_},exists:function(a){return fourSq.isDefinedAndNotNull(this.get(a))},maybeExpire_:function(a){var b=
a+fourSq.util.Storage.EXPIRY_SUFFIX;if(this.enabled()){var c=this.storage_.getItem(b),d=parseInt(c,10);fourSq.isDefinedAndNotNull(c)&&_.isNumber(d)&&d<+new Date&&(this.remove(a),this.remove(b))}},compact:function(){if(this.enabled())for(var a in this.storage_)this.maybeExpire_(a)},get:function(a){return this.enabled()?(this.maybeExpire_(a),this.storage_.getItem(a)):null},getWithDefault:function(a,b){var c=this.get(a);return fourSq.isDefinedAndNotNull(c)?c:b},set:function(a,b,c){return b&&this.enabled()?
(this.storage_.setItem(a,b),_.isNumber(c)&&this.storage_.setItem(a+fourSq.util.Storage.EXPIRY_SUFFIX,""+(+new Date+1E3*c)),!0):!1},remove:function(a){this.enabled()&&this.storage_.removeItem(a)},setBoolean:function(a,b,c){return this.set(a,b?fourSq.util.Storage.TRUE:fourSq.util.Storage.FALSE,c)},getBoolean:function(a){switch(this.get(a)){case fourSq.util.Storage.TRUE:return!0;case fourSq.util.Storage.FALSE:return!1;default:return null}},getBooleanWithDefault:function(a,b){var c=this.getBoolean(a);
return fourSq.isDefinedAndNotNull(c)?c:b},setNumber:function(a,b,c){return this.set(a,""+b,c)},getNumber:function(a){var b=this.get(a);a=parseInt(this.get(a),10);return fourSq.isUndefinedOrNull(b)||isNaN(a)?null:a},getNumberWithDefault:function(a,b){var c=this.getNumber(a);return fourSq.isDefinedAndNotNull(c)?c:b},setArray:function(a,b,c){try{var d=JSON.stringify(b);return this.set(a,d,c)}catch(e){return!1}},getArray:function(a){try{var b=this.get(a);if(fourSq.isDefinedAndNotNull(b)){var c=JSON.parse(b);
if(!(c instanceof Array))throw Error();return c}return null}catch(d){return null}},getArrayWithDefault:function(a,b){var c=this.getArray(a);return fourSq.isDefinedAndNotNull(c)?c:b},setObject:function(a,b,c){try{var d=JSON.stringify(b);return this.set(a,d,c)}catch(e){return!1}},getObject:function(a){try{var b=this.get(a);if(fourSq.isDefinedAndNotNull(b)){var c=JSON.parse(b);if(!(c instanceof Object))throw Error();return c}return null}catch(d){return null}},getObjectWithDefault:function(a,b){var c=
this.getObject(a);return fourSq.isDefinedAndNotNull(c)?c:b}},{TRUE:"t",FALSE:"f",EXPIRY_SUFFIX:"_EXPIRY"});var tempLocalStorage=null,tempSessionStorage=null;try{tempLocalStorage=window.localStorage,tempSessionStorage=window.sessionStorage}catch(e$$42){}fourSq.util.localStorage=new fourSq.util.Storage(tempLocalStorage);fourSq.util.sessionStorage=new fourSq.util.Storage(tempSessionStorage);fourSq.ui.View=function(a){this.options=a||{};fourSq.isDefinedAndNotNull(this.options.model)&&(this.model=this.options.model);fourSq.isDefinedAndNotNull(this.options.collection)&&(this.collection=this.options.collection);this.$el=this.el=null;fourSq.isDefinedAndNotNull(this.options.el)?this.setEl_($(this.options.el)):(this.tagName=fourSq.isDefinedAndNotNull(this.options.tagName)?this.options.tagName:"div",this.setEl_(document.createElement(this.tagName)));fourSq.isDefinedAndNotNull(this.options.id)&&
(this.id=this.options.id,this.$el.attr("id",this.id));fourSq.isDefinedAndNotNull(this.options.className)&&(this.className=this.options.className,this.$el.addClass(this.className));this.initialize.apply(this,arguments)};fourSq.inherits(fourSq.ui.View,fourSq.EventTarget);fourSq.ui.View.prototype.setEl_=function(a){fourSq.isDefinedAndNotNull(a)&&(this.$el=$(a).first(),this.el=this.$el.get(0))};fourSq.ui.View.prototype.canDecorate=function(){throw Error("Unimplemented");};
fourSq.ui.View.prototype.decorate=function(){return this};fourSq.ui.View.prototype.render=function(){return this};fourSq.ui.View.extend=fourSq.Class.extend;fourSq.ui.dialog.Dialog=function(a){};
fourSq.ui.dialog.Dialog=fourSq.ui.View.extend({className_:"",overlayClass_:"",contentClassName:"",title_:"",hasCloseButton_:!0,isModal_:!0,opacity_:.2,isRendered_:!1,positionTop_:!0,closeOnEscape_:!0,initialize:function(a){a.contentText&&(this.contentText_=a.contentText);0==a.isModal&&(this.isModal_=!1);0==a.hasCloseButton&&(this.hasCloseButton_=!1);a.opacity&&(this.opacity_=a.opacity);a.title&&(this.title_=a.title);a.contentElement&&(this.contentElement_=a.contentElement);0==a.positionTop&&(this.positionTop_=
!1);0==a.closeOnEscape&&(this.closeOnEscape_=!1);this.className_=a.className||"";this.overlayClass_=a.overlayClass||"";this.contentClassName_=a.contentClassName||"";if(this.contentText_&&this.contentElement_)throw Error("Specify either 'contentElement' or 'contentText', not both");return this},close:function(){this.overlayDiv_.remove();this.$el.detach();$(document.body).removeClass("withVisibleModal");var a=$("#wrapper");if(a.length){var b=parseInt($("body").css("margin-top"),10),a=-parseInt(a.css("top"),
10)+b;$(window).scrollTop(a)}fourSq.ui.dialog.Dialog.NUMBER_OF_DIALOGS--;this.trigger(fourSq.ui.dialog.Dialog.Events.DIALOG_CLOSE);this.isRendered_=!1},decorate:function(){this.overlayDiv_.css("opacity",this.opacity_);this.isModal_&&this.overlayDiv_.click(fourSq.bind(this.close,this));this.$el.show();this.setPosition_();$(window).resize(fourSq.bind(this.setPosition_,this));this.closeOnEscape_&&$(window).keydown(fourSq.bind(function(a){27==a.keyCode&&this.close()},this));$(".close",this.el).click(fourSq.bind(this.close,
this))},getContentContainer:function(){return this.container_},getPageScroll_:function(){var a,b;window.pageYOffset?(b=window.pageYOffset,a=window.pageXOffset):document.documentElement&&document.documentElement.scrollTop?(b=document.documentElement.scrollTop,a=document.documentElement.scrollLeft):document.body&&(b=document.body.scrollTop,a=document.body.scrollLeft);return{xScrollOffset:a,yScrollOffset:b}},getPageHeight_:function(){var a;window.innerHeight?a=window.innerHeight:document.documentElement&&
document.documentElement.clientHeight?a=document.documentElement.clientHeight:document.body&&(a=document.body.clientHeight);return a},hide:function(){this.overlayDiv_.hide();this.$el.hide();return this},isShown:function(){return this.$el.is(":visible")},render_:function(){this.setEl_($(templates.fourSq.ui.dialog.modalDialog({hasCloseButton:this.hasCloseButton_,title:this.title_,className:this.className_,overlayClass:this.overlayClass_,contentClassName:this.contentClassName_})));this.overlayDiv_=$(templates.fourSq.ui.dialog.modalOverlay({overlayClass:this.overlayClass_}));
$("body").prepend(this.$el);$("body").prepend(this.overlayDiv_);this.container_=this.$el.find(".contents");this.loadingImageContainer_=this.$el.find(".modalLoadingContainer");this.renderContent();this.popupContainer_=this.$el.find(".popup");this.isRendered_=!0;this.decorate();return this},renderContent:function(){this.contentElement_?this.container_.empty().append(this.contentElement_):this.contentText_?this.container_.text(this.contentText_):this.setLoading(!0)},setLoading:function(a){!0===a?(this.loadingImageContainer_.addClass("loading"),
this.container_.hide()):(this.loadingImageContainer_.removeClass("loading"),this.container_.show())},show:function(){var a=$(window).scrollTop(),b=parseInt($("body").css("margin-top"),10),a=a-b;$("#wrapper").css("top",-a);$(document.body).addClass("withVisibleModal");this.getPageScroll_();this.isRendered_?(this.overlayDiv_.show(),this.$el.show()):this.render_();fourSq.ui.dialog.Dialog.NUMBER_OF_DIALOGS++;this.trigger(fourSq.ui.dialog.Dialog.Events.DIALOG_OPEN);return this},setPosition_:function(){this.positionTop_&&
this.$el.css("top",this.getPageHeight_()/10+this.getPageScroll_().yScrollOffset);this.$el.css("left",$(window).width()/2-this.popupContainer_.outerWidth()/2+this.getPageScroll_().xScrollOffset)}},{Events:{DIALOG_OPEN:"dopen",DIALOG_CLOSE:"dclose"},NUMBER_OF_DIALOGS:0});fourSq.ui.util.addOnOutsideClickCallback=function(a,b,c){fourSq.ui.util.addOnOutsideClickCallbackInit_||(fourSq.ui.util.addOnOutsideClickCallbackInit_=!0,fourSq.ui.util.addOnOutsideClickCallbacksSeq_=1,fourSq.ui.util.addOnOutsideClickCallbacks_={},$(document.body).click(function(a){for(var b={},c=$(a.target);1==c.length&&"body"!=c[0].nodeName.toLowerCase;c=c.parent())c.attr("outside-click-id")&&(b[c.attr("outside-click-id")]=1);_.each(_.values(fourSq.ui.util.addOnOutsideClickCallbacks_),function(c){b[c.id]||
c.cb(a)})}));var d=fourSq.ui.util.addOnOutsideClickCallbacksSeq_++;a.attr("outside-click-id",d);if(c){a=0;for(var e;e=c[a];a++)e.attr("outside-click-id",d)}fourSq.ui.util.addOnOutsideClickCallbacks_[d]={id:d,cb:b}};
fourSq.ui.util.pin=function(a,b,c){var d=b||$(document),e=b||$(window),f=$(a);a=c||f.attr("id");if(!fourSq.isUndefinedOrNull(f.offset())){f.elTop=f.offset().top;var g=$('\x3cdiv id\x3d"'+a+'Placeholder"\x3e\x3c/div\x3e');g.css({display:"none"});f.after(g);d.scroll(function(){var a=e.scrollTop()+fourSq.chrome.getHeaderHeight(),a=0>=f.elTop-a;f.toggleClass("pinned",a);g.toggle(a);a&&g.css({height:f.outerHeight(!0),width:f.outerWidth(!0)})})}};
fourSq.ui.util.disableElasticScroll=function(a){$(document.body).css({padding:0,margin:0,width:"100%",height:"100%",overflow:"hidden"});a.css({position:"absolute",top:0,right:0,bottom:0,left:0,overflow:"auto"})};fourSq.ui.util.ScrollPolicy=function(a){};
fourSq.ui.util.ScrollPolicy=fourSq.EventTarget.extend({initialize:function(a){this.bottomPixelThreshold_=a.bottomthreshold||360;this.topPixelThreshold_=a.topthreshold||160;this.enableTopTracking_=a.enabletoptracking||!1;this.lastScrollTop_=0;this.document=a.container||$(document);this.window=a.container||$(window);this.documentHeightFn=function(){return a.container?a.container[0].scrollHeight:$(document).height()};this.window.scroll(_.throttle(fourSq.bind(this.onWindowScroll_,this),100))},onWindowScroll_:function(){var a=
this.documentHeightFn(),b=this.window.height(),c=this.document.scrollTop(),d=this.lastScrollTop_<c;this.lastScrollTop_=c;d&&a-(c+b)<this.bottomPixelThreshold_?this.trigger(fourSq.ui.util.ScrollPolicy.Events.NEAR_BOTTOM):this.enableTopTracking_&&!d&&c<this.topPixelThreshold_&&this.trigger(fourSq.ui.util.ScrollPolicy.Events.NEAR_TOP)}},{Events:{NEAR_BOTTOM:"nearbottom",NEAR_TOP:"neartop"}});
fourSq.ui.util.verticalAlign=function(a){var b=a.height(),c=a.parent().height(),b=Math.ceil((c-b)/2);a.css("margin-top",b)};fourSq.ui.selectable=function(a){a.click(function(a){$(a.target).addClass("selected").siblings().removeClass("selected")})};fourSq.ui.copy=function(a,b){a.keyup(function(){b.text(a.val())})};
fourSq.ui.util.oldScrollTo=function(a,b){var c=b&&b.buffer;b=_.defaults(b||{},{isUp:!1,forceScroll:!1,buffer:10,animate:!1,animationSpeed:"fast"});var d=a.offset().top,e=a.outerHeight(!1),f=d+e,g=fourSq.chrome.getHeaderHeight(),h=$(window).scrollTop()+g,l=$(window).height(),m=l-g;!b.forceScroll&&d>=h&&h+m>=f||(h=m-e,!c&&h<2*b.buffer&&(b.buffer=0>h?0:h/2),c=b.isUp||e>m?d-g-b.buffer:f-l+b.buffer,b.animate?$("html, body").animate({scrollTop:c},b.animationSpeed||"fast"):$(window).scrollTop(c))};
fourSq.ui.util.scrollTo=function(a,b){var c=_.isNumber(b.buffer)?b.buffer:10,d=$("#pagesBar").height()||0,c=fourSq.chrome.getHeaderHeight()+d+c,c=a.offset().top-c;b.animate?$("html, body").animate({scrollTop:c}):$(window).scrollTop(c)};fourSq.ui.util.scrollContainerTo=function(a,b){var c=b.outerHeight(),d=b.scrollTop(),e=a.outerHeight(),f=a.position().top,e=f+e,g=null;0>=f?g=d+f:e>=c&&(g=d+e-c);null!==g&&b.scrollTop(g)};
fourSq.ui.util.cssAnimation=function(a){a.el.removeClass(a.toRemove||"").addClass(a.toAdd);window.setTimeout(function(){a.el.removeClass(a.toAdd);a.el.addClass(a.toAddLater||"")},500)};fourSq.ui.util.isShowingEllipsis=function(a){a=a.get(0);return a.offsetWidth<a.scrollWidth};fourSq.ui.util.tooltipIfEllipsisShown=function(a,b){fourSq.ui.util.isShowingEllipsis(a)?a.tooltip(b||{}):b&&!b.useAlt&&a.attr("title","")};
fourSq.ui.util.addEllipsis=function(a){var b=parseInt(a.css("max-height"),10);a.css("max-height",b+1);for(var c=a.text().split("");parseInt(a.height(),10)>b&&0<c.length;)if(c=c.slice(0,-1),!/[^\w,.?!]$/.test(c[c.length-1])){var d=templates.fourSq.ui.ellipsis.textWithEllipsis({text:c.join("")});a.empty().append(d)}a.css("max-height",b)};fourSq.net.Util={stripParamsFromQuery:function(a){var b=new fourSq.net.QueryString({query:window.location.search});a=b.strip(a);b=b.toDisplayString();b=window.location.href.replace(/\?[^\#]*/,b?"?"+b:"");(new fourSq.util.History).replace(b);return a},stripParamsFromHash:function(a){var b=new fourSq.net.QueryString({query:window.location.hash.substring(1)});a=b.strip(a);b=b.toDisplayString();b=window.location.href.replace(/(\#.*)?$/,b?"#"+b:"");(new fourSq.util.History).replace(b);return a}};
fourSq.api.models.companion.log.Action={build:function(a,b,c,d,e,f){return{name:a,details:c,sessionId:d,ids:e,timestamp:String(f),initiator:b}}};fourSq.api.models.companion.log.ActionName={build:function(a,b,c,d,e,f){return{action:a,view:b,section:c,component:d,componentIndex:e,element:f}}};fourSq.api.models.companion.log.Oids={build:function(a){return{venueId:a.venueId,checkinId:a.checkinId,tipId:a.tipId,photoId:a.photoId,targetUserId:a.targetUserId,viewId:a.viewId,requestId:a.requestId,referralId:a.referralId,tipListId:a.tipListId,eventId:a.eventId,updateId:a.updateId,specialId:a.specialId,promotionId:a.promotionId,woeId:a.woeId,tasteId:a.tasteId,notificationId:a.notificationId,suggestionId:a.suggestionId,perkId:a.perkId}},merge:function(a,b){return fourSq.api.models.companion.log.Oids.build(_.extend({},
a,b))},copy:function(a,b){var c=fourSq.api.models.companion.log.Oids.build(b);return fourSq.api.models.companion.log.Oids.merge(a,c)}};fourSq.api.models.companion.entity.RichUserEntity=function(a,b,c){};
fourSq.api.models.companion.entity.RichUserEntity=fourSq.Class.extend({initialize:function(a,b,c){this.start=a;this.end=b;this.user=c},toEntity:function(){return{indices:[this.start,this.end],type:"user",id:this.user.id}},getUser:function(){return this.user},getStart:function(){return this.start},getEnd:function(){return this.end},getEncodedString:function(){return this.start+","+this.end+","+this.user.id+";"},shift:function(a){this.start+=a;this.end+=a;return this},intersects:function(a){return a>=
this.start&&a<this.end},intersectsRange:function(a,b){return a<this.start&&b>=this.end||this.intersects(a)||this.intersects(b-1)}},{getEntityStart:function(a){return a.getStart()}});fourSq.api.models.companion.entity.TextWithMentions=function(a){};
fourSq.api.models.companion.entity.TextWithMentions=fourSq.EventTarget.extend({initialize:function(a){this.text=fourSq.isDefinedAndNotNull(a)?a:"";this.entities=[]},getText:function(){return this.text},updateText:function(a){for(var b=this.text,c=this.entities,d=Math.min(a.length,b.length),e=0;e<d;e++)if(a[e]!=b[e]){for(var f=1;f<=d+1;f++)if(f>d||a[a.length-f]!=b[b.length-f]){var g=a.length-b.length,h;h=f>d?Math.max(-g,0):Math.max(e,b.length-f+1);c=_(c).chain().filter(function(a){return h==a.getStart()||
!a.intersectsRange(e,h)}).map(function(a){return a.getStart()>=h?a.shift(g):a}).value();break}break}a.length<b.length&&(c=_(c).filter(function(b){return b.getEnd()<=a.length}));this.text=a;this.entities=c;this.trigger(fourSq.api.models.companion.entity.TextWithMentions.Events.updated)},addEntity:function(a,b,c){this.addEntityObject(new fourSq.api.models.companion.entity.RichUserEntity(a,b,c))},addEntityObject:function(a){var b=_(this.entities),c=b.sortedIndex(a,fourSq.api.models.companion.entity.RichUserEntity.getEntityStart);
this.entities=b.first(c).concat([a]).concat(b.rest(c));this.trigger(fourSq.api.models.companion.entity.TextWithMentions.Events.updated)},toTextWithEntities:function(){var a=_(this.entities).map(function(a){return a.toEntity()});return{text:this.text,entities:a}},toApiString:function(){return _(this.entities).map(function(a){return a.getEncodedString()}).join("")},toHtml:function(){var a;0<this.entities.length?(a=fourSq.util.escapeHtml(this.text.substring(0,this.entities[0].getStart())),_(this.entities).each(function(b,
c,d){a+='\x3cspan class\x3d"mention"\x3e'+fourSq.util.escapeHtml(this.text.substring(b.getStart(),b.getEnd()))+"\x3c/span\x3e";a=c==d.length-1?a+fourSq.util.escapeHtml(this.text.substring(b.getEnd())):a+fourSq.util.escapeHtml(this.text.substring(b.getEnd(),d[c+1].getStart()))},this)):a=fourSq.util.escapeHtml(this.text);return a},rangeIsSafe:function(a,b){return!_(this.entities).any(function(c){return c.intersectsRange(a,b)},this)}},{Events:{updated:"updated"}});fourSq.api.models.companion.checkin.CheckinUtil={shouldShowCommentForm:function(a){if(fourSq.isUndefinedOrNull(a))return!1;var b=fourSq.isDefinedAndNotNull(a.photos)&&0<a.photos.count,c=fourSq.isDefinedAndNotNull(a.comments)&&0<a.comments.count;a=fourSq.isDefinedAndNotNull(a.shout);return b||c||a},lat:function(a){return fourSq.isUndefinedOrNull(a)?void 0:fourSq.isDefinedAndNotNull(a.venue)&&fourSq.isDefinedAndNotNull(a.venue.location.lat)?a.venue.location.lat:fourSq.isDefinedAndNotNull(a.location)?
a.location.lat:void 0},lng:function(a){return fourSq.isUndefinedOrNull(a)?void 0:fourSq.isDefinedAndNotNull(a.venue)&&fourSq.isDefinedAndNotNull(a.venue.location.lng)?a.venue.location.lng:fourSq.isDefinedAndNotNull(a.location)?a.location.lng:void 0}};fourSq.api.models.companion.category.CategoryUtil={withAllChildren:function(a){var b=_(a.categories).chain().map(fourSq.api.models.companion.category.CategoryUtil.withAllChildren).flatten().value();b.unshift(a);return b}};fourSq.api.models.companion.category.IconUtil={thumbnail:function(a,b){return a.prefix+(b?"32":"bg_32")+a.suffix},mapThumbnail:function(a){return a.mapPrefix+a.suffix}};fourSq.api.models.companion.explore.ExploreUtil={extractRecommendations:function(a){var b=_(a.groups).chain().filter(function(a){return"recommended"===a.name}).map(function(a){return a.items||[]}).flatten().value();return _.filter(b.concat(a.group&&a.group.results||[]),function(a){return"venue"===a.displayType})||[]},extractPivots:function(a){var b=["headerAndPanels","escapeHatchTapTarget","slimSingleTapTarget","lists"],c=_(a.groups).chain().filter(function(a){return"recommended"===a.name}).map(function(a){return a.items||
[]}).flatten().value(),d=[];_.each(c.concat(a.group&&a.group.results||[]),function(a,c){_.contains(b,a.displayType)&&(a.index=c,d.push(a))});return d},extractVenues:function(a){a=fourSq.api.models.companion.explore.ExploreUtil.extractRecommendations(a);return _.map(a,function(a){return a.venue})},extractPromotedVenues:function(a){return _.filter(a,function(a){return!!a.promoted})}};fourSq.api.models.companion.geo.GeoEncumbranceMode={PREFER_FREE:"preferFree",REQUIRE_FREE:"requireFree"};fourSq.api.models.companion.geo.GeocodeResponseUtil={bestInterpretation:function(a){return a.items[0]},isEU:function(a){return _.contains(fourSq.api.models.companion.geo.GeocodeResponseUtil.EUROPE_COUNTRY_CODES,a&&a.toUpperCase())},isUS:function(a){return!!a&&"US"===a.toUpperCase()},EUROPE_COUNTRY_CODES:"BE BG HR CZ DK DE EE IE GR ES FR IT CY LV LT LU HU MT NL AT PL PT RO SI SK FI SE GB".split(" ")};
fourSq.api.models.companion.geo.LatLngUtil={precision:function(a,b){var c=Math.pow(10,b),d=Math.round(a.lat*c)/c,c=Math.round(a.lng*c)/c;return fourSq.api.models.companion.geo.LatLngUtil.latLng(d,c)},latLng:function(a,b){return{lat:a,lng:b}},equals:function(a,b,c){return fourSq.isUndefinedOrNull(a)&&fourSq.isUndefinedOrNull(b)||fourSq.isDefinedAndNotNull(a)&&fourSq.isDefinedAndNotNull(b)?(fourSq.isDefinedAndNotNull(c)&&(a=fourSq.api.models.companion.geo.LatLngUtil.precision(a,c),b=fourSq.api.models.companion.geo.LatLngUtil.precision(b,
c)),a.lat==b.lat&&a.lng==b.lng):!1},toQueryValue:function(a){return a.lat+","+a.lng},fromQueryValue:function(a){var b=a.split(",");a=parseFloat(b[0]);b=parseFloat(b[1]);return isNaN(a)||isNaN(b)?null:fourSq.api.models.companion.geo.LatLngUtil.latLng(a,b)},fromLeaflet:function(a){return fourSq.api.models.companion.geo.LatLngUtil.latLng(a.lat,a.lng)},toLeaflet:function(a){return new L.LatLng(a.lat,a.lng)}};
fourSq.api.models.companion.geo.LatLngBoundsUtil={precision:function(a,b){var c=fourSq.api.models.companion.geo.LatLngUtil.precision(a.ne,b),d=fourSq.api.models.companion.geo.LatLngUtil.precision(a.sw,b);return fourSq.api.models.companion.geo.LatLngBoundsUtil.bounds(d,c)},bounds:function(a,b){return{ne:b,sw:a}},center:function(a){return fourSq.api.models.companion.geo.LatLngUtil.latLng((a.ne.lat+a.sw.lat)/2,(a.ne.lng+a.sw.lng)/2)},equals:function(a,b,c){return fourSq.isUndefinedOrNull(a)&&fourSq.isUndefinedOrNull(b)||
fourSq.isDefinedAndNotNull(a)&&fourSq.isDefinedAndNotNull(b)&&fourSq.api.models.companion.geo.LatLngUtil.equals(a.ne,b.ne,c)&&fourSq.api.models.companion.geo.LatLngUtil.equals(a.sw,b.sw,c)},isPoint:function(a){var b=a.ne;a=a.sw;return b.lat==a.lat&&b.lng==a.lng},toLeaflet:function(a){return new L.LatLngBounds(new L.LatLng(a.sw.lat,a.sw.lng),new L.LatLng(a.ne.lat,a.ne.lng))},fromLeaflet:function(a){var b=fourSq.api.models.companion.geo.LatLngUtil.fromLeaflet(a.getNorthEast());a=fourSq.api.models.companion.geo.LatLngUtil.fromLeaflet(a.getSouthWest());
return fourSq.api.models.companion.geo.LatLngBoundsUtil.bounds(a,b)}};fourSq.api.models.companion.lists.ListUtil={isTodos:function(a){return-1<a.id.indexOf("todos")},isTips:function(a){return-1<a.id.indexOf("tips")},isDones:function(a){return-1<a.id.indexOf("dones")},isCreated:function(a){return"created"===a.type},isFollowing:function(a){return"followed"===a.type},flattenGroups:function(a){return _(a.groups).chain().map(function(a){return a.items}).flatten(!0).value()}};fourSq.api.models.companion.tip.TipUtil={detailUrl:function(a){return"/item/"+a.id},listed:function(a,b){var c=null;fourSq.isDefinedAndNotNull(a)&&fourSq.isDefinedAndNotNull(a.listed)&&(c=a.listed.groups);return _.find(c,fourSq.curry(function(a,b){return b.type===a},this,b))},isSavedToUserList:function(a){var b=fourSq.api.models.companion.tip.TipUtil.listed(a,"created");return fourSq.isDefinedAndNotNull(b)&&0<b.count||fourSq.api.models.companion.tip.TipUtil.isUserTodo(a)},isUserTodo:function(a){return fourSq.isUndefinedOrNull(a)||
fourSq.isUndefinedOrNull(a.todo)?!1:_.some(a.todo.groups,function(a){return _.some(a.items,function(a){return"self"===a.relationship})})},saved:function(a,b){var c=null;fourSq.isDefinedAndNotNull(a)&&fourSq.isDefinedAndNotNull(a.saves)&&(c=a.saves.groups);return _.find(c,fourSq.curry(function(a,b){return b.type===a},this,b))},isSaved:function(a){var b=a.saved;a=fourSq.api.models.companion.tip.TipUtil.saved(a,"self");a=fourSq.isDefinedAndNotNull(a)&&fourSq.isDefinedAndNotNull(a.items)&&fourSq.isDefinedAndNotNull(_.find(a.items,
function(a){return"saved"===a.state}));return b||a}};fourSq.api.models.companion.user.UserUtil={fullName:function(a){var b=a.firstName;a.lastName&&0<a.lastName.length&&(b+=" "+a.lastName);return b},isPerson:function(a){return fourSq.isDefinedAndNotNull(a)&&(fourSq.isUndefinedOrNull(a.type)||"user"==a.type||"celebrity"==a.type)},isPage:function(a){return fourSq.isDefinedAndNotNull(a)&&!fourSq.api.models.companion.user.UserUtil.isPerson(a)},shortName:function(a){var b=a.firstName;a.lastName&&0<a.lastName.length&&(b+=" "+a.lastName.charAt(0)+".");return b},
currentUser:function(a){if(fourSq.config.user.USER_PROFILE)return fourSq.config.user.USER_PROFILE;if(a)throw Error("No currently logged in user");return null},isLoggedIn:function(){return fourSq.isDefinedAndNotNull(fourSq.api.models.companion.user.UserUtil.currentUser())},isFriendable:function(a){var b=["self","friend","pendingThem","followingThem"];return!(!a||_.contains(b,a.relationship))},isFollowable:function(a){var b=["self","followingThem"];return!(!a||_.contains(b,a.followingRelationship))},
flattenGroups:function(a){return _(a.groups).chain().map(function(a){return a.items}).flatten(!0).value()},latLng:function(){return fourSq.api.models.companion.geo.LatLngUtil.latLng(fourSq.config.user.USER_LAT,fourSq.config.user.USER_LNG)},isUS:function(){return fourSq.api.models.companion.geo.GeocodeResponseUtil.isUS(fourSq.config.user.USER_CC)},isEU:function(){return fourSq.api.models.companion.geo.GeocodeResponseUtil.isEU(fourSq.config.user.USER_CC)}};fourSq.api.models.companion.venue.Planets={EARTH:"earth",MARS:"mars"};fourSq.api.models.companion.venue.VenueUtil={hasBeenHere:function(a){return fourSq.api.models.companion.venue.VenueUtil.hasCheckedInHere(a)||fourSq.api.models.companion.venue.VenueUtil.hasMarkedBeenHere(a)},hasCheckedInHere:function(a){return fourSq.isDefinedAndNotNull(a.beenHere)&&0<a.beenHere.count},hasMarkedBeenHere:function(a){return fourSq.isDefinedAndNotNull(a.beenHere)&&(a.beenHere.marked||!1)},markBeenHere:function(a,b){fourSq.isUndefinedOrNull(a.beenHere)&&(a.beenHere={});a.beenHere.marked=
b},listed:function(a,b){if(fourSq.isDefinedAndNotNull(b.listed))return _.find(b.listed.groups,fourSq.bind(function(b){return fourSq.isDefinedAndNotNull(b)&&b.type==a},this))},isSavedToUserList:function(a){a=fourSq.api.models.companion.venue.VenueUtil.listed("created",a);return fourSq.isDefinedAndNotNull(a)&&0<a.count},isUserTodo:function(a){a=fourSq.api.models.companion.venue.VenueUtil.listed("created",a);return fourSq.isDefinedAndNotNull(a)&&fourSq.isDefinedAndNotNull(a.items)&&fourSq.isDefinedAndNotNull(_.find(a.items,
function(a){return"todos"===a.type}))},saved:function(a,b){if(fourSq.isDefinedAndNotNull(b.saves))return _.find(b.saves.groups,fourSq.bind(function(b){return fourSq.isDefinedAndNotNull(b)&&b.type==a},this))},isSaved:function(a){a=fourSq.api.models.companion.venue.VenueUtil.saved("self",a);return fourSq.isDefinedAndNotNull(a)&&fourSq.isDefinedAndNotNull(a.items)&&fourSq.isDefinedAndNotNull(_.find(a.items,function(a){return"saved"===a.state}))},primaryCategory:function(a){if(fourSq.isDefinedAndNotNull(a.categories)&&
0<a.categories.length)return a.categories[0]},primaryCategoryIcon:function(a,b){var c=fourSq.api.models.companion.venue.VenueUtil.primaryCategory(a);return fourSq.isDefinedAndNotNull(c)?fourSq.api.models.companion.category.IconUtil.thumbnail(c.icon,b):helpers.category.defaultIcon({transparent:b})},primaryChain:function(a){return fourSq.isDefinedAndNotNull(a.venueChains)&&0<a.venueChains.length?a.venueChains[0]:null},addressComponents:function(a,b){var c=[];if(fourSq.isUndefinedOrNull(a.location))return c;
var d=a.location;d.address&&c.push(d.address);d.crossStreet&&c.push(d.crossStreet);b&&d.city&&c.push(d.city);b&&d.state&&c.push(d.state);return c},fullAddress:function(a,b){if(fourSq.isUndefinedOrNull(a.location))return"";var c=[],d=jQuery.trim(fourSq.api.models.companion.venue.VenueUtil.addressComponents(a,!1).join(" "));d&&c.push(d);b&&a.location.city&&c.push(a.location.city);b&&a.location.state&&c.push(a.location.state);return c.join(", ")},hereNowCount:function(a){return fourSq.isDefinedAndNotNull(a.hereNow)?
a.hereNow.count||0:0},venueUrl:function(a){return window.location.protocol+"//"+window.location.host+"/venue/"+a.id},flattenPhotos:function(a){return _(a.photos.groups).chain().map(function(a){return a.items}).flatten(!0).compact().value()},flattenTips:function(a){return _(a.tips.groups).chain().map(function(a){return a.items}).flatten(!0).compact().value()},woeTypeToProposeEditKey:function(a){return{venuename:"name",crossstreet:"crossStreet",twitter_name:"twitter",primaryCategory:"primaryCategoryId"}[a]||
a},flagById:function(a,b){return fourSq.isDefined(a.flags)?_.find(a.flags.items,function(a){return a.id===b})||null:null},suggestValue:function(a,b,c,d,e){b=fourSq.api.models.companion.venue.VenueUtil.woeTypeToProposeEditKey(b);e={creatingView:e};e[b]=c;fourSq.api.services.Venue.proposeEdit(a,e,"",d)},suggestNA:function(a,b,c,d){b=fourSq.api.models.companion.venue.VenueUtil.woeTypeToProposeEditKey(b);fourSq.api.services.Venue.proposeEdit(a,{naFields:b,creatingView:d},"",c)},useExternalMenu:function(a){return a.menu&&
a.menu.url===a.menu.externalUrl}};fourSq.api.models.companion.typedmodel.TypedModelUtil={isFollowable:function(a){return fourSq.isDefinedAndNotNull(a)&&"page"==a.type&&fourSq.isDefinedAndNotNull(a.object)&&"followingThem"!=a.object.relationship},isSaveable:function(a){return fourSq.isDefinedAndNotNull(a)&&("tip"==a.type||"venue"==a.type||"list"==a.type||"activity"==a.type&&fourSq.api.models.companion.typedmodel.TypedModelUtil.isSaveable(a.object.content))}};fourSq.api.models.companion.typedmodel.TypedModelStore=function(a,b){};
fourSq.api.models.companion.typedmodel.TypedModelStore=fourSq.Class.extend({storage_:{},store:function(a){var b=a.type+a.object.id;a=new fourSq.api.models.companion.typedmodel.TypedModelWrapper(a);fourSq.isDefinedAndNotNull(this.storage_[b])?this.storage_[b].push(a):this.storage_[b]=[a];return a},fetch:function(a,b){var c=this.storage_[a+b];return fourSq.isDefinedAndNotNull(c)?c:[]},remove:function(a,b){this.storage_[a+b]=[]},update:function(a){var b=a.type,c=_.extend({},a);c.type=void 0;_.each(this.fetch(b,
c.id),function(a){a.applyUpdate(c)},this)}});fourSq.api.models.companion.typedmodel.TypedModelWrapper=function(a){};
fourSq.api.models.companion.typedmodel.TypedModelWrapper=fourSq.EventTarget.extend({initialize:function(a){this.model=a;fourSq.isDefinedAndNotNull(a)&&(this.id=this.model.object.id,this.type=this.model.type)},applyUpdate:function(a,b){_.extend(this.model.object,a);!0!==b&&this.trigger(fourSq.api.models.companion.typedmodel.TypedModelWrapper.Events.updated)},isCheckin:function(){return"checkin"==this.type},checkin:function(){if(this.isCheckin())return this.model.object},isVenue:function(){return"venue"==
this.type},venue:function(){if(this.isVenue())return this.model.object},isTip:function(){return"tip"==this.type},tip:function(){if(this.isTip())return this.model.object},isUser:function(){return"user"==this.type||"page"==this.type},user:function(){if(this.isUser())return this.model.object},isPageUpdate:function(){return"pageUpdate"==this.type},pageUpdate:function(){if(this.isPageUpdate())return this.model.object},isList:function(){return"list"==this.type},list:function(){if(this.isList())return this.model.object},
isActivity:function(){return"activity"==this.type},activity:function(){if(this.isActivity())return this.model.object},isAggregation:function(){return"aggregation"==this.type},aggregation:function(){if(this.isAggregation())return this.model.object}},{Events:{updated:"updated"}});
fourSq.stats.Action={build:function(a,b){var c=b||{},d=c.view||fourSq.stats.Util.getViewName(),e=b&&b.timestamp?b.timestamp:+new Date,f=fourSq.stats.SessionId.get(),g=c.isAppInitiated?fourSq.stats.action.Initiator.CLIENT_APP:fourSq.stats.action.Initiator.CLIENT_USER,d=fourSq.api.models.companion.log.ActionName.build(a,d,c.section,c.component,c.componentIndex,c.element),h=_.extend({},fourSq.stats.Util.getDefaultLoggingIds(),c.ids);return fourSq.api.models.companion.log.Action.build(d,g,c.details,f,
h,e)},buildWithDefaults:function(a,b,c){b=_.extend({},b,c);return fourSq.stats.Action.build(a,b)},builder:function(a,b){return function(){return fourSq.stats.Action.build(a,b)}},buildData:function(a){return a}};fourSq.stats.SessionId={get:function(){var a=+new Date+"-"+Math.floor(1E3*Math.random());return function(){return a}}()};fourSq.stats.Detail=function(a){this.details_={};this.incrs_=[];this.metrics_=[];this.experimentActions_=[];this.actions_=[];this.onFinish_=a||function(){}};
fourSq.stats.Detail.prototype={setEvent:function(a){this.add("event",a);return this},getEvent:function(){return this.details_.get("event")},hasEvent:function(){return fourSq.isDefinedAndNotNull(this.getEvent())},add:function(a,b){if(_.isFunction(b))return fourSq.debug.info("fourSq.stats.Detail.prototype.add called with function for key: "+a),this;this.details_[a]=b;return this},addAll:function(a){_.isFunction(a.toJSON)&&(a=a.toJSON());_(a).each(fourSq.bind(function(a,c){this.add(c,a)},this));return this},
getDetails:function(){return this.details_},hasDetails:function(){return!_.isEmpty(this.details_)},addActions:function(a){var b=_.toArray(arguments);this.actions_=this.actions_.concat(b);return this},getActions:function(){return this.actions_},hasActions:function(){return!!this.actions_.length},incr:function(a,b){this.incrs_[this.incrs_.length]={path:a,count:b||1};return this},getIncrements:function(){return this.incrs_},hasIncrements:function(){return!!this.incrs_.length},logMetric:function(a,b){this.metrics_[this.metrics_.length]=
{path:a,count:b||1};return this},getMetrics:function(){return this.metrics_},hasMetrics:function(){return!!this.metrics_.length},logExperimentAction:function(a,b,c){this.experimentActions_.push({loggedName:a,action:b,count:c||1});return this},getExperimentActions:function(){return this.experimentActions_},hasExperimentActions:function(){return!!this.experimentActions_.length},toJSON:function(){var a=_.extend({},this.details_);(this.incrs_.length||this.metrics_.length)&&_.extend(a,{statmon:{incrs:this.incrs_,
metrics:this.metrics_}});this.experimentActions_.length&&_.extend(a,{expact:this.experimentActions_});return a},finish:function(a){this.onFinish_(this,a)}};fourSq.stats.Transport=function(){};fourSq.stats.Transport.prototype.send=function(a,b,c){};fourSq.stats.WebloggerTransport=function(a,b){};
fourSq.stats.WebloggerTransport=fourSq.Class.extend({doTransmit:function(a,b){},getLoggerPath:function(a){return fourSq.isDefinedAndNotNull(a)?"/private/logger?"+this.serializeLogJson(a):"/private/logger"},serializeLogJson:function(a){return _(a).map(function(a,c){var d=encodeURIComponent(_.isObject(a)?JSON.stringify(a):a);return encodeURIComponent(c).replace(/(%..)+/g,"-")+"\x3d"+d}).join("\x26")},send:function(a,b,c){c=fourSq.isDefinedAndNotNull(c)?c:function(){};this.hasPayload_(a)?(a=this.detailToJson_(a),
a=_.extend(a,b||{}),this.doTransmit(a,c)):c()},detailToJson_:function(a){var b=_.extend({},a.getDetails());(a.hasIncrements()||a.hasMetrics())&&_.extend(b,{statmon:{incrs:a.getIncrements(),metrics:a.getMetrics()}});a.hasExperimentActions()&&_.extend(b,{expact:a.getExperimentActions()});return b},hasPayload_:function(a){return a.hasDetails()||a.hasMetrics()||a.hasIncrements()||a.hasExperimentActions()}});fourSq.stats.GifTransport=function(a,b){};fourSq.stats.GifTransport=fourSq.stats.WebloggerTransport.extend({doTransmit:function(a,b){var c=this.getLoggerPath(a),d=new Image(1,1);d.onload=fourSq.bind(function(){try{d.onload=null,b()}catch(a){}},this);d.onerror=fourSq.bind(b,this);fourSq.debug.debug("GifTransport: "+c);d.src=c}});fourSq.stats.PostTransport=function(a,b){};fourSq.stats.PostTransport=fourSq.stats.WebloggerTransport.extend({doTransmit:function(a,b){var c={cache:!1,data:this.serializeLogJson(a),success:b,type:"POST",url:this.getLoggerPath()};$.ajax(c);fourSq.debug.debug("PostTransport data: "+JSON.stringify(a))}});fourSq.stats.LogActionsTransport=function(a,b){};fourSq.stats.LogActionsTransport=fourSq.Class.extend({send:function(a,b,c){a.hasActions()?fourSq.api.services.Private.logActions({actions:a.getActions(),isMobile:fourSq.stats.Util.isMobile()},c,c):fourSq.isDefinedAndNotNull(c)&&c()}});fourSq.stats.Oids={build:function(a){return fourSq.api.models.companion.log.Oids.build(a)}};fourSq.stats.Timer=function(){this.stop_=this.start_=null};fourSq.stats.Timer.prototype={start:function(){this.start_=+new Date},stop:function(){if(fourSq.isUndefinedOrNull(this.start_))throw"Can't call stop before calling start.";this.stop_=+new Date},elapsed:function(){if(fourSq.isUndefinedOrNull(this.stop_))throw"Can\t call elapsed before stopping timer.";return this.stop_-this.start_}};fourSq.stats.Util={logNotificationClick:function(a){0<a.length&&(a=fourSq.stats.Action.build(fourSq.stats.action.Action.CLICK,{element:fourSq.stats.action.Element.TRAY_NOTIFICATION,isAppInitiated:!1,ids:fourSq.api.models.companion.log.Oids.build({notificationId:a[0]})}),fourSq.stats.logActions(a))},logLinkClick:function(a,b,c){var d=a.attr("href");a.on(c.isTouch?"mouseup":"click",function(a){a.preventDefault();a=fourSq.isDefinedAndNotNull(c.collector)?c.collector.log(b):fourSq.stats.log(b);c.beforeFinish&&
c.beforeFinish(a);a.finish();_.delay(function(){fourSq.util.redirect(d)},fourSq.stats.REDIRECT_DELAY)})},logClickAction:function(a,b){a.click(function(){var a=fourSq.stats.Action.build(fourSq.stats.action.Action.CLICK,b);fourSq.stats.logActions(a)})},logActionOnLinkClick:function(a,b,c){c=c||{isTouch:void 0,actionGeneratorOptions:void 0};var d=a.attr("href");if(0<a.length&&fourSq.isUndefinedOrNull(d))throw Error("logActionOnLinkClick: href is undefined or null");var e=c.actionGeneratorOptions||{};
a.on(c.isTouch?"mouseup":"click",function(c){var g=b(e);if(fourSq.util.clickOpensInNewTab(c,a))return fourSq.stats.logActions(g),!0;fourSq.stats.logActionWithDelay(g,function(){fourSq.util.redirect(d)});return!1})},getViewName:function(){return fourSq.pageViewName?fourSq.pageViewName():fourSq.stats.action.View.UNKNOWN},getDefaultLoggingIds:function(){return fourSq.defaultLoggingIds||{}},isMobile:function(){return!!fourSq.logAsMobile},logPageLoad:function(a){a=_.extend({},{ids:void 0,additionalLoggingDetails:{}},
a);var b=$(window),b=_.extend({},a.additionalLoggingDetails,{referrer:document.referrer||void 0,path:window.location.pathname||void 0,hash:window.location.hash||void 0,query:window.location.search||void 0,vp:b.height()+","+b.width()});a=fourSq.stats.Action.build(fourSq.stats.action.Action.PAGE_LOAD,{details:b,isAppInitiated:!0,ids:a.ids});fourSq.stats.logActions(a)}};fourSq.stats.Collector=function(a){this.config_=a||{};this.id=this.config_.id||fourSq.stats.Collector.instanceId();this.transports_=[];this.transportsProtected_=!1;this.initializeTransports_()};fourSq.stats.Collector.instanceId=function(){var a=0;return function(){return fourSq.stats.SessionId.get()+"-"+a++}}();
fourSq.stats.Collector.prototype={initializeTransports_:function(){var a=new fourSq.stats.LogActionsTransport;this.transports_.push(a)},protectTransports:function(){this.transportsProtected_=!0;return this},replaceTransports:function(a){this.transportsProtected_?fourSq.debug.error("Transports on collector "+this.id+" are protected and cannot be replaced."):this.transports_=_.clone(a)||[]},coreLogData_:function(){var a={};a._ts=+new Date;a._cid=this.id;a._sid=fourSq.stats.SessionId.get();a._p=window.location.href;
_.extend(a,this.config_.defaults);return a},onDetailFinish_:function(a,b){this.send(a,b)},log:function(a){var b=new fourSq.stats.Detail(fourSq.bind(this.onDetailFinish_,this));fourSq.isDefinedAndNotNull(a)&&b.setEvent(a);return b},send:function(a,b){var c=this.coreLogData_(),d=this.transports_.length,e=function(){d--;0==d&&b&&b(this)};_.each(this.transports_,function(b){b.send(a,c,e)})}};fourSq.stats.TimingStats=function(a,b){};
fourSq.stats.TimingStats=fourSq.Class.extend({initialize:function(){this.customCollector_=new fourSq.stats.Collector;this.customCollector_.replaceTransports([new fourSq.stats.PostTransport])},collectAndSend:function(){if(fourSq.isDefinedAndNotNull(window.timingData)){var a=window.timingData.results||void 0,b=fourSq.isDefinedAndNotNull(window.performance)?window.performance.timing:void 0,c=fourSq.util.devices.detect(),d=fourSq.currentPage,e=["newfe","timing",fourSq.isDefinedAndNotNull(d)&&_.isFunction(d.pageViewName)?
d.pageViewName():"misc",c],f=this.customCollector_.log("page-timing-complete"),g=void 0,c=_.filter(b,function(a){return _.isNumber(a)&&0<a});fourSq.isDefinedAndNotNull(c)&&0<c.length&&(g=_.min(c));_.isNumber(g)&&_.each(b,fourSq.bind(function(a,b){var c=_.isNumber(a)?a-g:-1;0<=c&&f.logMetric(e.concat(["perf",b]),c)},this));_.each(a,fourSq.bind(function(a,b){_.isNumber(a)&&f.logMetric(e.concat(["results",b]),a)},this));this.customCollector_.send(f)}}});fourSq.stats.TimeOnPageLogger=function(a,b){};
fourSq.stats.TimeOnPageLogger=fourSq.Class.extend({initialize:function(){this.startedAt_=+new Date;_.defer(fourSq.bind(this.queue_,this))},backOff_:function(a){return 2E4>a?fourSq.util.randomInt(1E3,5E3):6E4>a?fourSq.util.randomInt(3E3,7E3):9E4>a?fourSq.util.randomInt(7E3,1E4):-1},delta_:function(){return+new Date-this.startedAt_},queue_:function(){var a=this.delta_(),a=this.backOff_(a);0<a&&_.delay(fourSq.bind(function(){var a=this.delta_();this.logAction_(a);this.queue_()},this),a)},logAction_:function(a){a=
fourSq.stats.Action.build(fourSq.stats.action.Action.ON_PAGE,{details:{deltaTs:a}});fourSq.stats.logActions(a)}});fourSq.stats.pageCollector_=(new fourSq.stats.Collector).protectTransports();fourSq.stats.log=fourSq.bind(fourSq.stats.pageCollector_.log,fourSq.stats.pageCollector_);fourSq.stats.incr=function(a,b){fourSq.stats.log("statmon").incr(a,b).finish()};fourSq.stats.logMetric=function(a,b){fourSq.stats.log("statmon").logMetric(a,b).finish()};fourSq.stats.logExperimentAction=function(a,b,c){fourSq.stats.log("expact").logExperimentAction(a,b,c).finish()};
fourSq.stats.logActions=function(a){var b=fourSq.stats.pageCollector_.log();b.addActions.apply(b,arguments);b.finish()};fourSq.stats.logActionWithDelay=function(a,b){fourSq.stats.logActions(a);_.delay(b,fourSq.stats.REDIRECT_DELAY)};fourSq.stats.logActionWithConfirmation=function(a,b){var c=fourSq.stats.pageCollector_.log();c.addActions(a);c.finish(b)};fourSq.stats.REDIRECT_DELAY=50;fourSq.stats.action.Action={PAGE_LOAD:"page-load",ON_PAGE:"on-page",CLICK:"click",ENTER:"enter",SHOW:"show",CLOSE:"close",IMPRESSION:"impression",API_CALL:"api-c",API_RESPONSE_SUCCESS:"api-resp-s",API_RESPONSE_FAILURE:"api-resp-f",RUN:"run",QUEUE:"queue",SUCCESS:"success",FAILURE:"failure",VALID:"valid",INVALID:"invalid",ENABLED:"enabled",DISABLED:"disabled",SELECT:"select",SUBMIT:"submit",FOCUS:"focus",AUTOLOGIN:"autologin",ATTEMPT_REDIRECT:"attempt-redirect",REDIRECT:"redirect",ADD:"add",REMOVE:"remove",
ONBOARDING_END:"onboarding-end",ONBOARDING_START:"onboarding-start",HOVER:"hover",SCROLL:"scroll",RENDER:"render"};fourSq.stats.action.Component={MAP:"map",SAVE_FLYOUT:"save-flyout",SHARE_FLYOUT:"share-flyout",VENUE_CARD:"venue-card",SIGNUP_MENU:"signup-menu",SIGNUP_BANNER:"signup-banner",COMMENT_CARD:"comment-card",BADGE_CARD:"badge-card",TIP:"tip",MAP_CONTROL:"map-control",RESULT:"result",SWIPE_SECTION:"swipe-section",TAP_SECTION:"tap-section",ACTION_COMPLETER:"action-completer",ME_BLOCK:"me-block",QUERY_REFINEMENT:"query-refinement",FILTERS_PROMO:"filters-promo",SIMILAR_VENUES:"similar-venues",SIMILAR_TASTE_VENUES:"similar-taste-venues",
SAME_GEO_CATEGORY_VENUES:"same-geo-category-venues",SAME_GEO_RESTAURANTS:"same-geo-restaurants",SUBSEQUENT_VENUES:"subsequent-venues",CHILD_VENUES:"child-venues",SIBLING_VENUES:"sibling-venues",CHAIN_VENUES:"chain-venues",POPULAR_QUERIES:"popular-queries",VENUE:"venue",EXPLORE_LINKS:"explore-links",LISTS:"list",STAFF:"staff",TASTE:"taste",PROGRESS_BAR:"progress-bar",INFO_WINDOW:"info-window",FRIEND_LIST:"friend-list",BUDGET_SELECTOR:"budget-selector",CREATE:"create",MESSAGE:"message",PHOTO_FLYOUT:"photo-flyout",
BILLING_CARDS:"billing-cards",MANAGE_CREDITS:"manage-credits",FAQ:"faq",FRIENDSHIP_AUTO_ACCEPT_TOGGLE:"friendship-auto-accept-toggle",OPEN_IN_APP:"open-in-app",UPSELL_TO_SU:"upsell-to-su",UPSELL_TO_QUEUES:"upsell-to-queues",STOP_MODAL:"stop-modal",ESCAPE_HATCH:"escape-hatch",VENUE_SUGGESTION:"venue-suggestion",VENUE_NOTE:"venue-note",ANON_UPSELL:"anon-upsell",DELETE_CONFIRMATION_DIALOG:"delete-confirmation-dialog",FILTERS:"filters",NAVIGATION:"navigation",HEADER:"header",LOCAL_QUERY_DETAIL_LINK:"local-query-detail-link",
GET_THE_APP:"get-the-app",NEW_COPY_LARGE_FONT:"new-copy-large-font",NEW_COPY_SMALL_FONT:"new-copy-small-font",OLD_COPY_LARGE_FONT:"old-copy-large-font",OLD_COPY_SMALL_FONT:"old-copy-small-font",RATING_TOAST:"rating-toast",RATING_PROMPT:"rating-prompt",USER_DROPDOWN:"user-dropdown",QUERY_DRAWER:"query-drawer",LOCATION_DRAWER:"location-drawer",LOGGED_OUT_MENU:"logged-out-menu",PLANNING_A_TRIP_BANNER:"planning-a-trip-banner",YELP_UPSELL_BANNER:"yelp-upsell-banner",SOCIAL_TRAVEL_BANNER:"social-travel-banner",
DEAR_FOURSQUARE_2015:"dearfoursquare2015",VENUE_SECTION_TABS:"section-tabs",CATEGORY:"category"};fourSq.stats.action.Element={FACE:"face",DATE:"date",AVATAR:"avatar",USER_NAME:"user-name",FACEBOOK_SIGNUP:"facebook-signup",FACEBOOK_LOGIN:"facebook-login",GOOGLE_PLUS_SIGNUP:"google-plus-signup",EMAIL_SIGNUP:"email-signup",SIGNUP:"signup",IOS_DOWNLOAD:"ios-download",ANDROID_DOWNLOAD:"android-download",WINPHONE_DOWNLOAD:"winphone-download",DOWNLOAD:"download",TURN_ON_BROWSER_NOTIFICATION:"turn-on-browser-notification",LOGIN:"login",FOURSQUARE_LOGO:"foursquare-logo",SUBMIT_BUTTON:"submit-button",
QUERY_INPUT:"query-input",LOCATION_INPUT:"location-input",SEARCH_FORM:"search-form",DELETE:"delete",LIKE:"like",LIKED:"liked",DISLIKE:"dislike",DISLIKED:"disliked",SAVE:"save",SAVE_EDIT:"save-edit",CANCEL_EDIT:"cancel-edit",NEXT:"next",PREVIOUS:"previous",PAUSE:"pause",UNPAUSE:"unpause",ADD_TO_LIST:"add-to-list",REMOVE_FROM_LIST:"remove-from-list",SHARE:"share",SHARE_INPUT:"share-input",SHARE_TWITTER:"share-tw",SHARE_FACEBOOK:"share-fb",FIND_FRIENDS_FACEBOOK:"find-friends-facebook",FIND_FRIENDS_TWITTER:"find-friends-twitter",
FIND_FRIENDS_GMAIL:"find-friends-gmail",FIND_FRIENDS_YAHOO:"find-friends-yahoo",FIND_FRIENDS:"find-friends",BEEN_HERE:"been-here",CREATE_LIST:"create-list",MENU:"menu",EDITOR:"editor",EDIT:"edit",VENUE_NAME:"venue-name",SPECIAL:"special",BACK:"back",BROADCAST:"broadcast",ARROW:"arrow",PHOTO:"photo",PHOTO_VISIBILITY_PUBLIC:"photo-visibility-public",PHOTO_VISIBILITY_FRIENDS:"photo-visibility-friends",CATEGORY_NAME:"category-name",CLAIM:"claim",PRIVACY:"privacy",TERMS_OF_SERVICE:"terms-of-service",FILTER_HAVE_NOT_BEEN:"filter-have-not-been",
FILTER_HAVE_BEEN:"filter-have-been",FILTER_FRIENDS_HAVE_BEEN:"filter-friends-have-been",FILTER_WITH_SPECIALS:"filter-with-specials",LOCATION_SUGGESTION:"location-suggestion",SEARCH_SUGGESTION:"search-suggestion",SPELLING_SUGGESTION:"spelling-suggestion",SPELLING_CORRECTION:"spelling-correction",SPELLING_ESCAPE_HATCH:"spelling-escape-hatch",REQUERY:"requery",ZOOM_IN:"zoom-in",ZOOM_OUT:"zoom-out",CURRENT_LOCATION:"current-location",HIDE_BUTTON:"hide-button",VENUE_FACEBOOK_PAGE:"venue-fb",VENUE_TWITTER_PAGE:"venue-twitter",
VENUE_WEBSITE:"venue-website",VENUE_DIRECTIONS:"venue-directions",VENUE_RESERVATION:"venue-reservation",VENUE_DELIVERY:"venue-delivery",VENUE_ADDRESS:"venue-address",VENUE_PHONE:"venue-phone",VENUE_MENU:"venue-menu",ADD_VENUE:"add-venue",REMOVE_VENUE:"remove-venue",FULL_HOURS:"venue-hours",ADD_TIP:"add-tip",ADD_ANOTHER_TIP:"add-another-tip",MAP:"map",MAP_PIN:"map-pin",CENTER_MAP:"venue-map-center",POP_OUT_MAP:"venue-map-out",POP_IN_MAP:"venue-map-in",SIP:"sip",MORE:"more",TIP_FILTER_CANCEL:"tip-filter-cancel",
TIP_FILTER:"tip-filter",TIP_FILTER_INPUT:"tip-filter-input",TIP_PAGINATION_LINK:"tip-pagination-link",TIP_SORT_LINK:"tip-sort-link",TIP_LINK:"tip-link",TIP_DELETE:"tip-delete",TIPS_TAB:"tips-tab",PHOTOS_TAB:"photos-tab",MENU_TAB:"menu-tab",ALL_PHOTOS_LINK:"all-photos-link",ALL_PHOTOS_TEXT_LINK:"all-photos-text-link",VENUE_EDIT_LINK:"venue-edit-link",VENUE_EDIT_HISTORY_LINK:"venue-edit-history-link",VENUE_FLAG_LINK:"venue-flag-link",VENUE_VIEW_FLAGS_LINK:"venue-view-flags-link",LOCATION_BREADCRUMB:"location-breadcrumb",
GET_APP_LINK:"get-app-link",CHICLET:"chiclet",EXPLORE_LINK:"explore-link",LIST_NAME:"list-name",SEE_ALL_LISTS:"see-all-lists",SEE_LIKES:"see-likes",SEE_COMMENTS:"see-comments",SEE_PHOTOS:"see-photos",UPSELL_ACCEPT_LINK:"upsell-accept-link",VENUE_CREATE:"venue-create",ROLLBACK_EDIT:"rollback-edit",ROLLBACK_CHAIN_EDIT:"rollback-chain-edit",MARK_AS_SUSPICIOUS:"mark-as-suspicious",ADD_FRIEND:"add-friend",DISLIKE_VENUE:"dislike-venue",LIKE_PAGE:"like-page",LIKE_TIP:"like-tip",UPVOTE_TIP:"upvote-tip",DOWNVOTE_TIP:"downvote-tip",
LIKE_VENUE:"like-venue",SAVE_LIST:"save-list",UNSUBSCRIBE_ALL:"unsubscribe-all",UNSUBSCRIBE_ONE:"unsubscribe-one",EMAIL:"email",PASSWORD:"password",FIRST_NAME:"first-name",BIRTHDAY:"birthday",PRIVACY_POLICY:"privacy-policy",IPHONE:"iphone",BLACKBERRY:"blackberry",ANDROID:"android",WINDOWS_PHONE:"windows-phone",OTHER_PHONES:"other-phones",ADD_ALL:"add-all",NEXT_SECTION:"next-section",ACCOUNT_PICKER_PAGE:"account-picker-page",BID_FIELD:"bid-field",CONTINUE:"continue",CREATE_AD:"create-ad",CREATE_UPDATE:"create-update",
UPLOAD_PHOTO:"upload-photo",SELECT_PHOTO:"select-photo",SELECT_TIP:"select-tip",SELECT_UPDATE:"select-update",ADD:"add",REMOVE:"remove",BIO:"bio",PHONE:"phone",NATIVE_URL:"native-url",NATIVE_FALLBACK_CALLBACK:"native-fallback-callback",NATIVE_FALLBACK_URL:"native-fallback-url",COPPA_TOO_YOUNG:"coppa-too-young",SEND:"send",SHOW_PANE:"show-pane",SHOW_FORM:"show-form",SUPERUSER_QUEUE_LINK:"superuser-queue-link",OPEN_FLYOUT:"open-flyout",CLOSE_FLYOUT:"close-flyout",NO_THANKS:"no-thanks",TASTE:"taste",
ADDED_TASTE:"added-taste",YOUR_TASTES:"your-tastes",YOUR_TASTE_SUGGESTIONS:"your-taste-suggestions",TASTES_LINK:"tastes-link",SIGN_UP:"sign-up",LINK:"link",LOCAL_QUERY_DETAIL_LINK:"local-query-detail-link",FOLLOW:"follow",RATE:"rate",CANCEL:"cancel",OK:"ok",OKAYED:"okayed",IGNORE:"ignore",SKIP:"skip",TIP_ADD:"tip-add",PHOTO_ADD:"photo-add",POST:"post",FRIEND_ACTIVITY:"friend-activity-link",USER_PROFILE:"user-profile-link",ADD_TASTES_LINK:"add-tastes-link",BADGES_LINK:"badges-link",USER_HISTORY_LINK:"user-history-link",
USER_LIST_LINK:"user-list-link",USER_TODOS_LINK:"user-todo-link",ACCOUNT_SETTINGS_LINK:"account-settings-link",LOGOUT_LINK:"logout-link",SUPERUSER_ACTION_LINK:"superuser-action-link",USER_PATH_LINK:"user-path-link",INSPIRATIONAL_LOCATION_LINK:"inspirational-location-link",NEARBY_LOCATION_LINK:"nearby-location-link",ABOUT_LINK:"about-link",FOURSQUARE_FOR_ENTERPRISE_LINK:"foursquare-for-enterprise-link",CONNECT_BUTTON:"connect-button",TRAY_NOTIFICATION:"tray-notification",SMALL_BUSINESS_LINK:"small-business-link",
DEVELOPER_LINK:"developer-link",SWARM_LINK:"swarm-link",FOURSQUARE_LINK:"foursquare-link",UBER_BUTTON:"uber-button",DELIVERY_BUTTON:"delivery-button",TIMBERLAND_CLICKTHROUGH:"timberland-clickthrough",TIMBERLAND_CLICKOUT:"timberland-clickout",LLBEAN_BUTTON:"llbean-button",LLBEAN_EXT_LINK:"llbean-ext-link",CREATE_APP:"create-app-button",CONTINUE_PERSONAL:"continue-personal-button",CONTINUE_STARTUP:"continue-startup-button",LETS_TALK:"lets-talk-button",SANDBOX:"sandbox",DEV_VERIFY:"verify-button",SUBSCRIBE:"subscribe-button",
UNSUBSCRIBE:"unsubscribe-button",SG_2017_LANDING_LINK:"summer-guide-2017-landing-link",SG_2017_NYC_LINK:"summer-guide-2017-nyc-link",SG_2017_LA_LINK:"summer-guide-2017-la-link",SG_2017_CHICAGO_LINK:"summer-guide-2017-chicago-link",IOS:"ios",FACEBOOK:"facebook",TWITTER:"twitter"};fourSq.stats.action.Initiator={CLIENT_USER:0,CLIENT_APP:1};fourSq.stats.action.Section={HEADER_BAR:"header-bar",MOBILE_HEADER_BAR:"mobile-header-bar",PRODUCT_BAR:"product-bar",SIGNUP_PROMPT:"signup-prompt",SWARM_APP_PROMPT:"swarm-app-prompt",SWARM_APP_PROMPT_EXPERIMENTAL:"swarm-app-prompt-experiment",GET_THE_APP_PROMPT:"get-the-app-prompt",BROWSER_NOTIFICATION_PROMPT:"browser-notification-prompt",MOBILE_CHROME_ANDROID_APP_BANNER:"mobile-chrome-android-app-banner",INVITE_SIGNUP_PROMPT:"invite-signup-prompt",INVITE_BAR:"invite-bar",DIALOG:"dialog",SIGNUP_DIALOG:"signup-dialog",
DOWNLOAD_DIALOG:"download-dialog",NOTIFICATION:"notification",IMAGE_VIEWER:"image-viewer",SIDEBAR:"sidebar",FLOATING_SIDE_WIDGET:"floating-side-widget",MAP:"map",RESULTS:"results",FILTERS:"filters",ACTIVITY_STREAM:"activity-stream",COMMENT_STREAM:"comment-stream",VENUE_DETAIL:"venue-detail",SIGNUP_DOWNLOAD:"signup-teaser",TIPS_SECTION:"tips-section",JUSTIFICATIONS:"justifications",TIPPETS:"tippets",TASTES:"tastes",EMAIL_PROMO:"email-promo",ATTRIBUTE_PROMPT:"attribute-prompt",BADGES:"badges",VENUES:"venues",
TRAVEL:"travel",MAYORSHIPS:"mayorships",CATEGORY_LEADERBOARD:"category-leaderboard",PRIMARY_ACTION:"primary-action",LOCATION_SETTINGS:"settings",VENUE_DETAIL_INFO:"venue-detail-info",VENUE_DETAIL_PHOTOS:"venue-detail-photos",VENUE_DETAIL_OVERLAY_MAP:"venue-detail-overlay-map",VENUE_DETAIL_EDITING_MODAL:"venue-detail-editing-modal",VENUE_DETAIL_BASIC_DOWNLOAD_MODAL:"venue-detail-basic-download-modal",VENUE_DETAIL_TIPS_DOWNLOAD_MODAL:"venue-detail-tips-download-modal",VENUE_DETAIL_PHOTOS_DOWNLOAD_MODAL:"venue-detail-photos-download-modal",
VENUE_DETAIL_TASTES_DOWNLOAD_MODAL:"venue-detail-tastes-download-modal",VENUE_DETAIL_INLINE_DOWNLOAD_PROMPT:"venue-detail-inline-download-prompt",VENUE_ATTRIBUTES:"venue-attributes",IPAD_DOWNLOAD_MODAL:"ipad-download-modal",FRIEND_VISITS_FACEPILE:"friend-visits-facepile",SIGNUP_FORM:"signup-form",MORE_TIPS:"more-tips-button",ADDRESS_SOLICITATION:"address-solicitation",TIP_MODAL:"tip-modal",TOP_VENUE_INFO:"top-venue-info",BEST_NEARBY:"best-nearby",TRENDING:"trending",SPECIALS:"specials",NEW_VENUES:"new-venues",
FRIEND_REQUESTS:"friend-requests",SOCIAL_CONNECT:"social-connect",DOWNLOAD:"download",DOWNLOAD_BADGES:"download-badges",OTHER_DEVICES:"other-devices",SPLASH:"splash",RESULTS_FACEBOOK:"results-facebook",RESULTS_TWITTER:"results-twitter",RESULTS_GMAIL:"results-gmail",POLISH_PROFILE_FORM:"polish-profile-form",CONTENT:"content",BUDGET:"budget",PAYMENT:"payment",AD_PAUSE:"adpause",SPECIAL_TYPE_PICKER:"special-type-picker",SPECIAL_FORM:"special-form",TIP_CREATOR:"tip-creator",NEW_TIP_LIST:"new-tip-list",
FILTERED_TIP_LIST:"filtered-tip-list",PITCH_CAROUSEL:"pitch-carousel",CREATED_TIP:"created-tip",COMPOSING_TIP:"composing-tip",PROCESSING_TIP:"processing-tip",HOME:"home",NEARBY:"nearby",EXPLORE:"explore",OVERVIEW:"overview",AUDIENCE:"audience",TIPS:"tips",LISTS:"lists",UPDATES:"updates",GENERIC_STEP:"generic_step",DOWNLOAD_STEP:"download-step",FIND_FRIENDS_STEP:"find-friends-step",POLISH_PROFILE_STEP:"polish-profile-step",TASTE_GAME_STEP:"taste-game-step",LOG_IN:"log-in",SIGNUP_MODAL_SUCCESS:"signup-modal-success",
EMAIL_PROMPT:"email-prompt",TERMS_OF_USE_STEP:"terms-of-use-step",PHONE_STEP:"get-phone-step",FINAL_VERIFICATION_STEP:"final-verification-step",MAIL_SENT_STEP:"mail-sent-step",FINAL_STEP_APPROVED:"final-step-approved",FINAL_STEP_PENDING:"final-step-pending",FINAL_STEP_REJECTED:"final-step-rejected",FINAL_STEP_REVOKED:"final-step-revoked",HEADER:"header",FOOTER:"footer",SEARCH:"search",LIST:"list",LOCAL_QUERY_DETAIL_PIVOTS:"local-query-detail-pivots",LISTING_INLINE_CTA:"listing_inline_cta",MAIN:"main",
TOP:"top",NEW_PLACES:"new-places",TOP_CATEGORIES:"top-categories",TOP_PLACES:"top-places",SHARE:"share"};fourSq.stats.action.View={ABOUT:"about",ABOUT_CONTACT:"about-contact",ABOUT_TEAM:"about-team",ABOUT_LOGOS:"about-logos",ABOUT_PHOTOS:"about-photos",ABOUT_COMMUNITY:"about-community",ABOUT_SAVE_TO_4SQ:"about-saveto4sq",ABOUT_TIP_BOOKMARKLET:"about-tipbookmarklet",ABOUT_SECURITY:"about-security",ADD_FRIENDS:"add-friends",ADD_FRIENDS_NEW:"add-friends-v2",APPLE_WATCH_PAGE:"apple-watch-page",AUTH:"oauth-page",BADGE:"badge",BADGE_UNLOCK:"badge-unlock",BADGES:"badges",BATMAN_ONBOARDING:"batman-onboarding",
BRAND_PAGE_DASHBOARD:"brand-page-dashboard",BRAND_MANAGER_HOME:"brand-manager-home",CHAIN_LOCATIONS:"chain-locations",CHECKIN:"checkin-detail",CHECKIN_FRIEND_REQUEST_ACTION:"request-friend-for-checkin-action",CITY_DIRECTORY:"city-directory",CREATE_TIP_INTENT:"create-tip-intent",BEST_OF:"best-of",BEST_OF_DIRECTORY:"best-of-directory",DEVICE_PROFILE:"device-user-profile",DOWNLOAD:"download",EMBEDDABLE_LIST:"embeddable-list",PINTEREST_DOWNLOAD:"pinterest-download",EXPLORE:"explore",FACEBOOK_PAGES:"facebook-pages",
FALL_OFF_THE_WAGON_THURSDAY_INFOGRAPHIC:"fall-off-the-wagon-thursday-infographic",FRIEND_REQUEST_ACTION:"request-friend-action",FRIEND_ACCEPT_ACTION:"accept-friend-action",HEINEKEN_BREW_LOCK:"heineken-brew-lock",HISTORY:"history",HOMEPAGE:"homepage",JOBS:"jobs",NEW_ACTIVITY_STREAM:"new-activity-stream",NEW_LOGGED_OUT_HOMEPAGE:"new-logged-out-homepage",NEW_LOGGED_IN_HOMEPAGE:"new-logged-in-homepage",NEW_CITY_PAGE:"new-city-page",KIK:"kik",LEGAL:"legal",LEGAL_PHOTOS:"legal-photos",LIST:"list",LIST_EDIT:"list-edit",
LISTS:"lists",LOCAL_QUERY_DETAIL:"local-query-detail",LOCAL_QUERY_INDEX:"local-query-index",LOGIN:"login",MANAGE_FOLLOWERS:"manage-followers",MANAGE_FOLLOWING:"manage-following",MANAGE_FRIENDS:"manage-friends",MANAGE_FRIEND_REQUESTS:"manage-friend-requests",MANAGER_HOME:"manager-home",MERCHANT_DASHBOARD:"merchant-dashboard",MERCHANT_SPECIALS:"merchant-specials",MERCHANT_TOOLS:"merchant-tools",MERCHANT_UPDATE:"merchant-update",NATIONAL_WINTER_GUIDE_INFOGRAPHIC_2016:"national-winter-guide-infographic-2016",
NORTHEAST_WINTER_GUIDE_INFOGRAPHIC_2016:"northeast-winter-guide-infographic-2016",NOTIFICATIONS:"notifications",ONBOARDING:"onboarding",OSM:"osm",PAGE:"page",PAGE_TOOLS:"page-tools",PLAN_MESSAGE:"plan-message",PROMOTE:"promote",PROMOTIONS_DASHBOARD:"promotions-dashboard",SAVE_VENUE_ACTION:"save-venue-action",SETTINGS:"settings",SETTINGS_CONNECTIONS:"settings-connections",SETTINGS_PROFILE:"settings-profile",SETTINGS_SHARING:"settings-sharing",SETTINGS_CHECKIN:"friendcheckinsettings",SETTINGS_PRIVACY:"settings-privacy",
SETTINGS_PAGES:"settings-pages",SETTINGS_BLOCKED_USERS:"settings-blocked-users",SEARCH:"search",SIGNUP:"signup",INVITE_LANDING:"invite-landing",SIGNUP_DOWNLOAD:"signup-download",SIGNUP_DOWNLOAD_NEW:"signup-download-v2",SIGNUP_EMAIL:"signup-email",SIGNUP_FACEBOOK_FRIENDS:"signup-facebook-friends",SIGNUP_TWITTER_FRIENDS:"signup-twitter-friends",SIGNUP_YAHOO_FRIENDS:"signup-yahoo-friends",SIGNUP_GMAIL_FRIENDS:"signup-gmail-friends",SIGNUP_SUGGESTED_PAGES:"signup-suggested-pages",SPECIAL_DETAIL:"special-detail",
CREATE_SPECIAL_PAGE:"create-special-page",SLACK_APP_INSTALL_PAGE:"slack-app-install-page",SU_ADDRESS:"superuser-address",SU_GLOBAL_TRANSLATED_NAME:"superuser-global-translated-name",SU_ATTRIBUTES:"superuser-attributes",SU_CATEGORY:"superuser-category",SU_CHAIN:"superuser-category",SU_DASHBOARD:"superuser-dashboard",SU_EXPLORESPAM:"superuser-explorespam",SU_HOURS:"superuser-hours",SU_MERGE:"superuser-merge",SU_REMOVE:"superuser-remove",SU_PRIVATE:"superuser-private",SU_TIP:"superuser-tip",SU_UNCATEGORIZED:"superuser-uncategorized",
SU_PHOTO:"superuser-photo",SU_UNKNOWN:"superuser-unknown",SU_USERSPAM:"superuser-userspam",SU_MISLOCATED:"superuser-mislocated",SU_LOCATIONREVIEW:"superuser-locationreview",SUPERUSER_MARKETING_LANDING:"superuser-marketing-landing",TASTE_GAME:"taste-game",TESTER_REGISTRATION:"tester-registration",TIP:"tip-detail",TODOS:"todos",TOP_50:"top-50",TOUCH_DOWNLOAD:"touch-download",TRAVEL_PLANNER:"travel-planner",USER:"user",USER_LISTS:"user-lists",USER_PHOTOS:"user-photos",USER_TIPS:"user-tips",USER_VOLUNTEERED_LOCATION:"user-volunteered-location",
USER_PROFILE_2:"user-profile-2",USER_UNLOCK:"user-unlock",USER_WOE:"user-woe",VENUE_DETAIL:"venue-detail",VENUE_DETAIL2:"venue-detail2",CHAIN_HISTORY:"chain-history",VENUE_HISTORY:"venue-history",VENUE_WOE:"venue-woe",VENUE:"venue-detail",VENUE_MENU:"venue-menu",VENUECLAIM_LOGIN:"venueclaim-login",VENUECLAIM_SEARCH:"venueclaim-search",VENUECLAIM_SIGNUP:"venueclaim-signup",VENUECLAIM_VENUESELECTED:"venueclaim-venueselected",VENUE_LISTING:"venue-listing",VENUE_LISTING_CHUNKS:"venue-listing-chunks",
VENUE_LISTS:"venue-lists",VENUE_PHOTOS:"venue-photos",EMAIL_UNSUBSCRIBE:"email-unsubscribe",APP_REDIRECT:"app-redirect",ADD_VENUE:"add-venue",EDIT_PLACE:"edit-place",TRAVEL:"travel",TRIP_TIPS_HOME:"trip-tips-home",TRIP_TIPS_LIST_SELF:"trip-tips-list-self",TRIP_TIPS_LIST:"trip-tips-list",TRAVELWIZARD:"travelwizard",TIP_MODAL:"tip-modal",YEAR_IN_REVIEW_2015_INFOGRAPHIC:"year-in-review-2015-infographic",YEAR_IN_REVIEW_2016_INFOGRAPHIC:"year-in-review-2016-infographic",ATTRIBUTION_MICROSITE_WHITEPAPER:"attribution-microsite-whitepaper",
ATTRIBUTION_MICROSITE_INDEX:"attribution-microsite-index",ENTERPRISE:"enterprise-microsite-index",MARSBOT_APP_MICROSITE_INDEX:"marsbot-app-microsite-index",CANADA_DAY_INFOGRAPHIC_2016:"canada-day-infographic-2016",DEV_VERIFY:"developers-verify",DEV_UPGRADE:"developers-upgrade",DEV_SUBSCRIBE:"developers-subscribe",DEV_REGISTER_APP:"developers-register-app",DEV_SURVEY:"developers-survey",DEV_LOGIN:"developers-login",DEV_PILGRIM:"developers-pilgrim",SUMMER_GUIDE_2017_INFOGRAPHIC:"summer-guide-2017-infographic",
SUMMER_GUIDE_2017_NYC_INFOGRAPHIC:"summer-guide-2017-nyc-infographic",SUMMER_GUIDE_2017_LA_INFOGRAPHIC:"summer-guide-2017-la-infographic",SUMMER_GUIDE_2017_CHICAGO_INFOGRAPHIC:"summer-guide-2017-chicago-infographic",SWARM_HOME:"swarm-home",STICKER_VOTE:"sticker-vote",PERK_REDEMPTION:"perk-redemption",CHALLENGE_RULES:"challenge-rules",YEAR_IN_REVIEW:"year-in-review",BILLING_SUMMARY:"billing-summary",NEXT_BIG_THING:"nextbigthing",UCL2014:"ucl2014",BUSINESS_APP_ACTIVITY:"business-app-activity",BUSINESS_APP_USER_DETAILS:"business-app-user-details",
BUSINESS_APP_SPECIALS:"business-app-specials",BUSINESS_APP_STATS:"business-app-stats",BUSINESS_APP_VENUE_PROFILE:"business-app-venue-profile",FOR_GOOD:"for-good",FOR_GOOD_PROPOSAL:"for-good-proposal",FOR_GOOD_NET_NEUTRALITY:"for-good-net-neutrality",FOR_GOOD_BLINDSQUARE:"for-good-blindsquare",FOR_GOOD_LINKNYC:"for-good-linknyc",UNKNOWN:"unknown",MONTHLY_SUMMARIES_WEB:"monthly-summaries-web"};jQuery.fn.clicktrack=function(a,b,c){var d=b||{};b=c||{};c=$(this);var e=b.onFinish||function(){},f=b.preventDefault,g=!!b.useOnClick,h=b.defaultMetrics,l=!!h,m=b.includeElementIndex,q=b.includeElementId,s=b.collector||fourSq.stats.pageCollector_,u=b.beforeLog||function(a){};return c.each(function(b){var c=$(this),z=c.attr("href"),D=function(){var a=_.isArray(h)?h:[h],a=[_.extend({},{ir:b,sid:fourSq.stats.SessionId.get()},a[0])].concat(a.slice(1));return _(a).map(function(a){return _(a).map(function(a,
b){return b+","+a}).join(";")}).join("|")},k=function(g){var h=_.extend({},d);m&&(h._ctei=b);l&&fourSq.isUndefinedOrNull(h.metrics)&&(h.metrics=D());var k=e;f||g||(k=function(){e();fourSq.util.redirect(z)});q&&c.attr("id")&&(h._cteid=c.attr("id"));fourSq.isDefined(z)&&(h.href=z);g=s.log(a).addAll(h);u(g,c,b);g.finish(k)},O=function(a){var b=!0,d=fourSq.util.clickOpensInNewTab(a,c);if(f||!d)a.preventDefault(),b=!1;k(d);return b};if(g){var E="onclick-"+ +new Date+"-"+Math.floor(100*Math.random());jQuery.fn.clicktrack.callbacks[E]=
function(a,b){var c=$.event.fix(b);return O(c)};c.attr("onClick","return jQuery.fn.clicktrack.callbacks['"+E+"']($(this), event);")}else c.click(O)})};jQuery.fn.clicktrack.callbacks={};
fourSq.newpin.Pin=function(a){};
fourSq.newpin.Pin=fourSq.EventTarget.extend({initialize:function(a){fourSq.newpin.Pin.__super__.initialize.apply(this,arguments);this.map_=a.map;this.latLng_=fourSq.api.models.companion.geo.LatLngUtil.toLeaflet(a.latLng);this.iconProvider_=a.iconProvider;this.id=a.id;this.tooltip_=a.tooltip;this.makeClickableToVenuePage=a.makeClickableToVenuePage;this.pinMarker_=new L.Marker(this.latLng_,{icon:this.iconProvider_.iconForState(fourSq.newpin.Pin.IconStates.STANDARD)});this.map_.addLayer(this.pinMarker_);
fourSq.bind(function(){var a=fourSq.bind(function(){fourSq.curry(this.trigger,this,fourSq.newpin.Pin.Events.CLICK,this);this.makeClickableToVenuePage&&window.open("https://foursquare.com/v/"+this.id,"_blank")},this),c=fourSq.curry(this.trigger,this,fourSq.newpin.Pin.Events.MOUSEDOWN,this),d=fourSq.curry(this.trigger,this,fourSq.newpin.Pin.Events.MOUSEOVER,this),e=fourSq.curry(this.trigger,this,fourSq.newpin.Pin.Events.MOUSEOUT,this);this.pinMarker_.on(fourSq.newpin.Pin.LeafletEvents.CLICK,a);fourSq.util.devices.isTouchIncludingIPad()||
(this.pinMarker_.on(fourSq.newpin.Pin.LeafletEvents.MOUSEDOWN,c),this.pinMarker_.on(fourSq.newpin.Pin.LeafletEvents.MOUSEOVER,d),this.pinMarker_.on(fourSq.newpin.Pin.LeafletEvents.MOUSEOUT,e))},this)()},openTooltip:function(){this.tooltip_&&this.tooltip_.open()},closeTooltip:function(){this.tooltip_&&this.tooltip_.close()},isHoveredOver:function(){return $(this.pinMarker_._icon).is(":hover")},remove:function(){this.tooltip_.close();this.map_.removeLayer(this.pinMarker_)},setZIndexOffset:function(a){this.pinMarker_.setZIndexOffset(a)},
setOpacity:function(a){this.pinMarker_.setOpacity(a)},getLatLng:function(){return this.latLng_}},{IconStates:{STANDARD:"standard"}});fourSq.newpin.Pin.Events={CLICK:"click",MOUSEDOWN:"mousedown",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout"};fourSq.newpin.Pin.LeafletEvents={CLICK:"click",MOUSEDOWN:"mousedown",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout"};fourSq.newpin.PinIconProvider=function(a,b,c){};fourSq.newpin.PinIconProvider=fourSq.Class.extend({initialize:function(a,b,c){this.states_={};this.states_.standard=a;this.name_=b;this.size_=c},addState:function(a,b){this.states_[a]=b},iconForState:function(a){return this.states_[a]||this.states_.standard},name:function(){return this.name_},size:function(){return this.size_}});fourSq.newpin.PinIconProviderFactory={cache_:{},categoryForVenue:function(a){var b="cat-"+(a.categories[0]?a.categories[0].id:"nocat");this.cache_[b]||(a=new L.DivIcon({className:"categoryMapMarker",html:helpers.pin.categoryPin({venue:a,orange:!!a.specials&&0<a.specials.count}),iconAnchor:new L.Point(22,47),iconSize:new L.Point(44,55)}),a=new fourSq.newpin.PinIconProvider(a,b,{height:55,width:44}),this.cache_[b]=a);return this.cache_[b]},dotIconForVenue:function(){if(!this.cache_.dotIcon){var a=new (L.Icon.extend({options:{iconUrl:"https://ss1.4sqi.net/img/venuepage/icon-minivenuepin-7b35e842ea5a67914c5dd489be9da3d5.png",
iconSize:new L.Point(21,26),iconAnchor:new L.Point(10,21),shadowUrl:null}})),a=new fourSq.newpin.PinIconProvider(a,"dotIcon",{height:21,width:26});this.cache_.dotIcon=a}return this.cache_.dotIcon},orangeDotIconForVenue:function(){if(!this.cache_.dotIcon){var a=new (L.Icon.extend({options:{iconUrl:"https://ss1.4sqi.net/img/swarm/yearInReview/2017/mapDot-1ffd1a2186be6e232604862e117429ab.png",iconSize:new L.Point(8,8),iconAnchor:new L.Point(0,0),shadowUrl:null}})),a=new fourSq.newpin.PinIconProvider(a,
"dotIcon",{height:8,width:8});this.cache_.dotIcon=a}return this.cache_.dotIcon},forUser:function(a){a=this.getUserIcon_(a);return new fourSq.newpin.PinIconProvider(a,"userIcon",fourSq.map.LeafletUtil.pointToSize(a.iconSize))},getUserIcon_:function(a){var b=new fourSq.newpin.UserIcon;a&&b.setUser(a);return b}};fourSq.newpin.Tooltip=function(a){};
fourSq.newpin.Tooltip=fourSq.Class.extend({initialize:function(a){this.map_=a.map;this.contents_=$(a.contents);this.latLng_=a.latLng;this.positioner_=a.positioner;this.options_=a.options;this.positioner_.setTooltipSize(this.calculateTooltipElementSize_())},open:function(){if(!this.isOpen_){var a=this.positioner_.calculateOffset();this.tooltip_&&this.map_.removeLayer(this.tooltip_);this.tooltip_=new L.Popup(_.extend({},this.options_,{offset:new L.Point(a.x,a.y)}));this.tooltip_.setContent(this.contents_.get(0));
this.tooltip_.setLatLng(fourSq.api.models.companion.geo.LatLngUtil.toLeaflet(this.latLng_));this.map_.addLayer(this.tooltip_);var b=0<a.y?"below":"above",c;0<a.x?c="right":0>a.x&&(c="left");this.removeClass("above below left right");this.addClass(b);c&&this.addClass(c);this.options_.clickTarget&&this.contents_.click(fourSq.bind(function(){fourSq.util.redirect(this.options_.clickTarget)},this));this.isOpen_=!0}},close:function(){this.tooltip_&&this.map_.removeLayer(this.tooltip_);this.isOpen_=!1},
calculateTooltipElementSize_:function(){var a=$(this.contents_);$(fourSq.map.LeafletUtil.getContainer(this.map_)).append(a);var b={width:a.outerWidth(),height:a.outerHeight()};a.detach();return b},addClass:function(a){$(this.contentWrapper_()).addClass(a)},removeClass:function(a){$(this.contentWrapper_()).removeClass(a)},contentWrapper_:function(){var a=fourSq.map.LeafletUtil.getPopupContentNode(this.tooltip_);return $(a).children().get(0)}});fourSq.newpin.TooltipPositioner=function(a,b){};fourSq.newpin.TooltipPositioner=fourSq.Class.extend({calculateOffset:fourSq.abstractMethod,setTooltipSize:function(a){}});fourSq.newpin.CenteredAboveBelowTooltipPositioner=function(a){};
fourSq.newpin.CenteredAboveBelowTooltipPositioner=fourSq.newpin.TooltipPositioner.extend({initialize:function(a){this.map_=a.map;this.latLng_=a.latLng;this.buffer_=a.buffer;this.pinSize_=a.pinSize;this.tooltipSize_=a.tooltipSize||{width:0,height:0}},calculateOffset:function(){var a={},b=-this.pinSize_.height-this.buffer_,c=this.tooltipSize_.height+4+this.buffer_,d=b-this.tooltipSize_.height-2*this.buffer_+fourSq.map.LeafletUtil.latLngToContainerPoint(this.map_,this.latLng_).y;a.y=0<d?b:c;a.x=0;0<=
fourSq.map.LeafletUtil.latLngToContainerPoint(this.map_,this.latLng_).x+this.tooltipSize_.width/2-$(fourSq.map.LeafletUtil.getContainer(this.map_)).width()+this.buffer_&&(a.x=-(this.tooltipSize_.width/2)+this.pinSize_.width/2+this.buffer_);0>=fourSq.map.LeafletUtil.latLngToContainerPoint(this.map_,this.latLng_).x-this.tooltipSize_.width/2-this.buffer_&&(a.x=this.tooltipSize_.width/2-this.pinSize_.width/2-this.buffer_);return a},setTooltipSize:function(a){this.tooltipSize_=a}});fourSq.newpin.SmallMapTooltipPositioner=function(a){};
fourSq.newpin.SmallMapTooltipPositioner=fourSq.newpin.TooltipPositioner.extend({initialize:function(a){this.map_=a.map;this.latLng_=a.latLng;this.pinSize_=a.pinSize;this.tooltipSize_={width:0,height:0};fourSq.newpin.SmallMapTooltipPositioner.__super__.initialize.call(this,a)},calculateOffset:function(){return{x:this.calcHorizontalOffset_(),y:this.calcVerticalOffset_()}},calcVerticalOffset_:function(){var a=-this.pinSize_.height-2,b=this.tooltipSize_.height+2;return 0>-a+this.tooltipSize_.height+2-
fourSq.map.LeafletUtil.latLngToContainerPoint(this.map_,this.latLng_).y?a:b},calcHorizontalOffset_:function(){var a=this.map_.getSize().x/2,b=a-fourSq.map.LeafletUtil.latLngToContainerPoint(this.map_,this.latLng_).x,a=Math.abs(b)+this.tooltipSize_.width/2+5-a;return 0>a?0:0<b?a:-a},setTooltipSize:function(a){this.tooltipSize_=a}});window.L&&(fourSq.newpin.UserIcon=L.Icon.extend({initialize:function(){this.iconSize=new L.Point(40,53);this.user_=fourSq.config.user.USER_PROFILE},setUser:function(a){this.user_=a;return this},iconSize:new L.Point(40,53),getAvatarEl:function(){var a;this.user_?a=$(helpers.user.xsmallImage({photo:this.user_.photo})):(a=helpers.user.blankBoyUrl(),a=$("\x3cimg\x3e").attr("src",a).attr("alt",""));return a.get(0)},createIcon:function(){var a=document.createElement("div");a.className="leaflet-marker-icon userIcon";
var b=document.createElement("img");b.src=helpers.pin.pinWhiteTransparent();b.style.position="absolute";b.style.left="-20px";b.style.top="-43px";var c=this.getAvatarEl();c.style.position="absolute";c.style.left="-16px";c.style.top="-39px";c.style.width="32px";c.style.height="32px";a.appendChild(c);a.appendChild(b);return a}}));fourSq.newpin.UserPin=function(a,b){};fourSq.newpin.UserPin=fourSq.newpin.Pin.extend({setLatLng:function(a){this.pinMarker_.setLatLng(fourSq.api.models.companion.geo.LatLngUtil.toLeaflet(a))}});
fourSq.views.DomFairy=function(a,b){};fourSq.views.DomFairy=fourSq.ui.View.extend({name:"",selector:"",handleElement:fourSq.abstractMethod,resprinkle:function(){_($(this.selector,this.el)).each(this.magic_,this);return this},magic_:function(a){var b=$(a).data("fairies");if(fourSq.isUndefinedOrNull(b)||-1==b.indexOf(" "+this.name))this.handleElement(a),$(a).data("fairies",(fourSq.isDefinedAndNotNull(b)?b:"")+" "+this.name)}});fourSq.ui.RetinaFairy=function(a,b){};fourSq.ui.RetinaFairy=fourSq.views.DomFairy.extend({name:"retina",selector:"img[data-retina-url]",handleElement:function(a){var b=$(a);a=2*b.width();var c=2*b.height(),d=new Image(a,c);d.onload=function(){b.prop("src",d.src)};d.src=b.data("retina-url")}});fourSq.views.TimestampFairy=function(a){};
fourSq.views.TimestampFairy=fourSq.views.DomFairy.extend({initialize:function(a){this.frequency_=1E3*(fourSq.isDefinedAndNotNull(a.frequencySeconds)?a.frequencySeconds:30);this.targets_=[];setTimeout(fourSq.bind(this.tick_,this),this.frequency_)},name:"magic-timestamp",selector:".timestamp.autoupdate",handleElement:function(a){var b=$(a).data("created-at");fourSq.isDefinedAndNotNull(a)&&fourSq.isDefinedAndNotNull(b)&&_.isNumber(b)&&this.targets_.push({target:a,createdAt:b})},tick_:function(){_.each(this.targets_,
this.tickTarget_);setTimeout(fourSq.bind(this.tick_,this),this.frequency_)},tickTarget_:function(a){$(a.target).text(helpers.util.createdAtSmartDate({createdAt:a.createdAt}))}});Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d?this:a,b.concat(Array.prototype.slice.call(arguments)))};this.prototype&&(d.prototype=this.prototype);e.prototype=new d;return e});(function(){fourSq.layoutUtil={flowColumns:function(a,b,c){for(var d=Array(c),e=0;e<c;e++)d[e]=[];for(var f=Array(c),e=0;e<c;e++)f[e]=0;var g=0;b.each(function(a){g=Math.max($(this).outerHeight(!0),g)});var h=Math.round(g/3);b.each(function(a){$(this).height(function(){var a=$(this).outerHeight(!0)-$(this).height();return Math.min(Math.ceil($(this).outerHeight(!0)/h),3)*h-a});a=Math.max($.inArray(Math.min.apply(null,f),f),0);d[a].push($(this));$(this).css({"float":"none",position:"absolute",left:$(this).outerWidth(!0)*
a+"px",top:f[a]});f[a]+=$(this).outerHeight(!0)});a.css("height",Math.max.apply(null,f))}}})();fourSq.api.ajax=function(a){fourSq.abstractMethod()};fourSq.api.setAjaxHandler=function(a){fourSq.api.ajax=a};fourSq.api.logger_=null;fourSq.api.getLogger=function(){fourSq.isUndefinedOrNull(fourSq.api.logger_)&&(fourSq.api.logger_=fourSq.debug.getLogger("api"));return fourSq.api.logger_};
fourSq.api.getSessionIdToken=function(){if(!fourSq.api.getSessionIdToken.initialized_){fourSq.api.getSessionIdToken.initialized_=!0;var a=$.cookie("bbhive");fourSq.isDefinedAndNotNull(a)&&(a=a.replace(/((^\")|(\"$))/g,"").split("::")[0]);fourSq.api.getSessionIdToken.token_=a}return fourSq.api.getSessionIdToken.token_};fourSq.api.url=function(a,b){return(b||fourSq.config.api.API_BASE)+a};fourSq.api.requestId=function(a){return a.data.meta.requestId};
fourSq.api.services.rawBundleSuccess_=function(a,b,c){return{data:a,textStatus:b,jqXHR:c}};fourSq.api.services.rawBundleError_=function(a,b,c){return{jqXHR:a,textStatus:b,errorThrown:c}};fourSq.api.services.debugTraceHandlers_=[];fourSq.api.services.addDebugTraceHandler=function(a){fourSq.api.services.debugTraceHandlers_.push(a)};fourSq.api.services.handleDebugTrace_=function(a){_(fourSq.api.services.debugTraceHandlers_).each(function(b){b(a)})};
fourSq.api.services.wrapOnSuccess_=function(a,b,c){if(b)return c=c||function(){},function(d,e,f){fourSq.isDefinedAndNotNull(d.debugtrace)&&fourSq.api.services.handleDebugTrace_(d.debugtrace);200==d.meta.code?(fourSq.api.getLogger().debug("success"),b(a(d.response),fourSq.api.services.rawBundleSuccess_(d,e,f))):(fourSq.api.getLogger().error("non 200 meta code on api response",d),c(d.meta,fourSq.api.services.rawBundleSuccess_(d,e,f)))}};
fourSq.api.services.wrapOnError_=function(a){if(a)return function(b,c,d){var e=null;try{fourSq.api.getLogger().error("error on xhr",[b.responseText]),e=JSON.parse(b.responseText)}catch(f){}if(e&&e.meta){var g=e.meta,h=g.validationUrl;if(423===g.code&&h){window.location.href=fourSq.util.appendParams(h,{"continue":window.location.href});return}}a({code:c,response:e},fourSq.api.services.rawBundleError_(b,c,d))}};
fourSq.api.services.foursquareService_=function(a,b,c){b=_.extend({m:"foursquare"},b);return fourSq.api.services.service_(a,b,c)};fourSq.api.services.foursquareUploadFile_=function(a,b,c){return fourSq.api.services.uploadFile_(a,b,c,{m:"foursquare"})};fourSq.api.services.service_=function(a,b,c){c={error:c.error||function(){},success:c.success||function(){},type:c.type||"GET"};b=fourSq.api.services.getCommonParams_(b);c.url=a;c.data=b;return fourSq.api.ajax(c)};
fourSq.api.services.uploadFile_=function(a,b,c,d){c={error:c.error||function(){},success:c.success||function(){},type:"POST"};var e=fourSq.api.services.getCommonParams_(d);if(void 0===window.FormData)fourSq.debug.error("Tried to upload a photo on an unsupported browser");else{var f=new FormData;_.each(_.keys(e),function(a){f.append(a,e[a])});f.append("file",b);c.url=a;c.data=f;c.processData=!1;c.contentType=!1;return fourSq.api.ajax(c)}};
fourSq.api.services.getCommonParams_=function(a){a=a||{};a=_.extend({locale:fourSq.i18n.languagePref(),"explicit-lang":fourSq.config.api.EXPLICIT_LANG,v:fourSq.config.api.CLIENT_VERSION},a);var b=fourSq.config.api.REFERRAL_ID;fourSq.isDefinedAndNotNull(b)&&(a=_.extend(a,{referralId:b}));fourSq.config.debugLevel()==fourSq.debug.Level.DEBUG&&(a.debug="backtrace");fourSq.api.getSessionIdToken()&&(a.wsid=fourSq.api.getSessionIdToken());a.oauth_token=a.oauth_token||fourSq.config.api.API_TOKEN;return a};fourSq.api.net.IFrameBasedAjax=function(){var a={xhrCallback:null,iframeLoading:!1,loadQueue:[],addLoadCallback:function(b){a.isLoaded()?b():a.loadQueue.push(b)},runLoadCallbacks:function(){_.each(a.loadQueue,function(a){a()})},isLoaded:function(){return null!=a.xhrCallback},buildIframe:function(){if(!a.iframeLoading){a.iframeLoading=!0;var b=document.createElement("DIV"),c=fourSq.config.api.API_IFRAME+"?parent\x3d"+encodeURIComponent(window.location.href);b.innerHTML='\x3ciframe onload\x3d"fourSq._tempIframeCallback()" id\x3d"xd_iframe" tabindex\x3d"-1" role\x3d"presentation" style\x3d"position:absolute;top:-9999px;" src\x3d"'+
c+'"\x3e\x3c/iframe\x3e';var d=b.firstChild;fourSq._tempIframeCallback=function(){delete fourSq._tempIframeCallback;a.xhrCallback=!window.XMLHttpRequest||"file:"===window.location.protocol&&window.ActiveXObject?function(){try{return new d.contentWindow.ActiveXObject("Microsoft.XMLHTTP")}catch(a){}}:function(){return new d.contentWindow.XMLHttpRequest};a.runLoadCallbacks()};document.body.appendChild(d)}}};return function(b){a.isLoaded()?(b.xhr=a.xhrCallback,b.crossDomain=!1,b.dataType="json",fourSq.api.getLogger().debug((b.type||
"GET")+" request to "+b.url,b),$.ajax(b)):(a.addLoadCallback(function(){fourSq.api.ajax(b)}),fourSq.onPageReady(function(){a.buildIframe()}))}}();fourSq.api.setAjaxHandler(fourSq.api.net.IFrameBasedAjax);fourSq.debug.Level={DEBUG:500,INFO:300,ERROR:100,OFF:0};fourSq.debug.LogHandler=function(){};fourSq.debug.LogHandler.prototype.log=function(a){};fourSq.debug.Logger=function(a,b){};fourSq.debug.Logger.prototype.addHandler=function(a){};fourSq.debug.Logger.prototype.clearHandlers=function(){};fourSq.debug.Logger.prototype.removeHandlers=function(a){};fourSq.debug.Logger.prototype.handlers=function(){};fourSq.debug.Logger.prototype.debug=function(a,b,c){};
fourSq.debug.Logger.prototype.error=function(a,b,c){};fourSq.debug.Logger.prototype.softException=function(a,b,c,d,e){};fourSq.debug.Logger.prototype.info=function(a,b,c){};fourSq.debug.NoOpLogger=function(a,b){};fourSq.debug.NoOpLogger.prototype.addHandler=function(a){};fourSq.debug.NoOpLogger.prototype.clearHandlers=function(){};fourSq.debug.NoOpLogger.prototype.removeHandlers=function(a){};fourSq.debug.NoOpLogger.prototype.handlers=function(){};
fourSq.debug.NoOpLogger.prototype.debug=function(a,b,c){};fourSq.debug.NoOpLogger.prototype.error=function(a,b,c){};fourSq.debug.NoOpLogger.prototype.softException=function(a,b,c,d,e){};fourSq.debug.NoOpLogger.prototype.info=function(a,b,c){};fourSq.debug.getLogger=function(a){return fourSq.debug.getLoggerImpl_?fourSq.debug.getLoggerImpl_(a):new fourSq.debug.NoOpLogger("",[])};fourSq.debug.addHandler=function(a){fourSq.debug.getLogger().addHandler(a)};
fourSq.debug.debug=function(a,b,c){fourSq.debug.getLogger().debug(a,b,c)};fourSq.debug.error=function(a,b,c){fourSq.debug.getLogger().error(a,b,c)};fourSq.debug.info=function(a,b,c){fourSq.debug.getLogger().info(a,b,c)};fourSq.debug.softException=function(a,b,c,d,e){fourSq.debug.getLogger().softException(a,b,c,d,e)};fourSq.debug.BaseLogger=function(a,b){this.name_=a;this.handlers_=b};
fourSq.debug.BaseLogger.prototype={addHandler:function(a){this.handlers_.push(a)},clearHandlers:function(){this.handlers_=[]},removeHandlers:function(a){for(var b=[],c=0,d;d=this.handlers_[c];c++)a(d)||b.push(d);this.handlers_=b},handlers:function(){return this.handlers_},debug:function(a,b,c){this.log_(fourSq.debug.Level.DEBUG,a,b,c)},error:function(a,b,c){this.log_(fourSq.debug.Level.ERROR,a,b,c)},softException:function(a,b,c,d,e){this.log_(fourSq.debug.Level.ERROR,a,b,c);if(fourSq.isDefinedAndNotNull(fourSq.errorreporter)&&
fourSq.isDefinedAndNotNull(fourSq.errorreporter.JsErrorReporter))fourSq.errorreporter.JsErrorReporter.onError(a,d,e)},info:function(a,b,c){this.log_(fourSq.debug.Level.INFO,a,b,c)},log_:function(a,b,c,d){for(var e=0,f;f=this.handlers_[e];e++)f.log({level:a,loggerName:this.name_,msg:b,args:c,argFormatter:d})}};fourSq.debug.loggers_={};
fourSq.debug.getLoggerImpl_=function(a){a=a||"root";var b=fourSq.debug.loggers_[a];if(b)return b;b=new fourSq.debug.BaseLogger(a,[]);return fourSq.debug.loggers_[a]=b};fourSq.debug.reset=function(){fourSq.debug.loggers_={}};fourSq.debug.ConsoleLogHandler=function(a){this.level_=a};
fourSq.debug.ConsoleLogHandler.prototype={log:function(a){if(!(a.level>this.level_)&&window.console){var b=null,b=a.level==fourSq.debug.Level.INFO&&window.console.info?function(a){window.console.info(a)}:a.level==fourSq.debug.Level.ERROR&&window.console.error?function(a){window.console.error(a)}:a.level==fourSq.debug.Level.DEBUG&&window.console.debug?function(a){window.console.debug(a)}:function(a){window.console.log(a)},c=new Date,c=c.toISOString?c.toISOString():c.getTime();b("["+a.loggerName+" "+
c+"] "+a.msg);a.args&&(a.argFormatter?b(a.argFormatter(a.args)):b(a.args))}}};fourSq.debug.FloatingDivLogHandler=function(a){this.level_=a};fourSq.debug.FloatingDivLogHandler.domReadyCacher={domReady:!1,onDomReadyQueue:[],onDomReady:function(){fourSq.debug.FloatingDivLogHandler.domReadyCacher.domReady=!0;_(fourSq.debug.FloatingDivLogHandler.domReadyCacher.onDomReadyQueue).each(function(a){a()});delete fourSq.debug.FloatingDivLogHandler.domReadyCacher.onDomReadyQueue}};
fourSq.debug.FloatingDivLogHandler.prototype={settingsForRecord_:function(a){this.headerDebugCount_=this.headerDebugCount_||$(".debug-count",this.header_);this.headerErrorCount_=this.headerErrorCount_||$(".error-count",this.header_);this.headerInfoCount_=this.headerInfoCount_||$(".info-count",this.header_);return a.level==fourSq.debug.Level.DEBUG?{countNode:this.headerDebugCount_,className:"debug"}:a.level==fourSq.debug.Level.ERROR?{countNode:this.headerErrorCount_,className:"error"}:{countNode:this.headerInfoCount_,
className:"info"}},init_:function(){this.header_=$("#debug-node-header");this.body_=$("#debug-node-msg-container");this.header_.length&&this.body_.length||(this.level_=fourSq.debug.Level.OFF);this.level_>fourSq.debug.Level.OFF&&this.header_.removeClass("hidden");this.inited_=!0},log:function(a){fourSq.debug.FloatingDivLogHandler.domReadyCacher.domReady?this.doLog_(a):this.doQueue_(a)},doQueue_:function(a){fourSq.debug.FloatingDivLogHandler.domReadyCacher.onDomReadyQueue.push(fourSq.curry(this.doLog_,
this,a))},doLog_:function(a){this.inited_||this.init_();if(!(a.level>this.level_)){var b=this.settingsForRecord_(a);b.countNode.text(parseInt(b.countNode.text(),10)+1);var c=null;a.args&&(a.argFormatter?c=a.argFormatter(a.args):(c=[],_.isArray(a.args)?(c=_.map(a.args,function(a){return window.JSON&&window.JSON.stringify?JSON.stringify(a):a}),c=c.join("\x3cbr /\x3e")):c=window.JSON&&window.JSON.stringify?[JSON.stringify(a.args)]:[a.args]));a=$(templates.fourSq.debug.logMessage({className:b.className,
loggerName:a.loggerName,time:new Date,msg:a.msg,args:c}));this.body_.append(a)}}};fourSq.debug.FloatingDivLogHandler.initDebugNode=function(){$(function(){$(document.body).append(templates.fourSq.debug.debugNode());fourSq.debug.FloatingDivLogHandler.domReadyCacher.onDomReady()})};fourSq.debug.Tracer=function(a,b){};fourSq.debug.Tracer=fourSq.EventTarget.extend({paths:function(){return _.map(this.traceNodes_,function(a){return a.name})},initialize:function(){this.traceNodes_=[]},mergeTrace:function(a){this.traceNodes_.push(a);window.setTimeout(fourSq.bind(function(){this.trigger("add",a)},this),700)}},{getInstance:function(){fourSq.debug.Tracer.instance_||(fourSq.debug.Tracer.instance_=new fourSq.debug.Tracer);return fourSq.debug.Tracer.instance_}});fourSq.facebook.getFacebookApi=function(a,b){fourSq.isDefinedAndNotNull(fourSq.facebook.apiInstance_)?(fourSq.debug.debug("Facebook already initialized, returning instance"),a(fourSq.facebook.apiInstance_)):fourSq.isDefinedAndNotNull(fourSq.facebook.facebookInitFailed_)?(fourSq.debug.debug("Facebook initialization previously failed, calling errback"),b&&b()):fourSq.isDefinedAndNotNull(fourSq.facebook.facebookInitInProgressCallbacks_)?(fourSq.debug.debug("Facebook initialization mid-flight, adding to queue"),
fourSq.facebook.facebookInitInProgressCallbacks_.push({success:a,error:b})):(fourSq.debug.debug("Facebook first-time init"),fourSq.facebook.facebookInitInProgressCallbacks_=[{success:a,error:b}],window.fbAsyncInit=function(){var a=new fourSq.facebook.FacebookApi;FB.init({appId:fourSq.config.fb.APP_ID,status:!0,cookie:!0,xfbml:!0,version:a.version});fourSq.facebook.apiInstance_=a;_.each(fourSq.facebook.facebookInitInProgressCallbacks_,function(a){a.success(fourSq.facebook.apiInstance_)});fourSq.facebook.facebookInitInProgressCallbacks_=
null},function(a){fourSq.debug.debug("Appending facebook script tag");var b;if(!a.getElementById("facebook-jssdk")){b=a.createElement("script");b.id="facebook-jssdk";b.async=!0;b.src="//connect.facebook.net/en_US/sdk.js";var e=$('\x3cdiv id\x3d"fb-root"\x3e\x3c/div\x3e');a.body.appendChild(e[0]);e.append(b)}}(document),window.setTimeout(function(){fourSq.isUndefinedOrNull(fourSq.facebook.apiInstance_)?(fourSq.debug.error("Facebook init not called after timeout"),fourSq.facebook.facebookInitFailed_=
!0,_.each(fourSq.facebook.facebookInitInProgressCallbacks_,function(a){a.error&&a.error()}),fourSq.facebook.facebookInitInProgressCallbacks_=null):fourSq.debug.debug("Facebook init appears to have succeeded")},12E4))};fourSq.facebook.FacebookApi=function(){if(fourSq.facebook.apiInstance_)throw Error("Only one instance of me allowed");this.version=window.fourSq.config.fb.API_VERSION};fourSq.facebook.FacebookApi.State={CONNECTED:"connected",NOT_AUTHORIZED:"not_authorized",UNKNOWN:"unknown"};
fourSq.facebook.FacebookApi.prototype.login=function(a){this.loginWithPermissions(fourSq.config.fb.SCOPE,a)};fourSq.facebook.FacebookApi.prototype.loginWithPermissions=function(a,b){FB.login(function(a){b(fourSq.facebook.FacebookApi.statusFromAuthResponse_(a),a)},{scope:a})};fourSq.facebook.FacebookApi.prototype.maybeLogin=function(a){var b=this;this.getLoginStatus(function(c,d){c==fourSq.facebook.FacebookApi.State.CONNECTED?a(c,d):b.login(a)})};
fourSq.facebook.FacebookApi.prototype.getLoginStatus=function(a){FB.getLoginStatus(function(b){a(fourSq.facebook.FacebookApi.statusFromAuthResponse_(b),b)})};fourSq.facebook.FacebookApi.prototype.logout=function(a){this.getLoginStatus(function(b){b==fourSq.facebook.FacebookApi.State.CONNECTED?FB.logout(function(b){a(fourSq.facebook.FacebookApi.statusFromAuthResponse_(b),b)}):a(fourSq.facebook.FacebookApi.State.UNKNOWN,null)})};
fourSq.facebook.FacebookApi.statusFromAuthResponse_=function(a){return fourSq.isDefinedAndNotNull(a)?"connected"===a.status?fourSq.facebook.FacebookApi.State.CONNECTED:"not_authorized"===a.status?fourSq.facebook.FacebookApi.State.NOT_AUTHORIZED:fourSq.facebook.FacebookApi.State.UNKNOWN:fourSq.facebook.FacebookApi.State.UNKNOWN};
fourSq.facebook.FacebookApi.prototype.hasPermissions=function(a,b){FB.api("me/permissions",fourSq.bind(function(c){if("v1.0"===this.version){c=c.data[0];for(var d=0;d<a.length;d++)if(1!=c[a[d]])return b(!1);b(!0)}else{var e=c.data;c=_.some(a,function(a){var b=_.find(e,function(b){return b.permission===a});return void 0===b||"granted"!=b.status});b(!c)}},this))};fourSq.facebook.FacebookApi.prototype.accounts=function(a){FB.api("me/accounts",a)};
fourSq.facebook.FacebookApi.prototype.me=function(a){return this.fetch("me",a)};fourSq.facebook.FacebookApi.prototype.fetch=function(a,b){FB.api(a,b)};fourSq.facebook.initFacebook_=function(a,b,c){fourSq.facebook.getFacebookApi(function(d){fourSq.debug.debug("facebook api initialized");a.click(function(){b.apply(this,[d].concat(c))})},function(){fourSq.debug.error("No facebook setup, not initializing button")})};
fourSq.facebook.baseInitFacebookSignupButton=function(a,b,c,d){0!==a.length&&fourSq.facebook.initFacebook_(a,function(a,b){var g=_.extend({element:fourSq.stats.action.Element.FACEBOOK_SIGNUP},c),h=fourSq.signup.Logging.getRefSource()||"",l=fourSq.signup.Logging.getLandingPage()||"",m=(new fourSq.net.QueryString({query:b})).set("refSource",h).set("landingPage",l).set("facebookVersion",a.version),g=fourSq.stats.Action.build(fourSq.stats.action.Action.CLICK,g);fourSq.stats.logActions(g);fourSq.stats.logExperimentAction("fnwp",
"impression");a.login(function(b){b===fourSq.facebook.FacebookApi.State.CONNECTED&&d(a,m)})},[b])};fourSq.facebook.redirectToFacebookSignup=function(a){fourSq.debug.debug("Redirecting to signup");a="/signup/facebook-signup?"+a.toDisplayString();window.top.location=window.top.location.origin+a};
fourSq.facebook.initFacebookLoginButton=function(a,b,c){0!==a.length&&fourSq.facebook.initFacebook_(a,function(a,b){var f=_.extend({element:fourSq.stats.action.Element.FACEBOOK_LOGIN},c),f=fourSq.stats.Action.build(fourSq.stats.action.Action.CLICK,f);fourSq.stats.logActions(f);a.login(function(a){a===fourSq.facebook.FacebookApi.State.CONNECTED&&(a="/facebook-login"+(b?b:""),window.top.location=a)})},[b])};
fourSq.facebook.loginContinueParams=function(a,b,c){return(new fourSq.net.QueryString).set("continueOnSignup",b.toString()).maybeSet("continue",a).maybeSet("existingUserContinue",c).toDisplayString()};fourSq.facebook.initFacebookLoginWithFormButton=function(a,b){0!==a.length&&0!==b.length&&fourSq.facebook.initFacebook_(a,function(a){a.maybeLogin(function(a){a===fourSq.facebook.FacebookApi.State.CONNECTED&&(fourSq.debug.debug("Submitting login form"),b.submit())})},[])};fourSq.facebook.initFacebookSignupButton=function(a,b,c){fourSq.facebook.baseInitFacebookSignupButton(a,b,c,function(a,b){fourSq.auth.Autologin.disableAutoLogin();a.me(function(a){if(a.email)fourSq.facebook.redirectToFacebookSignup(b);else{var c,d,l=function(){if(fourSq.isDefined(c)&&fourSq.isDefined(d)){var l=c,q=d;if(fourSq.isNull(q))fourSq.ui.Notifier.getInstance().info("Facebook signup failed");else{b.set("preSignupToken",q.preSignupToken);var s=q.experiments;l?fourSq.facebook.redirectToFacebookSignup(b):
!1===l&&fourSq.isDefined(q)&&(_.contains(s,"webSignup-hideEmailPrompt")?fourSq.facebook.redirectToFacebookSignup(b):(l=_.contains(s,"webSignup-skippableEmailPrompt"),fourSq.signup.inlineSignupDialogFactory.createAndShow({modalScreen:fourSq.signup.InlineSignupDialog.Screens.EMAIL_PROMPT,trigger:fourSq.signup.Trigger.FACEBOOK_SIGNUP_FAILURE,params:b,fbUser:a,allowEmailPromptSkip:l})))}}};fourSq.api.services.User.lookup({fbid:a.id},function(){c=!0;l()},function(){c=!1;l()});fourSq.api.services.Settings.presignup(function(a){d=
a;l()},function(){d=null;l()})}})})};fourSq.forms.Validator=function(a){};
fourSq.forms.Validator=fourSq.Class.extend({initialize:function(a){this.$el=$(a.el);0===this.$el.length?fourSq.debug.error("Validator is missing an element"):(a.opt_errorEl&&(this.$errorEl=$(a.opt_errorEl)),this.errorMsg=a.opt_errorMsg)},test:function(){return!0},validate:function(){this.$el.removeClass("hasError");this.errorMsg&&this.$errorEl?this.$errorEl.empty():this.$errorEl&&this.$errorEl.hide();if(this.test())return!0;fourSq.debug.info("Form validation failed: "+this.errorMsg);fourSq.isDefinedAndNotNull(this.errorMsg)&&
this.$errorEl?(0<this.$errorEl.length&&this.$errorEl.text(this.errorMsg),this.isVisible_(this.$errorEl)&&0!==this.$errorEl.length||fourSq.ui.Notifier.getInstance().error(this.errorMsg)):this.$errorEl&&this.$errorEl.show();this.$el.addClass("hasError");return!1},isVisible_:function(a){var b=!0;$(window).scrollTop()>a.offset().top&&(b=!1);a.offset().top+a.height()>$(window).height()&&(b=!1);return b}});fourSq.forms.StringValidator=function(a){};
fourSq.forms.StringValidator=fourSq.forms.Validator.extend({initialize:function(a){fourSq.forms.StringValidator.__super__.initialize.call(this,a);this.string_=a.opt_string||this.$el.val()}});fourSq.forms.MaxLengthValidator=function(a){};fourSq.forms.MaxLengthValidator=fourSq.forms.StringValidator.extend({initialize:function(a){fourSq.forms.MaxLengthValidator.__super__.initialize.call(this,a);this.maxLength_=a.maxLength},test:function(){return this.string_.length<=this.maxLength_}});
fourSq.forms.MinLengthValidator=function(a){};fourSq.forms.MinLengthValidator=fourSq.forms.StringValidator.extend({initialize:function(a){fourSq.forms.MinLengthValidator.__super__.initialize.call(this,a);this.minLength_=a.min_length},test:function(){return this.string_.length>=this.minLength_}});fourSq.forms.TimeInputValidator=function(a){};
fourSq.forms.TimeInputValidator=fourSq.forms.Validator.extend({initialize:function(a){fourSq.forms.TimeInputValidator.__super__.initialize.call(this,{el:a.timeInput.textInput,opt_errorMsg:a.opt_errorMsg,opt_errorEl:a.opt_errorEl});this.timeInput_=a.timeInput},test:function(){return this.timeInput_.validate()}});fourSq.forms.AdHocValidator=function(a){};
fourSq.forms.AdHocValidator=fourSq.forms.Validator.extend({initialize:function(a){fourSq.forms.AdHocValidator.__super__.initialize.call(this,{el:a.el,opt_errorMsg:a.opt_errorMsg,opt_errorEl:a.opt_errorEl});this.adHocTest_=a.test},test:function(){return this.adHocTest_(this.$el.val())}});fourSq.net.Updater=function(a){};
fourSq.net.Updater=fourSq.EventTarget.extend({initialize:function(a){if(fourSq.isUndefinedOrNull(a.endpoint))throw Error("A endpoint is required for the fourSq.net.Updater!");this.endpoint=a.endpoint;this.counter=function(a){return a.length};fourSq.isDefinedAndNotNull(a.countFunction)&&(this.counter=a.countFunction);this.params=_.extend({},a.params);this.updateTitle=!0===a.updateTitle;this.baseFrequency_=fourSq.isDefinedAndNotNull(a.baseFrequency)?a.baseFrequency:30;this.attempts=this.unreadCount=
0;this.pageTitle=document.title;this.continueUpdating=!1},startUpdating:function(){this.continueUpdating||(this.continueUpdating=!0,setTimeout(fourSq.bind(this.checkForUpdates_,this),this.getTimeout_()))},stopUpdating:function(){this.continueUpdating=!1},reset:function(){this.unreadCount=this.attempts=0;document.title=this.pageTitle},setParams:function(a){_.extend(this.params,a)},checkForUpdates_:function(){this.trigger(fourSq.net.Updater.Events.CALLING,parseInt((new Date).getTime()/1E3,10));this.endpoint(fourSq.bind(function(a){var b=
this.counter(a);b>this.unreadCount&&(this.unreadCount=b,this.updatePageTitle_());this.trigger(fourSq.net.Updater.Events.UPDATED,b,a)},this),function(){},this.params);this.attempts++;this.continueUpdating&&setTimeout(fourSq.bind(this.checkForUpdates_,this),this.getTimeout_())},updatePageTitle_:function(){this.updateTitle&&0<this.unreadCount&&(document.title="("+this.unreadCount+") "+this.pageTitle)},getTimeout_:function(){var a=0,a=5>=this.attempts?0:8>=this.attempts?1:11>=this.attempts?2:3;return this.baseFrequency_*
Math.pow(2,a)*1E3}},{Events:{CALLING:"calling",UPDATED:"updated"}});fourSq.api.caches.CacheEntry=function(a,b){};fourSq.api.caches.CacheEntry=fourSq.EventTarget.extend({initialize:function(a,b){this.id=a;this.model=b},set:function(a,b){this.model=a;b||this.trigger(fourSq.api.caches.CacheEntry.Events.CHANGE)},mutate:function(a,b){a(this.model);b||this.trigger(fourSq.api.caches.CacheEntry.Events.CHANGE)}},{Events:{CHANGE:"change"}});fourSq.api.caches.VenueCacheEntry=function(a,b){};
fourSq.api.caches.VenueCacheEntry=fourSq.api.caches.CacheEntry.extend({initialize:function(a,b){this.id=a;this.model=b},set:function(a,b){return fourSq.api.caches.VenueCacheEntry.__super__.set.call(this,a,b)},mutate:function(a,b){fourSq.api.caches.VenueCacheEntry.__super__.mutate.call(this,a,b)}});fourSq.api.caches.TipCacheEntry=function(a,b){};
fourSq.api.caches.TipCacheEntry=fourSq.api.caches.CacheEntry.extend({initialize:function(a,b){this.id=a;this.model=b},set:function(a,b){return fourSq.api.caches.TipCacheEntry.__super__.set.call(this,a,b)},mutate:function(a,b){fourSq.api.caches.TipCacheEntry.__super__.mutate.call(this,a,b)}});fourSq.api.caches.Cache=function(a,b){};
fourSq.api.caches.Cache=fourSq.Class.extend({storage_:{},wrapEntry_:function(a,b){return new fourSq.api.caches.CacheEntry(a,b)},get:function(a){a=this.storage_[a];return fourSq.isDefinedAndNotNull(a)?a:void 0},prime:function(a,b){var c=this.get(a);return fourSq.isDefinedAndNotNull(c)?c:this.set(a,b)},set:function(a,b){var c=this.wrapEntry_(a,b);return this.storage_[a]=c},upsert:function(a,b){var c=this.get(a);if(fourSq.isDefinedAndNotNull(c)){var d=_.extend({},c.model,b);c.set(d);return c}return this.set(a,
b)},contains:function(a){return fourSq.isDefinedAndNotNull(this.get(a))}});fourSq.api.caches.VenueCache=function(a,b){};
fourSq.api.caches.VenueCache=fourSq.api.caches.Cache.extend({wrapEntry_:function(a,b){return new fourSq.api.caches.VenueCacheEntry(a,b)},get:function(a){a=fourSq.api.caches.VenueCache.__super__.get.call(this,a);return fourSq.isDefinedAndNotNull(a)?a:void 0},prime:function(a,b){return fourSq.api.caches.VenueCache.__super__.prime.call(this,a,b)},set:function(a,b){return fourSq.api.caches.VenueCache.__super__.set.call(this,a,b)},upsert:function(a,b){return fourSq.api.caches.VenueCache.__super__.upsert.call(this,
a,b)}});fourSq.api.caches.TipCache=function(a,b){};
fourSq.api.caches.TipCache=fourSq.api.caches.Cache.extend({wrapEntry_:function(a,b){return new fourSq.api.caches.TipCacheEntry(a,b)},get:function(a){a=fourSq.api.caches.TipCache.__super__.get.call(this,a);return fourSq.isDefinedAndNotNull(a)?a:void 0},prime:function(a,b){return fourSq.api.caches.TipCache.__super__.prime.call(this,a,b)},set:function(a,b){return fourSq.api.caches.TipCache.__super__.set.call(this,a,b)},upsert:function(a,b){return fourSq.api.caches.TipCache.__super__.upsert.call(this,a,
b)}});fourSq.caches=fourSq.caches||{};fourSq.caches.venue=new fourSq.api.caches.VenueCache;fourSq.caches.tip=new fourSq.api.caches.TipCache;fourSq.api.collections.VenueHistory=function(){this.venues_=[]};fourSq.api.collections.VenueHistory.prototype={at:function(a){return this.venues_[a]},load:function(a,b){var c=this;fourSq.api.services.User.venuehistory("self",function(a){c.venues_=_(a).map(function(a){return a})},function(a,b){fourSq.debug.error("unable to fetch venue history",[a,b])},a+","+b,!0)}};fourSq.api.controllers.FeedbackController=function(a){};
fourSq.api.controllers.FeedbackController=fourSq.EventTarget.extend({initialize:function(a){this.targetId_=a},targetType:"UNKNOWN",id:function(){return this.targetId_},loggingId:fourSq.emptyFunction,addComment:function(a,b){fourSq.debug.error("FeedbackController tried to add a comment to a "+this.targetType);this.trigger(fourSq.api.controllers.FeedbackController.Events.COMMENT_NOT_ADDED,this.id())},deleteComment:function(a){fourSq.debug.error("FeedbackController tried to delete a comment from a "+this.targetType);
this.trigger(fourSq.api.controllers.FeedbackController.Events.COMMENT_NOT_DELETED,a)},moreComments:function(a,b){fourSq.debug.error("FeedbackController tried to load more comments for a "+this.targetType);this.trigger(fourSq.api.controllers.FeedbackController.Events.COMMENTS_NOT_LOADED)},getDetails:function(){fourSq.debug.error("FeedbackController tried to load details of a "+this.targetType);this.trigger(fourSq.api.controllers.FeedbackController.Events.DETAILS_NOT_LOADED)},setLike:function(a){fourSq.debug.error("FeedbackController tried to like a "+
this.targetType);this.trigger(fourSq.api.controllers.FeedbackController.Events.LIKE_FAILURE,!a)},setDislike:function(a){fourSq.debug.error("FeedbackController tried to dislike a "+this.targetType);this.trigger(fourSq.api.controllers.FeedbackController.Events.DISLIKE_FAILURE,!a)},setOk:function(a){fourSq.debug.error("FeedbackController tried to ok a "+this.targetType);this.trigger(fourSq.api.controllers.FeedbackController.Events.OK_FAILURE,!a)},setTodoSave:function(a,b){fourSq.debug.error("FeedbackController tried to save a "+
this.targetType);this.trigger(fourSq.api.controllers.FeedbackController.Events.TODO_FAILURE,!a)},serializedLikeAction:function(){},serializedDislikeAction:function(){},serializedOkAction:function(){},getLoggedOutLikePrompt:function(){return templates.fourSq.ui.signupmodal.defaultSignupPromptBody()}},{TYPES:{venue:"venue",checkin:"checkin",tip:"tip",activity:"activity",deliverable:{update:"pageUpdate",special:"special"},page:"page"},Events:{LIKE_SET:"likesuccess",LIKE_FAILURE:"likefailure",DISLIKE_SET:"dislikesuccess",
DISLIKE_FAILURE:"dislikefailure",OK_SET:"oksuccess",OK_FAILURE:"okfailure",TODO_SET:"todosuccess",TODO_FAILURE:"todofailure",COMMENT_ADDED:"commentadded",COMMENT_NOT_ADDED:"commentaddfailure",COMMENT_DELETED:"commentdeleted",COMMENT_NOT_DELETED:"commentdeletefailure",COMMENTS_LOADED:"gotcomments",COMMENTS_NOT_LOADED:"gotcommentsfailure",DETAILS_LOADED:"gotdetails",DETAILS_NOT_LOADED:"gotdetailsfailure",FOLLOWED:"followsuccess",NOT_FOLLOWED:"followfailure"}});fourSq.api.controllers.ActivityFeedbackController=function(a){};
fourSq.api.controllers.ActivityFeedbackController=fourSq.api.controllers.FeedbackController.extend({initialize:function(a){fourSq.api.controllers.ActivityFeedbackController.__super__.initialize.call(this,a)},targetType:fourSq.api.controllers.FeedbackController.TYPES.activity,getDetails:function(){fourSq.api.services.StreamActivity.detail(this.id(),fourSq.curry(this.trigger,this,fourSq.api.controllers.FeedbackController.Events.DETAILS_LOADED),fourSq.curry(this.trigger,this,fourSq.api.controllers.FeedbackController.Events.DETAILS_NOT_LOADED))},
setLike:function(a){var b=fourSq.curry(this.trigger,this,fourSq.api.controllers.FeedbackController.Events.LIKE_SET,a),c=fourSq.curry(this.trigger,this,fourSq.api.controllers.FeedbackController.Events.LIKE_FAILURE,!a);fourSq.api.services.StreamActivity.like(this.id(),a,b,c)}});fourSq.api.controllers.CheckinFeedbackController=function(a,b){};
fourSq.api.controllers.CheckinFeedbackController=fourSq.api.controllers.FeedbackController.extend({initialize:function(a,b){fourSq.api.controllers.CheckinFeedbackController.__super__.initialize.call(this,a);this.signature_=b},targetType:fourSq.api.controllers.FeedbackController.TYPES.checkin,loggingId:function(){return fourSq.api.models.companion.log.Oids.build({checkinId:this.id()})},addComment:function(a,b){fourSq.api.services.Checkin.addComment(this.id(),a,b,fourSq.curry(this.trigger,this,fourSq.api.controllers.FeedbackController.Events.COMMENT_ADDED,
this.id()),fourSq.curry(this.trigger,this,fourSq.api.controllers.FeedbackController.Events.COMMENT_NOT_ADDED,this.id()))},deleteComment:function(a){fourSq.api.services.Checkin.deleteComment(this.id(),a,fourSq.curry(this.trigger,this,fourSq.api.controllers.FeedbackController.Events.COMMENT_DELETED,a),fourSq.curry(this.trigger,this,fourSq.api.controllers.FeedbackController.Events.COMMENT_NOT_DELETED,a))},moreComments:function(a,b){fourSq.api.services.Checkin.comments(this.id(),a,b,fourSq.curry(this.trigger,
this,fourSq.api.controllers.FeedbackController.Events.COMMENTS_LOADED),fourSq.curry(this.trigger,this,fourSq.api.controllers.FeedbackController.Events.COMMENTS_NOT_LOADED))},getDetails:function(){fourSq.api.services.Checkin.detail(this.id(),fourSq.curry(this.trigger,this,fourSq.api.controllers.FeedbackController.Events.DETAILS_LOADED),fourSq.curry(this.trigger,this,fourSq.api.controllers.FeedbackController.Events.DETAILS_NOT_LOADED))},setLike:function(a){var b=fourSq.curry(this.trigger,this,fourSq.api.controllers.FeedbackController.Events.LIKE_SET,
a),c=fourSq.curry(this.trigger,this,fourSq.api.controllers.FeedbackController.Events.LIKE_FAILURE,!a),d=fourSq.isDefinedAndNotNull(this.signature_)?{signature:this.signature_}:void 0;fourSq.api.services.Checkin.like(this.id(),a,d,b,c)}});fourSq.api.controllers.PageFeedbackController=function(a){};
fourSq.api.controllers.PageFeedbackController=fourSq.api.controllers.FeedbackController.extend({initialize:function(a){fourSq.api.controllers.PageFeedbackController.__super__.initialize.call(this,a)},targetType:fourSq.api.controllers.FeedbackController.TYPES.page,setLike:function(a){var b=fourSq.curry(this.trigger,this,fourSq.api.controllers.FeedbackController.Events.LIKE_SET,a),c=fourSq.curry(this.trigger,this,fourSq.api.controllers.FeedbackController.Events.LIKE_FAILURE,!a);a?fourSq.api.services.User.request({id:this.id()},
b,c):fourSq.api.services.User.unfriend({id:this.id()},b,c)},serializedLikeAction:function(){return fourSq.postLoginAction.LikePage.buildAction(this.id())},getLoggedOutLikePrompt:function(){return templates.fourSq.ui.signupmodal.pageLikeSignupBody()}});fourSq.api.controllers.PageUpdateFeedbackController=function(a){};
fourSq.api.controllers.PageUpdateFeedbackController=fourSq.api.controllers.FeedbackController.extend({initialize:function(a){fourSq.api.controllers.PageUpdateFeedbackController.__super__.initialize.call(this,a)},targetType:fourSq.api.controllers.FeedbackController.TYPES.deliverable.update,addComment:function(a,b){fourSq.api.services.PageUpdate.addComment(this.id(),a,b,fourSq.curry(this.trigger,this,fourSq.api.controllers.FeedbackController.Events.COMMENT_ADDED,this.id()),fourSq.curry(this.trigger,
this,fourSq.api.controllers.FeedbackController.Events.COMMENT_NOT_ADDED,this.id()))},deleteComment:function(a){fourSq.api.services.PageUpdate.deleteComment(this.id(),a,fourSq.curry(this.trigger,this,fourSq.api.controllers.FeedbackController.Events.COMMENT_DELETED,a),fourSq.curry(this.trigger,this,fourSq.api.controllers.FeedbackController.Events.COMMENT_NOT_DELETED,a))},moreComments:function(a,b){fourSq.api.services.PageUpdate.comments(this.id(),a,b,fourSq.curry(this.trigger,this,fourSq.api.controllers.FeedbackController.Events.COMMENTS_LOADED),
fourSq.curry(this.trigger,this,fourSq.api.controllers.FeedbackController.Events.COMMENTS_NOT_LOADED))},getDetails:function(){fourSq.api.services.PageUpdate.detail({id:this.id()},fourSq.curry(this.trigger,this,fourSq.api.controllers.FeedbackController.Events.DETAILS_LOADED),fourSq.curry(this.trigger,this,fourSq.api.controllers.FeedbackController.Events.DETAILS_NOT_LOADED))},setLike:function(a){var b=fourSq.curry(this.trigger,this,fourSq.api.controllers.FeedbackController.Events.LIKE_SET,a),c=fourSq.curry(this.trigger,
this,fourSq.api.controllers.FeedbackController.Events.LIKE_FAILURE,!a);fourSq.api.services.PageUpdate.like(this.id(),a,b,c)}});fourSq.api.controllers.SpecialFeedbackController=function(a){};
fourSq.api.controllers.SpecialFeedbackController=fourSq.api.controllers.FeedbackController.extend({initialize:function(a){fourSq.api.controllers.SpecialFeedbackController.__super__.initialize.call(this,a)},targetType:fourSq.api.controllers.FeedbackController.TYPES.deliverable.special,setLike:function(a){var b=fourSq.curry(this.trigger,this,fourSq.api.controllers.FeedbackController.Events.LIKE_SET,a),c=fourSq.curry(this.trigger,this,fourSq.api.controllers.FeedbackController.Events.LIKE_FAILURE,!a);
fourSq.api.services.Special.like(this.id(),a,b,c)}});fourSq.api.controllers.TipFeedbackController=function(a){};
fourSq.api.controllers.TipFeedbackController=fourSq.api.controllers.FeedbackController.extend({initialize:function(a){fourSq.api.controllers.TipFeedbackController.__super__.initialize.call(this,a)},targetType:fourSq.api.controllers.FeedbackController.TYPES.tip,loggingId:function(){return fourSq.api.models.companion.log.Oids.build({tipId:this.id()})},addComment:function(a,b){fourSq.api.services.Tip.addComment(this.id(),a,b,fourSq.curry(this.trigger,this,fourSq.api.controllers.FeedbackController.Events.COMMENT_ADDED,
this.id()),fourSq.curry(this.trigger,this,fourSq.api.controllers.FeedbackController.Events.COMMENT_NOT_ADDED,this.id()))},deleteComment:function(a){},moreComments:function(a,b){fourSq.api.services.Tip.comments(this.id(),a,b,fourSq.curry(this.trigger,this,fourSq.api.controllers.FeedbackController.Events.COMMENTS_LOADED),fourSq.curry(this.trigger,this,fourSq.api.controllers.FeedbackController.Events.COMMENTS_NOT_LOADED))},getDetails:function(){fourSq.api.services.Tip.detail(this.id(),fourSq.curry(this.trigger,
this,fourSq.api.controllers.FeedbackController.Events.DETAILS_LOADED),fourSq.curry(this.trigger,this,fourSq.api.controllers.FeedbackController.Events.DETAILS_NOT_LOADED))},setLike:function(a){var b=fourSq.curry(this.trigger,this,fourSq.api.controllers.FeedbackController.Events.LIKE_SET,a),c=fourSq.curry(this.trigger,this,fourSq.api.controllers.FeedbackController.Events.LIKE_FAILURE,!a);fourSq.api.services.Tip.like(this.id(),a,b,c)},setTodoSave:function(a,b){var c=fourSq.curry(this.trigger,this,fourSq.api.controllers.FeedbackController.Events.TODO_SET,
a),d=fourSq.curry(this.trigger,this,fourSq.api.controllers.FeedbackController.Events.TODO_FAILURE,!a),e={id:"self/todos",tipId:this.id()};a?(_.extend(e,{referralId:b}),fourSq.api.services.List.additem(e,c,d)):fourSq.api.services.List.deleteitem(e,c,d)},serializedLikeAction:function(){return fourSq.postLoginAction.LikeTip.buildAction(this.id())},getLoggedOutLikePrompt:function(){return templates.fourSq.ui.signupmodal.tipLikeSignupBody()}});fourSq.api.controllers.VenueFeedbackController=function(a){};
fourSq.api.controllers.VenueFeedbackController=fourSq.api.controllers.FeedbackController.extend({initialize:function(a){fourSq.api.controllers.VenueFeedbackController.__super__.initialize.call(this,a)},targetType:fourSq.api.controllers.FeedbackController.TYPES.venue,loggingId:function(){return fourSq.api.models.companion.log.Oids.build({venueId:this.id()})},setLike:function(a){var b=fourSq.curry(this.trigger,this,fourSq.api.controllers.FeedbackController.Events.LIKE_SET,a),c=fourSq.curry(this.trigger,
this,fourSq.api.controllers.FeedbackController.Events.LIKE_FAILURE,!a);fourSq.api.services.Venue.like(this.id(),a,b,c)},serializedLikeAction:function(){return fourSq.postLoginAction.LikeVenue.buildAction(this.id())},serializedDislikeAction:function(){return fourSq.postLoginAction.DislikeVenue.buildAction(this.id())},serializedOkAction:function(){return fourSq.postLoginAction.OkVenue.buildAction(this.id())},setDislike:function(a){var b=fourSq.curry(this.trigger,this,fourSq.api.controllers.FeedbackController.Events.DISLIKE_SET,
a),c=fourSq.curry(this.trigger,this,fourSq.api.controllers.FeedbackController.Events.DISLIKE_FAILURE,!a);fourSq.api.services.Venue.dislike(this.id(),a,b,c)},setOk:function(a){var b=fourSq.curry(this.trigger,this,fourSq.api.controllers.FeedbackController.Events.OK_SET,a),c=fourSq.curry(this.trigger,this,fourSq.api.controllers.FeedbackController.Events.OK_FAILURE,!a);fourSq.api.services.Venue.ok(this.id(),a,b,c)},setTodoSave:function(a,b){var c=fourSq.curry(this.trigger,this,fourSq.api.controllers.FeedbackController.Events.TODO_SET,
a),d=fourSq.curry(this.trigger,this,fourSq.api.controllers.FeedbackController.Events.TODO_FAILURE,!a);if(a){var e={id:"self/todos",venueId:this.id(),referralId:b};fourSq.api.services.List.additem(e,c,d)}else e={id:"self/todos",venueId:this.id()},fourSq.api.services.List.deleteitem(e,c,d)},getLoggedOutLikePrompt:function(){return templates.fourSq.ui.signupmodal.venueLikeSignupBody()}});fourSq.ui.BasicButton=function(a,b){};
fourSq.ui.BasicButton=fourSq.ui.View.extend({callInProgress_:!1,decorate:function(){this.update();this.getClickableElements().click(fourSq.curry(this.handleClick_,this,fourSq.isDefinedAndNotNull(fourSq.api.models.companion.user.UserUtil.currentUser())));return this},isActive:fourSq.abstractMethod,performCall:fourSq.abstractMethod,getLabel:fourSq.abstractMethod,getClickableElements:function(){return $(this.el)},afterUpdate:function(){},handleResponse:function(a){},handleError:function(a){fourSq.debug.debug("An unhandled button error occurred: "+
a.response.meta.errorDetail)},handleLoggedOutClick:function(a){fourSq.debug.info("Received a logged-out click.")},update:function(){this.callInProgress_?(this.$el.addClass(fourSq.ui.BasicButton.State.LOADING),this.$el.addClass(fourSq.ui.BasicButton.State.getState(!this.isActive())),this.$el.removeClass(fourSq.ui.BasicButton.State.getState(this.isActive()))):(this.$el.removeClass(fourSq.ui.BasicButton.State.LOADING),this.$el.addClass(fourSq.ui.BasicButton.State.getState(this.isActive())),this.$el.removeClass(fourSq.ui.BasicButton.State.getState(!this.isActive())));
$(".label",this.el).text(this.getLabel(this.isActive(),this.callInProgress_));this.afterUpdate()},handleClick_:function(a,b){a?this.callInProgress_||(this.callInProgress_=!0,this.performCall(fourSq.bind(this.onSuccess_,this),fourSq.bind(this.onFailure_,this)),this.update()):this.handleLoggedOutClick(b)},onSuccess_:function(a){this.callInProgress_=!1;this.handleResponse(a);this.update()},onFailure_:function(a){this.callInProgress_=!1;this.handleError(a);this.update()}},{State:{ACTIVE:"active",INACTIVE:"inactive",
LOADING:"loading",getState:function(a){return a?this.ACTIVE:this.INACTIVE}}});fourSq.ui.LanguageSelector=function(a){};
fourSq.ui.LanguageSelector=fourSq.ui.View.extend({initialize:function(a){this.useMouseup_=!!a&&!!a.useMouseup},render:function(){this.setEl_($(templates.fourSq.languageselector.languageSelectorList({languages:fourSq.config.i18n.langs})));return this.decorate()},decorate:function(){var a=this.useMouseup?"mouseup":"click",b=this;this.$el.find(".langSelect").on(a,function(a){var d=fourSq.api.models.companion.user.UserUtil.currentUser(!1),e=$(a.currentTarget).data("lang");fourSq.isUndefinedOrNull(d)?
fourSq.i18n.setLang(e):fourSq.api.services.PrivateWeb.setLocale(e,function(){fourSq.i18n.setLang(e)});b.trigger(fourSq.ui.LanguageSelector.Events.SELECTION_MADE)});return this}},{Events:{SELECTION_MADE:"SELECTION_MADE"}});fourSq.ui.LanguageSelectorDialog=function(a,b){};fourSq.ui.LanguageSelectorDialog=fourSq.ui.View.extend({initialize:fourSq.emptyFunction,render:function(){this.langSelector_=(new fourSq.ui.LanguageSelector).render();this.langSelector_.on(fourSq.ui.LanguageSelector.Events.SELECTION_MADE,this.hide,this);this.dialog_=new fourSq.ui.dialog.Dialog({contentElement:this.langSelector_.$el,isModal:!0,className:"languageSelector"});return this},show:function(){this.dialog_.show()},hide:function(){this.dialog_.hide()}});fourSq.api.services.addDebugTraceHandler(function(a){fourSq.debug.Tracer.getInstance().mergeTrace(a)});fourSq.explore.shared.BaseQueryData=function(a){};
fourSq.explore.shared.BaseQueryData=fourSq.Class.extend({initialize:function(a){this.attributes_=_.extend({},a)},clone:function(){return new fourSq.explore.shared.BaseQueryData(this.attributes_)},set:function(a){_.extend(this.attributes_,a)},get:function(a){return this.attributes_[a]},unset:function(a){delete this.attributes_[a]},setMode:function(a){fourSq.isDefinedAndNotNull(a)?this.set({mode:a}):this.unset("mode")},getMode:function(){return this.get("mode")},setLimit:function(a){fourSq.isDefinedAndNotNull(a)?
this.set({limit:a}):this.unset("limit")},getLimit:function(){return this.get("limit")?parseInt(this.get("limit"),10):void 0},getLimitAsString:function(){return this.get("limit")},setOffset:function(a){fourSq.isDefinedAndNotNull(a)?this.set({offset:a}):this.unset("offset")},getOffset:function(){return this.get("offset")?parseInt(this.get("offset"),10):void 0},setInspirationConstants:function(a){fourSq.isDefinedAndNotNull(a)?this.set({ipc:a}):this.unset("ipc")},getInspirationConstants:function(){return this.get("ipc")},
setForceUser:function(a){fourSq.isDefinedAndNotNull(a)?this.set({u:a}):this.unset("u")},getForceUser:function(){return this.get("u")},latLngToString_:function(a){return fourSq.api.models.companion.geo.LatLngUtil.toQueryValue(a)},latLngFromString_:function(a){return fourSq.isDefinedAndNotNull(a)?fourSq.api.models.companion.geo.LatLngUtil.fromQueryValue(a):null},setNear:function(a,b,c){this.unset("ll");this.unset("radius");this.unset("sw");this.unset("ne");this.unset("nearGeoId");this.unset("near");
this.unset("polygon");this.set({near:a,nearGeoId:b?b:void 0,ll:c?this.latLngToString_(c):void 0})},getNear:function(){return this.get("near")},getNearGeoId:function(){return this.get("nearGeoId")},setBounds:function(a){this.unset("ll");this.unset("radius");this.unset("near");this.unset("nearGeoId");this.unset("polygon");this.set({sw:this.latLngToString_(a.sw),ne:this.latLngToString_(a.ne)})},setBoundsFromString:function(a,b){var c=this.latLngFromString_(a),d=this.latLngFromString_(b);return fourSq.isDefinedAndNotNull(d)&&
fourSq.isDefinedAndNotNull(c)?(this.setBounds(fourSq.api.models.companion.geo.LatLngBoundsUtil.bounds(c,d)),!0):!1},getBounds:function(){var a=this.getBoundsNorthEast(),b=this.getBoundsSouthWest();if(fourSq.isDefinedAndNotNull(a)&&fourSq.isDefinedAndNotNull(b))return fourSq.api.models.companion.geo.LatLngBoundsUtil.bounds(b,a)},setViewportBounds:function(a){a?this.set({vsw:this.latLngToString_(a.sw),vne:this.latLngToString_(a.ne)}):(this.unset("vsw"),this.unset("vne"))},setViewportBoundsFromString:function(a,
b){var c=this.latLngFromString_(a),d=this.latLngFromString_(b);return fourSq.isDefinedAndNotNull(d)&&fourSq.isDefinedAndNotNull(c)?(this.setViewportBounds(fourSq.api.models.companion.geo.LatLngBoundsUtil.bounds(c,d)),!0):!1},getViewportBounds:function(){var a=this.get("vne"),b=this.get("vsw");if(fourSq.isDefinedAndNotNull(a)&&fourSq.isDefinedAndNotNull(b))return a=this.latLngFromString_(a),b=this.latLngFromString_(b),fourSq.api.models.companion.geo.LatLngBoundsUtil.bounds(b,a)},getBoundsNorthEast:function(){return this.latLngFromString_(this.getBoundsNorthEastAsString())},
getBoundsSouthWest:function(){return this.latLngFromString_(this.getBoundsSouthWestAsString())},getBoundsSouthWestAsString:function(){return this.get("sw")},getBoundsNorthEastAsString:function(){return this.get("ne")},setPolygon:function(a){this.unset("ll");this.unset("radius");this.unset("sw");this.unset("ne");this.unset("nearGeoId");this.unset("near");a=_.map(a,function(a){return a.lat+","+a.lng}).join(";");this.set({polygon:a})},getPolygonAsString:function(){return this.get("polygon")},getPolygon:function(){return _.map(this.get("polygon").split(";"),
function(a){a=a.split(",");return new L.latLng(a[0],a[1])})},clearPolygon:function(){this.unset("polygon")},setLatLng:function(a){this.unset("sw");this.unset("ne");this.unset("near");this.unset("nearGeoId");this.unset("polygon");this.set({ll:this.latLngToString_(a)})},setLatLngFromString:function(a){a=this.latLngFromString_(a);return fourSq.isDefinedAndNotNull(a)?(this.setLatLng(a),!0):!1},getLatLng:function(){var a=this.getLatLngAsString();if(fourSq.isDefinedAndNotNull(a))return this.latLngFromString_(a)},
getLatLngAsString:function(){return this.get("ll")},setRadius:function(a){this.set({radius:a})},getRadius:function(){return this.get("radius")?parseInt(this.get("radius"),10):void 0},getRadiusAsString:function(){return this.get("radius")},setFriendVisits:function(a){a?this.set({friendVisits:"visited"}):this.unset("friendVisits")},isFriendVisits:function(){return"visited"===this.get("friendVisits")},setSpecials:function(a){a?this.set({specials:"1"}):this.unset("specials")},isSpecials:function(){return"1"===
this.get("specials")},isSpecialsCategory:function(){return"specials"===this.getCategory()},setCategory:function(a){a&&_.contains(fourSq.explore.shared.BaseQueryData.VALID_CATEGORIES,a)?(this.set({section:a}),this.unset("query")):this.unset("section")},setSearchTerm:function(a){a?(this.set({query:a}),this.unset("section")):this.unset("query")},getIncludeVenues:function(){return this.get("includeVenues")},setIncludeVenues:function(a){a?this.set({includeVenues:a}):this.unset("includeVenues")},setNovelty:function(a){!a||
"new"!==a&&"old"!==a?this.unset("novelty"):this.set({novelty:a})},getNovelty:function(){return this.get("novelty")},setNoveltyNew:function(){this.setNovelty("new")},setNoveltyOld:function(){this.setNovelty("old")},isNoveltyNew:function(){return"new"===this.getNovelty()},isNoveltyOld:function(){return"old"===this.getNovelty()},getCategory:function(){return this.get("section")},getSearchTerm:function(){return this.get("query")},allowSpellCorrection:function(){this.unset("noCorrect")},setAutocompleteRequestId:function(a){this.set({acrid:a})},
clearAutocompleteRequestId:function(a){this.unset("acrid")},getAutocompleteRequestId:function(){return this.get("acrid")},getPrice:function(){return this.get("price")},setPrice:function(a){a?this.set({price:a}):this.unset("price")},getPriceFlag:function(){var a=this.getPrice()||"",b=fourSq.explore.shared.BaseQueryData.PriceFlags.NONE;0<=a.indexOf("1")&&(b|=fourSq.explore.shared.BaseQueryData.PriceFlags.ONE);0<=a.indexOf("2")&&(b|=fourSq.explore.shared.BaseQueryData.PriceFlags.TWO);0<=a.indexOf("3")&&
(b|=fourSq.explore.shared.BaseQueryData.PriceFlags.THREE);0<=a.indexOf("4")&&(b|=fourSq.explore.shared.BaseQueryData.PriceFlags.FOUR);return b},getPriceArray:function(){return this.getPrice()?_.map(this.getPrice().split(","),function(a){return parseInt(a,10)}):[]},getPriceFlagArray:function(){return _.map(this.getPrice().split(","),function(a){switch(a){case "1":return fourSq.explore.shared.BaseQueryData.PriceFlags.ONE;case "2":return fourSq.explore.shared.BaseQueryData.PriceFlags.TWO;case "3":return fourSq.explore.shared.BaseQueryData.PriceFlags.THREE;
case "4":return fourSq.explore.shared.BaseQueryData.PriceFlags.FOUR;default:return fourSq.explore.shared.BaseQueryData.PriceFlags.NONE}})},setPriceFlag:function(a){var b=[];a&fourSq.explore.shared.BaseQueryData.PriceFlags.ONE&&b.push("1");a&fourSq.explore.shared.BaseQueryData.PriceFlags.TWO&&b.push("2");a&fourSq.explore.shared.BaseQueryData.PriceFlags.THREE&&b.push("3");a&fourSq.explore.shared.BaseQueryData.PriceFlags.FOUR&&b.push("4");this.setPrice(b.join(","))},addPriceFlag:function(a){this.setPriceFlag(this.getPriceFlag()|
a)},removePriceFlag:function(a){this.setPriceFlag(this.getPriceFlag()^a)},isSaved:function(){return"1"===this.get("saved")},setSaved:function(a){a?this.set({saved:"1"}):this.unset("saved")},isPopularNow:function(){return"1"===this.get("popularNow")},setPopularNow:function(a){a?this.set({popularNow:"1"}):this.unset("popularNow")},isLiked:function(){return"1"===this.get("liked")},setLiked:function(a){a?this.set({liked:"1"}):this.unset("liked")},forDiscoQuery:function(){return fourSq.explore.shared.BaseQueryData.convertParams_(this.attributes_,
fourSq.explore.shared.BaseQueryData.paramMapping_())},forQuery:function(){return _.extend({},this.attributes_)},setNoGeoSplitting:function(a){a?this.set({noGeoSplitting:"1"}):this.unset("noGeoSplitting")},setNoCorrect:function(a){a?this.set({noCorrect:"1"}):this.unset("noCorrect")},notGeoSplitting:function(){return"1"==this.get("noGeoSplitting")}},{VALID_CATEGORIES:"newVenues bestNearby saved food coffee drinks shops arts outdoors sights trending specials topPicks".split(" "),DiscoConstants:{PERSONALIZED_KEY:"personalizations",
FOLLOWER_PLACES:0,SAVED:1,HAVE_BEEN:2,HAVE_NOT_BEEN:3,LIKED:5,FEATURE_KEY:"features",HAS_A_SPECIAL:7,RECENTLY_OPENED:8,HOT_THIS_WEEK:16,INTENT_KEY:"intent",FOOD:"food",BEST_NEARBY:"bestnearby",COFFEE:"coffee",DRINKS:"drinks",SHOPPING:"shopping",FUN:"fun",SIGHTS:"sights",TOP_PICKS:"toppicks",SUBINTENT_KEY:"subintent",ART:"fun-culture",QUERY_KEY:"query",OPEN_NOW:"openNow",PRICES:"prices",OUTDOORS:"outdoors"},convertNewExploreDataToOld:function(a){return fourSq.explore.shared.BaseQueryData.convertParams_(a,
fourSq.explore.shared.BaseQueryData.reverseParamMapping_())},identity_:function(a){return a},wrap_:function(a){return function(){return a}},paramMapping_:function(){var a=fourSq.explore.shared.BaseQueryData.wrap_,b=fourSq.explore.shared.BaseQueryData.DiscoConstants;return{price:[b.PRICES,fourSq.explore.shared.BaseQueryData.identity_],"section,newVenues":[b.FEATURE_KEY,a(b.RECENTLY_OPENED)],"section,bestNearby":[b.INTENT_KEY,a(b.BEST_NEARBY)],"section,saved":[b.PERSONALIZED_KEY,a(b.SAVED)],"section,food":[b.INTENT_KEY,
a(b.FOOD)],"section,coffee":[b.INTENT_KEY,a(b.COFFEE)],"section,drinks":[b.INTENT_KEY,a(b.DRINKS)],"section,shops":[b.INTENT_KEY,a(b.SHOPPING)],"section,topPicks":[b.INTENT_KEY,a(b.TOP_PICKS)],"section,arts":[b.SUBINTENT_KEY,a(b.ART)],"section,outdoors":[b.QUERY_KEY,a(b.OUTDOORS)],"section,sights":[b.INTENT_KEY,a(b.SIGHTS)],"section,trending":[b.FEATURE_KEY,a(b.HOT_THIS_WEEK)],"section,specials":[b.FEATURE_KEY,a(b.HAS_A_SPECIAL)],"friendVisits,1":[b.PERSONALIZED_KEY,a(b.FOLLOWER_PLACES)],"novelty,new":[b.PERSONALIZED_KEY,
a(b.HAVE_NOT_BEEN)],"novelty,old":[b.PERSONALIZED_KEY,a(b.HAVE_BEEN)],"popularNow,1":[b.OPEN_NOW,a(1)],"liked,1":[b.PERSONALIZED_KEY,a(b.LIKED)],"saved,1":[b.PERSONALIZED_KEY,a(b.SAVED)],"specials,1":[b.FEATURE_KEY,a(b.HAS_A_SPECIAL)]}},reverseParamMapping_:function(){var a=fourSq.explore.shared.BaseQueryData.identity_,b=fourSq.explore.shared.BaseQueryData.wrap_,c={};_.each(fourSq.explore.shared.BaseQueryData.paramMapping_(),function(d,e){var f=e.split(","),g=f[1]?b(f[1]):a,f=[f[0],g],g=d[0],h=d[1]===
a?"":","+d[1]();c[g+h]=f});return c},convertParams_:function(a,b){var c={};_.each(a,function(a,e){var f=b[e]||b[e+","+a];if(f){var g=f[0],f=f[1];c[g]=c[g]?c[g]+(","+f(a)):f(a)}else c[e]=a});return c},addValueToParams_:function(a,b,c){fourSq.isDefinedAndNotNull(a[b])?a[b]=a[b]+","+c:a[b]=""+c},Mode:{CHICLET:"chiclet",GEOLOCATE:"geolocate",LOCATION_INPUT:"locationInput",TYPED:"typed",MAP_REQUERY:"mapRequery",ZERO_RESULTS_RADIUS:"zeroResultRadius",ZERO_RESULTS_FILTERS:"zeroResultFilters",ZERO_RESULTS_TERM:"zeroResultTerm",
ZERO_RESULTS_CATEGORY:"zeroResultCategory",VENUE_CATEGORY:"venueCategory",CHANGE_FILTERS:"changeFilters",AUTOCOMPLETE_QUERY:"autocompleteQuery",SPELL_SUGGEST_ESCAPE:"spellSuggestEscape",SPELL_SUGGEST:"spellSuggest",REFINEMENT:"refinement",LOGGED_OUT_HOMEPAGE:"logged_out_homepage",HOMEPAGE:"homepage",HOMEPAGE_ON_LOAD:"homepageOnLoad",VENUE_DETAIL_NEARBY:"venueDetailNearby",VENUE_DETAIL_SIMILAR:"venueDetailSimilar",VENUE_DETAIL_NEXT:"venueDetailNextVenues",URL:"url",SHARE:"share",KIK:"kik"},PriceFlags:{NONE:0,
ONE:1,TWO:2,THREE:4,FOUR:8,ALL:15}});fourSq.explore.shared.Permalink={};fourSq.explore.shared.Permalink.Field=function(){};fourSq.explore.shared.Permalink.Field.prototype.addToParams=function(a,b){};fourSq.explore.shared.Permalink.Field.prototype.pullFromParams=function(a,b){};fourSq.explore.shared.Permalink.LatLngField=function(a){this.paramsKey_=a||"ll"};
fourSq.explore.shared.Permalink.LatLngField.prototype.addToParams=function(a,b){var c=a.getLatLng();if(fourSq.isDefinedAndNotNull(c))return c=fourSq.api.models.companion.geo.LatLngUtil.precision(c,6),b[this.paramsKey_]=fourSq.api.models.companion.geo.LatLngUtil.toQueryValue(c),!0};fourSq.explore.shared.Permalink.LatLngField.prototype.pullFromParams=function(a,b){var c=a[this.paramsKey_];if(fourSq.isDefinedAndNotNull(c))return b.setLatLngFromString(c)};fourSq.explore.shared.Permalink.NearField=function(){};
fourSq.explore.shared.Permalink.NearField.prototype.addToParams=function(a,b){if(fourSq.isDefinedAndNotNull(a.getNear()))return b.near=a.getNear(),!0};fourSq.explore.shared.Permalink.NearField.prototype.pullFromParams=function(a,b){var c=a.near,d=a.nearGeoId;if(fourSq.isDefinedAndNotNull(c))return b.setNear(c,d),!0};fourSq.explore.shared.Permalink.NearGeoIdField=function(){};
fourSq.explore.shared.Permalink.NearGeoIdField.prototype.addToParams=function(a,b){if(fourSq.isDefinedAndNotNull(a.getNearGeoId()))return b.nearGeoId=a.getNearGeoId(),!0};fourSq.explore.shared.Permalink.NearGeoIdField.prototype.pullFromParams=function(a,b){var c=a.near,d=a.nearGeoId;if(fourSq.isDefinedAndNotNull(c)&&fourSq.isDefinedAndNotNull(d))return b.setNear(c,d),!0};fourSq.explore.shared.Permalink.ModeField=function(){};
fourSq.explore.shared.Permalink.ModeField.prototype.addToParams=function(a,b){if(fourSq.isDefinedAndNotNull(a.getMode()))return b.mode=a.getMode(),!0};fourSq.explore.shared.Permalink.ModeField.prototype.pullFromParams=function(a,b){var c=a.mode;if(fourSq.isDefinedAndNotNull(c))return b.setMode(c),!0};fourSq.explore.shared.Permalink.IncludeVenuesField=function(){};
fourSq.explore.shared.Permalink.IncludeVenuesField.prototype.addToParams=function(a,b){if(fourSq.isDefinedAndNotNull(a.getIncludeVenues()))return b.includeVenues=a.getIncludeVenues(),!0};fourSq.explore.shared.Permalink.IncludeVenuesField.prototype.pullFromParams=function(a,b){var c=a.includeVenues;if(fourSq.isDefinedAndNotNull(c))return b.setIncludeVenues(c),!0};fourSq.explore.shared.Permalink.InspirationConstantsField=function(){};
fourSq.explore.shared.Permalink.InspirationConstantsField.prototype.addToParams=function(a,b){if(fourSq.isDefinedAndNotNull(a.getInspirationConstants()))return b.ipc=a.getInspirationConstants(),!0};fourSq.explore.shared.Permalink.InspirationConstantsField.prototype.pullFromParams=function(a,b){var c=a.ipc;if(fourSq.isDefinedAndNotNull(c))return b.setInspirationConstants(c),!0};fourSq.explore.shared.Permalink.LimitField=function(){};
fourSq.explore.shared.Permalink.LimitField.prototype.addToParams=function(a,b){return!1};fourSq.explore.shared.Permalink.LimitField.prototype.pullFromParams=function(a,b){var c=a.limit;if(fourSq.isDefinedAndNotNull(c))return b.set({limit:c}),!0};fourSq.explore.shared.Permalink.ForceUserField=function(){};fourSq.explore.shared.Permalink.ForceUserField.prototype.addToParams=function(a,b){if(fourSq.isDefinedAndNotNull(a.getForceUser()))return b.u=a.getForceUser(),!0};
fourSq.explore.shared.Permalink.ForceUserField.prototype.pullFromParams=function(a,b){var c=a.u;if(fourSq.isDefinedAndNotNull(c))return b.setForceUser(c),!0};fourSq.explore.shared.Permalink.DebugField=function(){};fourSq.explore.shared.Permalink.DebugField.prototype.addToParams=function(a,b){if("1"===a.get("d"))return b.d="1",!0};fourSq.explore.shared.Permalink.DebugField.prototype.pullFromParams=function(a,b){if("1"===a.d)return b.set({d:"1"}),!0};
fourSq.explore.shared.Permalink.ViewportBoundsField=function(){};fourSq.explore.shared.Permalink.ViewportBoundsField.prototype.addToParams=function(a,b){var c=a.getViewportBounds();if(fourSq.isDefinedAndNotNull(c))return c=fourSq.api.models.companion.geo.LatLngBoundsUtil.precision(c,6),b.vne=fourSq.api.models.companion.geo.LatLngUtil.toQueryValue(c.ne),b.vsw=fourSq.api.models.companion.geo.LatLngUtil.toQueryValue(c.sw),!0};
fourSq.explore.shared.Permalink.ViewportBoundsField.prototype.pullFromParams=function(a,b){var c=a.vne,d=a.vsw;if(fourSq.isDefinedAndNotNull(c)&&fourSq.isDefinedAndNotNull(d))return b.setViewportBoundsFromString(d,c)};fourSq.explore.shared.Permalink.BoundsField=function(){};
fourSq.explore.shared.Permalink.BoundsField.prototype.addToParams=function(a,b){var c=a.getBounds();if(fourSq.isDefinedAndNotNull(c))return c=fourSq.api.models.companion.geo.LatLngBoundsUtil.precision(c,6),b.ne=fourSq.api.models.companion.geo.LatLngUtil.toQueryValue(c.ne),b.sw=fourSq.api.models.companion.geo.LatLngUtil.toQueryValue(c.sw),!0};
fourSq.explore.shared.Permalink.BoundsField.prototype.pullFromParams=function(a,b){var c=a.ne,d=a.sw;if(fourSq.isDefinedAndNotNull(c)&&fourSq.isDefinedAndNotNull(d))return b.setBoundsFromString(d,c)};fourSq.explore.shared.Permalink.RadiusField=function(a){this.paramsKey_=a||"radius"};fourSq.explore.shared.Permalink.RadiusField.prototype.addToParams=function(a,b){var c=a.getRadiusAsString();if(fourSq.isDefinedAndNotNull(c))return b[this.paramsKey_]=c,!0};
fourSq.explore.shared.Permalink.RadiusField.prototype.pullFromParams=function(a,b){var c=a[this.paramsKey_];if(fourSq.isDefinedAndNotNull(c))return b.set({radius:c}),!0};fourSq.explore.shared.Permalink.CategoryField=function(a){this.paramsKey_=a||"cat"};fourSq.explore.shared.Permalink.CategoryField.prototype.addToParams=function(a,b){var c=a.getCategory();if(fourSq.isDefinedAndNotNull(c))return b[this.paramsKey_]=c,!0};
fourSq.explore.shared.Permalink.CategoryField.prototype.pullFromParams=function(a,b){var c=a[this.paramsKey_];if(fourSq.isDefinedAndNotNull(c))return b.setCategory(c),!0};fourSq.explore.shared.Permalink.SearchTermField=function(a){this.paramsKey_=a||"q"};fourSq.explore.shared.Permalink.SearchTermField.prototype.addToParams=function(a,b){var c=a.getSearchTerm();if(fourSq.isDefinedAndNotNull(c))return b[this.paramsKey_]=c,!0};
fourSq.explore.shared.Permalink.SearchTermField.prototype.pullFromParams=function(a,b){var c=a[this.paramsKey_];if(fourSq.isDefinedAndNotNull(c))return b.setSearchTerm(c),!0};fourSq.explore.shared.Permalink.NoveltyField=function(a){this.paramsKey_=a||"novelty"};fourSq.explore.shared.Permalink.NoveltyField.prototype.addToParams=function(a,b){var c=a.getNovelty();if(fourSq.isDefinedAndNotNull(c))return b[this.paramsKey_]=c,!0};
fourSq.explore.shared.Permalink.NoveltyField.prototype.pullFromParams=function(a,b){var c=a[this.paramsKey_];if(fourSq.isDefinedAndNotNull(c))return b.setNovelty(c),!0};fourSq.explore.shared.Permalink.SavedField=function(a){this.paramsKey_=a||"saved"};fourSq.explore.shared.Permalink.SavedField.prototype.addToParams=function(a,b){if(a.isSaved())return b[this.paramsKey_]="true",!0};
fourSq.explore.shared.Permalink.SavedField.prototype.pullFromParams=function(a,b){var c=a[this.paramsKey_];if(fourSq.isDefinedAndNotNull(c)&&"true"===c)return b.setSaved(!0),!0};fourSq.explore.shared.Permalink.PopularNowField=function(a){this.paramsKey_=a||"openNow"};fourSq.explore.shared.Permalink.PopularNowField.prototype.addToParams=function(a,b){if(a.isPopularNow())return b[this.paramsKey_]="true",!0};
fourSq.explore.shared.Permalink.PopularNowField.prototype.pullFromParams=function(a,b){var c=a[this.paramsKey_];if(fourSq.isDefinedAndNotNull(c)&&"true"===c)return b.setPopularNow(!0),!0};fourSq.explore.shared.Permalink.SpecialsField=function(a){this.paramsKey_=a||"specials"};fourSq.explore.shared.Permalink.SpecialsField.prototype.addToParams=function(a,b){if(a.isSpecials())return b[this.paramsKey_]="true",!0};
fourSq.explore.shared.Permalink.SpecialsField.prototype.pullFromParams=function(a,b){var c=a[this.paramsKey_];if(fourSq.isDefinedAndNotNull(c)&&"true"===c)return b.setSpecials(!0),!0};fourSq.explore.shared.Permalink.LikedField=function(a){this.paramsKey_=a||"liked"};fourSq.explore.shared.Permalink.LikedField.prototype.addToParams=function(a,b){if(a.isLiked())return b[this.paramsKey_]="true",!0};
fourSq.explore.shared.Permalink.LikedField.prototype.pullFromParams=function(a,b){var c=a[this.paramsKey_];if(fourSq.isDefinedAndNotNull(c)&&"true"===c)return b.setLiked(!0),!0};fourSq.explore.shared.Permalink.PriceField=function(a){this.paramsKey_=a||"price"};fourSq.explore.shared.Permalink.PriceField.prototype.addToParams=function(a,b){if(0<a.getPriceFlag())return b[this.paramsKey_]=a.getPrice(),!0};
fourSq.explore.shared.Permalink.PriceField.prototype.pullFromParams=function(a,b){var c=a[this.paramsKey_];if(fourSq.isDefinedAndNotNull(c))return b.setPrice(c),!0};fourSq.explore.shared.Permalink.FriendVisitsField=function(a){this.paramsKey_=a||"friendVisits"};fourSq.explore.shared.Permalink.FriendVisitsField.prototype.addToParams=function(a,b){if(a.isFriendVisits())return b[this.paramsKey_]="true",!0};
fourSq.explore.shared.Permalink.FriendVisitsField.prototype.pullFromParams=function(a,b){var c=a[this.paramsKey_];if(fourSq.isDefinedAndNotNull(c)&&"true"===c)return b.setFriendVisits(!0),!0};fourSq.explore.shared.Permalink.FirstComeField=function(a){this.fields_=a};fourSq.explore.shared.Permalink.FirstComeField.prototype.addToParams=function(a,b){return _(this.fields_).any(function(c){return c.addToParams(a,b)})};
fourSq.explore.shared.Permalink.FirstComeField.prototype.pullFromParams=function(a,b){return _(this.fields_).any(function(c){return c.pullFromParams(a,b)})};fourSq.explore.shared.Permalink.PinpointField=function(a){this.paramsKey_=a||"pinpointcampaign"};fourSq.explore.shared.Permalink.PinpointField.prototype.addToParams=function(a,b){var c=a.get("pinpointCampaign");if(fourSq.isDefinedAndNotNull(c))return b[this.paramsKey_]=c,!0};
fourSq.explore.shared.Permalink.PinpointField.prototype.pullFromParams=function(a,b){var c=a[this.paramsKey_];if(fourSq.isDefinedAndNotNull(c))return b.set({pinpointCampaign:c}),!0};fourSq.explore.shared.Permalink.PolygonField=function(a){this.paramsKey_=a||"polygon"};fourSq.explore.shared.Permalink.PolygonField.prototype.addToParams=function(a,b){var c=a.getPolygonAsString();if(fourSq.isDefinedAndNotNull(c))return b[this.paramsKey_]=c,!0};
fourSq.explore.shared.Permalink.PolygonField.prototype.pullFromParams=function(a,b){var c=a[this.paramsKey_];if(fourSq.isDefinedAndNotNull(c))return b.setSearchTerm(c),!0};fourSq.explore.shared.Permalink.Marshaller=function(a){this.fields_=[].concat(a||[])};fourSq.explore.shared.Permalink.Marshaller.prototype.addField=function(a){this.fields_.push(a);return this};fourSq.explore.shared.Permalink.Marshaller.prototype.clone=function(){return new fourSq.explore.shared.Permalink.Marshaller(this.fields_)};
fourSq.explore.shared.Permalink.Marshaller.prototype.toParams=function(a,b){var c=!1;_(this.fields_).each(function(d){d.addToParams(a,b)&&(c=!0)});return c};fourSq.explore.shared.Permalink.Marshaller.prototype.fromParams=function(a,b){var c=!1;_(this.fields_).each(function(d){d.pullFromParams(a,b)&&(c=!0)});return c};
fourSq.explore.shared.Permalink.getDefaultMarshaller=function(){fourSq.isUndefinedOrNull(fourSq.explore.shared.Permalink.defaultMarshaller_)&&(fourSq.explore.shared.Permalink.defaultMarshaller_=new fourSq.explore.shared.Permalink.Marshaller([new fourSq.explore.shared.Permalink.FriendVisitsField,new fourSq.explore.shared.Permalink.LikedField,new fourSq.explore.shared.Permalink.SpecialsField,new fourSq.explore.shared.Permalink.NoveltyField,new fourSq.explore.shared.Permalink.FirstComeField([new fourSq.explore.shared.Permalink.CategoryField,
new fourSq.explore.shared.Permalink.SearchTermField]),new fourSq.explore.shared.Permalink.RadiusField,new fourSq.explore.shared.Permalink.LatLngField,new fourSq.explore.shared.Permalink.BoundsField,new fourSq.explore.shared.Permalink.PriceField,new fourSq.explore.shared.Permalink.PopularNowField,new fourSq.explore.shared.Permalink.SavedField,new fourSq.explore.shared.Permalink.PolygonField]));return fourSq.explore.shared.Permalink.defaultMarshaller_};fourSq.explore.shared.SearchTermInputView=function(a){};
fourSq.explore.shared.SearchTermInputView=fourSq.ui.View.extend({initialize:function(a){this.$el=$(this.el);this.llHinter_=a.llHinter?function(){return fourSq.api.models.companion.geo.LatLngUtil.toQueryValue(a.llHinter())}:void 0;this.locationInputView_=a.locationInputView},render:fourSq.abstractMethod,decorate:function(){var a=this.$el,b=a.parents("form#search"),c=this;a.focus(function(){c.hasFocus_=!0});a.blur(function(){c.hasFocus_=!1});var d=function(a,b){c.trigger(fourSq.explore.shared.SearchTermInputView.Events.TYPED_QUERY,
a,b)},e=function(a,b){c.trigger(fourSq.explore.shared.SearchTermInputView.Events.QUERY_SUGGEST,a,b)};a.keypress(function(b){13===b.which&&(b.preventDefault(),d(c.getSearchTerm()),a.blur())});fourSq.config.newAutocompleteWidget?this.setupNewAutocomplete(b,d):this.setupAutocomplete(a,function(b,d){fourSq.autocomplete.maybePopulateSearchBox(b,d,a);fourSq.autocomplete.customCallbacks(b,d,{unifiedQueryCallback:e,commonQueryCallback:e,chicletCallback:function(b){c.trigger(fourSq.explore.shared.SearchTermInputView.Events.CHICLET,
b);a.blur()},defaultCallback:fourSq.autocomplete.autocompleteSelectCallback})});fourSq.isDefinedAndNotNull(this.options.initialSearchTerm)&&""!==this.options.initialSearchTerm&&a.val(this.options.initialSearchTerm);return this},setupAutocomplete:function(a,b){var c=fourSq.bind(function(){return 0<fourSq.util.trim(this.locationInputView_.getLocationString()).length},this);fourSq.bind(function(){return c()?void 0:this.llHinter_()},this);var d=fourSq.bind(function(){return c()?this.locationInputView_.getLocationString():
void 0},this);fourSq.autocomplete.setupSearchAutocomplete(a,fourSq.autocomplete.getNewAutocompleteChromeCompleters(this.llHinter_,d,this.$el),b,0,{section:fourSq.stats.action.Section.HEADER_BAR})},setupNewAutocomplete:function(a,b){a.find("input");fourSq.newautocomplete.Autocompleter.forSearch(a,{llHinter:this.llHinter_,classes:"exploreAutocomplete",commonQueryCallback:function(a){b(a.commonQuery.querystring,a.rid);return!1},submitCallback:function(a){b($.trim(a))}})},ensureAutocompleteClosed:function(){this.hasFocus_&&
this.$el.blur()},clearSearchTerm:function(){this.$el.val("").change()},setSearchTerm:function(a){this.$el.val(a).change()},getSearchTerm:function(){return $.trim(this.$el.val())},serialize:function(){return{term:this.getSearchTerm()}},deserialize:function(a){this.setSearchTerm(a.term)}},{Events:{TYPED_QUERY:"TYPED_QUERY",QUERY_SUGGEST:"QUERY_SUGGEST",CHICLET:"CHICLET"}});fourSq.tiplists.CreateNewListDialog=function(a){};
fourSq.tiplists.CreateNewListDialog=fourSq.ui.dialog.Dialog.extend({initialize:function(a){a.contentElement=$(templates.fourSq.lists.listCreateDialog({sampleListName:this.getSampleName_()}));this.constructor.__super__.initialize.apply(this,[a]);this.additionalApiParams_=a.opt_additionalApiParams||{}},decorate:function(){this.constructor.__super__.decorate.apply(this,[]);var a=this.getContentContainer().find(".new-list-dialog"),b=$(".create-button",a),c=$(".create-name",a),d=$(".error-info",a);b.click(fourSq.curry(this.maybeCreateList_,
this,c,b,a,d));var e=this;c.keydown(function(a){c.hasClass("edited")||c.val("");c.addClass("edited")});c.keyup(function(f){var g=c.val().length;0==g?b.addClass("disabledButton"):50<g?(b.addClass("disabledButton"),a.addClass("has-error length-error"),d.text(templates.fourSq.lists.newListDialogNameTooLongError())):(b.removeClass("disabledButton"),a.hasClass("length-error")&&(d.text(""),a.removeClass("has-error length-error")),13==f.which&&e.maybeCreateList_(c,b,a,d))});c.focus();fourSq.util.caretTo(c.get(0),
0)},show:function(){this.constructor.__super__.show.apply(this,[])},getSampleName_:function(){var a=Math.floor(3*Math.random()),b=null;return b=0==a?templates.fourSq.lists.newListDialogSampleListName1():1==a?templates.fourSq.lists.newListDialogSampleListName2():templates.fourSq.lists.newListDialogSampleListName3()},maybeCreateList_:function(a,b,c,d){if(a.hasClass("edited")){c.removeClass("has-error");d.text("");var e=$.trim(a.val());if(e&&0!=e.length&&!(50<e.length)){c.addClass("creating");a.attr("disabled",
"disabled");b.attr("disabled","disabled");b.addClass("disabledButton");e={name:e,"public":!0};this.additionalApiParams_&&(e=_.extend(e,this.additionalApiParams_));var f=this;fourSq.api.services.List.add(e,function(a){f.createCallback_?(this.close(),f.createCallback_(a)):fourSq.util.redirect(a.canonicalPath+"/edit")},function(e,f){e&&e.response&&d.text(e.response.meta.errorDetail);c.addClass("has-error");c.removeClass("creating");a.removeAttr("disabled","disabled");b.removeAttr("disabled","disabled");
b.removeClass("disabledButton")})}}}});fourSq.tiplists.CreateNewListLink=function(a){};
fourSq.tiplists.CreateNewListLink=fourSq.ui.View.extend({initialize:function(a){this.link_=a.link;this.additionalApiParams_=a.opt_additionalApiParams||{};this.createCallback_=a.opt_listCreateCallback;this.link_.click(fourSq.bind(this.onLinkClick_,this))},onLinkClick_:function(){var a=fourSq.stats.Action.build(fourSq.stats.action.Action.CLICK,{element:fourSq.stats.action.Element.CREATE_LIST});fourSq.stats.logActions(a);fourSq.isUndefinedOrNull(fourSq.api.models.companion.user.UserUtil.currentUser())?
fourSq.signup.signupDialogFactory({titleText:templates.fourSq.ui.signupmodal.createListSignupTitle(),bodyText:templates.fourSq.ui.signupmodal.saveListSignupBody(),trigger:fourSq.signup.Trigger.CREATE_LIST}).show():(new fourSq.tiplists.CreateNewListDialog({opt_additionalApiParams:this.additionalApiParams_,className:"newListDialog",overlayClass:"newListOverlay"})).show()}});fourSq.api.services.AdsUser={details:function(a,b){fourSq.api.services.service_("v2/ads/user/details",{},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},a,b),error:fourSq.api.services.wrapOnError_(b),type:"GET"})},update:function(a,b,c){fourSq.api.services.service_("v2/ads/user/update",a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})}};fourSq.api.services.App={edit:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.app.edit(a.id),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.app},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},create:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.app.create(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.app},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},deleteApp:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.app.deleteApp(a.id),
a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.deleted},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},disconnectApp:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.app.disconnectApp(a.id),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return!0},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},erasureRequest:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.app.erasureRequest(a.id),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return null},
b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},resetSecrets:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.app.resetSecrets(a.id),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.app},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},reactivatePush:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.app.reactivatePush(a.id),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return null},b,c),error:fourSq.api.services.wrapOnError_(c),
type:"POST"})},testPush:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.app.testPush(a.id),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.response},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},testPilgrimWebhook:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.app.testPilgrimWebhook(a.id),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.response},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},
resendPush:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.app.resendPush(a.id),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.response},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},unsubscribe:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.app.unsubscribe(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return null},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})}};fourSq.api.services.BillingApi={summary:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.billingapi.summary(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"GET"})},bill:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.billingapi.bill(a),{},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"GET"})},cards:function(a,
b,c){fourSq.api.services.service_(fourSq.api.services.paths.billingapi.cards(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return{profiles:a.profiles}},b,c),error:fourSq.api.services.wrapOnError_(c),type:"GET"})},removeCard:function(a,b,c,d){fourSq.api.services.service_(fourSq.api.services.paths.billingapi.unlink(b),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return{}},c,d),error:fourSq.api.services.wrapOnError_(d),type:"POST"})},addCard:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.billingapi.addCard(),
a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},payBalance:function(a,b,c,d){a={expectedTotalInCents:a,paymentProfileId:b};fourSq.api.services.service_(fourSq.api.services.paths.billingapi.payNow(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},c,d),error:fourSq.api.services.wrapOnError_(d),type:"POST"})},setAsDefault:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.billingapi.setAsDefault(a),
{},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},accountCredit:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.billingapi.accountCredit(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},manualCharge:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.billingapi.manualCharge(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},
b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},updateSettings:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.billingapi.updateSettings(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},refund:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.billingapi.refund(a),{},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),
type:"POST"})},credits:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.billingapi.credits(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"GET"})},creditTransactions:function(a,b,c,d){fourSq.api.services.service_(fourSq.api.services.paths.billingapi.creditTransactions(a,b),{},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},c,d),error:fourSq.api.services.wrapOnError_(d),type:"GET"})},
addCredits:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.billingapi.addCredits(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},updateAutoRecharge:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.billingapi.updateAutoRecharge(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})}};fourSq.api.services.Browse={travelwizardrecs:function(a,b,c){var d=_.clone(a);d.ll=fourSq.api.models.companion.geo.LatLngUtil.toQueryValue(a.ll);fourSq.api.services.foursquareService_(fourSq.api.services.paths.browse.travelwizardrecs(),d,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c)})}};fourSq.api.services.Campaign={add:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.campaigns.add(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.campaign},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},start:function(a,b,c,d){fourSq.api.services.service_(fourSq.api.services.paths.campaigns.start(a),{startAt:b},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.campaign},c,d),error:fourSq.api.services.wrapOnError_(d),type:"POST"})},
resume:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.campaigns.resume(a),{},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.campaign},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},edit:function(a,b,c,d){fourSq.api.services.service_(fourSq.api.services.paths.campaigns.edit(a),b,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.campaign},c,d),error:fourSq.api.services.wrapOnError_(d),type:"POST"})},stop:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.campaigns.stop(a),
{},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.campaign},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},dismiss:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.campaigns.dismiss(a),{},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})}};fourSq.api.services.ChainEdit={rollback:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.chainedits.rollback(a),{},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})}};fourSq.api.services.Chain={detail:function(a,b,c){fourSq.api.services.foursquareService_(fourSq.api.services.paths.chains.detail(a.id),{},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c)})},stats:function(a,b,c){fourSq.api.services.foursquareService_(fourSq.api.services.paths.chains.stats(a.id),{},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c)})},locations:function(a,b,
c){var d=a.id,e={};a.limit&&(e.limit=a.limit);a.offset&&(e.offset=a.offset);a.nearGeoId&&(e.nearGeoId=a.nearGeoId);a.sw&&(e.sw=a.sw);a.ne&&(e.ne=a.ne);a.forChainMembershipPage&&(e.forChainMembershipPage=a.forChainMembershipPage);fourSq.api.services.foursquareService_(fourSq.api.services.paths.chains.locations(d),e,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c)})},create:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.chains.create(),
a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.venueChain},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},search:function(a,b,c){fourSq.api.services.foursquareService_(fourSq.api.services.paths.chains.search(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c)})}};fourSq.api.services.Checkin={add:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.checkins.add(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.checkin},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},addComment:function(a,b,c,d,e){b={CHECKIN_ID:a,text:b,mentions:c};fourSq.api.services.service_(fourSq.api.services.paths.checkins.addcomment(a),b,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.comment},d,e),error:fourSq.api.services.wrapOnError_(e),
type:"POST"})},comments:function(a,b,c,d,e){b={CHECKIN_ID:a,limit:b,offset:c};fourSq.api.services.service_(fourSq.api.services.paths.checkins.comments(a),b,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.comments},d,e),error:fourSq.api.services.wrapOnError_(e),type:"GET"})},deleteComment:function(a,b,c,d){b={CHECKIN_ID:a,commentId:b};fourSq.api.services.service_(fourSq.api.services.paths.checkins.deletecomment(a),b,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},
c,d),error:fourSq.api.services.wrapOnError_(d),type:"POST"})},deletePost:function(a,b,c,d){b={postId:b};fourSq.api.services.service_(fourSq.api.services.paths.checkins.deletepost(a),b,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},c,d),error:fourSq.api.services.wrapOnError_(d),type:"POST"})},detail:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.checkins.detail(a),null,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.checkin},b,c),error:fourSq.api.services.wrapOnError_(c)})},
deleteCheckin:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.checkins.deletecheckin(a),{},{success:fourSq.api.services.wrapOnSuccess_(function(){return null},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},like:function(a,b,c,d,e){b=_.extend({set:b},c);fourSq.api.services.service_(fourSq.api.services.paths.checkins.like(a),b,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.likes},d,e),error:fourSq.api.services.wrapOnError_(e),type:"POST"})},likes:function(a,
b,c,d){fourSq.api.services.service_(fourSq.api.services.paths.checkins.likes(a),b,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.likes},c,d),error:fourSq.api.services.wrapOnError_(d),type:"GET"})},recent:function(a,b,c){c=fourSq.isDefinedAndNotNull(c)?c:{};fourSq.api.services.service_(fourSq.api.services.paths.checkins.recent(),c,{success:fourSq.api.services.wrapOnSuccess_(function(a){return _.map(a.recent,function(a){return a})},a,b),error:fourSq.api.services.wrapOnError_(b),type:"GET"})},
share:function(a,b,c,d){fourSq.api.services.service_(fourSq.api.services.paths.checkins.share(a),b,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},c,d),error:fourSq.api.services.wrapOnError_(d),type:"POST"})}};fourSq.api.services.EventParticipant={claim:function(a,b,c,d){fourSq.api.services.service_(fourSq.api.services.paths.eventparticipants.claim(a),b,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},c,d),error:fourSq.api.services.wrapOnError_(d),type:"POST"})},search:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.eventparticipants.search(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return 0<a.participants.count?a.participants.items:[]},b,c),error:fourSq.api.services.wrapOnError_(c),
type:"GET"})}};fourSq.api.services.Event={add:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.events.add(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.event},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},editEvent:function(a,b,c,d){fourSq.api.services.service_(fourSq.api.services.paths.events.editevent(a),b,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},c,d),error:fourSq.api.services.wrapOnError_(d),type:"POST"})},deleteEvent:function(a,
b,c){fourSq.api.services.service_(fourSq.api.services.paths.events.deleteevent(a),{},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},photos:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.events.photos(a.id),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.photos.items||[]},b,c),error:fourSq.api.services.wrapOnError_(c)})},checkins:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.events.checkins(a.id),
a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.checkins},b,c),error:fourSq.api.services.wrapOnError_(c)})},participantCheckins:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.events.checkins(a.id),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.checkins},b,c),error:fourSq.api.services.wrapOnError_(c)})},explore:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.events.explore(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},
b,c),error:fourSq.api.services.wrapOnError_(c),type:"GET"})},thisweek:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.events.thisweek(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"GET"})},adminExplore:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.events.adminexplore(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),
type:"GET"})}};fourSq.api.services.Flag={vote:function(a,b,c,d){fourSq.api.services.service_(fourSq.api.services.paths.flags.vote(a),b,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},c,d),error:fourSq.api.services.wrapOnError_(d),type:"POST"})},multiVote:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.flags.multiVote(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})}};fourSq.api.services.Geo={geocode:function(a,b,c){var d=a.autocomplete?fourSq.api.services.paths.geo.autocomplete():fourSq.api.services.paths.geo.geocode();fourSq.api.services.service_(d,a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.geocode.interpretations},b,c),error:fourSq.api.services.wrapOnError_(c)})},reverse:function(a,b,c){var d=fourSq.api.services.paths.geo.reverse(),e=_.clone(a);e.ll=fourSq.api.models.companion.geo.LatLngUtil.toQueryValue(a.ll);fourSq.api.services.service_(d,
e,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.geocode.interpretations},b,c),error:fourSq.api.services.wrapOnError_(c)})},countryCodes:function(a,b){fourSq.api.services.service_(fourSq.api.services.paths.geo.countryCodes(),{},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.countryCodes},a,b),error:fourSq.api.services.wrapOnError_(b)})},tz:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.geo.tz(),{ll:fourSq.api.models.companion.geo.LatLngUtil.toQueryValue(a)},
{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.interpretations},b,c),error:fourSq.api.services.wrapOnError_(c)})},s2info:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.geo.s2info(),{id:a},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.cells},b,c),error:fourSq.api.services.wrapOnError_(c)})},s2cover:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.geo.s2cover(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.cells},
b,c),error:fourSq.api.services.wrapOnError_(c)})},suggestions:function(a,b,c){fourSq.api.services.foursquareService_(fourSq.api.services.paths.geo.suggestions(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c)})},touristsuggestions:function(a,b,c){fourSq.api.services.foursquareService_(fourSq.api.services.paths.geo.touristsuggestions(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c)})},
slug:function(a,b,c){var d=fourSq.api.services.paths.geo.slug();fourSq.api.services.service_(d,a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.geocode.interpretations},b,c),error:fourSq.api.services.wrapOnError_(c)})}};fourSq.api.services.LabsHypertrendingService={list:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.hypertrending.list(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"GET"})},heatmap:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.hypertrending.heatmap(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"GET"})},
venue:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.hypertrending.venue(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"GET"})},userStatus:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.hypertrending.userStatus(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"GET"})}};
fourSq.api.services.LabsCollectionGameService={userStats:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.collectiongame.userStats(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"GET"})},nearby:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.collectiongame.nearby(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),
type:"GET"})}};
fourSq.api.services.LabsUserCardGameService={userCards:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.usercardgame.userCards(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"GET"})},addToWallet:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.usercardgame.addToWallet(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},
venueInfo:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.usercardgame.venueInfo(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"GET"})},buyVenue:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.usercardgame.buyVenue(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})}};fourSq.api.services.List={detail:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.lists.detail(a.id),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.list},b,c),error:fourSq.api.services.wrapOnError_(c)})},moveitem:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.lists.moveitem(a.id),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.list},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},update:function(a,b,
c){fourSq.api.services.service_(fourSq.api.services.paths.lists.update(a.id),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.list},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},deletelist:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.lists.deletelist(a.id),a,{success:fourSq.api.services.wrapOnSuccess_(function(){return null},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},add:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.lists.add(),
a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.list},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},clone:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.lists.clone(a.id),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.list},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},follow:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.lists.follow(a.id),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.list},
b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},unfollow:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.lists.unfollow(a.id),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.list},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},additem:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.lists.additem(a.id),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.item},b,c),error:fourSq.api.services.wrapOnError_(c),
type:"POST"})},updateitem:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.lists.updateitem(a.id),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.item},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},deleteitem:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.lists.deleteitem(a.id),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.items.items||[]},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},
suggestphoto:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.lists.suggestphoto(a.id),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.photos},b,c),error:fourSq.api.services.wrapOnError_(c),type:"GET"})},suggesttip:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.lists.suggesttip(a.id),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.tips},b,c),error:fourSq.api.services.wrapOnError_(c),type:"GET"})},suggestvenues:function(a,
b,c){fourSq.api.services.service_(fourSq.api.services.paths.lists.suggestvenues(a.id),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"GET"})},addcomment:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.lists.addcomment(a.listId),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.id},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},editcomment:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.lists.editcomment(a.listId),
a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.id},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},deletecomment:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.lists.deletecomment(a.listId),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},share:function(a,b,c,d){fourSq.api.services.service_(fourSq.api.services.paths.lists.share(a),b,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},
c,d),error:fourSq.api.services.wrapOnError_(d),type:"POST"})}};fourSq.api.services.OAuth2Service={revokeAccess:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.oauth2.revokeAccess(),a,{success:fourSq.api.services.OAuth2Service.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c)})},wrapOnSuccess_:function(a,b,c){if(b)return c=c||function(){},function(a,e,f){fourSq.isDefinedAndNotNull(a.debugtrace)&&fourSq.debug.Tracer.getInstance().mergeTrace(a.debugtrace);!0===a.revoked?(fourSq.api.getLogger().debug("success"),
b()):(fourSq.api.getLogger().error("non 200 meta code on api response",a),c())}}};fourSq.api.services.Opinionator={unratedVenues:function(a,b){fourSq.api.services.service_(fourSq.api.services.paths.opinionator.recentVenues(),{intent:"unrated"},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},a,b),error:fourSq.api.services.wrapOnError_(b),type:"GET"})},denyRecent:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.opinionator.denyRecent(),{pcheckinId:a},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),
type:"POST"})}};fourSq.api.services.Page={update:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.pages.update(a.id),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.user},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},venues:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.pages.venues(a.id),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.venues?_.map(a.venues.items||[],function(a){return a}):[]},b,c),error:fourSq.api.services.wrapOnError_(c)})},
manageablevenues:function(a,b,c,d){fourSq.api.services.service_(fourSq.api.services.paths.pages.manageablevenues(a),b,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},c,d),error:fourSq.api.services.wrapOnError_(d)})},manageableGroups:function(a,b,c,d){fourSq.api.services.service_(fourSq.api.services.paths.pages.manageablegroups(a),b,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.venueGroups},c,d),error:fourSq.api.services.wrapOnError_(d)})},removeManager:function(a,
b,c,d){b={managerId:b};fourSq.api.services.service_(fourSq.api.services.paths.pages.removeManager(a),b,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},c,d),error:fourSq.api.services.wrapOnError_(d),type:"POST"})},inviteManager:function(a,b,c,d){b={managerId:b};fourSq.api.services.service_(fourSq.api.services.paths.pages.inviteManager(a),b,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},c,d),error:fourSq.api.services.wrapOnError_(d),type:"POST"})},managers:function(a,
b,c){fourSq.api.services.service_(fourSq.api.services.paths.pages.managers(a),{},{success:fourSq.api.services.wrapOnSuccess_(function(a){return _.map(a.managers||[],function(a){return a})},b,c),error:fourSq.api.services.wrapOnError_(c),type:"GET"})},checkvenues:function(a,b,c,d){b={venueId:b.join(",")};fourSq.api.services.service_(fourSq.api.services.paths.pages.checkvenues(a),b,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.checkVenues},c,d),error:fourSq.api.services.wrapOnError_(d),
type:"POST"})},allStats:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.pages.allstats(a),{},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"GET"})},followerStats:function(a,b,c,d){fourSq.api.services.service_(fourSq.api.services.paths.pages.followerstats(a),b,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},c,d),error:fourSq.api.services.wrapOnError_(d),type:"GET"})}};fourSq.api.services.PageUpdate={deserialize:{single:function(a){return a.pageUpdate}},add:function(a,b,c){return fourSq.api.services.service_(fourSq.api.services.paths.pageUpdates.add(),a,{success:fourSq.api.services.wrapOnSuccess_(fourSq.api.services.PageUpdate.deserialize.single,b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},remove:function(a,b,c){return fourSq.api.services.service_(fourSq.api.services.paths.pageUpdates.remove(a.id),{},{success:fourSq.api.services.wrapOnSuccess_(fourSq.api.services.PageUpdate.deserialize.single,
b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},detail:function(a,b,c){return fourSq.api.services.service_(fourSq.api.services.paths.pageUpdates.detail(a.id),{},{success:fourSq.api.services.wrapOnSuccess_(fourSq.api.services.PageUpdate.deserialize.single,b,c),error:fourSq.api.services.wrapOnError_(c)})},venues:function(a,b,c){return fourSq.api.services.service_(fourSq.api.services.paths.pageUpdates.venues(a.id),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){var b=[];fourSq.isDefinedAndNotNull(a.venues)&&
fourSq.isDefinedAndNotNull(a.venues.items)&&(b=a.venues.items);return b},b,c),error:fourSq.api.services.wrapOnError_(c)})},addComment:function(a,b,c,d,e){b={UPDATE_ID:a,text:b,mentions:c};fourSq.api.services.service_(fourSq.api.services.paths.pageUpdates.addcomment(a),b,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.comment},d,e),error:fourSq.api.services.wrapOnError_(e),type:"POST"})},comments:function(a,b,c,d,e){b={UPDATE_ID:a,limit:b,offset:c};fourSq.api.services.service_(fourSq.api.services.paths.pageUpdates.comments(a),
b,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.comments},d,e),error:fourSq.api.services.wrapOnError_(e),type:"GET"})},deleteComment:function(a,b,c,d){b={UPDATE_ID:a,commentId:b};fourSq.api.services.service_(fourSq.api.services.paths.pageUpdates.deletecomment(a),b,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},c,d),error:fourSq.api.services.wrapOnError_(d),type:"POST"})},like:function(a,b,c,d){fourSq.api.services.service_(fourSq.api.services.paths.pageUpdates.like(a),
{set:b},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.likes},c,d),error:fourSq.api.services.wrapOnError_(d),type:"POST"})}};fourSq.api.services.Photo={add:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.photos.add(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.photo},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},flag:function(a,b,c,d){b={problem:b};fourSq.api.services.service_(fourSq.api.services.paths.photos.flag(a),b,{success:fourSq.api.services.wrapOnSuccess_(function(a){return{}},c,d),error:fourSq.api.services.wrapOnError_(d),type:"POST"})},bless:function(a,
b,c){fourSq.api.services.service_(fourSq.api.services.paths.photos.bless(a),{},{success:fourSq.api.services.wrapOnSuccess_(function(a){return{}},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},unbless:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.photos.unbless(a),{},{success:fourSq.api.services.wrapOnSuccess_(function(a){return{}},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},upvote:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.photos.upvote(a),
{},{success:fourSq.api.services.wrapOnSuccess_(function(a){return{}},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},downvote:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.photos.downvote(a.photoId),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return{}},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},deletePhoto:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.photos.deletePhoto(a),{},{success:fourSq.api.services.wrapOnSuccess_(function(){return null},
b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},detail:function(a,b,c){var d={photoId:a};fourSq.api.services.service_(fourSq.api.services.paths.photos.detail(a),d,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c)})},photoWoes:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.photos.photoWoes(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.photos},b,c),error:fourSq.api.services.wrapOnError_(c)})},
resolvePhoto:function(a,b,c,d){a={action:b,photoId:a.join()};fourSq.api.services.service_(fourSq.api.services.paths.photos.resolve(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},c,d),error:fourSq.api.services.wrapOnError_(d),type:"POST"})},bulkEdit:function(a,b,c,d){a={action:b,photoId:a.join()};fourSq.api.services.service_(fourSq.api.services.paths.photos.bulkEdit(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},c,d),error:fourSq.api.services.wrapOnError_(d),
type:"POST"})}};fourSq.api.services.PilgrimConfig={update:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.pilgrimConfig.update(a.id),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.app},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},testWebhook:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.pilgrimConfig.testWebhook(a.id),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.response},b,c),error:fourSq.api.services.wrapOnError_(c),
type:"POST"})},uploadGeofences:function(a,b,c,d){fourSq.api.services.uploadFile_(fourSq.api.services.paths.pilgrimConfig.uploadGeofences(a.id),b,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.response},c,d),error:fourSq.api.services.wrapOnError_(d),type:"POST"},a)}};fourSq.api.services.Private={logActions:function(a,b,c){a={loglines:JSON.stringify(a.actions),isMobile:a.isMobile,logType:"j"};fourSq.api.services.service_(fourSq.api.services.paths.privateservice.logActions(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},friendSuggestions:function(a,b){fourSq.api.services.service_(fourSq.api.services.paths.privateservice.friendsuggestions(),{},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},
a,b),error:fourSq.api.services.wrapOnError_(b),type:"GET"})},ignoreFriendSuggestion:function(a,b,c){a={userId:a};fourSq.api.services.service_(fourSq.api.services.paths.privateservice.ignorefriendsuggestion(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return null},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},googleContacts:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.privateservice.googleContacts(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},
b,c),error:fourSq.api.services.wrapOnError_(c),type:"GET"})},linkFacebook:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.privateservice.linkfacebook(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return null},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},photoRanker:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.privateservice.photoRanker(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),
type:"POST"})},photoRankerMarkSkip:function(a,b,c){a={workId:a};fourSq.api.services.service_(fourSq.api.services.paths.privateservice.photoRankerMarkSkip(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},photoRankerNextVenues:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.privateservice.photoRankerNextVenues(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),
type:"POST"})},logViews:function(a){var b=function(){};fourSq.api.services.service_(fourSq.api.services.paths.privateservice.logViews(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},function(){},b),error:fourSq.api.services.wrapOnError_(b),type:"POST"})},shareMessages:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.privateservice.shareMessages(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),
type:"GET"})},webbounds:function(a,b,c,d){a={near:a,ll:b};fourSq.api.services.service_(fourSq.api.services.paths.privateservice.webbounds(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return{count:1,items:[{geometry:{bounds:a.suggestedBoundingBox}}]}},c,d),error:fourSq.api.services.wrapOnError_(d)})},toggleVisibility:function(a,b,c,d){a={visibility:b,photoId:a};fourSq.api.services.service_(fourSq.api.services.paths.privateservice.togglePhotoVisibility(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},
c,d),error:fourSq.api.services.wrapOnError_(d),type:"POST"})},twitterUser:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.privateservice.twitterUser(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"GET"})},facebookFriends:function(a,b,c){fourSq.api.services.foursquareService_(fourSq.api.services.paths.privateservice.facebookFriends(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},
b,c),error:fourSq.api.services.wrapOnError_(c),type:"GET"})},createVenueGroupFromTSV:function(a,b,c,d){a={url:a};b&&(a.userId=b);fourSq.api.services.service_(fourSq.api.services.paths.privateservice.createVenueGroupFromTSV(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},c,d),error:fourSq.api.services.wrapOnError_(d),type:"POST"})},browseExplore:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.privateservice.browseExplore(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},
b,c),error:fourSq.api.services.wrapOnError_(c)})},uploadToS3:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.privateservice.uploadToS3(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},setTipsDone:function(a,b,c){a={tipIds:a.tipIds.join(",")};fourSq.api.services.service_(fourSq.api.services.paths.privateservice.setTipsDone(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,
c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},unsetTipsDone:function(a,b,c){a={tipIds:a.tipIds.join(",")};fourSq.api.services.service_(fourSq.api.services.paths.privateservice.unsetTipsDone(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},initiatePortabilityRequest:function(a,b){fourSq.api.services.service_(fourSq.api.services.paths.privateservice.initiatePortabilityRequest(),{},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},
a,b),error:fourSq.api.services.wrapOnError_(b),type:"POST"})}};fourSq.api.services.Private.FacebookFriendsIntent={ALL:"all",ALL_NO_INVITE:"allnoinvite",NO_FOURSQUARE_FRIENDS:"no4sqfriends",NO_FOURSQUARE_ACCOUNT:"no4sqaccount",NO_FOURSQUARE_FRIENDS_NO_INVITE:"no4sqfriendsnoinvite"};fourSq.api.services.PrivateWeb={setLocale:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.privateWeb.setLocale(),{locale:a},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},management:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.privateWeb.management(),{limit:a},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),
type:"GET"})},listTransactions:function(a,b,c){a=fourSq.api.services.paths.privateWeb.transactions()+"/list?userId\x3d"+a.userId+"\x26startDate\x3d"+a.startDate+"\x26endDate\x3d"+a.endDate;fourSq.api.services.service_(a,{},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.listTransactionsResult},b,c),error:fourSq.api.services.wrapOnError_(c)})},addTransaction:function(a,b,c){var d=fourSq.api.services.paths.privateWeb.transactions()+"/add";fourSq.api.services.service_(d,a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},
b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},sendDownloadEmail:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.privateWeb.sendDownloadEmail(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},connectvenues:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.privateWeb.connectvenues(),{u:a.uid,connectSingle:a.single,connectExisting:a.existing,connectNew:a.newpages,
unconnect:a.unconnect,lastBatch:a.isLast,pageIds:a.pageIds,pageNames:a.pageNames},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},disconnectVenue:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.privateWeb.connectvenues(),{unconnect:a},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},emailUnsubscribe:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.privateWeb.emailUnsubscribe(),
a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},shortLink:function(a,b,c){a={url:a.url};fourSq.api.services.service_(fourSq.api.services.paths.privateWeb.shortLink(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},appealBannedPhoto:function(a,b,c){a={photoId:a};fourSq.api.services.service_(fourSq.api.services.paths.privateWeb.appealBannedPhoto(),
a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},intentSaveToPayload:function(a,b,c){a={vid:a.venueId,uid:a.userId,payload:a.payload};fourSq.api.services.service_(fourSq.api.services.paths.privateWeb.intentSaveToPayload(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},intentSaveToVenueDetail:function(a,b,c){a={vid:a.venueId,uid:a.userId};
fourSq.api.services.service_(fourSq.api.services.paths.privateWeb.intentSaveToVenueDetail(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"GET"})}};fourSq.api.services.PromotionBudget={edit:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.promotionbudgets.edit(a.budgetId),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})}};fourSq.api.services.PromotionCampaign={create:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.promotioncampaigns.create(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},edit:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.promotioncampaigns.edit(a.campaignId),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),
type:"POST"})},pause:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.promotioncampaigns.pause(a.campaignId),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},unpause:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.promotioncampaigns.unpause(a.campaignId),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},
end:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.promotioncampaigns.end(a.campaignId),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},start:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.promotioncampaigns.start(a.campaignId),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},details:function(a,
b,c){fourSq.api.services.service_(fourSq.api.services.paths.promotioncampaigns.details(a.campaignId),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.campaign},b,c),error:fourSq.api.services.wrapOnError_(c)})},list:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.promotioncampaigns.list(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.campaigns},b,c),error:fourSq.api.services.wrapOnError_(c)})}};fourSq.api.services.PromotionFlight={end:function(a,b,c,d){fourSq.api.services.service_(fourSq.api.services.paths.promotionflights.end(a),{},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},c,d),error:fourSq.api.services.wrapOnError_(d),type:"POST"})},opportunitydetails:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.promotionflights.opportunitydetails(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.opportunityDetails},b,c),error:fourSq.api.services.wrapOnError_(c)})},
postcheckinforecast:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.promotionflights.postcheckinforecast(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})}};fourSq.api.services.Search={};fourSq.api.services.Search.categoryAutocompletion=function(a,b,c){fourSq.api.services.Search.request_.process(a,b,c,function(a){return(a=_.find(a.groups||[],function(a){return"Categories"===(a.name||"")}))&&a.items||[]},void 0)};fourSq.api.services.Search.commonQueryAutocompletion=function(a,b,c){fourSq.api.services.Search.request_.process(a,b,c,function(a){return(a=_.find(a.groups||[],function(a){return"Queries"===(a.name||"")}))&&a.items||[]},void 0)};
fourSq.api.services.Search.unifiedQueryAutocompletion=function(a,b,c){a=_.extend({m:"foursquare",group:"unified"},a);fourSq.api.services.service_(fourSq.api.services.paths.search.autocomplete(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.groups&&a.groups[0]&&a.groups[0].items||[]},b,c),error:fourSq.api.services.wrapOnError_(c)})};
fourSq.api.services.Search.venueAutocompletion=function(a,b,c){fourSq.api.services.Search.request_.process(a,b,c,function(a){return(a=_.find(a.groups||[],function(a){return"Venues"===(a.name||"")}))&&a.items||[]},void 0)};fourSq.api.services.Search.venueChainAutocompletion=function(a,b,c){a.group="venuechains";fourSq.api.services.Search.request_.process(a,b,c,function(a){return(a=_.find(a.groups||[],function(a){return"VenueChains"===(a.name||"")}))&&a.items||[]},void 0)};
fourSq.api.services.Search.Requester_=function(){};fourSq.api.services.Search.Requester_.prototype.process=function(a,b,c,d,e){};
fourSq.api.services.Search.ConcreteRequester_=function(a){var b=function(){this.store_={}};b.prototype.requested=function(a){return _.isArray(this.store_[a])};b.prototype.add=function(a,b){this.requested(a)?this.store_[a].push(b):this.store_[a]=[b]};b.prototype.getMementos=function(a){var b=this.store_[a];this.store_[a]=void 0;return b};this.responseQueue_=new b;this.responseCache_=a};
fourSq.api.services.Search.ConcreteRequester_.prototype.process=function(a,b,c,d,e){var f=this.hash_(a),g=this.responseCache_.exists(f);b=this.makeMemento_(d,b,c);g?(a=this.responseCache_.get(f),this.processApiSuccessResponse_([b],a)):(g=this.responseQueue_.requested(f),this.responseQueue_.add(f,b),g||this.makeApiRequest_(a,e))};fourSq.api.services.Search.ConcreteRequester_.prototype.hash_=function(a){return _.filter(_.values(a),function(a){return fourSq.isDefinedAndNotNull(a)}).join("::")};
fourSq.api.services.Search.ConcreteRequester_.prototype.makeMemento_=function(a,b,c){return{wrappedSuccess:fourSq.api.services.wrapOnSuccess_(a,b,c),wrappedError:fourSq.api.services.wrapOnError_(c)}};
fourSq.api.services.Search.ConcreteRequester_.prototype.makeApiRequest_=function(a,b){var c=this,d=this.hash_(a),e=b||fourSq.api.services.paths.search.autocomplete();fourSq.api.services.service_(e,a,{success:function(){var a=_.toArray(arguments),b=c.responseQueue_.getMementos(d);c.responseCache_.add(d,a);c.processApiSuccessResponse_(b,a)},error:function(){var a=_.toArray(arguments),b=c.responseQueue_.getMementos(d);_.invoke(b,"wrappedError",a,void 0,void 0)}})};
fourSq.api.services.Search.ConcreteRequester_.prototype.processApiSuccessResponse_=function(a,b){_.invoke(a,"wrappedSuccess",b[0],b[1],b[2])};fourSq.api.services.Search.ResponseCache_=function(){};fourSq.api.services.Search.ResponseCache_.prototype.exists=function(a){};fourSq.api.services.Search.ResponseCache_.prototype.get=function(a){};fourSq.api.services.Search.ResponseCache_.prototype.add=function(a,b){};fourSq.api.services.Search.HopelessResponseCache_=function(){};
fourSq.api.services.Search.HopelessResponseCache_.prototype.exists=function(a){return!1};fourSq.api.services.Search.HopelessResponseCache_.prototype.get=function(a){return null};fourSq.api.services.Search.HopelessResponseCache_.prototype.add=function(a,b){};fourSq.api.services.Search.SimpleResponseCache_=function(){this.store_={}};fourSq.api.services.Search.SimpleResponseCache_.prototype.exists=function(a){return!!this.store_[a]};fourSq.api.services.Search.SimpleResponseCache_.prototype.get=function(a){return this.store_[a]};
fourSq.api.services.Search.SimpleResponseCache_.prototype.add=function(a,b){this.exists(a)&&fourSq.debug.info("overwriting cache for "+a);this.store_[a]=b};fourSq.api.services.Search.request_=new fourSq.api.services.Search.ConcreteRequester_(new fourSq.api.services.Search.SimpleResponseCache_);
fourSq.api.services.Search.venueSearch=function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.search.venuesearch(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.items},b,c),error:fourSq.api.services.wrapOnError_(c)})};fourSq.api.services.Search.recommendations=function(a,b,c){a=_.extend({m:"foursquare"},a);fourSq.api.services.service_(fourSq.api.services.paths.search.recommendations(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c)})};
fourSq.api.services.Search.locationContext=function(a,b,c){fourSq.api.services.foursquareService_(fourSq.api.services.paths.search.locationcontext(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c)})};fourSq.api.services.Settings={coerceSettingValue_:function(a){return fourSq.isString(a)?a:a?1:0},set:function(a,b,c,d){fourSq.api.services.service_(fourSq.api.services.paths.settings.set(a),{value:fourSq.api.services.Settings.coerceSettingValue_(b)},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},c,d),error:fourSq.api.services.wrapOnError_(d),type:"POST"})},setRobin:function(a,b,c,d){fourSq.api.services.service_(fourSq.api.services.paths.settings.set(a),{value:fourSq.api.services.Settings.coerceSettingValue_(b),
m:"swarm"},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},c,d),error:fourSq.api.services.wrapOnError_(d),type:"POST"})},presignup:function(a,b){fourSq.api.services.service_(fourSq.api.services.paths.settings.presignup(),{},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},a,b),error:fourSq.api.services.wrapOnError_(b),type:"GET"})},notificationsSet:function(a,b,c,d,e,f){fourSq.api.services.service_(fourSq.api.services.paths.settings.notificationsSet(a),{value:d?
1:0,deviceType:b,uniqueDevice:c},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},e,f),error:fourSq.api.services.wrapOnError_(f),type:"POST"})}};fourSq.api.services.Special={add:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.specials.add(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},start:function(a,b,c,d){fourSq.api.services.service_(fourSq.api.services.paths.specials.start(a),b,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},c,d),error:fourSq.api.services.wrapOnError_(d),type:"POST"})},end:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.specials.end(a),
{},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},like:function(a,b,c,d){fourSq.api.services.service_(fourSq.api.services.paths.specials.like(a),{set:b},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.likes},c,d),error:fourSq.api.services.wrapOnError_(d),type:"POST"})},likes:function(a,b,c,d){fourSq.api.services.service_(fourSq.api.services.paths.specials.likes(a),b,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.likes},
c,d),error:fourSq.api.services.wrapOnError_(d),type:"GET"})},edit:function(a,b,c,d){fourSq.api.services.service_(fourSq.api.services.paths.specials.edit(a),b,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},c,d),error:fourSq.api.services.wrapOnError_(d),type:"POST"})}};fourSq.api.services.StreamActivity={detail:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.streamActivities.detail(a),{},{success:fourSq.api.services.wrapOnSuccess_(function(a){a=_.first(a.activity.items);return fourSq.isDefinedAndNotNull(a)?a:void 0},b,c),error:fourSq.api.services.wrapOnError_(c),type:"GET"})},like:function(a,b,c,d){fourSq.api.services.service_(fourSq.api.services.paths.streamActivities.like(a),{set:b},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},
c,d),error:fourSq.api.services.wrapOnError_(d),type:"POST"})},recent:function(a,b,c){c=_.extend({},c);fourSq.api.services.service_(fourSq.api.services.paths.streamActivities.recent(),c,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.activities},a,b),error:fourSq.api.services.wrapOnError_(b),type:"GET"})},swarmRecent:function(a,b,c){c=_.extend({m:"swarm"},c);fourSq.api.services.service_(fourSq.api.services.paths.streamActivities.recent(),c,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.activities},
a,b),error:fourSq.api.services.wrapOnError_(b),type:"GET"})},updates:function(a,b,c){c=_.extend({},c);fourSq.api.services.service_(fourSq.api.services.paths.streamActivities.updates(),c,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},a,b),error:fourSq.api.services.wrapOnError_(b),type:"GET"})},save:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.streamActivities.save(a),{},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),
type:"POST"})}};fourSq.api.services.Taste={add:function(a,b,c){_.isArray(a.tasteId)&&(a.tasteId=a.tasteId.join(","));fourSq.api.services.foursquareService_(fourSq.api.services.paths.tastes.add(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},remove:function(a,b,c){_.isArray(a.tasteId)&&(a.tasteId=a.tasteId.join(","));fourSq.api.services.foursquareService_(fourSq.api.services.paths.tastes.remove(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},
b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},autocomplete:function(a,b,c){fourSq.api.services.foursquareService_(fourSq.api.services.paths.tastes.autocomplete(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.tastes},b,c),error:fourSq.api.services.wrapOnError_(c)})},suggestions:function(a,b,c){var d=a.ll?fourSq.api.models.companion.geo.LatLngUtil.toQueryValue(a.ll):void 0;a=_.extend({},a,{ll:d});fourSq.api.services.foursquareService_(fourSq.api.services.paths.tastes.suggestions(),
a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c)})}};fourSq.api.services.Taste.SuggestionIntent={ONBOARDING:"webonboarding",PROFILE_ADD:"webprofileadd",TIP_STREAM:"webtipstream",HOMEPAGE:"webhomepage",CAMPAIGN:"webcampaign",TRAVELWIZARD:"travelwizard"};fourSq.api.services.Tip={detail:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.tips.detail(a),{},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.tip},b,c),error:fourSq.api.services.wrapOnError_(c)})},add:function(a,b,c,d,e,f){a={venueId:a,text:b};b=fourSq.api.services.paths.tips.add();e&&(a=_.extend(a,e));f&&(b=b+"?metrics\x3d"+f);fourSq.api.services.service_(b,a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.tip},c,d),error:fourSq.api.services.wrapOnError_(d),
type:"POST"})},edit:function(a,b,c,d,e){var f={};b&&(f={text:b});e&&(f=_.extend(f,e));fourSq.api.services.service_(fourSq.api.services.paths.tips.edit(a),f,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.tip},c,d),error:fourSq.api.services.wrapOnError_(d),type:"POST"})},deletetip:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.tips.deletetip(a.id),a,{success:fourSq.api.services.wrapOnSuccess_(function(){return null},b,c),error:fourSq.api.services.wrapOnError_(c),
type:"POST"})},flag:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.tips.flag(a.id),a,{success:fourSq.api.services.wrapOnSuccess_(function(){return null},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},like:function(a,b,c,d){fourSq.api.services.service_(fourSq.api.services.paths.tips.like(a),{set:b},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.likes},c,d),error:fourSq.api.services.wrapOnError_(d),type:"POST"})},vote:function(a,b,c,d){fourSq.api.services.service_(fourSq.api.services.paths.tips.vote(a),
{vote:b},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.tip},c,d),error:fourSq.api.services.wrapOnError_(d),type:"POST"})},removeVote:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.tips.removevote(a),{},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.tip},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},likes:function(a,b,c,d){fourSq.api.services.service_(fourSq.api.services.paths.tips.likes(a),b,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.likes},
c,d),error:fourSq.api.services.wrapOnError_(d)})},addComment:function(a,b,c,d,e){b={TIP_ID:a,text:b,mentions:c};fourSq.api.services.service_(fourSq.api.services.paths.tips.addcomment(a),b,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.comment},d,e),error:fourSq.api.services.wrapOnError_(e),type:"POST"})},comments:function(a,b,c,d,e){b={TIP_ID:a,limit:b,offset:c};fourSq.api.services.service_(fourSq.api.services.paths.tips.comments(a),b,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.comments},
d,e),error:fourSq.api.services.wrapOnError_(e),type:"GET"})},listed:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.tips.listed(a.id),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.lists},b,c),error:fourSq.api.services.wrapOnError_(c)})},share:function(a,b,c,d){fourSq.api.services.service_(fourSq.api.services.paths.tips.share(a),b,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.tip},c,d),error:fourSq.api.services.wrapOnError_(d),type:"POST"})}};fourSq.api.services.Travel={createAnonymousUser:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.travel.createanonymous(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},venueAutocompletion:function(a,b,c){var d=fourSq.api.services.paths.travel.venuesearch();fourSq.api.services.Search.request_.process(a,b,c,function(a){return(a=_.find(a.groups||[],function(a){return"Venues"===(a.name||"")}))&&a.items||
[]},d)}};fourSq.api.services.Updates={notifications:function(a,b,c){c=_.extend({limit:10},c);fourSq.api.services.service_(fourSq.api.services.paths.updates.notifications(),c,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.notifications},a,b),error:fourSq.api.services.wrapOnError_(b)})},markread:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.updates.markread(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),
type:"POST"})}};fourSq.api.services.User={detail:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.users.detail(a.id),null,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.user},b,c),error:fourSq.api.services.wrapOnError_(c)})},friends:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.users.friends(a.id),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.friends},b,c),error:fourSq.api.services.wrapOnError_(c)})},clearLocationHistory:function(a,
b){fourSq.api.services.service_(fourSq.api.services.paths.users.clearLocationHistory(),{},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},a,b),error:fourSq.api.services.wrapOnError_(b)})},checkins:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.users.checkins(a.userId),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.checkins},b,c),error:fourSq.api.services.wrapOnError_(c)})},mute:function(a,b,c,d){fourSq.api.services.service_(fourSq.api.services.paths.users.mute(a),
{value:b},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},c,d),error:fourSq.api.services.wrapOnError_(d),type:"POST"})},deleteUser:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.users.deleteUser(),{password:a},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},approve:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.users.approve(a.id),null,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.user},
b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},deny:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.users.deny(a.id),null,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.user},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},explainDeny:function(a,b,c){var d={stranger:a.stranger};fourSq.api.services.service_(fourSq.api.services.paths.users.explaindeny(a.id),d,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),
error:fourSq.api.services.wrapOnError_(c),type:"POST"})},invite:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.users.invite(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},request:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.users.request(a.id),null,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.user},b,c),error:fourSq.api.services.wrapOnError_(c),
type:"POST"})},unrequest:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.users.unrequest(a.id),null,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.user},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},unfriend:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.users.unfriend(a.id),null,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.user},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},setpings:function(a,
b,c){fourSq.api.services.service_(fourSq.api.services.paths.users.setpings(a.id),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.user},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},requests:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.users.requests(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return _.map(a.requests||[],function(a){return a})},b,c),error:fourSq.api.services.wrapOnError_(c)})},followers:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.users.followers(a.id),
a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.followers},b,c),error:fourSq.api.services.wrapOnError_(c)})},search:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.users.search(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return _.map(a.results||[],function(a){return a})},b,c),error:fourSq.api.services.wrapOnError_(c)})},photos:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.users.photos(a.id),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.photos},
b,c),error:fourSq.api.services.wrapOnError_(c)})},tips:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.users.tips(a.id),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.tips},b,c),error:fourSq.api.services.wrapOnError_(c)})},venuehistory:function(a,b,c,d,e){e={mini:"true"};d&&(e.ll=d);fourSq.api.services.service_(fourSq.api.services.paths.users.venuehistory(a),e,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.venues.items},b,c),error:fourSq.api.services.wrapOnError_(c)})},
lists:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.users.lists(a.id),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.lists},b,c),error:fourSq.api.services.wrapOnError_(c)})},bulkLookup:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.users.bulkLookup(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.users},b,c),error:fourSq.api.services.wrapOnError_(c)})},bulkRequest:function(a,b,c){a={userIds:a.userIds.join()};
fourSq.api.services.service_(fourSq.api.services.paths.users.bulkRequest(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},lookup:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.users.lookup(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.user},b,c),error:fourSq.api.services.wrapOnError_(c)})},stats:function(a,b,c,d,e){b=_.extend({tableName:b},c);fourSq.api.services.service_(fourSq.api.services.paths.users.stats(a),
b,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.data},d,e),error:fourSq.api.services.wrapOnError_(e)})},suendorse:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.users.suendorse(a),{},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},cansuendorse:function(a,b,c){a={userQuery:a};fourSq.api.services.service_(fourSq.api.services.paths.users.cansuendorse(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},
b,c),error:fourSq.api.services.wrapOnError_(c)})},suggest:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.users.suggest(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.results},b,c),error:fourSq.api.services.wrapOnError_(c)})},setProfilePhoto:function(a,b,c){fourSq.api.services.foursquareUploadFile_(fourSq.api.services.paths.users.update(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},
update:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.users.update(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.user},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},profile:function(a,b,c,d){fourSq.api.services.service_(fourSq.api.services.paths.users.profile(a),{travelStats:b},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},c,d),error:fourSq.api.services.wrapOnError_(d),type:"GET"})},historysearch:function(a,b,c){var d=
{offset:a.offset,limit:a.limit,friendId:a.friendIds.join(",")};fourSq.isDefinedAndNotNull(a.afterTimestamp)&&(d.afterTimestamp=a.afterTimestamp);fourSq.isDefinedAndNotNull(a.beforeTimestamp)&&(d.beforeTimestamp=a.beforeTimestamp);fourSq.isDefinedAndNotNull(a.categoryId)&&(d.categoryId=a.categoryId);fourSq.isDefinedAndNotNull(a.sort)&&(d.sort=a.sort);fourSq.isDefinedAndNotNull(a.llBounds)&&(d.llBounds=a.llBounds);fourSq.isDefinedAndNotNull(a.query)&&(d.query=a.query);fourSq.api.services.service_(fourSq.api.services.paths.users.historysearch(a.userId),
d,{success:fourSq.api.services.wrapOnSuccess_(function(a){return{checkins:a.checkins,clusters:a.clusters}},b,c),error:fourSq.api.services.wrapOnError_(c),type:"GET"})},swarmhistorysearch:function(a,b,c){var d={offset:a.offset,limit:a.limit,m:"swarm",clusters:"false"};fourSq.isDefinedAndNotNull(a.afterTimestamp)&&(d.afterTimestamp=a.afterTimestamp);fourSq.isDefinedAndNotNull(a.beforeTimestamp)&&(d.beforeTimestamp=a.beforeTimestamp);fourSq.isDefinedAndNotNull(a.categoryId)&&(d.categoryId=a.categoryId);
fourSq.isDefinedAndNotNull(a.sort)&&(d.sort=a.sort);fourSq.isDefinedAndNotNull(a.llBounds)&&(d.llBounds=a.llBounds);fourSq.isDefinedAndNotNull(a.query)&&(d.query=a.query);fourSq.isDefinedAndNotNull(a.friendIds)&&(d.friendId=a.friendIds.join(","));fourSq.isDefinedAndNotNull(a.venueIds)&&(d.venueIds=a.venueIds.join(","));fourSq.isDefinedAndNotNull(a.geoId)&&(d.geoId=a.geoId);fourSq.api.services.service_(fourSq.api.services.paths.users.historysearch(a.userId),d,{success:fourSq.api.services.wrapOnSuccess_(function(b){return{checkins:b.checkins,
originalParams:a}},b,c),error:fourSq.api.services.wrapOnError_(c),type:"GET"})},historycompletions:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.users.historycompletions(a.userId),{m:"swarm"},{success:fourSq.api.services.wrapOnSuccess_(function(a){return{geographies:a.geographies,venues:a.venues}},b,c),error:fourSq.api.services.wrapOnError_(c),type:"GET"})},flagStatsForQueue:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.users.flagStatsForQueue(),a,
{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c)})},flagStats:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.users.flagstats(a),{},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c)})},userWoes:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.users.woeleaders(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},
b,c),error:fourSq.api.services.wrapOnError_(c)})},upgradeEligible:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.users.upgradeeligible(a),{},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"GET"})},upgradeApply:function(a,b){fourSq.api.services.service_(fourSq.api.services.paths.users.upgradeapply(),{},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},a,b),error:fourSq.api.services.wrapOnError_(b),
type:"POST"})},upgradeStats:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.users.upgradestats(a),{},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c)})},setSUToolsLocation:function(a,b,c,d){fourSq.api.services.service_(fourSq.api.services.paths.users.setsutoolslocation(a),b,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},c,d),error:fourSq.api.services.wrapOnError_(d),type:"POST"})},setSUToolsLanguage:function(a,
b,c,d){fourSq.api.services.service_(fourSq.api.services.paths.users.setsutoolslanguage(a),b,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},c,d),error:fourSq.api.services.wrapOnError_(d),type:"POST"})},add:function(a,b,c){a=_.clone(a);a[fourSq.config.api.SIG_PARAM_NAME]=fourSq.config.api.SIG_VALUE;a.m="foursquare";$.ajax({url:"/go/create_user",data:a,type:"POST",success:b,error:c})},banFromEditing:function(a,b,c,d){fourSq.api.services.service_(fourSq.api.services.paths.users.banfromediting(),
{userId:a.join(","),action:b},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},c,d),error:fourSq.api.services.wrapOnError_(d),type:"POST"})},unbanFromEditing:function(a,b,c,d){fourSq.api.services.service_(fourSq.api.services.paths.users.unbanfromediting(),{userId:a.join(","),action:b},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},c,d),error:fourSq.api.services.wrapOnError_(d),type:"POST"})},demoteFromEditing:function(a,b,c,d){fourSq.api.services.service_(fourSq.api.services.paths.users.demotefromediting(),
{userId:a.join(","),action:b},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},c,d),error:fourSq.api.services.wrapOnError_(d),type:"POST"})},undemoteFromEditing:function(a,b,c,d){fourSq.api.services.service_(fourSq.api.services.paths.users.undemotefromediting(),{userId:a.join(","),action:b},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},c,d),error:fourSq.api.services.wrapOnError_(d),type:"POST"})},banFromLogin:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.users.banfromlogin(),
{userId:a.join(",")},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},unbanFromLogin:function(a,b,c,d){fourSq.api.services.service_(fourSq.api.services.paths.users.unbanfromlogin(),{userId:a.join(",")},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},c,d),error:fourSq.api.services.wrapOnError_(d),type:"POST"})},banAllContent:function(a,b,c,d){fourSq.api.services.service_(fourSq.api.services.paths.users.banallcontent(),
{userId:a.join(","),action:b},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},c,d),error:fourSq.api.services.wrapOnError_(d),type:"POST"})},flagAllContent:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.users.flagallcontent(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},demoteAllContent:function(a,b,c,d){fourSq.api.services.service_(fourSq.api.services.paths.users.demoteallcontent(),
{userId:a.join(","),action:b},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},c,d),error:fourSq.api.services.wrapOnError_(d),type:"POST"})},flag:function(a,b,c,d,e){fourSq.api.services.service_(fourSq.api.services.paths.users.flag(a),{problem:b,comment:c},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},d,e),error:fourSq.api.services.wrapOnError_(e),type:"POST"})},banAllPhotos:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.users.banallphotos(a),
{},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},demoteAllPhotos:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.users.demoteallphotos(a),{},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},banAllTips:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.users.banalltips(a),{},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},
b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},demoteAllTips:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.users.demotealltips(a),{},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},deletePhoto:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.users.deletephoto(a),{},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),
type:"POST"})},resolveFlags:function(a,b,c,d){fourSq.api.services.service_(fourSq.api.services.paths.users.resolveflags(a),{decision:b},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},c,d),error:fourSq.api.services.wrapOnError_(d),type:"POST"})},socialStats:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.users.socialStats(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.stats},b,c),error:fourSq.api.services.wrapOnError_(c),type:"GET"})},
flagPing:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.users.flagping(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},annotateStop:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.users.annotatestop(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},locationHistory:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.users.locationhistory(),
a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.probableCheckins},b,c),error:fourSq.api.services.wrapOnError_(c),type:"GET"})},linkFacebookPage:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.users.linkfacebookpage(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},expertiseSummary:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.users.expertisesummary(a.userId),
{},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.expertise},b,c),error:fourSq.api.services.wrapOnError_(c),type:"GET"})},createFollow:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.users.createfollow(a.userId),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},createFollows:function(a,b,c){a={userIds:a.userIds.join(),m:"foursquare"};fourSq.api.services.service_(fourSq.api.services.paths.users.createfollows(),
a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},unfollow:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.users.unfollow(a.userId),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},followersB:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.users.followers(a.id),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},
b,c),error:fourSq.api.services.wrapOnError_(c)})},following:function(a,b,c){a.m=a.m||"foursquare";fourSq.api.services.service_(fourSq.api.services.paths.users.following(a.id),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c)})},tastes:function(a,b,c){fourSq.api.services.foursquareService_(fourSq.api.services.paths.users.tastes(a.uid),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.tastes},b,c),error:fourSq.api.services.wrapOnError_(c)})},
resendVerificationEmail:function(a,b){fourSq.api.services.foursquareService_(fourSq.api.services.paths.users.resendVerificationEmail(),{},{success:fourSq.api.services.wrapOnSuccess_(fourSq.emptyFunction,a,b),error:fourSq.api.services.wrapOnError_(b),type:"POST"})},blockMessages:function(a,b,c,d){fourSq.api.services.service_(fourSq.api.services.paths.users.blockMessages(a),{value:b},{success:fourSq.api.services.wrapOnSuccess_(fourSq.emptyFunction,c,d),error:fourSq.api.services.wrapOnError_(d),type:"POST"})},
flagged:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.users.flagged(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.users.items},b,c),error:fourSq.api.services.wrapOnError_(c)})},challengeOptIn:function(a,b,c,d){a={challengeId:a,set:b,suppressNotification:!0};fourSq.api.services.service_(fourSq.api.services.paths.users.challengeOptIn(),a,{success:fourSq.api.services.wrapOnSuccess_(fourSq.emptyFunction,c,d),error:fourSq.api.services.wrapOnError_(d),type:"POST"})},
unlock:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.users.unlock(),a,{success:fourSq.api.services.wrapOnSuccess_(fourSq.emptyFunction,b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})}};fourSq.api.services.User.woeTypes={USERSPAM:"userspam"};fourSq.api.services.User.flaggedMode={SUPERUSER:"superuser",PROTECTED_USER:"protected_user",ADMIN_ONLY:"admin_only"};fourSq.api.services.VenueEdit={rollback:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.venueedits.rollback(a),{},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},markAsSuspicious:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.venueedits.markAsSuspicious(a),{},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})}};fourSq.api.services.VenueGroups={add:function(a,b,c,d){a={name:a};fourSq.isDefinedAndNotNull(b)&&(a.venueId=_(b).join(","));fourSq.api.services.service_(fourSq.api.services.paths.venuegroups.add(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.venueGroup},c,d),error:fourSq.api.services.wrapOnError_(d),type:"POST"})},deleteVenueGroup:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.venuegroups.deleteVenueGroup(a),{},{success:fourSq.api.services.wrapOnSuccess_(function(a){},
b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},list:function(a,b){fourSq.api.services.service_(fourSq.api.services.paths.venuegroups.list(),{},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.venueGroups},a,b),error:fourSq.api.services.wrapOnError_(b)})},detail:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.venuegroups.detail(a),{},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.venueGroup},b,c),error:fourSq.api.services.wrapOnError_(c)})},
remove:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.venuegroups.remove(a),{},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},addVenues:function(a,b,c,d){fourSq.api.services.service_(fourSq.api.services.paths.venuegroups.addVenues(a),{venueId:_(b).join(",")},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},c,d),error:fourSq.api.services.wrapOnError_(d),type:"POST"})},removeVenues:function(a,
b,c,d){fourSq.api.services.service_(fourSq.api.services.paths.venuegroups.removeVenues(a),{venueId:_(b).join(",")},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},c,d),error:fourSq.api.services.wrapOnError_(d),type:"POST"})},update:function(a,b,c,d){var e={};fourSq.isDefinedAndNotNull(b.name)&&(e.name=b.name);fourSq.isDefinedAndNotNull(b.venueId)&&(e.venueId=_(b.venueId).join(","));fourSq.api.services.service_(fourSq.api.services.paths.venuegroups.update(a),e,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.venueGroup},
c,d),error:fourSq.api.services.wrapOnError_(d),type:"POST"})},campaigns:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.venuegroups.campaigns(a),{},{success:fourSq.api.services.wrapOnSuccess_(function(a){a=a.campaigns;return fourSq.isDefinedAndNotNull(a)?a.items:[]},b,c),error:fourSq.api.services.wrapOnError_(c)})},flag:function(a,b,c,d){fourSq.api.services.service_(fourSq.api.services.paths.venuegroups.flag(a),b,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},
c,d),error:fourSq.api.services.wrapOnError_(d),type:"POST"})}};fourSq.api.services.Venue={detail:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.venues.detail(a),{},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.venue},b,c),error:fourSq.api.services.wrapOnError_(c)})},trending:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.venues.trending(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return _.map(a.venues,function(a){return a})},b,c),error:fourSq.api.services.wrapOnError_(c)})},like:function(a,
b,c,d){fourSq.api.services.service_(fourSq.api.services.paths.venues.like(a),{set:b},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.likes},c,d),error:fourSq.api.services.wrapOnError_(d),type:"POST"})},dislike:function(a,b,c,d){fourSq.api.services.service_(fourSq.api.services.paths.venues.dislike(a),{set:b},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},c,d),error:fourSq.api.services.wrapOnError_(d),type:"POST"})},ok:function(a,b,c,d){fourSq.api.services.service_(fourSq.api.services.paths.venues.ok(a),
{set:b},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},c,d),error:fourSq.api.services.wrapOnError_(d),type:"POST"})},noRate:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.venues.noRate(a),{},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},submitRank:function(a,b,c,d){fourSq.api.services.service_(fourSq.api.services.paths.venues.submitRank(a),{order:b},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},
c,d),error:fourSq.api.services.wrapOnError_(d),type:"POST"})},markdone:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.venues.markdone(a),{},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},unmarkdone:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.venues.unmarkdone(a),{},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),
type:"POST"})},mute:function(a,b,c,d){fourSq.api.services.service_(fourSq.api.services.paths.venues.mute(a),{value:b},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},c,d),error:fourSq.api.services.wrapOnError_(d),type:"POST"})},validateHours:function(a,b,c,d){b={hours:b};fourSq.api.services.service_(fourSq.api.services.paths.venues.validateHours(a),b,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},c,d),error:fourSq.api.services.wrapOnError_(d),type:"POST"})},hours:function(a,
b,c){fourSq.api.services.service_(fourSq.api.services.paths.venues.hours(a),{},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"GET"})},seasonalHours:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.venues.seasonalHours(a),{},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"GET"})},children:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.venues.children(a),
{},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"GET"})},deletedvenues:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.venues.deletedvenues(a),{},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"GET"})},explore:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.venues.explore(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},
b,c),error:fourSq.api.services.wrapOnError_(c)})},search:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.venues.search(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return _(a.venues).map(function(a){return a})},b,c),error:fourSq.api.services.wrapOnError_(c)})},find:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.venues.find(a.id),null,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.venue},b,c),error:fourSq.api.services.wrapOnError_(c)})},
friendVisits:function(a,b,c,d){fourSq.api.services.service_(fourSq.api.services.paths.venues.friendvisits(a),b,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.friendVisits},c,d),error:fourSq.api.services.wrapOnError_(d)})},suggestCompletion:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.venues.suggestCompletion(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return _(a.minivenues).map(function(a){return a})},b,c),error:fourSq.api.services.wrapOnError_(c)})},
tips:function(a,b,c,d){fourSq.api.services.foursquareService_(fourSq.api.services.paths.venues.tips(a),b,{success:fourSq.api.services.wrapOnSuccess_(function(a){var b=a.justifications;b&&0<b.length&&b[0].target&&0<b[0].target.object.url.indexOf("device_menu")&&(b[0].target.object.url=b[0].target.object.url.replace("device_menu","menu"));return a},c,d),error:fourSq.api.services.wrapOnError_(d)})},listed:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.venues.listed(a.id),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.lists},
b,c),error:fourSq.api.services.wrapOnError_(c)})},events:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.venues.events(a.id),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.events},b,c),error:fourSq.api.services.wrapOnError_(c)})},reasons:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.venues.reasons(a.id),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.reasons},b,c),error:fourSq.api.services.wrapOnError_(c)})},photos:function(a,
b,c){fourSq.api.services.service_(fourSq.api.services.paths.venues.photos(a.id),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.photos},b,c),error:fourSq.api.services.wrapOnError_(c)})},categories:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.venues.categories(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.categories||[]},b,c),error:fourSq.api.services.wrapOnError_(c)})},attributes:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.venues.attributes(a),
{},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.attributes||[]},b,c),error:fourSq.api.services.wrapOnError_(c)})},agreeClaim:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.claims.agree(a),{},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},claimStatus:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.claims.status(a),{},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},
b,c),error:fourSq.api.services.wrapOnError_(c),type:"GET"})},claimMail:function(a,b,c,d,e,f,g,h){b={isUpdate:b,address:c,city:d,state:e,zip:f};fourSq.api.services.service_(fourSq.api.services.paths.claims.mail(a),b,{success:fourSq.api.services.wrapOnSuccess_(function(a){return"sent"==a.postcard},g,h),error:fourSq.api.services.wrapOnError_(h),type:"POST"})},claimCall:function(a,b,c,d){fourSq.api.services.service_(fourSq.api.services.paths.claims.verify(a),{number:b},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},
c,d),error:fourSq.api.services.wrapOnError_(d),type:"POST"})},claimFinish:function(a,b,c,d,e){fourSq.api.services.service_(fourSq.api.services.paths.claims.finish(a),{token:b,tokenType:c},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.status},d,e),error:fourSq.api.services.wrapOnError_(e),type:"POST"})},delete_:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.venues.delete_(a),{},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),
type:"POST"})},edit:function(a,b,c,d){b={name:b.venueName,address:b.stAddr,crossStreet:b.cross,city:b.city,state:b.state,zip:b.zip,cc:b.country,ll:b.latlng,description:b.description,storeId:b.storeId,url:b.url,twitter:b.twitter,phone:b.phone,locationOverride:b.locationOverride};""===b.url&&delete b.url;fourSq.api.services.service_(fourSq.api.services.paths.venues.edit(a),b,{success:fourSq.api.services.wrapOnSuccess_(function(a){},c,d),error:fourSq.api.services.wrapOnError_(d),type:"POST"})},add:function(a,
b,c){fourSq.api.services.service_(fourSq.api.services.paths.venues.add(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.venue},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},lock:function(a,b,c,d){b={locked:b};fourSq.api.services.service_(fourSq.api.services.paths.venues.edit(a),b,{success:fourSq.api.services.wrapOnSuccess_(function(a){},c,d),error:fourSq.api.services.wrapOnError_(d),type:"POST"})},removeCategory:function(a,b,c,d){b={primaryCategoryId:b};fourSq.api.services.service_(fourSq.api.services.paths.venues.removeCategory(a),
b,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},c,d),error:fourSq.api.services.wrapOnError_(d),type:"POST"})},revokemayorship:function(a,b,c,d){fourSq.api.services.service_(fourSq.api.services.paths.venues.revokemayorship(a),b,{success:fourSq.api.services.wrapOnSuccess_(fourSq.emptyFunction,c,d),error:fourSq.api.services.wrapOnError_(d),type:"POST"})},proposeCategory:function(a,b,c,d){b={primaryCategoryId:b};fourSq.api.services.service_(fourSq.api.services.paths.venues.proposeCategory(a),
b,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},c,d),error:fourSq.api.services.wrapOnError_(d),type:"POST"})},proposeDuplicates:function(a,b,c,d){b.problem="duplicate";fourSq.api.services.service_(fourSq.api.services.paths.venues.flag(a),b,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},c,d),error:fourSq.api.services.wrapOnError_(d),type:"POST"})},roles:function(a,b,c,d){b={userId:b};fourSq.api.services.service_(fourSq.api.services.paths.venues.roles(a),b,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.roles||
[]},c,d),error:fourSq.api.services.wrapOnError_(d),type:"GET"})},listManagers:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.venues.listManagers(a),{},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"GET"})},pageAccess:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.venues.pageAccess(a),{},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),
type:"GET"})},setRole:function(a,b,c,d){b={userId:b.userId,role:b.role,visible:b.visible};fourSq.api.services.service_(fourSq.api.services.paths.venues.setRole(a),b,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},c,d),error:fourSq.api.services.wrapOnError_(d),type:"POST"})},proposeEdit:function(a,b,c,d,e){c&&(b.comment=c);fourSq.api.services.service_(fourSq.api.services.paths.venues.proposeEdit(a),b,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},d,e),error:fourSq.api.services.wrapOnError_(e),
type:"POST"})},flag:function(a,b,c,d){fourSq.api.services.service_(fourSq.api.services.paths.venues.flag(a),b,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},c,d),error:fourSq.api.services.wrapOnError_(d),type:"POST"})},flagged:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.venues.flagged(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.venues.items},b,c),error:fourSq.api.services.wrapOnError_(c)})},flagStats:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.venues.flagstats(),
a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c)})},flags:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.venues.flags(a),{},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.flags.items},b,c),error:fourSq.api.services.wrapOnError_(c)})},mislocated:function(a,b,c,d,e,f,g,h,l){b={venuell:fourSq.api.models.companion.geo.LatLngUtil.toQueryValue(b),llLabel:c,additionalVenueLL:fourSq.isDefinedAndNotNull(d)?
fourSq.api.models.companion.geo.LatLngUtil.toQueryValue(d):void 0,additionalLLLabel:fourSq.isDefinedAndNotNull(e)?e:void 0,problem:"mislocated",creatingView:g};f&&(b.comment=f);fourSq.api.services.service_(fourSq.api.services.paths.venues.flag(a),b,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},h,l),error:fourSq.api.services.wrapOnError_(l),type:"POST"})},removeRoles:function(a,b,c,d){fourSq.api.services.Venue.setRole(a,{userId:b,role:"none",visible:!1},c,d)},share:function(a,b,
c,d){fourSq.api.services.service_(fourSq.api.services.paths.venues.share(a),b,{success:fourSq.api.services.wrapOnSuccess_(function(a){return null},c,d),error:fourSq.api.services.wrapOnError_(d),type:"POST"})},menu:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.venues.menu(a),{},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.menu},b,c),error:fourSq.api.services.wrapOnError_(c)})},removeSelectedPhotos:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.venues.removeSelectedPhotos(a),
{},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c)})},setSelectedPhotos:function(a,b,c,d){fourSq.api.services.service_(fourSq.api.services.paths.venues.setSelectedPhotos(a),{photoIds:b},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},c,d),error:fourSq.api.services.wrapOnError_(d)})},personalInfo:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.venues.personalInfo(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.venues},
b,c),error:fourSq.api.services.wrapOnError_(c)})},addShape:function(a,b,c,d){fourSq.api.services.service_(fourSq.api.services.paths.venues.addShape(a),b,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},c,d),error:fourSq.api.services.wrapOnError_(d),type:"POST"})},childCandidates:function(a,b,c,d){fourSq.api.services.service_(fourSq.api.services.paths.venues.childCandidates(a),b,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},c,d),error:fourSq.api.services.wrapOnError_(d),
type:"POST"})},createDiscussion:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.venues.createDiscussion(a),{},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a.venue},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},massEdit:function(a,b,c){a=_.map(a,function(a){var b=[],c;for(c in a.params)a.params.hasOwnProperty(c)&&b.push(c+"\x3d"+encodeURIComponent(a.params[c]));return"id\x3d"+a.venueId+"\x26"+b.join("\x26")});fourSq.api.services.service_(fourSq.api.services.paths.venues.massEdit(),
{edits:a.join(",")},{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"POST"})},recentInteractions:function(a,b,c){fourSq.api.services.service_(fourSq.api.services.paths.venues.recentInteractions(),a,{success:fourSq.api.services.wrapOnSuccess_(function(a){return a},b,c),error:fourSq.api.services.wrapOnError_(c),type:"GET"})}};
fourSq.api.services.Venue.woeTypes={INFO:"info",DUPLICATE:"duplicate",CATEGORY:"category",CHAIN:"chain",REMOVAL:"remove",PRIVATE:"private",UNCATEGORIZED:"uncategorized",HOURS:"hours",EXPLORESPAM:"explorespam",TIP:"tip",ATTRIBUTE:"attribute",PHOTO:"photo",MISLOCATED:"mislocated",TRANSLATEDNAME:"translatedname",SUBVENUE:"subvenue",LOCATIONREVIEW:"locationreview"};fourSq.api.services.Venue.woeVoteTypes={ACCEPT:"accept",REJECT:"reject",SKIP:"skip"};
fourSq.api.services.Venue.hoursValidationStatus={OK:"OK",ERROR:"ERROR",POPULARHOURSWARNING:"POPULARHOURSWARNING",SUSPICIOUSVALUESWARNING:"SUSPICIOUSVALUESWARNING"};fourSq.api.services.Venue.flaggedMode={HISTORY:"history",NEW:"new",EXPLORE:"explore",LOCKED:"locked",NOBOT:"noBot"};fourSq.api.services.Venue.RevokeMayorshipReasons={CHEATER:"cheater",EMPLOYEE:"employee",RESIGN:"resign"};fourSq.api.services.Venue.ShapeSource={DRAWN:"drawnOnOsm",OSM:"osm"};fourSq.api.services.utils.LoaderService=function(a){};
fourSq.api.services.utils.LoaderService=fourSq.Class.extend({initialize:function(a){this.apiCall_=a.apiCall;this.getApiCallParams_=a.getApiCallParams;this.successCallback_=a.successCallback;this.errorCallback_=a.errorCallback||function(){};this.pageSize_=a.pageSize;this.readN_=a.readN;this.getEmptyCache_=a.getEmptyCache;this.getCount_=a.getCount;this.join_=a.join;this.cache_=a.cache||this.getEmptyCache_();this.filterCache_=a.filterCache;this.transformArgs_=a.transformArgs;this.remaining_=this.cache_?
this.getCount_(this.cache_):0;this.successCount_=a.successCount||0;this.isLoading_=!1;this.hasMore_=!0;this.BUFFER_=5},fetch:function(a){a=a||this.pageSize_;var b=(this.cache_=this.filterCache_(this.cache_))?this.getCount_.apply(this,this.cache_):0;b<a&&this.hasMore_?(this.activeCallback_=fourSq.bind(function(){this.fetch(a)},this),this.load_()):(b<a+this.BUFFER_&&this.load_(),b=this.readN_.apply(this,[0===b?0:a].concat(this.cache_)),this.successCallback_.apply(this,b))},next:function(){this.fetch(1)},
reset:function(){this.cache_=this.getEmptyCache_();this.hasMore_=!0;this.load_()},onSuccess_:function(){var a=this.filterCache_(this.transformArgs_(Array.prototype.slice.call(arguments)));this.hasMore_=0!==this.getCount_.apply(this,a);this.successCount_++;this.isLoading_=!1;this.cache_=this.cache_?this.join_(this.cache_,a):a;if(a=this.activeCallback_)this.activeCallback_=null,a()},load_:function(){if(!this.isLoading_&&this.hasMore_){this.isLoading_=!0;var a=this.getApiCallParams_(this.successCount_),
b=fourSq.bind(this.onSuccess_,this),a=a.concat([b,this.errorCallback_]);this.apiCall_.apply(this,a)}}});fourSq.api.services.utils.UserWoeLoader=function(a){};
fourSq.api.services.utils.UserWoeLoader=fourSq.api.services.utils.LoaderService.extend({initialize:function(a){a=_.defaults(a,{apiCall:fourSq.api.services.User.flagged,getEmptyCache:function(){return[[]]},getCount:function(a){return a.length},readN:function(a,c){for(var d=[],e=0,f=Math.min(c.length,a);e<f;e++)d.push(c.shift());return[d]},join:function(a,c){if(0===a[0].length)return c;var d={};return[_.filter(c[0].concat(a[0]),function(a){a=a.id;return d[a]?!1:d[a]=!0})]},filterCache:function(a){var c=
this,d=fourSq.bind(function(a){a.flags.items=_.filter(a.flags.items,function(a){return!_.any(c.blacklistedAttrs_,function(b){return this.matches_(b,a)},this)},this);return a},this);a=_.map(a[0],d);return[_.filter(a,function(a){return 0<a.flags.items.length})]},transformArgs:function(a){return[a[0]]}});fourSq.api.services.utils.UserWoeLoader.__super__.initialize.call(this,a);this.blacklistedAttrs_=[]},matches_:function(a,b){for(var c in a)if(a[c]!==b[c])return!1;return!0},blacklist:function(a){this.blacklistedAttrs_.push(a)}});fourSq.api.services.utils.VenueWoeLoader=function(a){};
fourSq.api.services.utils.VenueWoeLoader=fourSq.api.services.utils.LoaderService.extend({initialize:function(a){a=_.defaults(a,{apiCall:fourSq.api.services.Venue.flagged,getEmptyCache:function(){return[[]]},getCount:function(a){return a.length},readN:function(a,c){for(var d=[],e=0,f=Math.min(c.length,a);e<f;e++)d.push(c.shift());return[d]},join:function(a,c){if(0===a[0].length)return c;var d={};return[_.filter(c[0].concat(a[0]),function(a){a=a.id;return d[a]?!1:d[a]=!0})]},filterCache:function(a){var c=
this,d=fourSq.bind(function(a){a.flags.items=_.filter(a.flags.items,function(a){return!_.any(c.blacklistedAttrs_,function(b){return this.matches_(b,a)},this)},this);return a},this);a=_.map(a[0],d);return[_.filter(a,function(a){return 0<a.flags.items.length})]},transformArgs:function(a){return[a[0]]}});fourSq.api.services.utils.VenueWoeLoader.__super__.initialize.call(this,a);this.blacklistedAttrs_=[]},matches_:function(a,b){for(var c in a)if(a[c]!==b[c])return!1;return!0},blacklist:function(a){this.blacklistedAttrs_.push(a)}});fourSq.api.services.paths.app={edit:function(a){return"/v2/apps/"+a+"/edit"},create:function(){return"/v2/apps/create"},pilgrim:function(a){return"/v2/apps/"+a+"/pilgrim"},deleteApp:function(a){return"/v2/apps/"+a+"/delete"},disconnectApp:function(a){return"/v2/apps/"+a+"/disconnect"},erasureRequest:function(a){return"/v2/apps/"+a+"/erasureRequest"},resetSecrets:function(a){return"/v2/apps/"+a+"/resetSecrets"},reactivatePush:function(a){return"/v2/apps/"+a+"/reactivatePush"},resendPush:function(a){return"/v2/apps/"+
a+"/resendPush"},testPush:function(a){return"/v2/apps/"+a+"/testPush"},testPilgrimWebhook:function(a){return"/v2/apps/"+a+"/testPilgrimWebhook"},unsubscribe:function(){return"/v2/apps/unsubscribe"}};fourSq.api.services.paths.billingapi={addCard:function(){return"/v2/billing/cards/add"},bill:function(a){return"/v2/billing/bills/"+a},cards:function(){return"/v2/billing/cards"},payNow:function(){return"/v2/billing/ledger/pay"},setAsDefault:function(a){return"/v2/billing/cards/"+a+"/setAsDefault"},summary:function(){return"/v2/billing"},unlink:function(a){return"/v2/billing/cards/"+a+"/unlink"},credits:function(){return"/v2/billing/credits"},addCredits:function(){return"/v2/billing/credits/add"},
creditTransactions:function(a,b){return"/v2/billing/credits/transactions?limit\x3d"+(a||10)+"\x26offset\x3d"+(b||0)},updateAutoRecharge:function(){return"/v2/billing/credits/autorecharge"},accountCredit:function(){return"/v2/billing/admin/accountcredit"},manualCharge:function(){return"/v2/billing/admin/manualcharge"},refund:function(a){return"/v2/billing/admin/item/"+a+"/refund"},updateSettings:function(){return"/v2/billing/admin/updatesettings"}};fourSq.api.services.paths.browse={travelwizardrecs:function(){return"v2/browse/travelwizardrecs"}};fourSq.api.services.paths.campaigns={add:function(){return"v2/campaigns/add"},start:function(a){return"v2/campaigns/"+a+"/start"},edit:function(a){return"v2/campaigns/"+a+"/edit"},resume:function(a){return"v2/campaigns/"+a+"/resume"},stop:function(a){return"v2/campaigns/"+a+"/end"},dismiss:function(a){return"v2/campaigns/"+a+"/delete"}};fourSq.api.services.paths.chainedits={rollback:function(a){return"v2/chainedits/"+a+"/rollback"}};fourSq.api.services.paths.chains={create:function(){return"v2/chains/create"},detail:function(a){return"v2/chains/"+a},locations:function(a){return"v2/chains/"+a+"/locations"},search:function(){return"v2/chains/search/"},stats:function(a){return"v2/chains/"+a+"/stats"}};fourSq.api.services.paths.checkins={add:function(){return"v2/checkins/add"},addcomment:function(a){return"v2/checkins/"+a+"/addcomment"},comments:function(a){return"v2/checkins/"+a+"/comments"},deletecheckin:function(a){return"v2/checkins/"+a+"/delete"},deletecomment:function(a){return"v2/checkins/"+a+"/deletecomment"},deletepost:function(a){return"v2/checkins/"+a+"/deletepost"},detail:function(a){return"v2/checkins/"+a},like:function(a){return"v2/checkins/"+a+"/like"},likes:function(a){return"v2/checkins/"+
a+"/likes"},recent:function(){return"v2/checkins/recent"},share:function(a){return"/v2/checkins/"+a+"/share"}};fourSq.api.services.paths.eventparticipants={search:function(){return"v2/eventparticipants/search"},claim:function(a){return"v2/eventparticipants/"+a+"/claim"},checkins:function(a){return"v2/eventparticipants/"+a+"/checkins"}};fourSq.api.services.paths.events={add:function(){return"v2/events/add"},adminexplore:function(){return"v2/events/adminexplore"},editevent:function(a){return"v2/events/"+a+"/edit"},explore:function(){return"v2/events/explore"},deleteevent:function(a){return"v2/events/"+a+"/delete"},checkins:function(a){return"v2/events/"+a+"/checkins"},photos:function(a){return"v2/events/"+a+"photos"},thisweek:function(){return"v2/events/thisweek"}};fourSq.api.services.paths.flags={vote:function(a){return"/v2/flags/"+a+"/vote"},multiVote:function(){return"/v2/flags/vote"}};fourSq.api.services.paths.geo={autocomplete:function(){return"v2/geo/geocode"},geocode:function(){return"v2/geo/geocode"},reverse:function(){return"v2/geo/reverse"},countryCodes:function(){return"v2/private/countrycodes"},tz:function(){return"v2/private/tz"},s2info:function(){return"v2/geo/s2info"},s2cover:function(){return"v2/geo/s2cover"},suggestions:function(){return"v2/geo/suggestions"},touristsuggestions:function(){return"v2/geo/touristsuggestions"},slug:function(){return"v2/geo/slug"}};fourSq.api.services.paths.hypertrending={venue:function(){return"v2/demo/hypertrending/venue"},list:function(){return"v2/demo/hypertrending/list"},heatmap:function(){return"v2/demo/hypertrending/heatmap"},userStatus:function(){return"v2/demo/hypertrending/userStatus"}};fourSq.api.services.paths.collectiongame={userStats:function(){return"v2/demo/collectionGame/userStats"},nearby:function(){return"v2/demo/collectionGame/nearby"}};
fourSq.api.services.paths.usercardgame={userCards:function(){return"v2/demo/userCardGame/cards"},addToWallet:function(){return"v2/demo/userCardGame/addToWallet"},venueInfo:function(){return"v2/demo/userCardGame/venueInfo"},buyVenue:function(){return"v2/demo/userCardGame/buyVenue"}};fourSq.api.services.paths.lists={add:function(){return"v2/lists/add"},addcomment:function(a){return"v2/lists/"+a+"/addcomment"},additem:function(a){return"v2/lists/"+a+"/additem"},deletecomment:function(a){return"v2/lists/"+a+"/removecomment"},deletelist:function(a){return"/v2/lists/"+a+"/delete"},deleteitem:function(a){return"/v2/lists/"+a+"/deleteitem"},editcomment:function(a){return"/v2/lists/"+a+"/editcomment"},clone:function(a){return"v2/lists/"+a+"/clone"},detail:function(a){return"v2/lists/"+
a},follow:function(a){return"v2/lists/"+a+"/follow"},moveitem:function(a){return"/v2/lists/"+a+"/moveitem"},share:function(a){return"/v2/lists/"+a+"/share"},suggestphoto:function(a){return"/v2/lists/"+a+"/suggestphoto"},suggesttip:function(a){return"/v2/lists/"+a+"/suggesttip"},suggestvenues:function(a){return"/v2/lists/"+a+"/suggestvenues"},unfollow:function(a){return"v2/lists/"+a+"/unfollow"},update:function(a){return"v2/lists/"+a+"/update"},updateitem:function(a){return"/v2/lists/"+a+"/updateitem"}};fourSq.api.services.paths.oauth2={revokeAccess:function(){return"oauth2/revoke_access_token"}};fourSq.api.services.paths.opinionator={recentVenues:function(){return"v2/venues/recent"},denyRecent:function(){return"v2/venues/denyrecent"}};fourSq.api.services.paths.pages={update:function(a){return"v2/pages/"+a+"/update"},inviteManager:function(a){return"v2/pages/"+a+"/invitemanager"},managers:function(a){return"v2/pages/"+a+"/managers"},removeManager:function(a){return"v2/pages/"+a+"/removemanager"},search:function(){return"v2/pages/search"},venues:function(a){return"v2/pages/"+a+"/venues"},manageablevenues:function(a){return"v2/pages/"+a+"/manageablevenues"},manageablegroups:function(a){return"v2/pages/"+a+"/manageablegroups"},checkvenues:function(a){return"v2/pages/"+
a+"/checkvenues"},allstats:function(a){return"v2/pages/"+a+"/allstats"},followerstats:function(a){return"v2/pages/"+a+"/followerstats"}};fourSq.api.services.paths.pageUpdates={add:function(){return"v2/pageupdates/add"},addcomment:function(a){return"v2/pageupdates/"+a+"/addcomment"},comments:function(a){return"v2/pageupdates/"+a+"/comments"},deletecomment:function(a){return"v2/pageupdates/"+a+"/deletecomment"},detail:function(a){return"v2/pageupdates/"+a},like:function(a){return"v2/pageupdates/"+a+"/like"},remove:function(a){return"v2/pageupdates/"+a+"/delete"},venues:function(a){return"v2/pageupdates/"+a+"/venues"}};fourSq.api.services.paths.photos={add:function(){return"v2/photos/add"},deletePhoto:function(a){return"v2/photos/"+a+"/delete"},detail:function(a){return"v2/photos/"+a},flag:function(a){return"v2/photos/"+a+"/flag"},bless:function(a){return"v2/photos/"+a+"/bless"},unbless:function(a){return"v2/photos/"+a+"/unbless"},upvote:function(a){return"v2/photos/"+a+"/upvote"},downvote:function(a){return"v2/photos/"+a+"/downvote"},like:function(a){return"v2/photos/"+a+"/like"},moderate:function(a){return"v2/photos/"+
a+"/resolve"},photoWoes:function(){return"v2/photos/photowoes"},resolve:function(){return"v2/photos/resolve"},bulkEdit:function(){return"v2/photos/bulkEdit"}};fourSq.api.services.paths.pilgrimConfig={update:function(a){return"/v2/pilgrim/config/"+a+"/update"},testWebhook:function(a){return"/v2/apps/"+a+"/testPilgrimWebhook"},uploadGeofences:function(a){return"/v2/apps/"+a+"/uploadGeofences"}};fourSq.api.services.paths.privateservice={facebookFriends:function(){return"v2/private/facebookfriends"},logActions:function(){return"v2/private/logactions"},friendsuggestions:function(){return"v2/private/friendsuggestions"},ignorefriendsuggestion:function(){return"v2/private/ignorefriendsuggestion"},googleContacts:function(){return"v2/private/googlecontacts"},linkfacebook:function(){return"v2/private/linkfacebook"},logViews:function(){return"v2/private/logviews"},photoRanker:function(){return"v2/private/photoranker/rank"},
photoRankerMarkSkip:function(){return"v2/private/photoranker/markskip"},photoRankerNextVenues:function(){return"v2/private/photoranker/nextvenues"},shareMessages:function(){return"v2/private/sharemessage"},webbounds:function(){return"v2/private/webbounds"},togglePhotoVisibility:function(){return"v2/private/photo/togglevisibility"},twitterUser:function(){return"v2/private/twitteruser"},createVenueGroupFromTSV:function(){return"v2/private/createvenuegroupfromtsv"},browseExplore:function(){return"v2/private/browseexplore"},
uploadToS3:function(){return"v2/private/uploadtos3"},setTipsDone:function(){return"v2/private/settipsdone"},unsetTipsDone:function(){return"v2/private/unsettipsdone"},initiatePortabilityRequest:function(){return"v2/private/portability/initiaterequest"}};fourSq.api.services.paths.privateWeb={management:function(){return"v2/privateweb/management"},transactions:function(){return"v2/privateweb/transactions"},setLocale:function(){return"v2/privateweb/setlocale"},sendDownloadEmail:function(){return"v2/privateweb/senddownloademail"},connectvenues:function(){return"v2/privateweb/connectvenues"},emailUnsubscribe:function(){return"v2/privateweb/emailunsubscribe"},shortLink:function(){return"v2/privateweb/shortlink"},appealBannedPhoto:function(){return"v2/privateweb/appealbannedphoto"},
intentSaveToVenueDetail:function(){return"v2/privateweb/intent/saveto/venue"},intentSaveToPayload:function(){return"v2/privateweb/intent/saveto/payload"}};fourSq.api.services.paths.promotionbudgets={edit:function(a){return"v2/promotionbudgets/"+a+"/edit"}};fourSq.api.services.paths.promotioncampaigns={create:function(){return"v2/promotioncampaigns/create"},edit:function(a){return"v2/promotioncampaigns/"+a+"/edit"},pause:function(a){return"v2/promotioncampaigns/"+a+"/pause"},unpause:function(a){return"v2/promotioncampaigns/"+a+"/unpause"},end:function(a){return"v2/promotioncampaigns/"+a+"/end"},start:function(a){return"v2/promotioncampaigns/"+a+"/start"},details:function(a){return"v2/promotioncampaigns/admin/"+a},list:function(){return"v2/promotioncampaigns/admin/list"}};fourSq.api.services.paths.promotionflights={end:function(a){return"v2/promotionflights/"+a+"/end"},opportunitydetails:function(){return"v2/promotionflights/opportunitydetails"},postcheckinforecast:function(){return"v2/promotionflights/postcheckinforecast"}};fourSq.api.services.paths.search={autocomplete:function(){return"v2/search/autocomplete"},venuesearch:function(){return"v2/search/venuesearch"},recommendations:function(){return"v2/search/recommendations"},locationcontext:function(){return"v2/search/locationcontext"}};fourSq.api.services.paths.settings={set:function(a){return"v2/settings/"+a+"/set"},presignup:function(){return"v2/settings/presignup"},notificationsSet:function(a){return"v2/settings/notifications/"+a+"/set"}};fourSq.api.services.paths.specials={add:function(){return"v2/specials/add"},start:function(a){return"v2/specials/"+a+"/start"},end:function(a){return"v2/specials/"+a+"/end"},like:function(a){return"v2/specials/"+a+"/like"},likes:function(a){return"v2/specials/"+a+"/likes"},edit:function(a){return"v2/specials/"+a+"/edit"}};fourSq.api.services.paths.streamActivities={detail:function(a){return"v2/activities/"+a},like:function(a){return"v2/activities/"+a+"/like"},recent:function(){return"v2/activities/recent"},updates:function(){return"v2/activities/updates"},save:function(a){return"v2/activities/"+a+"/save"},group:function(){return"/v2/activities/group"}};fourSq.api.services.paths.tastes={add:function(){return"v2/tastes/add"},remove:function(){return"v2/tastes/delete"},autocomplete:function(){return"v2/tastes/autocomplete"},suggestions:function(){return"v2/tastes/suggestions"}};fourSq.api.services.paths.tips={add:function(){return"/v2/tips/add"},addcomment:function(a){return"v2/tips/"+a+"/addcomment"},comments:function(a){return"v2/tips/"+a+"/comments"},edit:function(a){return"/v2/tips/"+a+"/edit"},deletetip:function(a){return"/v2/tips/"+a+"/delete"},flag:function(a){return"/v2/tips/"+a+"/flag"},detail:function(a){return"/v2/tips/"+a},listed:function(a){return"/v2/tips/"+a+"/listed"},like:function(a){return"v2/tips/"+a+"/like"},likes:function(a){return"v2/tips/"+a+"/likes"},
share:function(a){return"/v2/tips/"+a+"/share"},vote:function(a){return"/v2/tips/"+a+"/vote"},removevote:function(a){return"/v2/tips/"+a+"/removevote"}};fourSq.api.services.paths.travel={createanonymous:function(){return"v2/travel/createanonymous"},venuesearch:function(){return"v2/travel/venuesearch"}};fourSq.api.services.paths.updates={markread:function(){return"v2/updates/marknotificationsread"},notifications:function(){return"v2/updates/notifications"}};fourSq.api.services.paths.users={annotatestop:function(){return"v2/users/annotatestop"},bulkRequest:function(){return"v2/users/bulkrequest"},checkins:function(a){return"v2/users/"+a+"/checkins"},clearLocationHistory:function(){return"v2/users/clearlocationhistory"},createfollow:function(a){return"v2/users/"+a+"/createfollow"},createfollows:function(){return"v2/users/createfollows"},unfollow:function(a){return"v2/users/"+a+"/unfollow"},deleteUser:function(){return"v2/users/delete"},detail:function(a){return"v2/users/"+
a},dones:function(a){return"v2/users/"+a+"/dones"},expertisesummary:function(a){return"v2/users/"+a+"/expertisesummary"},feed:function(){return"v2/users/feed"},flagping:function(){return"v2/users/flagping"},flagStatsForQueue:function(){return"/v2/users/flagstats"},flagstats:function(a){return"v2/users/"+a+"/flagstats"},following:function(a){return"v2/users/"+a+"/following"},followers:function(a){return"v2/users/"+a+"/followers"},friends:function(a){return"v2/users/"+a+"/friends"},lists:function(a){return"v2/users/"+
a+"/lists"},locationhistory:function(){return"v2/users/locationhistory"},lookup:function(){return"v2/users/lookup"},bulkLookup:function(){return"v2/users/bulkLookup"},mute:function(a){return"v2/users/"+a+"/mute"},photos:function(a){return"v2/users/"+a+"/photos"},request:function(a){return"v2/users/"+a+"/request"},upgradeapply:function(){return"v2/users/upgradeapply"},upgradeeligible:function(a){return"v2/users/"+a+"/upgradeeligible"},upgradestats:function(a){return"v2/users/"+a+"/upgradestats"},unrequest:function(a){return"v2/users/"+
a+"/unrequest"},approve:function(a){return"v2/users/"+a+"/approve"},deny:function(a){return"v2/users/"+a+"/deny"},explaindeny:function(a){return"v2/users/"+a+"/explaindeny"},unfriend:function(a){return"v2/users/"+a+"/unfriend"},requests:function(){return"v2/users/requests"},invite:function(){return"v2/users/invite"},search:function(){return"v2/users/search"},setpings:function(a){return"v2/users/"+a+"/setpings"},tips:function(a){return"v2/users/"+a+"/tips"},todos:function(a){return"v2/users/"+a+"/todos"},
venuehistory:function(a){return"v2/users/"+a+"/venuehistory"},historysearch:function(a){return"v2/users/"+a+"/historysearch"},historycompletions:function(a){return"v2/users/"+a+"/historycompletions"},stats:function(a){return"v2/users/"+a+"/stats"},profile:function(a){return"v2/users/"+a+"/profile"},suendorse:function(a){return"v2/users/"+a+"/suendorse"},cansuendorse:function(){return"v2/users/cansuendorse"},suggest:function(){return"v2/users/suggest"},setsutoolslocation:function(a){return"v2/users/"+
a+"/setsutoolslocation"},setsutoolslanguage:function(a){return"v2/users/"+a+"/setsutoolslanguage"},update:function(){return"v2/users/self/update"},banfromediting:function(){return"v2/users/banfromediting"},unbanfromediting:function(){return"v2/users/unbanfromediting"},demotefromediting:function(){return"v2/users/demotefromediting"},undemotefromediting:function(){return"v2/users/undemotefromediting"},banfromlogin:function(){return"v2/users/banfromlogin"},unbanfromlogin:function(){return"v2/users/unbanfromlogin"},
banallcontent:function(){return"v2/users/banallcontent"},flagged:function(){return"v2/users/flagged"},flagallcontent:function(){return"v2/users/flagallcontent"},demoteallcontent:function(){return"v2/users/demoteallcontent"},flag:function(a){return"/v2/users/"+a+"/flag"},banallphotos:function(a){return"v2/users/"+a+"/banallphotos"},demoteallphotos:function(a){return"v2/users/"+a+"/demoteallphotos"},banalltips:function(a){return"v2/users/"+a+"/banalltips"},demotealltips:function(a){return"v2/users/"+
a+"/demotealltips"},deletephoto:function(a){return"v2/users/"+a+"/deletephoto"},resolveflags:function(a){return"v2/users/"+a+"/resolveflags"},tastes:function(a){return"v2/users/"+a+"/tastes"},woeleaders:function(){return"v2/users/woeleaders"},socialStats:function(){return"v2/users/socialstats"},resendVerificationEmail:function(){return"v2/users/resendverificationemail"},linkfacebookpage:function(){return"v2/users/self/linkfacebookpage"},blockMessages:function(a){return"v2/users/"+a+"/blockmessages"},
challengeOptIn:function(){return"v2/users/self/setchallengeoptin"},unlock:function(){return"v2/users/unlock"}};fourSq.api.services.paths.venueedits={rollback:function(a){return"v2/venueedits/"+a+"/rollback"},markAsSuspicious:function(a){return"v2/venueedits/"+a+"/markassuspicious"}};fourSq.api.services.paths.venuegroups={add:function(){return"v2/venuegroups/add"},deleteVenueGroup:function(a){return"v2/venuegroups/"+a+"/delete"},list:function(){return"v2/venuegroups/list"},detail:function(a){return"v2/venuegroups/"+a},remove:function(a){return"v2/venuegroups/"+a+"/delete"},addVenues:function(a){return"v2/venuegroups/"+a+"/addvenue"},removeVenues:function(a){return"v2/venuegroups/"+a+"/removevenue"},update:function(a){return"v2/venuegroups/"+a+"/update"},campaigns:function(a){return"v2/venuegroups/"+
a+"/campaigns"},flag:function(a){return"v2/venuegroups/"+a+"/flag"}};fourSq.api.services.paths.venues={attributes:function(a){return"v2/venues/"+a+"/attributes"},categories:function(){return"v2/venues/categories"},children:function(a){return"v2/venues/"+a+"/children"},delete_:function(a){return"v2/venues/"+a+"/delete"},deletedvenues:function(a){return"v2/venues/deletedvenues?countryCode\x3d"+a},detail:function(a){return"v2/venues/"+a},edit:function(a){return"v2/venues/"+a+"/edit"},add:function(){return"v2/venues/add"},events:function(a){return"v2/venues/"+a+"/events"},
explore:function(){return"v2/venues/explore"},find:function(a){return"v2/venues/"+a},friendvisits:function(a){return"v2/venues/"+a+"/friendvisits"},like:function(a){return"v2/venues/"+a+"/like"},dislike:function(a){return"v2/venues/"+a+"/dislike"},ok:function(a){return"v2/venues/"+a+"/ok"},noRate:function(a){return"v2/venues/"+a+"/norate"},save:function(a){return"v2/venues/"+a+"/save"},submitRank:function(a){return"v2/venues/"+a+"/submitrank"},roles:function(a){return"v2/venues/"+a+"/roles"},listManagers:function(a){return"v2/venues/"+
a+"/listmanagers"},markdone:function(a){return"v2/venues/"+a+"/markdone"},unmarkdone:function(a){return"v2/venues/"+a+"/unmarkdone"},mute:function(a){return"v2/venues/"+a+"/mute"},listed:function(a){return"v2/venues/"+a+"/listed"},photos:function(a){return"v2/venues/"+a+"/photos"},reasons:function(a){return"v2/venues/"+a+"/reasons"},setRole:function(a){return"v2/venues/"+a+"/setrole"},suggestCompletion:function(){return"v2/venues/suggestcompletion"},tips:function(a){return"v2/venues/"+a+"/tips"},
trending:function(){return"v2/venues/trending"},hours:function(a){return"v2/venues/"+a+"/hours"},seasonalHours:function(a){return"v2/venues/"+a+"/seasonalhours"},validateHours:function(a){return"v2/venues/"+a+"/validatehours"},claimStart:function(a){return"v2/venues/"+a+"/claim"},listClaims:function(a){return"v2/venues/"+a+"/claims"},proposeCategory:function(a){return"v2/venues/"+a+"/proposecategory"},recentInteractions:function(){return"v2/venues/recentinteractions"},removeCategory:function(a){return"v2/venues/"+
a+"/removecategory"},revokemayorship:function(a){return"v2/venues/"+a+"/revokemayorship"},flag:function(a){return"v2/venues/"+a+"/flag"},flagged:function(){return"/v2/venues/flagged"},flagstats:function(){return"/v2/venues/flagstats"},flags:function(a){return"/v2/venues/"+a+"/flags"},voteonflag:function(a){return"/v2/flags/"+a+"/vote"},search:function(){return"v2/venues/search"},share:function(a){return"v2/venues/"+a+"/share"},proposeEdit:function(a){return"v2/venues/"+a+"/proposeedit"},menu:function(a){return"v2/venues/"+
a+"/menu"},pageAccess:function(a){return"v2/venues/"+a+"/pageaccess"},removeSelectedPhotos:function(a){return"v2/venues/"+a+"/removeselectedphotos"},setSelectedPhotos:function(a){return"v2/venues/"+a+"/setselectedphotos"},personalInfo:function(){return"v2/venues/personalinfo"},addShape:function(a){return"v2/venues/"+a+"/addshape"},childCandidates:function(a){return"v2/venues/"+a+"/childcandidates"},shapes:function(a){return"v2/venues/"+a+"/shapes"},createDiscussion:function(a){return"v2/venues/"+
a+"/creatediscussion"},massEdit:function(){return"v2/venues/massedit"}};fourSq.api.services.paths.claims={status:function(a){return"v2/claims/"+a},agree:function(a){return"v2/claims/"+a+"/agree"},verify:function(a){return"v2/claims/"+a+"/verify"},mail:function(a){return"v2/claims/"+a+"/mail"},finish:function(a){return"v2/claims/"+a+"/finish"}};fourSq.autocomplete.applyCompleters=function(a,b,c,d,e,f,g,h,l,m,q,s){var u=fourSq.isDefinedAndNotNull(l)?l:2,v;b=_.map(b,function(a){var b=a.fetch;a.fetch=function(c,d){c=fourSq.util.trim(c);c.length<u?a.validateTerm&&a.validateTerm(c)?b.call(this,c,d):(this.clear&&this.clear(),d([])):b.call(this,c,d)};return a});var y=new fourSq.autocomplete.MetaCompleter(b,d,g,m),z=!1;d={minLength:0,source:function(a,b){z=!0;y.fetch(a.term,b)},close:function(){z=!1;_.each(b,function(a){a.clear&&a.clear()})},select:function(a,
b){var d=v.menu&&v.menu.active&&v.menu.active.index();this.value="";this.focus();fourSq.autocomplete.logSearchClick(a,b,s);c(a,b,d);return!1}};h&&(d.autoFocus=h);e&&(d.position=e);f&&(d.appendTo=f);v=a.autocomplete(d).data("autocomplete");v._renderMenu=function(b,c){z&&(b.zIndex(1000001),q&&b.width(a.outerWidth(!0)-parseInt(a.css("border-left"),10)-parseInt(a.css("border-right"),10)),b.addClass(a.attr("id")),y.render(b))};v._resizeMenu=function(){};v.menu.option("focus",function(){});v.menu.option("blur",
function(){});v.menu.element.addClass("noSidebar");m&&(v.menu.element.addClass("groupedAutocomplete"),v.menu.refresh=function(){this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem").children("a").addClass("ui-corner-all").attr("tabindex",-1);var a=this.element.find(".ui-autocomplete-element").off("mouseenter").off("mouseleave").off("click");fourSq.util.devices.isTouchIncludingIPad()?a.click(function(a){v.menu.activate(a,$(this))}):a.mouseenter(function(a){v.menu.activate(a,
$(this))}).mouseleave(function(a){v.menu.deactivate()})},v.menu.first=function(){return!(!this.active||0!==this.element.find(".ui-autocomplete-element").index(this.active))},v.menu.last=function(){var a;this.active?(a=this.element.find(".ui-autocomplete-element"),a=a.index(this.active)==a.length-1):a=!1;return a},v.menu.move=function(a,b,c){b=this.element.find(".ui-autocomplete-element");if(this.active){var d=b.index(this.active);this.activate(c,b.eq(d+("next"==a?1:-1)))}else a="next"==a?b.eq(0):
b.eq(b.length-1),this.activate(c,a)})};
fourSq.autocomplete.MetaCompleter=function(a,b,c,d){this.results=[];for(var e=0;e<a.length;e++)this.results[e]=[];this.getDummyResults=function(){var a=[];b&&a.push(1);for(var c=0;c<this.results.length;c++)this.results[c].length&&a.push(1);return a};this.getCallback=function(b,d,e){var l=this;return function(m){l.results[b]=m;m=l.getDummyResults();d(m);c&&b+1<a.length&&a[b+1].fetch(e,l.getCallback(b+1,d,e))}};this.fetch=function(b,d){if(c)0<a.length&&a[0].fetch(b,this.getCallback(0,d,b));else for(var e=
0;e<a.length;e++)a[e].fetch(b,this.getCallback(e,d,b))};this.render=function(c){for(var e=0,h=0,l=0;l<a.length;l++){var m=c,q=c,s=!0;d&&(m=$('\x3cdiv class\x3d"sectionLevel2"\x3e'),q=$('\x3cul class\x3d"sectionItems"\x3e'));var u=a[l].header();if(u){e++;var v=d?$("\x3cdiv\x3e"):$("\x3cli\x3e");v.addClass("ui-autocomplete-category");v.append(u);m.append(v);s=!1}d&&m.append(q);u=a[l].render(h);for(v=0;v<u.length;v++){h++;var s=u[v].clazz||"ui-autocomplete-element",y=u[v].item;y.value=u[v].label;y.si=
v;y.sl=u.length;y.gi=l;y.gl=a.length;$("\x3cli\x3e\x3c/li\x3e").data("item.autocomplete",u[v].item).append($("\x3ca\x3e\x3c/a\x3e").append(u[v].label)).addClass(s).appendTo(q);s=!1}!s&&d&&(q=$('\x3cli class\x3d"sectionLevel1"\x3e'),q.append(m),c.append(q))}b&&(a[l]===fourSq.autocomplete.MoreResultsCompleter&&0===e||0===h)&&c.append(b())}};
fourSq.autocomplete.ChicletCompleter=function(a){a=a||2;var b=[],c=function(a,b){return{label:templates.fourSq.autocomplete.chiclet.chicletCompleterItem({category:b}),item:{url:"/explore?mode\x3d"+fourSq.explore.shared.BaseQueryData.Mode.CHICLET+"\x26cat\x3d"+encodeURIComponent(b),category:b,type:fourSq.autocomplete.ChicletCompleter.ItemType}}},d=function(d){return b=fourSq.util.trim(d).length>=a?[]:[c(d,"bestNearby"),c(d,"specials"),c(d,"food"),c(d,"drinks"),c(d,"coffee"),c(d,"shops"),c(d,"sights"),
c(d,"arts"),c(d,"outdoors"),c(d,"trending"),c(d,"saved"),c(d,"newVenues")]};this.fetch=function(b,c){b=fourSq.util.trim(b);b.length>=a?window.setTimeout(function(){c(d(b))},50):c(d(b))};this.header=function(){return b.length?templates.fourSq.autocomplete.chicletAutocompleterHeader():""};this.render=function(a){return b};this.clear=function(){b=[]};this.validateTerm=function(b){return fourSq.util.trim(b).length<a}};fourSq.autocomplete.ChicletCompleter.ItemType="chiclet";
fourSq.autocomplete.UnifiedQueryCompleter=function(a,b){var c=void 0,d=[];a=a||function(){return fourSq.config.user.USER_LAT+","+fourSq.config.user.USER_LNG};var e=function(a){var b=templates.fourSq.autocomplete.unifiedQueryTerm({apiResult:a}),d;a:switch(a.type){case fourSq.autocomplete.UnifiedQueryCompleter.QueryItemType:d="/explore?q\x3d"+encodeURIComponent(a.object.querystring);break a;case fourSq.autocomplete.UnifiedQueryCompleter.VenueItemType:d="/v/"+a.object.id;break a;default:d=""}var e=a.type;
a:switch(a.type){case fourSq.autocomplete.UnifiedQueryCompleter.QueryItemType:a=a.object.querystring;break a;default:a=void 0}return{label:b,item:{url:d,type:e,querystring:a,rid:c}}};this.fetch=function(e,g){var h=_.extend({ll:a(),near:b(),query:e,isMobile:!1});fourSq.api.services.Search.unifiedQueryAutocompletion(h,function(a,b){var e=_.first(_.filter(a,function(a){return a.type===fourSq.autocomplete.UnifiedQueryCompleter.QueryItemType||a.type===fourSq.autocomplete.UnifiedQueryCompleter.VenueItemType}),
8);c=fourSq.api.requestId(b);d=e;g(e)},function(){g([])})};this.header=function(){return""};this.render=function(){return _.map(d,e)};this.clear=function(){c=void 0;d=[]}};fourSq.autocomplete.UnifiedQueryCompleter.QueryItemType="query";fourSq.autocomplete.UnifiedQueryCompleter.VenueItemType="minivenue";
fourSq.autocomplete.UserCompleter=function(a,b,c,d,e,f,g){var h=g||0,l=[],m=null,q=null,s=null,u=[],v=void 0,y=(g=fourSq.isUndefinedOrNull(fourSq.api.models.companion.user.UserUtil.currentUser(!1)))?function(){}:function(){fourSq.isDefinedAndNotNull(l)&&0<l.length||b({id:"self",limit:1E3},function(a,b){l=c(a);q={};for(var d=[],e=0;e<l.length;e++){var f=l[e],g=f.id;d.push(g+" "+f.firstName+(f.lastName?" "+f.lastName:""));q[String(g)]=l[e]}m=d.join("\t").toLowerCase();s&&s();v=fourSq.api.requestId(b)},
function(){})};a.focus(_.once(function(){y()}));this.fetch=g?function(){}:function(a,b){function c(){u=[];if(a.length>h){for(var e=new RegExp("(\\d+)[^\t]* "+a.toLowerCase(),"g"),e=(m||"").match(e)||[],g=0;g<Math.min(5,e.length);g++){var l=e[g].split(" ")[0],l=q[l],k=d({resultPhotoUrl:l.photo.prefix+"32x32"+l.photo.suffix,firstName:l.firstName,lastName:l.lastName});u.push({label:k,item:{url:"/user/"+encodeURIComponent(l.id),user:l,id:l.id,term:a,rid:v,type:f||"user"}})}b(u)}}l?c():s=c};this.clear=
function(){l=[];u=[]};this.header=function(){return 0<u.length?e():""};this.render=function(){return u}};fourSq.autocomplete.FollowingCompleter=function(a,b){return new fourSq.autocomplete.UserCompleter(a,fourSq.api.services.User.following,function(a){return _.filter(_.pluck(a.following.items,"user"),fourSq.isDefinedAndNotNull)},templates.fourSq.autocomplete.userCompletion,templates.fourSq.autocomplete.followingHeader,"following")};
fourSq.autocomplete.FriendsCompleter=function(a){var b=fourSq.isDefinedAndNotNull(fourSq.config.pagedata.cachedResponses.friends)?function(){return fourSq.config.pagedata.cachedResponses}:fourSq.api.services.User.friends;return new fourSq.autocomplete.UserCompleter(a,b,function(a){fourSq.config.pagedata.cachedResponses&&(fourSq.config.pagedata.cachedResponses.friends=a);return a.items},templates.fourSq.autocomplete.userCompletion,templates.fourSq.autocomplete.friendsHeader,"friends")};
fourSq.autocomplete.VenueCompleter=function(a,b,c,d){var e=[],f=void 0,g=void 0,h=void 0;this.limit_=d?Math.min(d,15):5;this.clear=function(){e=[]};this.fetch=function(c,d){var q=h=a?a():fourSq.config.user.USER_LAT+","+fourSq.config.user.USER_LNG,s=this.limit_;fourSq.api.services.Search.venueAutocompletion({ll:q,query:c,isMobile:!1,limit:5<this.limit_?this.limit_:void 0},function(a,h){e=[];a=_.first(a,s);for(var q=0,z;z=a[q];q++)b&&b(z.id)||e.push(z);f=fourSq.api.requestId(h);g=c;d(e)},function(){d([])})};
this.header=function(){return 0<e.length?c||templates.fourSq.autocomplete.placesHeader():""};this.render=function(){for(var a=[],b=0;b<Math.min(e.length,this.limit_);b++){var c=e[b],d=templates.fourSq.autocomplete.venueCompletion({venueName:c.name,categoryIcon:fourSq.api.models.companion.venue.VenueUtil.primaryCategoryIcon(c),address:c.location.address,crossStreet:c.location.crossStreet});a.push({label:d,item:{url:"/venue/"+encodeURIComponent(c.id),id:c.id,term:g,model:c,rid:f,ll:h,type:fourSq.autocomplete.VenueCompleter.ItemType}})}return a}};
fourSq.autocomplete.VenueCompleter.ItemType="venue";
fourSq.autocomplete.SearchCategoryCompleter=function(a,b,c,d){var e=[],f,g,h;this.clear=function(){e=[]};this.fetch=function(c,m){var q=a?a():fourSq.config.user.USER_LAT+","+fourSq.config.user.USER_LNG;h=q;q=_.extend({ll:q,query:c,isMobile:!1},d);fourSq.api.services.Search.categoryAutocompletion(q,function(a,d){var h=_.filter(a,function(a){return!b||!b(a.id)});e=_.first(h,15);f=fourSq.api.requestId(d);g=c;m(e)},function(){m([])})};this.header=function(){return 0<e.length?fourSq.isUndefinedOrNull(c)?
templates.fourSq.autocomplete.categoriesHeader():c:""};this.render=function(){for(var a=[],b=0;b<Math.min(e.length,5);b++){var c=e[b],d=templates.fourSq.autocomplete.categoryCompletionWithEntities({category:c});a.push({label:d,item:{url:"/explore?q\x3d"+encodeURIComponent(c.name),id:c.id,term:g,model:c,rid:f,ll:h,type:fourSq.autocomplete.SearchCategoryCompleter.ItemType}})}return a}};fourSq.autocomplete.SearchCategoryCompleter.ItemType="category";
fourSq.autocomplete.SearchChainCompleter=function(a,b,c,d){var e=[],f,g,h;this.clear=function(){e=[]};this.fetch=function(c,m){var q=a?a():fourSq.config.user.USER_LAT+","+fourSq.config.user.USER_LNG;h=q;q=_.extend({ll:q,query:c,isMobile:!1},d);fourSq.api.services.Search.venueChainAutocompletion(q,function(a,d){var h=_.filter(a,function(a){return!b||!b(a.id)});e=_.first(h,15);f=fourSq.api.requestId(d);g=c;m(e)},function(){m([])})};this.header=function(){return 0<e.length?fourSq.isUndefinedOrNull(c)?
templates.fourSq.autocomplete.chainsHeader():c:""};this.render=function(){for(var a=[],b=0;b<Math.min(e.length,5);b++){var c=e[b],d=templates.fourSq.autocomplete.chainCompletionWithEntities({chain:c});a.push({label:d,item:{url:"/explore?q\x3d"+encodeURIComponent(c.name),id:c.id,term:g,model:c,rid:f,ll:h,type:fourSq.autocomplete.SearchChainCompleter.ItemType}})}return a}};fourSq.autocomplete.SearchChainCompleter.ItemType="venueChain";
fourSq.autocomplete.CommonQueryCompleter=function(a,b){var c=[],d,e,f;this.clear=function(){c=[]};this.fetch=function(b,h){var l=a?a():fourSq.config.user.USER_LAT+","+fourSq.config.user.USER_LNG;f=l;l=_.extend({ll:l,query:b,isMobile:!1});fourSq.api.services.Search.commonQueryAutocompletion(l,function(a,f){c=_.first(a,15);d=fourSq.api.requestId(f);e=b;h(c)},function(){h([])})};this.header=function(){return 0<c.length?fourSq.isUndefinedOrNull(b)?templates.fourSq.autocomplete.queriesHeader():b:""};this.render=
function(){for(var a=[],b=0;b<Math.min(c.length,6);b++){var l=c[b],m=templates.fourSq.autocomplete.queryCompletion({query:l.query,icon:l.icon});a.push({label:m,item:{url:"/explore?mode\x3d"+fourSq.explore.shared.BaseQueryData.Mode.AUTOCOMPLETE_QUERY+"\x26q\x3d"+encodeURIComponent(l.query.text)+"\x26acrid\x3d"+encodeURIComponent(d),type:fourSq.autocomplete.CommonQueryCompleter.ItemType,term:e,model:l,rid:d,ll:f}})}return a}};fourSq.autocomplete.CommonQueryCompleter.ItemType="commonquery";
fourSq.autocomplete.PeopleCompleter=function(a){var b=a||0,c=[];this.fetch=function(a,e){c=a.length<b?[]:[{label:templates.fourSq.autocomplete.peopleAutocompleterItem({term:a}),item:{url:"/search?tab\x3dpeopleResults\x26q\x3d"+encodeURIComponent(a),term:a,type:"peoplesearch"}}];e(c)};this.header=function(){return c.length?templates.fourSq.autocomplete.peopleAutocompleterHeader():""};this.render=function(a){return c};this.clear=function(){c=[]}};
fourSq.autocomplete.PagesCompleter=function(a){var b=a||0,c=[];this.fetch=function(a,e){c=a.length<b?[]:[{label:templates.fourSq.autocomplete.pagesAutocompleterItem({term:a}),item:{url:"/search?tab\x3dpagesResults\x26q\x3d"+encodeURIComponent(a),term:a,type:"pagesearch"}}];e(c)};this.header=function(){return c.length?templates.fourSq.autocomplete.pagesAutocompleterHeader():""};this.render=function(a){return c};this.clear=function(){c=[]}};
fourSq.autocomplete.MoreResultsCompleter=function(){var a;this.fetch=function(b,c){a=b};this.header=function(){};this.render=function(b){return 0===b?[]:[{label:"More results...",item:{url:"/search?q\x3d"+encodeURIComponent(a),type:"moreresults"},clazz:"ui-autocomplete-more-results"}]}};
fourSq.autocomplete.CategoryCompleter=function(){var a=[];this.fetch=function(b,c){fourSq.autocomplete.CategoryCompleter.doFetch_(function(c){var e=new RegExp(".*"+b.toLowerCase()+".*","g");c=_(c).filter(function(a){return e.test(a.toLowerCase())});c=c.slice(0,10);a=_(c).map(function(a){return{label:a,item:{term:a},clazz:" "}})})};this.header=function(){return 0<a.length?templates.fourSq.autocomplete.categoryAutocompleterHeader():""};this.render=function(){return a}};
fourSq.autocomplete.CategoryCompleter.doFetch_=function(){var a=null;return function(b){a?b(a):fourSq.api.services.Venue.categories({},function(c){a=_(c).chain().map(function(a){return fourSq.api.models.companion.category.CategoryUtil.withAllChildren(a)}).flatten().map(function(a){return a.name}).uniq().value();b(a)},function(){fourSq.debug.error("api call failure when fetching categories")})}}();
fourSq.autocomplete.isExploreQuery=function(a){return a.item&&(a.item.type===fourSq.autocomplete.CommonQueryCompleter.ItemType||a.item.type===fourSq.autocomplete.SearchCategoryCompleter.ItemType||a.item.type===fourSq.autocomplete.ChicletCompleter.ItemType||a.item.type===fourSq.autocomplete.UnifiedQueryCompleter.QueryItemType)};
fourSq.autocomplete.maybePopulateSearchBox=function(a,b,c){var d=function(a){c.val(a);c.change()};fourSq.autocomplete.customCallbacks(a,b,{commonQueryCallback:d,unifiedQueryCallback:d,categoryCallback:d})};
fourSq.autocomplete.customCallbacks=function(a,b,c){b.item&&b.item.type===fourSq.autocomplete.CommonQueryCompleter.ItemType?c.commonQueryCallback&&c.commonQueryCallback(b.item.model.query.text,b.item.rid):b.item&&b.item.type===fourSq.autocomplete.SearchCategoryCompleter.ItemType?c.categoryCallback&&c.categoryCallback(b.item.model.name):b.item&&b.item.type===fourSq.autocomplete.ChicletCompleter.ItemType?c.chicletCallback&&c.chicletCallback(b.item.category):b.item&&b.item.type===fourSq.autocomplete.UnifiedQueryCompleter.QueryItemType?
c.unifiedQueryCallback&&c.unifiedQueryCallback(b.item.querystring,b.item.rid):c.defaultCallback&&c.defaultCallback(a,b)};fourSq.autocomplete.autocompleteSelectCallback=function(a,b){fourSq.util.redirect(b.item.url)};
fourSq.autocomplete.logSearchClick=function(a,b,c){a.preventDefault();a.stopPropagation();a={ir:b.item.si,sid:fourSq.stats.SessionId.get(),c:"wac",n:"autocomplete-results"};fourSq.isDefined(b.item.rid)&&(a.rid=b.item.rid);fourSq.isDefined(b.item.ll)&&(a.ll=b.item.ll);a={si:b.item.si,sl:b.item.sl,gi:b.item.gi,gl:b.item.gl,t:b.item.term,c:b.item.category,href:b.item.url,type:b.item.type,metrics:_(a).map(function(a,b){return b+","+a}).join(";")+"|n,"+b.item.type};fourSq.stats.log("autocompletesearch").addAll(a).finish();
c&&(b=_.extend({},c,{component:fourSq.stats.action.Component.RESULT,componentIndex:b.item.si,details:a}),b=fourSq.stats.Action.build(fourSq.stats.action.Action.CLICK,b),fourSq.stats.logActions(b))};fourSq.autocomplete.getNewAutocompleteChromeCompleters=function(a,b,c){return[new fourSq.autocomplete.UnifiedQueryCompleter(a,b),new fourSq.autocomplete.FollowingCompleter(c,2),new fourSq.autocomplete.PeopleCompleter(2),new fourSq.autocomplete.PagesCompleter(2)]};
fourSq.autocomplete.getExploreCompleters=function(a,b){return[new fourSq.autocomplete.ChicletCompleter,new fourSq.autocomplete.CommonQueryCompleter(b),new fourSq.autocomplete.SearchCategoryCompleter(b),new fourSq.autocomplete.VenueCompleter(b),new fourSq.autocomplete.FollowingCompleter(a),new fourSq.autocomplete.PeopleCompleter,new fourSq.autocomplete.PagesCompleter]};
fourSq.autocomplete.setupSearchAutocomplete=function(a,b,c,d,e){a.length&&(e=fourSq.isDefinedAndNotNull(e)?_.extend({},e,{element:fourSq.stats.action.Element.SEARCH_SUGGESTION}):void 0,fourSq.autocomplete.applyCompleters(a,b,c||fourSq.autocomplete.autocompleteSelectCallback,null,{my:"left top",at:"left bottom",collision:"none"},void 0,void 0,!1,d,!0,!1,e),a.focus(function(){0===fourSq.util.trim(a.val()).length&&a.autocomplete("search")}))};fourSq.autocomplete.LocationCompleter=function(a){};
fourSq.autocomplete.LocationCompleter=fourSq.Class.extend({initialize:function(a){this.results_=[];this.lastTerm_="";this.llHinter_=a.llHinter;this.boundsHinter_=a.boundsHinter;this.$input_=a.input;this.maxResults_=a.maxResults||5;this.allowCountry_=!!a.allowCountry;this.defaultLocations_=a.defaultLocations;this.woeRestrict_=a.woeRestrict;this.autocompleteBias_=a.autocompleteBias;this.maxInterpretations_=a.maxInterpretations;this.rankingOverride_=a.rankingOverride},clear:function(){this.results_=
[];this.lastTerm_=""},getQuery:function(){return $.trim(this.$input_.val())},fetch:function(a,b){var c=fourSq.bind(function(c){this.lastTerm_=a;this.results_=_.uniq(c.items,!1,function(a){return a.feature.displayName});b(this.results_)},this),d=function(){b([])},e,f,g;this.llHinter_&&(e=fourSq.api.models.companion.geo.LatLngUtil.toQueryValue(this.llHinter_()));this.boundsHinter_&&(g=this.boundsHinter_(),f=fourSq.api.models.companion.geo.LatLngUtil.toQueryValue(g.ne),g=fourSq.api.models.companion.geo.LatLngUtil.toQueryValue(g.sw));
var h=this.getQuery();h?fourSq.api.services.Geo.geocode({query:h,autocomplete:!0,allowCountry:this.allowCountry_,ll:e,ne:f,sw:g,woeRestrict:this.woeRestrict_,autocompleteBias:this.autocompleteBias_,maxInterpretations:this.maxInterpretations_,rankingOverride:this.rankingOverride_},c,d):(this.results_=this.defaultLocations_,b(this.results_||[]))},header:function(){return""},render:function(){var a=_.first(this.results_,this.maxResults_);return _.map(a,fourSq.bind(function(a){return{label:templates.fourSq.autocomplete.locationCompletion({interpretation:a}),
item:{interpretation:a,term:this.lastTerm_,type:fourSq.autocomplete.LocationCompleter.ItemType}}},this))}});fourSq.autocomplete.LocationCompleter.ItemType="location";window.FSQ_initListCreateDialogLink=function(a,b){var c=$(a);c&&0!=c.length&&new fourSq.tiplists.CreateNewListLink({link:c,opt_additionalApiParams:b})};fourSq.net.IframeUploader=function(a,b){};
fourSq.net.IframeUploader=fourSq.EventTarget.extend({initialize:function(){this.isUsed_=!1},sendForm:function(a){if(this.isUsed_)throw Error("Cannot call sendForm twice on the same uploader");var b=fourSq.net.IframeUploader.makeIframe_(),c=null;1>a.closest("html").length&&fourSq.debug.error("Form must be actually in the DOM, or Firefox won't submit it");if($.browser.msie)b.attr("src","/xdreceiver.html"),a[0].target=b.attr("id"),$(document.body).append(b),$(b).on("readystatechange",fourSq.curry(this.onIeReadyStateChange_,
this,b));else{$(document.body).append(b);var c=b[0].contentDocument||b[0].contentWindow.document,d=b.attr("id")+"_inner",e='\x3cbody\x3e\x3ciframe id\x3d"'+d+'" name\x3d"'+d+'"\x3e\x3c/iframe\x3e';document.baseURI&&(e='\x3chead\x3e\x3cbase href\x3d"'+document.baseURI+'"\x3e\x3c/head\x3e'+e);c.write(e);$(c.getElementById(d)).on("load",fourSq.curry(this.onIframeLoaded_,this,b,d));a[0].target=d}try{a.submit(),c&&c.close()}catch(f){fourSq.debug.error("Error submitting iframe",[f]),c&&c.close(),this.loadFailed_()}window.setTimeout(fourSq.bind(this.loadFailed_,
this),3E5)},loadFailed_:function(){this.completed_||(this.trigger(fourSq.net.IframeUploader.Events.failure),this.completed_=!0)},onIeReadyStateChange_:function(a){if("complete"==a[0].readyState)this.onDocumentLoaded_(a[0].contentWindow.document)},onIframeLoaded_:function(a,b){var c=(a[0].contentDocument||a[0].contentWindow.document).getElementById(b);this.onDocumentLoaded_(c.contentDocument||c.contentWindow.document)},onDocumentLoaded_:function(a){a=$(a).find("#json-response").val();if(0==$.trim(a).length)fourSq.debug.error("Empty content from server"),
this.loadFailed_();else{var b=null;try{b=$.parseJSON(a)}catch(c){fourSq.debug.error("Unable to parse json",[c,a]),this.loadFailed_()}this.completed_=!0;this.trigger(fourSq.net.IframeUploader.Events.success,b)}}},{nextIframeId_:1,makeIframeId_:function(){return"fsq-net-iframe-upload-"+fourSq.net.IframeUploader.nextIframeId_++},makeIframe_:function(){var a=fourSq.net.IframeUploader.makeIframeId_(),a=$("\x3ciframe\x3e\x3c/iframe\x3e").attr("name",a).attr("id",a);a.css({visibility:"hidden",width:"10",
height:"10",position:"absolute",top:-10,left:-10});return a},Events:{success:"complete",failure:"failure"}});fourSq.net.ImageUploader.isValidFilename=function(a){a=a.split(".");return/^(jpg|png|jpeg|gif)$/.test(a[a.length-1].toLowerCase())};fourSq.net.ImageUploader.showInvalidFilenameNotifier=function(){var a=templates.fourSq.ui.imageUpload.errorMsg({});fourSq.ui.Notifier.getInstance().error(a)};fourSq.net.ImageUploader.findOrCreateHiddenInput=function(a,b,c){var d=$("."+b,a);0===d.length&&(a.append(templates.fourSq.ui.imageUpload.addHiddenField({name:c,className:b})),d=$("."+b,a));return d};
fourSq.net.ImageUploader.showImagePreview=function(a,b){if(!window.FileReader)a.trigger(fourSq.net.ImageUploader.Events.PREVIEW_FAILURE);else if(b&&b[0]&&b[0].files&&b[0].files[0]){var c=b[0].files[0],d=new FileReader;d.onload=function(b){a.attr("src",b.target.result);a.trigger(fourSq.net.ImageUploader.Events.PREVIEW_SUCCESS)};d.readAsDataURL(c);return c}};fourSq.net.ImageUploader.Events={PREVIEW_SUCCESS:"previewsuccess",PREVIEW_FAILURE:"previewfailure"};fourSq.net.QueryString=function(a){};
fourSq.net.QueryString=fourSq.EventTarget.extend({initialize:function(a){this.encodedQuery_=fourSq.isDefinedAndNotNull(a)?a.query:null;fourSq.isDefinedAndNotNull(this.encodedQuery_)&&0<this.encodedQuery_.length&&"?"==this.encodedQuery_[0]&&(this.encodedQuery_=this.encodedQuery_.substring(1));this.values_={};this.valuesModified_=!1;this.initValues_()},setAndPop:function(a,b){var c=this.get(a);this.values_[a]=b;this.valuesModified_=!0;return c},set:function(a,b){this.setAndPop(a,b);return this},maybeSet:function(a,
b){fourSq.isDefinedAndNotNull(b)&&this.set(a,b);return this},setAll:function(a){_.extend(this.values_,a);this.valuesModified_=!0;return this},containsKey:function(a){return fourSq.isDefinedAndNotNull(this.get(a))},get:function(a){return this.values_[a]},remove:function(a){return this.containsKey(a)?(delete this.values_[a],this.valuesModified_=!0):!1},strip:function(a){var b={};_.each(a,fourSq.bind(function(a){this.containsKey(a)&&(b[a]=this.get(a),this.remove(a))},this));return b},toDisplayString:function(){this.valuesModified_&&
this.reencodeString_();return this.encodedQuery_||""},reencodeString_:function(){for(var a=_.keys(this.values_).sort(),b="",c=0,d;d=a[c];c++){var e=this.values_[d];d=encodeURIComponent(d)+"\x3d"+(fourSq.isDefinedAndNotNull(e)&&0<e.length?encodeURIComponent(e):"");0<b.length&&(b+="\x26");b+=d}this.encodedQuery_=b;this.valuesModified_=!1},initValues_:function(){if(fourSq.isDefinedAndNotNull(this.encodedQuery_))for(var a=this.encodedQuery_.split("\x26"),b=0,c;c=a[b];b++){var d=c.indexOf("\x3d"),e="",
f="";0<=d?(e=c.substring(0,d),f=c.substring(d+1)):e=c;fourSq.isDefinedAndNotNull(f);this.values_[decodeURIComponent(e)]=decodeURIComponent(f)}}});fourSq.net.JsModuleLoaderImpl=function(a,b){};
fourSq.net.JsModuleLoaderImpl=fourSq.Class.extend({initialize:function(){this.cache_={}},resourceToKey_:function(a){return(a.bundle||"foursquare")+"-"+a.module},resourceToSrc_:function(a){var b=new fourSq.net.QueryString;b.set("bundle",a.bundle||"foursquare");b.set("module",a.module);(a=fourSq.util.parseParams().jsmode)&&b.set("jsmode",a);a=window.location.port?":"+window.location.port:"";return window.location.protocol+"//"+fourSq.i18n.baseDomain()+a+"/modulejs?"+b.toDisplayString()},loadScript_:function(a,
b){var c=document.createElement("script");c.type="text/javascript";c.src=a;var d=_.once(b);c.onreadystatechange=c.onload=function(){var a=c.readyState;a&&"loaded"!==a&&"complete"!==a&&"uninitialized"!==a||d();c.onload=c.onreadystatechange=null};(document.head||document.body).appendChild(c)},loadScriptsSerial_:function(a,b){var c=a[0],d=a.slice(1);if(c){var e=fourSq.curry(this.loadScriptsSerial_,this,d,b),d=fourSq.bind(function(){this.cache_[this.resourceToKey_(c)]=!0;e()},this);this.loadScript_(this.resourceToSrc_(c),
d)}else b()},load:function(a){var b=_.filter([].concat(a.resources),function(a){return!this.cache_[this.resourceToKey_(a)]},this);this.loadScriptsSerial_(b,a.complete)}});fourSq.net.JsModuleLoader=new fourSq.net.JsModuleLoaderImpl;fourSq.ui.liking.LikeButton=function(a){};
fourSq.ui.liking.LikeButton=fourSq.ui.View.extend({initialize:function(a){this.$el=$(this.el);this.template=a.template||templates.fourSq.ui.liking.likeButton;this.actionOptions_=a.actionOptions||{};this.likeState=a.isLiked;this.likes=a.likes;this.summary=a.summary;this.isTip=a.isTip;this.isSwarmActivityStream=!!a.isSwarmActivityStream;this.likeSummary=a.likeSummary;this.excludeSummary_=!!a.excludeSummary;fourSq.isDefinedAndNotNull(a.loggedOutFallback)?this.fallback=a.loggedOutFallback:this.fallback=
function(){};this.likeCountExcludingSelf_=void 0;a.includeCount&&(this.likeCountExcludingSelf_=a.isLiked?this.likes.count-1:this.likes.count);fourSq.isUndefinedOrNull(this.summary)&&fourSq.isDefinedAndNotNull(this.likes)&&(this.summary=this.likes.summary);this.controller=a.controller;this.controller.on(fourSq.api.controllers.FeedbackController.Events.LIKE_SET,this.updateAppearance_,this);this.controller.on(fourSq.api.controllers.FeedbackController.Events.LIKE_FAILURE,this.updateAppearance_,this)},
render:function(){this.theButton=$(this.template({likes:this.likes}));this.$el.append(this.theButton);return this.decorate()},decorate:function(){this.updateAppearance_(this.likeState);$(".icon, .label, .iconButton, .activity-likeButton-likeIcon",this.el).click(fourSq.curry(this.handleClick_,this,fourSq.isDefinedAndNotNull(fourSq.api.models.companion.user.UserUtil.currentUser())));return this},update:function(a,b){this.updateAppearance_(fourSq.isDefinedAndNotNull(a)?a:this.likeState,b)},handleClick_:function(a,
b){b.stopPropagation();b.preventDefault();var c=this.actionOptions_,c=fourSq.stats.Action.build(fourSq.stats.action.Action.CLICK,{element:this.likeState?fourSq.stats.action.Element.LIKED:fourSq.stats.action.Element.LIKE,section:c.section,component:c.component,componentIndex:c.componentIndex,ids:fourSq.api.models.companion.log.Oids.merge(c.ids,this.controller.loggingId())});fourSq.stats.logActions(c);a?(this.controller.setLike(!this.likeState),this.updateAppearance_(!this.likeState,this.likes),this.hideSummary_()):
this.fallback()},updateAppearance_:function(a,b){this.likeState=a;this.trigger(fourSq.ui.liking.LikeButton.Events.UPDATE,a);a?this.$el.addClass("active"):this.$el.removeClass("active");var c=fourSq.isDefinedAndNotNull(this.likeCountExcludingSelf_)&&a?this.likeCountExcludingSelf_+1:this.likeCountExcludingSelf_;this.$el.find(".label").text(templates.fourSq.ui.liking.likeText({selected:a,forTip:this.isTip,count:c}));fourSq.isDefinedAndNotNull(b)&&(this.summary=this.isSwarmActivityStream?b.count:b.summary);
this.summary&&!this.excludeSummary_?this.showSummary_(this.summary):this.hideSummary_()},hideSummary_:function(){this.likeSummary?(this.isSwarmActivityStream&&0>=parseInt(this.likes.count,10)&&this.likeSummary.parent().css("display","none"),this.likeSummary.hide()):($(".likeSummary",this.el).fadeOut(),$(".separator",this.el).fadeOut())},showSummary_:function(a){a&&(this.likeSummary?(this.isSwarmActivityStream&&0<parseInt(a,10)&&this.likeSummary.parent().css("display",""),this.likeSummary.text(a),
this.likeSummary.fadeIn()):($(".likeSummary",this.el).text(a),$(".likeSummary",this.el).fadeIn(),$(".separator",this.el).fadeIn()))}},{Events:{UPDATE:"update"}});fourSq.ui.liking.LikeButtonWithFallback=function(a){};
fourSq.ui.liking.LikeButtonWithFallback=fourSq.ui.liking.LikeButton.extend({initialize:function(a){fourSq.ui.liking.LikeButtonWithFallback.__super__.initialize.call(this,a);this.fallback=function(){var b=fourSq.signup.Trigger.UNKNOWN;a.controller.targetType===fourSq.api.controllers.FeedbackController.TYPES.tip?b=fourSq.signup.Trigger.LIKE_TIP:a.controller.targetType===fourSq.api.controllers.FeedbackController.TYPES.checkin?b=fourSq.signup.Trigger.LIKE_CHECKIN:a.controller.targetType===fourSq.api.controllers.FeedbackController.TYPES.venue?
b=fourSq.signup.Trigger.LIKE_VENUE:a.controller.targetType===fourSq.api.controllers.FeedbackController.TYPES.page?b=fourSq.signup.Trigger.LIKE_PAGE:a.controller.targetType===fourSq.api.controllers.FeedbackController.TYPES.deliverable.special&&(b=fourSq.signup.Trigger.LIKE_SPECIAL);var c=fourSq.postLoginAction.PostLoginActionController.getInstance(),d=a.controller.serializedLikeAction();c.addAction(d);fourSq.signup.signupDialogFactory({titleText:templates.fourSq.ui.liking.likeItemSignupModalTitle(),
bodyText:a.controller.getLoggedOutLikePrompt(),trigger:b}).show()}}});fourSq.ui.liking.LikeDislikeButton=function(a){};
fourSq.ui.liking.LikeDislikeButton=fourSq.ui.View.extend({initialize:function(a){this.$like=this.$el.find(".like");this.$dislike=this.$el.find(".dislike");this.$ok=this.$el.find(".ok");this.likeState=a.isLiked;this.dislikeState=a.isDisliked;this.okState=a.isOkayed;this.actionOptions_=a.actionOptions||{};this.controller=a.controller;this.controller.on(fourSq.api.controllers.FeedbackController.Events.LIKE_SET,this.updateLikeAppearance_,this);this.controller.on(fourSq.api.controllers.FeedbackController.Events.LIKE_FAILURE,this.updateLikeAppearance_,
this);this.controller.on(fourSq.api.controllers.FeedbackController.Events.DISLIKE_SET,this.updateDislikeAppearance_,this);this.controller.on(fourSq.api.controllers.FeedbackController.Events.DISLIKE_FAILURE,this.updateDislikeAppearance_,this);this.controller.on(fourSq.api.controllers.FeedbackController.Events.OK_SET,this.updateOkAppearance_,this);this.controller.on(fourSq.api.controllers.FeedbackController.Events.OK_FAILURE,this.updateOkAppearance_,this)},decorate:function(){this.likeState?this.updateLikeAppearance_(this.likeState):
this.dislikeState?this.updateDislikeAppearance_(this.dislikeState):this.okState&&this.updateOkAppearance_(this.okState);this.$like.click(fourSq.curry(this.handleClick_,this,fourSq.isDefinedAndNotNull(fourSq.api.models.companion.user.UserUtil.currentUser()),fourSq.ui.liking.LikeDislikeButton.ButtonTypes.LIKE));this.$dislike.click(fourSq.curry(this.handleClick_,this,fourSq.isDefinedAndNotNull(fourSq.api.models.companion.user.UserUtil.currentUser()),fourSq.ui.liking.LikeDislikeButton.ButtonTypes.DISLIKE));
this.$ok.click(fourSq.curry(this.handleClick_,this,fourSq.isDefinedAndNotNull(fourSq.api.models.companion.user.UserUtil.currentUser()),fourSq.ui.liking.LikeDislikeButton.ButtonTypes.OK));return this},handleClick_:function(a,b,c){c=this.actionOptions_;var d=this.elementFromButtonType_(b);c=fourSq.stats.Action.build(fourSq.stats.action.Action.CLICK,{element:d,section:c.section,component:c.component,componentIndex:c.componentIndex,ids:this.controller.loggingId()});fourSq.stats.logActions(c);a?(this.takeAction_(b),
$(this.el).addClass("loading")):(a=fourSq.postLoginAction.PostLoginActionController.getInstance(),c=this.buildPostLoginAction_(b),b=this.determineSignupTrigger_(b),a.addAction(c),fourSq.signup.signupDialogFactory({titleText:templates.fourSq.ui.liking.likeItemSignupModalTitle(),trigger:b}).show())},elementFromButtonType_:function(a){if(a==fourSq.ui.liking.LikeDislikeButton.ButtonTypes.LIKE)return this.likeState?fourSq.stats.action.Element.LIKED:fourSq.stats.action.Element.LIKE;if(a==fourSq.ui.liking.LikeDislikeButton.ButtonTypes.DISLIKE)return this.dislikeState?
fourSq.stats.action.Element.DISLIKED:fourSq.stats.action.Element.DISLIKE;if(a==fourSq.ui.liking.LikeDislikeButton.ButtonTypes.OK)return this.okState?fourSq.stats.action.Element.OKAYED:fourSq.stats.action.Element.OK},takeAction_:function(a){a==fourSq.ui.liking.LikeDislikeButton.ButtonTypes.LIKE?this.controller.setLike(!this.likeState):a==fourSq.ui.liking.LikeDislikeButton.ButtonTypes.DISLIKE?this.controller.setDislike(!this.dislikeState):a==fourSq.ui.liking.LikeDislikeButton.ButtonTypes.OK&&this.controller.setOk(!this.okState)},
buildPostLoginAction_:function(a){if(a==fourSq.ui.liking.LikeDislikeButton.ButtonTypes.LIKE)return this.controller.serializedLikeAction();if(a==fourSq.ui.liking.LikeDislikeButton.ButtonTypes.DISLIKE)return this.controller.serializedDislikeAction();if(a==fourSq.ui.liking.LikeDislikeButton.ButtonTypes.OK)return this.controller.serializedOkAction()},determineSignupTrigger_:function(a){if(a==fourSq.ui.liking.LikeDislikeButton.ButtonTypes.LIKE)return fourSq.signup.Trigger.LIKE_VENUE;if(a==fourSq.ui.liking.LikeDislikeButton.ButtonTypes.DISLIKE)return fourSq.signup.Trigger.DISLIKE_VENUE;
if(a==fourSq.ui.liking.LikeDislikeButton.ButtonTypes.OK)return fourSq.signup.Trigger.OK_VENUE},updateLikeAppearance_:function(a,b){this.likeState=a;this.dislikeState=!1;a?(this.$like.addClass("active"),this.$dislike.removeClass("active"),this.$ok.removeClass("active")):this.$like.removeClass("active");$(this.el).removeClass("loading")},updateDislikeAppearance_:function(a,b){this.dislikeState=a;this.likeState=!1;a?(this.$dislike.addClass("active"),this.$like.removeClass("active"),this.$ok.removeClass("active")):
this.$dislike.removeClass("active");$(this.el).removeClass("loading")},updateOkAppearance_:function(a,b){this.okState=a;this.dislikeState=this.likeState=!1;a?(this.$ok.addClass("active"),this.$dislike.removeClass("active"),this.$like.removeClass("active")):this.$ok.removeClass("active");$(this.el).removeClass("loading")},hideSummary_:function(){$(".likeSummary",this.el).fadeOut();$(".separator",this.el).fadeOut()},showSummary_:function(a){a&&$(".likeSummary",this.el).text(a);$(".likeSummary",this.el).fadeIn();
$(".separator",this.el).fadeIn()}});fourSq.ui.liking.LikeDislikeButton.ButtonTypes={LIKE:"like",DISLIKE:"dislike",OK:"ok"};fourSq.ui.liking.TipUpvoteDownvoteButton=function(a){};
fourSq.ui.liking.TipUpvoteDownvoteButton=fourSq.ui.View.extend({initialize:function(a){fourSq.ui.liking.TipUpvoteDownvoteButton.__super__.initialize.call(this,a);this.tip_=a.tip;this.$lastVote_=a.lastVoteEl;this.setEl_(this.getTemplate_(this.tip_));this.renderLastVoteText_(this.tip_);this.attachEvents_()},getTemplate_:function(a){return $(templates.fourSq.ui.liking.tipUpvoteDownvoteButton({upvote:a.agreeCount,downvote:a.disagreeCount,upvoted:a.agreed,downvoted:a.disagreed}))},attachEvents_:function(){this.$el.find(".tipUpvoteContainer").click(fourSq.bind(this.upvoteTip_,
this));this.$el.find(".tipDownvoteContainer").click(fourSq.bind(this.downvoteTip_,this))},upvoteTip_:function(){fourSq.api.models.companion.user.UserUtil.isLoggedIn()?this.tip_.agreed?this.removeVote_():fourSq.api.services.Tip.vote(this.tip_.id,!0,fourSq.bind(this.update_,this)):this.showSignupModal_(!0)},downvoteTip_:function(){fourSq.api.models.companion.user.UserUtil.isLoggedIn()?this.tip_.disagreed?this.removeVote_():fourSq.api.services.Tip.vote(this.tip_.id,!1,fourSq.bind(this.update_,this)):
this.showSignupModal_(!1)},removeVote_:function(){fourSq.api.services.Tip.removeVote(this.tip_.id,fourSq.bind(this.update_,this))},showSignupModal_:function(a){a=a?fourSq.postLoginAction.UpvoteTip.buildAction(this.tip_.id):fourSq.postLoginAction.DownvoteTip.buildAction(this.tip_.id);fourSq.postLoginAction.PostLoginActionController.getInstance().addAction(a);fourSq.signup.signupDialogFactory({titleText:templates.fourSq.ui.liking.likeItemSignupModalTitle(),bodyText:templates.fourSq.ui.signupmodal.tipLikeSignupBody(),
trigger:fourSq.signup.Trigger.LIKE_TIP}).show()},renderLastVoteText_:function(a){this.$lastVote_&&a.lastVoteText&&this.$lastVote_.text(a.lastVoteText)},update_:function(a){this.trigger(fourSq.ui.liking.TipUpvoteDownvoteButton.Events.VOTE,a);this.renderLastVoteText_(a);this.tip_=a;a=this.getTemplate_(a);this.$el.replaceWith(a);this.setEl_(a);this.attachEvents_();return this}},{Events:{VOTE:"vote"}});fourSq.ui.ListSaveButton=function(a){};
fourSq.ui.ListSaveButton=fourSq.ui.BasicButton.extend({initialize:function(a){this.model=a.model;this.referralId_=a.referralId},render:function(){var a=fourSq.api.models.companion.lists.ListUtil.isFollowing(this.model);this.setEl_($(templates.fourSq.ui.save.saveLink({forList:!0,saved:a})));return this.decorate()},isActive:function(){return fourSq.api.models.companion.lists.ListUtil.isFollowing(this.model)},getLabel:function(a,b){return a?templates.fourSq.ui.save.savedButtonCopy({forList:!0}):b?templates.fourSq.ui.save.savingButtonCopy({forList:!0}):
templates.fourSq.ui.save.unsavedButtonCopy({forList:!0})},performCall:function(a,b){this.isActive()?fourSq.api.services.List.unfollow({id:this.model.id,referralId:this.referralId_},a,b):fourSq.api.services.List.follow({id:this.model.id,referralId:this.referralId_},a,b)},handleResponse:function(a){this.model=a;this.update()},handleLoggedOutClick:function(a){}});fourSq.ui.PhoneEmailInput=function(a){};
fourSq.ui.PhoneEmailInput=fourSq.ui.View.extend({initialize:function(a){this.validateOnBlur_=!!a.validateOnBlur;this.countryCode_=a.countryCode||"us"},getIfValid:function(){return this.validate_()},render:function(){this.$el.empty().append(templates.fourSq.ui.phoneemailinput.internationalInput());return this.decorate()},decorate:function(){this.$input_=this.$el.children().andSelf().filter(".phoneEmail");if(this.validateOnBlur_)this.$input_.on("blur",fourSq.bind(this.validate_,this));return this},
val_:function(){return fourSq.util.trim(this.$input_.val())},isPhone_:function(a){return!!a.match(/^\+?[\d()\-\. ]+$/)},tidyPhoneNumber_:function(a){return a.replace(/[()\-\. ]/g,"")},toE164_:function(a){if("+"===a.charAt(0))return a;var b=fourSq.ui.PhoneEmailInput.CountryCodes[this.countryCode_.toLowerCase()]||fourSq.ui.PhoneEmailInput.CountryCodes.us,c=b[0];(b=b[1])&&a.substr(0,b.length)===b&&(a=a.substr(b.length));return"+"+c+a},maybeGetEmailValidationError_:function(a){return a.match(/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i)?
null:templates.fourSq.ui.phoneemailinput.invalid()},maybeGetPhoneValidationError_:function(a){return 7>a.length||15<a.length?templates.fourSq.ui.phoneemailinput.invalid():null},validate_:function(){var a=this.val_(),b=null,c=this.isPhone_(a);""===a&&templates.fourSq.ui.phoneemailinput.invalid();c?(a=this.tidyPhoneNumber_(a),b=this.maybeGetPhoneValidationError_(a)):b=this.maybeGetEmailValidationError_(a);if(fourSq.isDefinedAndNotNull(b))return this.validationError_(b,a),null;a=c?this.toE164_(a):a;
this.validationSuccess_(a);return a},validationSuccess_:function(a){this.trigger(fourSq.ui.PhoneEmailInput.Events.VALID_INPUT,a);this.$input_.val(a)},validationError_:function(a,b){this.trigger(fourSq.ui.PhoneEmailInput.Events.INVALID_INPUT,a,b)}},{Events:{INVALID_INPUT:"invalid-input",VALID_INPUT:"valid-input"},CountryCodes:{ca:["1","1"],us:["1","1"],bs:["1242","1"],bb:["1246","0"],ai:["1264","1"],ag:["1268","1"],vg:["1284","1"],vi:["1340","1"],ky:["1345","1"],bm:["1441","1"],gd:["1473","1"],tc:["1649",
"1"],ms:["1664","1"],mp:["1670","1"],gu:["1671","1"],as:["1684","1"],an:["1721","0"],lc:["1758","1"],dm:["1767","1"],vc:["1784","1"],pr:["1787","1"],"do":["1809","1"],tt:["1868","1"],kn:["1869","1"],jm:["1876","1"],eg:["20","0"],ma:["212","0"],dz:["213","0"],tn:["216","0"],ly:["218","0"],gm:["220",""],sn:["221",""],mr:["222",""],ml:["223",""],gn:["224",""],ci:["225",""],bf:["226",""],ne:["227",""],tg:["228",""],bj:["229",""],mu:["230",""],lr:["231",""],sl:["232","0"],gh:["233","0"],ng:["234","0"],
td:["235",""],cf:["236",""],cm:["237",""],cv:["238",""],st:["239",""],gq:["240",""],ga:["241",""],cg:["242",""],cd:["243","0"],ao:["244","0"],gw:["245",""],io:["246",""],ac:["247",""],sc:["248",""],sd:["249","0"],rw:["250",""],et:["251","0"],so:["252",""],dj:["253",""],ke:["254","0"],tz:["255","0"],ug:["256","0"],bi:["257",""],mz:["258",""],zm:["260","0"],mg:["261",""],fr:["262",""],zw:["263","0"],na:["264","0"],mw:["265",""],ls:["266",""],bw:["267",""],sz:["268","0"],km:["269",""],za:["27","0"],
sh:["290",""],er:["291","0"],aw:["297",""],fo:["298",""],gl:["299",""],gr:["30",""],nl:["31","0"],be:["32","0"],es:["34",""],gi:["350",""],pt:["351",""],lu:["352",""],ie:["353","0"],is:["354",""],al:["355","0"],mt:["356",""],cy:["357",""],fi:["358","0"],bg:["359","0"],hu:["36","0"],lt:["370","8"],lv:["371","8"],ee:["372","0"],md:["373","0"],am:["374","0"],by:["375","8"],ad:["376",""],mc:["377",""],sm:["378",""],va:["379",""],ua:["380","0"],yu:["381","0"],me:["382","0"],hr:["385","0"],si:["386","0"],
ba:["387","0"],mk:["389","0"],it:["39",""],ro:["40","0"],ch:["41","0"],cz:["420",""],sk:["421","0"],li:["423",""],at:["43","0"],gb:["44","0"],uk:["44","0"],dk:["45",""],se:["46","0"],no:["47",""],pl:["48","0"],de:["49","0"],fk:["500",""],bz:["501",""],gt:["502",""],sv:["503",""],hn:["504",""],ni:["505","0"],cr:["506",""],pa:["507",""],pm:["508",""],ht:["509",""],pe:["51","0"],mx:["52","0"],cu:["53","0"],ar:["54","0"],br:["55","0"],cl:["56","0"],co:["57","0"],ve:["58","0"],bo:["591","0"],gy:["592",
""],ec:["593","0"],py:["595","0"],mq:["596",""],sr:["597",""],uy:["598","0"],my:["60","0"],au:["61","0"],id:["62","0"],ph:["63","0"],nz:["64","0"],sg:["65",""],th:["66","0"],tl:["670",""],bn:["673","0"],nr:["674",""],pg:["675",""],to:["676",""],sb:["677",""],vu:["678",""],fj:["679",""],pw:["680",""],ww:["681",""],ck:["682",""],nu:["683",""],ws:["685",""],ki:["686","0"],nc:["687",""],tv:["688",""],pf:["689",""],fm:["691","1"],mh:["692","1"],kz:["7","8"],ru:["7","8"],jp:["81","0"],kr:["82","0"],vn:["84",
"0"],kp:["850",""],hk:["852",""],mo:["853",""],kh:["855","0"],la:["856","0"],cn:["86","0"],bd:["880","0"],tw:["886","0"],tr:["90","0"],"in":["91","0"],pk:["92","0"],af:["93","0"],lk:["94","0"],mm:["95",""],mv:["960",""],lb:["961","0"],jo:["962","0"],sy:["963","0"],ik:["964","0"],kw:["965",""],sa:["966","0"],ye:["967","0"],oo:["968",""],ps:["970","0"],ae:["971","0"],il:["972","0"],bh:["973",""],qq:["974",""],bt:["975",""],mn:["976","0"],np:["977","0"],ir:["98","0"],tj:["992","8"],tm:["993","8"],az:["994",
"0"],ge:["995","0"],kg:["996","0"],uz:["998","8"]}});fourSq.ui.PhotoLoader=function(a){this.apiCall_=a.apiCall;this.pageSize_=a.pageSize;this.objectId_=a.objectId;this.loadCallback_=a.loadCallback;this.errorCallback_=a.loadErrorCallback||function(){};this.sort_=a.sort;this.containsFace_=a.containsFace;this.user_=a.user;this.venue_=a.venue;this.page_=a.preloadedPages;this.isLoading_=!1;this.hasMore_=!0};
fourSq.ui.PhotoLoader.prototype.attachUser=function(a){return _.map(a,function(a){!a.user&&this.user_&&(a.user=this.user_);!a.venue&&this.venue_&&(a.venue=this.venue_);return a},this)};fourSq.ui.PhotoLoader.prototype.setPhotoAddHook=function(a){this.photoAddHook_=a};fourSq.ui.PhotoLoader.extractData_=function(a){return a.items?a.items:a.groups?_.flatten(_.map(a.groups,function(a){return a.items})):[]};fourSq.ui.PhotoLoader.prototype.hasMore=function(){return this.hasMore_};
fourSq.ui.PhotoLoader.prototype.load=function(a){!this.isLoading_&&this.hasMore_&&(this.isLoading_=!0,this.apiCall_({id:this.objectId_,offset:this.pageSize_*this.page_,limit:this.pageSize_,sort:this.sort_,containsFace:this.containsFace_},fourSq.bind(function(b){b=fourSq.ui.PhotoLoader.extractData_(b);b=this.attachUser(b);this.hasMore_=0!==b.length;this.page_++;this.loadCallback_&&(b=this.loadCallback_(b));fourSq.isDefinedAndNotNull(this.photoAddHook_)&&this.photoAddHook_(b);a&&a(b);this.isLoading_=
!1},this),this.errorCallback_))};fourSq.views.PhotoViewer=function(a){};
fourSq.views.PhotoViewer=fourSq.ui.View.extend({photoWidth_:960,PRELOAD_OFFSET:5,initialize:function(a){this.photos_=a.photos||[];(this.photoLoader_=a.photoLoader)&&this.photoLoader_.setPhotoAddHook(fourSq.bind(this.addPhotos,this));this.updateVisibilityDisabled_=this.eventsBound_=!1;this.noNavigation_=!!a.noNavigation;this.hideActions_=!!a.hideActions;this.showVoting_=!!a.showVoting;this.bufferedPhotoIds_={};this.handleShortcuts_=!0;this.enableLeaveTip_=a.enableLeaveTip;this.isContentModerator_=
fourSq.config.user.IS_CONTENT_MODERATOR;this.enablePhotoBoosters_=a.enablePhotoBoosters;this.hasDataViz_=fourSq.config.user.HAS_DATA_VIZ;this.$voteThanks_=this.$cancelInappropriate_=this.$confirmInappropriate_=this.$confirmFlagSection_=this.$downvotePhotoOtherLink_=this.$flagPhotoUnrelatedLink_=this.$flagPhotoBlurryLink_=this.$downvotePhotoFaceLink_=this.$upvotePhotoLink_=this.$voteOnPhotosSection_=null;this.render()},render:function(){this.setEl_($(templates.fourSq.ui.photoViewer({loggedIn:fourSq.api.models.companion.user.UserUtil.isLoggedIn(),
isContentModerator:this.isContentModerator_,showVisibility:fourSq.config.showPhotoVisibility,enableLeaveTip:this.enableLeaveTip_,enablePhotoBoosters:this.enablePhotoBoosters_,hideActions:this.hideActions_,showVoting:this.showVoting_})));return this.decorate()},decorate:function(){this.photoHolder=$(this.el).find("#mainPhoto");this.userPicHolder=$(this.el).find("#userPic");this.userNameHolder=$(this.el).find("#userName a");this.venueNameHolder=$(this.el).find("#venueName a");this.userAtHolder=$(this.el).find("#userAt");
this.dateHolder=$(this.el).find("#date");this.enableLeaveTip_&&(this.tipCreator_=new fourSq.tip.TipCreator({el:$(this.el).find(".leaveTip"),photo:this.currentPhoto_()}),this.tipCreator_.decorate(),this.tipCreator_.on(fourSq.tip.TipCreator.Events.SHOW,fourSq.bind(this.disableShortcuts_,this)),this.tipCreator_.on(fourSq.tip.TipCreator.Events.HIDE,fourSq.bind(this.enableShortcuts_,this)));this.$deletePhotoControl_=$(this.el).find(".deletePhoto");this.$deletePhotoControl_.hide();this.$visibilityHolder_=
$(this.el).find(".visibilityDetails");this.$visibilityText_=this.$visibilityHolder_.find(".visibility");this.nextArrow=this.$el.find("#next");this.prevArrow=this.$el.find("#previous");this.$flagLink=this.$el.find(".flagLink");this.flagFrame=$(templates.fourSq.photos.flagFrame({}));this.faceboxFlagPhoto=this.$el.find(".flagPhoto a");this.showVoting_&&(this.$voteOnPhotosSection_=this.$el.find(".voteOnPhotos"),this.$upvotePhotoLink_=this.$el.find(".upvotePhoto"),this.$downvotePhotoFaceLink_=this.$el.find(".downvotePhotoFace"),
this.$flagPhotoBlurryLink_=this.$el.find(".downvotePhotoBlurry"),this.$flagPhotoUnrelatedLink_=this.$el.find(".downvotePhotoUnrelated"),this.$downvotePhotoOtherLink_=this.$el.find(".downvotePhotoOther"),this.$confirmFlagSection_=this.$el.find(".flagConfirmation"),this.$confirmInappropriate_=this.$el.find(".yesFlag"),this.$cancelInappropriate_=this.$el.find(".noFlag"),this.$voteThanks_=this.$el.find(".voteThanks"),this.$confirmFlagSection_.addClass("hidden"),this.$voteThanks_.addClass("hidden"));this.isContentModerator_&&
(this.$demotePhotoLink=this.$demotePhotoSection=this.$el.find(".demotePhoto"),this.$banPhotoSilentlyLink=this.$el.find(".banPhotoSilently"),this.$banPhotoAndNotifyLink=this.$el.find(".banPhotoAndNotify"),this.enablePhotoBoosters_&&(this.$blessPhotoLink=this.$el.find(".blessPhoto")));fourSq.isDefined(this.options.target)&&(this.userNameHolder.attr("target",this.options.target),this.venueNameHolder.attr("target",this.options.target));return this},addPhotos:function(a){this.photos_=this.photos_.concat(a);
this.updateArrows_()},clearPhotos:function(){this.photos_=[];this.updateArrows_()},open:function(a){$("body").prepend(this.$el);this.noNavigation_&&(this.nextArrow.hide(),this.prevArrow.hide());this.currentPhotoIndex=(a||0)-1;$(this.el).show();this.bindEvents_();this.next_()},openByPhotoId:function(a){var b=_(this.photos_).chain().pluck("id").indexOf(a).value();if(-1===b)return fourSq.debug.error("Could not find photo "+a),!1;this.open(b);return!0},close:function(){this.noNavigation_&&(this.nextArrow.show(),
this.prevArrow.show());this.unbindEvents_();$(this.el).hide();$(document).trigger("close.facebox");this.trigger(fourSq.views.PhotoViewer.Events.CLOSE);this.$el.detach()},showThanks_:function(){this.$voteThanks_.removeClass("hidden");this.$voteOnPhotosSection_.addClass("hidden");this.$flagLink.addClass("hidden")},deletePhotoHandler_:function(){fourSq.api.services.Photo.deletePhoto(this.currentPhoto_().id,fourSq.bind(function(){this.showDeleteSuccess_(!0);location.reload(!0)},this),fourSq.bind(function(){this.showDeleteSuccess_(!1)},
this))},showFlagThanks_:function(a){a?fourSq.ui.Notifier.getInstance().info(templates.fourSq.ui.flagSuccess()):fourSq.ui.Notifier.getInstance().info(templates.fourSq.ui.flagFailure());this.$voteOnPhotosSection_.addClass("hidden");this.$flagLink.addClass("hidden")},showDeleteSuccess_:function(a){a?fourSq.ui.Notifier.getInstance().info(templates.fourSq.ui.deletePhotoSuccess()):fourSq.ui.Notifier.getInstance().info(templates.fourSq.ui.deletePhotoFail())},bindClickEvents_:function(){this.photoHolder.on("click",
"img",fourSq.withoutPropagation(this.next_,this));this.nextArrow.click(fourSq.withoutPropagation(this.next_,this));this.prevArrow.click(fourSq.withoutPropagation(this.previous_,this));this.$flagLink.click(fourSq.withoutPropagationAndDefault(this.confirmFlag_,this));this.faceboxFlagPhoto.click(fourSq.withoutPropagationAndDefault(this.flag_,this));this.$visibilityText_.click(fourSq.withoutPropagation(this.toggleVisibility_,this));this.$deletePhotoControl_.click(fourSq.withoutPropagation(this.deletePhotoHandler_,
this));$(this.el).click(fourSq.bind(this.close,this));$(document).on("reveal.facebox",fourSq.bind(function(){$("#facebox").addClass("flagPhoto");this.submitFlagButton=$("#facebox .submitFlag");this.flagFrame.addClass("unknown");this.flagFrame.removeClass("success failure noProblem");var a=fourSq.bind(this.submitFlag_,this);this.submitFlagButton.click(a)},this));if(this.showVoting_){var a=fourSq.bind(function(a){a.stopPropagation();fourSq.api.services.Photo.upvote(this.currentPhoto_().id,this.showThanks_(),
this.showThanks_())},this),b=fourSq.bind(function(a,b){fourSq.api.services.Photo.downvote({photoId:this.currentPhoto_().id,reason:b},this.showThanks_(),this.showThanks_())},this),c=fourSq.bind(function(a,b){fourSq.api.services.Photo.flag(this.currentPhoto_().id,b,fourSq.bind(function(){this.showFlagThanks_(!0)},this),fourSq.bind(function(){this.showFlagThanks_(!1)},this))},this);this.$upvotePhotoLink_.click(fourSq.withoutPropagation(a,this));this.$downvotePhotoFaceLink_.click(fourSq.withoutPropagation(function(a){b(a,
"hasFace")},this));this.$downvotePhotoOtherLink_.click(fourSq.withoutPropagation(function(a){b(a,"other")},this));this.$flagPhotoBlurryLink_.click(fourSq.withoutPropagation(function(a){c(a,"blurry")},this));this.$flagPhotoUnrelatedLink_.click(fourSq.withoutPropagation(function(a){c(a,"unrelated")},this));this.$confirmInappropriate_.click(fourSq.withoutPropagationAndDefault(this.flag_,this));this.$cancelInappropriate_.click(fourSq.withoutPropagationAndDefault(function(){this.$confirmFlagSection_.addClass("hidden");
this.$flagLink.removeClass("hidden");this.$voteOnPhotosSection_.removeClass("hidden")},this))}if(this.isContentModerator_){var d=fourSq.bind(function(a){fourSq.api.services.Photo.resolvePhoto([this.currentPhoto_().id],a)},this);this.$demotePhotoLink.click(function(){d("demote")});this.$banPhotoSilentlyLink.click(function(){d("banSilent")});this.$banPhotoAndNotifyLink.click(function(){d("banNotify")})}},unbindClickEvents_:function(){$(this.el).off("click");this.nextArrow.off("click");this.prevArrow.off("click");
this.$flagLink.off("click");this.$visibilityText_.off("click");fourSq.isDefinedAndNotNull(this.submitFlagButton)&&this.submitFlagButton.off("click");this.showVoting_&&(this.$upvotePhotoLink_.off("click"),this.$downvotePhotoFaceLink_.off("click"),this.$downvotePhotoOtherLink_.off("click"),this.$flagPhotoUnrelatedLink_.off("click"),this.$flagPhotoBlurryLink_.off("click"),this.$confirmFlagSection_.off("click"),this.$voteOnPhotosSection_.off("click"),this.$confirmInappropriate_.off("click"))},bindEvents_:function(){this.eventsBound_||
(this.bindShortcuts_(),this.bindClickEvents_(),this.bindSwipeEvents_(),this.eventsBound_=!0)},unbindEvents_:function(){this.eventsBound_&&(this.photoHolder.off("click","img"),this.unbindShortcuts_(),this.unbindClickEvents_(),this.unbindSwipeEvents_(),$(document).off("reveal.facebox"),this.eventsBound_=!1)},next_:function(){this.currentPhotoIndex+1<this.photos_.length&&(this.currentPhotoIndex++,this.updateArrows_(),this.showPhoto_());this.bufferImages_()},previous_:function(){0<=this.currentPhotoIndex-
1&&(this.currentPhotoIndex--,this.updateArrows_(),this.showPhoto_(),this.bufferImages_())},currentPhoto_:function(){return this.photos_[this.currentPhotoIndex]},bufferImages_:function(){_.defer(fourSq.bind(function(){var a=Math.ceil(this.PRELOAD_OFFSET/2),b=Math.max(this.currentPhotoIndex-a,0),a=Math.min(this.currentPhotoIndex+a+1,this.photos_.length),b=this.photos_.slice(b,a),b=_.filter(b,fourSq.bind(function(a){return!this.bufferedPhotoIds_[a&&a.id]},this));_.each(b,fourSq.bind(function(a){var b=
helpers.photo.nearestBigger(_.extend(a,{targetWidth:this.photoWidth_,maintainRatio:!0,capDimension:"width"}));(new Image).src=b;this.bufferedPhotoIds_[a.id]=!0},this))},this))},showPhoto_:function(){var a=this.currentPhoto_();if(a){var b="",c=[];this.hasDataViz_&&fourSq.isDefinedAndNotNull(a.adminNotes)&&0<a.adminNotes.length&&(b="warning",c=a.adminNotes);var d=$("\x3cdiv\x3e\x3c/div\x3e");d.append($(helpers.photo.cappedImage(_.extend(a,{size:this.photoWidth_,capDimension:"width",extraImgClass:b}))));
0<c.length&&d.append(templates.fourSq.ui.suInfoOverlay({suInfo:c.join(" | ")}));d.attr("id","currentImage");b=$(window).height()-this.$el.find("#photoDetails").outerHeight(!0)-this.$el.find(".suInfo").outerHeight(!0)-this.$el.find(".voteOnPhotos").outerHeight(!0)-this.$el.find(".flagLink").outerHeight(!0)-this.$el.find(".suPhotoActions").outerHeight(!0)-this.$el.find(".flagPhoto").outerHeight(!0)-60;d.find("img").css("max-height",b);b=a.user;c=a.venue;b?(this.userPicHolder.attr("src",helpers.user.imageHref({photo:b.photo,
size:32})),this.userNameHolder.attr("href",b.canonicalPath),this.userNameHolder.text(fourSq.api.models.companion.user.UserUtil.shortName(b)),this.userPicHolder.show(),this.userNameHolder.show(),c&&(this.venueNameHolder.attr("href",fourSq.api.models.companion.venue.VenueUtil.venueUrl(c)),this.venueNameHolder.text(c.name),this.userAtHolder.text(" at "),this.venueNameHolder.show(),this.userAtHolder.show())):(this.userPicHolder.hide(),this.userNameHolder.hide(),this.venueNameHolder.hide(),this.userAtHolder.hide());
this.dateHolder.text(templates.fourSq.photos.addedOn({then:a.createdAt}));(c=fourSq.api.models.companion.user.UserUtil.currentUser(!1))&&b&&c.id===b.id&&a.visibility?(this.setVisibilityText_(a.visibility),"public"==a.visibility||"friends"==a.visibility?this.setVisibilityApiDisabled_(!1):this.setVisibilityApiDisabled_(!0),this.$deletePhotoControl_.show(),this.$visibilityHolder_.show()):(this.$visibilityHolder_.hide(),this.$deletePhotoControl_.hide());b="public"==a.visibility;this.showVoting_&&(this.$confirmFlagSection_.addClass("hidden"),
this.$voteThanks_.addClass("hidden"),b?(this.$voteOnPhotosSection_.removeClass("hidden"),this.$flagLink.removeClass("hidden")):(this.$voteOnPhotosSection_.addClass("hidden"),this.$flagLink.addClass("hidden")));this.isContentModerator_&&(b?this.$demotePhotoSection.show():this.$demotePhotoSection.hide(),this.enablePhotoBoosters_&&(this._isBlessing=!1,b=fourSq.bind(function(b){b.stopPropagation();this._blessing=!0;fourSq.api.services.Photo.unbless(a.id,fourSq.bind(function(){var b=a.adminNotes.indexOf("content team blessed");
this.currentPhoto_().adminNotes.splice(b,1);this._isBlessing=!1;this.showPhoto_()},this),fourSq.bind(function(){this._isBlessing=!1},this))},this),c=fourSq.bind(function(b){b.stopPropagation();fourSq.api.services.Photo.bless(a.id,fourSq.bind(function(){this.currentPhoto_().adminNotes.push("content team blessed");this._isBlessing=!1;this.showPhoto_()},this),fourSq.bind(function(){this._isBlessing=!1},this))},this),_.contains(a.adminNotes,"content team blessed")?(this.$blessPhotoLink.text("Unbless"),
this.$blessPhotoLink.off("click").click(b)):(this.$blessPhotoLink.text("Bless"),this.$blessPhotoLink.off("click").click(c))));fourSq.isDefinedAndNotNull(this.tipCreator_)&&this.tipCreator_.setCurrentPhoto(a);this.trigger(fourSq.views.PhotoViewer.Events.SHOW,a);this.photoHolder.find("#currentImage").remove();this.photoHolder.prepend(d)}this.photoLoader_&&this.currentPhotoIndex>=this.photos_.length-1-this.PRELOAD_OFFSET&&this.photoLoader_.load()},updateArrows_:function(){this.nextArrow.removeClass("noMore");
this.prevArrow.removeClass("noMore");0===this.currentPhotoIndex&&this.prevArrow.addClass("noMore");this.currentPhotoIndex==this.photos_.length-1&&this.nextArrow.addClass("noMore")},confirmFlag_:function(){this.$voteOnPhotosSection_.addClass("hidden");this.$flagLink.addClass("hidden");this.$confirmFlagSection_.removeClass("hidden")},flag_:function(){this.showVoting_?fourSq.api.services.Photo.flag(this.currentPhoto_().id,"inappropriate",fourSq.bind(function(){this.close();this.showFlagThanks_(!0)},
this),fourSq.bind(function(){this.showFlagThanks_(!1)},this)):$.facebox({el:this.flagFrame})},submitFlag_:function(){var a=$("#facebox").find("input[name\x3d'problem']:checked"),b=a.val();fourSq.isDefinedAndNotNull(b)?(this.flagFrame.removeClass("noProblem"),fourSq.api.services.Photo.flag(this.currentPhoto_().id,b,fourSq.bind(function(){a.removeAttr("checked");this.flagFrame.toggleClass("success unknown");window.setTimeout(function(){$(document).trigger("close.facebox")},1E3)},this),fourSq.bind(function(){a.removeAttr("checked");
this.flagFrame.toggleClass("failure unknown");window.setTimeout(function(){$(document).trigger("close.facebox")},1E3)},this))):this.flagFrame.addClass("noProblem")},disableShortcuts_:function(){this.handleShortcuts_=!1},enableShortcuts_:function(){this.handleShortcuts_=!0},shortcuts_:function(a){this.handleShortcuts_&&(39==a.which||40==a.which||74==a.which?this.noNavigation_||(a.preventDefault(),this.next_()):37==a.which||38==a.which||75==a.which?this.noNavigation_||(a.preventDefault(),this.previous_()):
27==a.which&&this.close())},bindShortcuts_:function(){$(document).on("keydown.PhotoViewer",fourSq.bind(this.shortcuts_,this))},unbindShortcuts_:function(){$(document).off("keydown.PhotoViewer")},bindSwipeEvents_:function(){if(fourSq.util.devices.isTouchIncludingIPad())this.photoHolder.addSwipeEvents().on("swipeleft",fourSq.bind(this.next_,this)).on("swiperight",fourSq.bind(this.previous_,this)).on("touchmove",function(a){a.preventDefault()})},unbindSwipeEvents_:function(){this.photoHolder.off("swipeleft").off("swiperight").off("touchmove")},
toggleVisibility_:function(){if(!this.updateVisibilityDisabled_){var a=this.currentPhoto_(),b,c;switch(a.visibility){case "public":c=fourSq.stats.action.Element.PHOTO_VISIBILITY_PUBLIC;b="friends";break;case "friends":c=fourSq.stats.action.Element.PHOTO_VISIBILITY_FRIENDS;b="public";break;default:return}this.setVisibilityApiDisabled_(!0);c=fourSq.stats.Action.build(fourSq.stats.action.Action.CLICK,{element:c,ids:fourSq.api.models.companion.log.Oids.build({photoId:a.id})});fourSq.stats.logActions(c);
fourSq.api.services.Private.toggleVisibility(a.id,b,fourSq.bind(function(){a.visibility=b;this.setVisibilityText_(b);this.setVisibilityApiDisabled_(!1)},this),fourSq.bind(function(){fourSq.ui.Notifier.getInstance().error(templates.fourSq.photos.toggleVisibilityError());this.setVisibilityApiDisabled_(!1)},this))}},setVisibilityText_:function(a){this.$visibilityText_.text(templates.fourSq.photos.visibilityText({visibility:a}))},setVisibilityApiDisabled_:function(a){a?this.$visibilityText_.removeClass("link"):
this.$visibilityText_.addClass("link");this.updateVisibilityDisabled_=a}},{Events:{SHOW:"show",CLOSE:"close"},openSinglePhoto:function(a,b,c){(new fourSq.views.PhotoViewer({photos:[a],noNavigation:!0,showVoting:b,enablePhotoBoosters:c})).open(0)}});fourSq.ui.PhotoPicker=function(a){};
fourSq.ui.PhotoPicker=fourSq.ui.View.extend({initialize:function(a){fourSq.ui.PhotoPicker.__super__.initialize.call(this,a);this.imageUploadForm_=this.$el.find(".photoUploadForm");this.imageFileInput_=$("input",this.imageUploadForm_);this.imageFileInput_.change(fourSq.bind(this.onImageChosen_,this));this.$el.find(".picker").click(fourSq.bind(this.pickFile,this));this.onChosenCallback_=a.onChosenCallback},pickFile:function(){this.imageFileInput_.click()},onImageChosen_:function(){var a=$.trim(this.imageFileInput_.val());
if(!fourSq.net.ImageUploader.isValidFilename(a))return fourSq.net.ImageUploader.showInvalidFilenameNotifier(),!1;this.photoExists_=!0;if(this.onChosenCallback_)this.onChosenCallback_();return!0},save:function(a,b){if(this.photoExists_){fourSq.net.ImageUploader.findOrCreateHiddenInput(this.imageUploadForm_,"oauthInput","oauth_token").val(fourSq.config.api.API_TOKEN);var c=new fourSq.net.IframeUploader;c.on("complete",fourSq.bind(a,this));c.on("failure",b);c.sendForm(this.imageUploadForm_)}}});fourSq.views.PhotoRanker=function(a){};
fourSq.views.PhotoRanker=fourSq.ui.View.extend({initialize:function(a){this.$el=$(this.el);this.venueId_=a.venueId;this.photoSize_=300;this.decorate();this.hasRankedPhotos=!1;this.currentPhotos=[];this.$el.find(".skipPhotoLink").click(fourSq.bind(this.skip,this));this.flagFrame=$(templates.fourSq.photos.flagFrame({}))},decorate:function(){this.$overlay_=$(templates.fourSq.photos.photoRanker());this.$page_=this.$overlay_.find("#overlayPageRanker");this.$photos_=this.$page_.find("#overlayPhotoRanker");
this.$messages_=this.$page_.find("#photoMessages");this.$el.append(this.$overlay_);this.keyHandler_=fourSq.bind(this.shortcuts,this);this.$el.find(".photoRanker").click(fourSq.bind(this.open,this)).tooltip()},open:function(){this.$photos_.empty();this.$overlay_.show();this.bindEvents_();this.next()},bindEvents_:function(){this.eventsBound_||(this.$overlay_.click(fourSq.bind(this.close,this)),this.bindShortcuts_(),this.eventsBound_=!0)},unbindEvents_:function(){this.eventsBound_&&(this.$overlay_.off("click"),
this.unbindShortcuts_(),this.eventsBound_=!1)},bindShortcuts_:function(){$(document).on("keydown",this.keyHandler_)},unbindShortcuts_:function(){$(document).off("keydown",this.keyHandler_)},process_:function(a){a.stopPropagation();this.next(a.data.photos,a.data.winners)},addMessage:function(a){var b=$(templates.fourSq.photos.photoRankerMessage({message:a}));this.$messages_.append(b);window.setTimeout(function(){b.fadeOut("slow")},5E3)},openFlagLink_:function(a){a.stopPropagation();var b=a.data.photo;
$(document).on("reveal.facebox",fourSq.bind(function(){this.submitFlagButton=$("#facebox .submitFlag");this.flagFrame.addClass("unknown");this.flagFrame.removeClass("success failure noProblem");fourSq.isDefinedAndNotNull(this.submitFlagButton)&&this.submitFlagButton.off("click");this.submitFlagButton.click({photo:b},fourSq.bind(this.submitFlag,this))},this));$.facebox({el:this.flagFrame});$("#facebox").addClass("flagPhotoRank")},submitFlag:function(a){var b=$("#facebox").find("input[name\x3d'problem']:checked"),
c=b.val();a=a.data.photo;fourSq.isDefinedAndNotNull(c)?(this.flagFrame.removeClass("noProblem"),fourSq.api.services.Photo.flag(a,c,fourSq.bind(function(){b.removeAttr("checked");this.flagFrame.toggleClass("success unknown");window.setTimeout(function(){$(document).trigger("close.facebox")},1E3)},this),fourSq.bind(function(){b.removeAttr("checked");this.flagFrame.toggleClass("failure unknown");window.setTimeout(function(){$(document).trigger("close.facebox")},1E3)},this))):this.flagFrame.addClass("noProblem")},
next:function(a,b){this.$photos_.empty();var c=fourSq.bind(function(a){var b=a.photos;this.$photos_.empty();this.currentPhotos=b;for(var c=0;c<b.length;c++){var d=$(templates.fourSq.photos.photoRankerPhoto({id:b[c].id,src:b[c].prefix+this.photoSize_+"x"+this.photoSize_+b[c].suffix,size:this.photoSize_}));$(d).click({photos:b,winners:[b[c].id]},fourSq.bind(this.process_,this));this.$photos_.append(d)}for(c=0;c<b.length;c++)d=!1,0==c&&(d=!0),d=$(templates.fourSq.photos.photoRankerPhotoFlag({first:d})),
$(d).click({photo:b[c].id},fourSq.bind(this.openFlagLink_,this)),this.$photos_.append(d);"message"in a&&this.addMessage(a.message)},this),d;if("undefined"==typeof a)d={venueId:this.venueId_,limit:2};else{this.hasRankedPhotos=this.hasRankedPhotos||1==b.length;d=[];for(var e=0;e<a.length;e++)d.push(a[e].id);d=d.join();e=b.join();d={venueId:this.venueId_,photoIds:d,winnerIds:e,source:"photo",limit:2}}fourSq.api.services.Private.photoRanker(d,c,function(){})},left:function(a){a.preventDefault();this.next(this.currentPhotos,
[this.currentPhotos[0].id])},right:function(a){a.preventDefault();this.next(this.currentPhotos,[this.currentPhotos[1].id])},skip:function(a){a.preventDefault();this.next(this.currentPhotos,[this.currentPhotos[0].id,this.currentPhotos[1].id])},shortcuts:function(a){if(37===a.which)return this.left(a);if(39===a.which)return this.right(a);if(32===a.which||40===a.which)return this.skip(a);27!==a.which&&81!==a.which||this.close()},close:function(a){this.unbindEvents_();this.$overlay_.hide();$(document).trigger("close.facebox");
this.trigger(fourSq.views.PhotoRanker.Events.CLOSE);this.hasRankedPhotos&&fourSq.ui.Notifier.getInstance().info(templates.fourSq.photos.photoRankerConfirmation())}},{Events:{SHOW:"show",CLOSE:"close"}});fourSq.views.TraceView=function(a,b){};
fourSq.views.TraceView=fourSq.ui.View.extend({initialize:function(){var a=$(templates.fourSq.debug.traceNode({env:fourSq.config.env}));$(document.body).append(a);this.countNode_=a.find(".count");this.traceHolder_=a.find("#trace");a.find("#traceTrigger").click(function(){a.hasClass("off")?a.addClass("on").removeClass("off"):a.addClass("off").removeClass("on")});fourSq.debug.Tracer.getInstance().on("add",fourSq.bind(this.onNewTraceItems_,this))},onNewTraceItems_:function(a){if("noop"!==a.name){var b=
fourSq.views.TraceView.createTracewebLink(a);this.traceHolder_.append(b);b=parseInt(this.countNode_.text(),10);this.countNode_.text(b+a.traces.length)}}});fourSq.views.TraceView.leastCommonStackElement=function(a,b){for(var c=a.length-1,d=b.length-1;0<c&&0<d&&a[c]===b[d];)c-=1,d-=1;return c<a.length-1&&d<b.length-1&&a[c]!=b[d]?[a[c],b[d]]:null};fourSq.views.TraceView.createTracewebLink=function(a){return $(templates.fourSq.debug.traceLink({traceId:a}))};
fourSq.views.TraceView.createContentsNode=function(a){for(var b={},c={},d=0;d<a.traces.length;d++){var e=a.traces[d];e.prevOffset=e.startTime-(c[e.threadId]||e.startTime);if(fourSq.isDefinedAndNotNull(e.endTime)&&(c[e.threadId]=e.endTime,e.backtrace)){var f=b[e.threadId];f&&(e.stackGap=fourSq.views.TraceView.leastCommonStackElement(f,e.backtrace));b[e.threadId]=e.backtrace}}var g=$(templates.fourSq.debug.traceItems({trace:a}));g.find(".traceViewToggle").click(function(a){a.preventDefault();a=g.find(".traceList");
var b=g.find(".traceTimeline");a.is(":visible")?(a.hide(),b.show()):(a.show(),b.hide())});var h=g.find(".notRpc").hide();g.find(".toggleNonRpc").click(function(a){a.preventDefault();h.toggle()});g.find(".traceTimeline tr.traceRow").click(function(){$(this).next().toggle()});g.find(".expandTraceAnchor").click(function(a){a.preventDefault();$(this).next().toggle();return!0});g.find(".traceweb-link").each(function(){var a=$(this).attr("href"),b=$(this).data("id").replace(/ObjectId\("|"\)/g,"");$(this).attr("href",
a+b);$(this).show()});a=g.find(".trace-item");_.each(a.get(),function(a){var b=$(a);b.find(".toggler").click(function(){b.hasClass("open")?b.removeClass("open").addClass("closed"):b.removeClass("closed").addClass("open")})});return g};fourSq.ui.NotificationsTray=function(a,b){};
fourSq.ui.NotificationsTray=fourSq.ui.View.extend({initialize:function(){this.opened_=this.isVisible_=!1;this.timestamp_=this.notificationCount_=0;this.setTimestampToNow_();this.newNotifications=[]},decorate:function(){var a=this.$el.hasClass("right");this.countNode_=this.$el.find("#notificationsTrigger");this.triggerNode_=a?this.$el:this.countNode_;this.trayNode_=this.$el.find("#notificationsTray");this.itemsContainer_=this.trayNode_.find("ul");this.triggerNode_.click(fourSq.bind(this.toggleTray_,this));
fourSq.ui.util.addOnOutsideClickCallback(this.triggerNode_,fourSq.bind(this.hideTray_,this),[this.trayNode_]);return this},listenToUpdater:function(a){a.on(fourSq.net.Updater.Events.UPDATED,this.onUpdate_,this)},onUpdate_:function(a){_.each(this.newNotifications,function(a){fourSq.ui.Notifier.getInstance().info({title:a.text,image:fourSq.isDefinedAndNotNull(a.image)?a.image.fullPath:void 0,url:a.target?helpers.activity.targetUrl(a):void 0})});this.newNotifications=[];this.setTimestampToNow_();0<a&&
(this.setNotificationCount(a),this.opened_=!1)},setNotificationCount:function(a){this.notificationCount_=a;this.countNode_.find("span").text(a.toString()).removeClass("none")},getTimestamp:function(){return this.timestamp_},setTimestampToNow_:function(){this.timestamp_=(new Date).getTime()/1E3},toggleTray_:function(){this.isVisible_?this.hideTray_():this.showTray_()},showTray_:function(){this.$el.addClass("show");this.trayNode_.show();this.isVisible_=!0;this.opened_||(this.itemsContainer_.empty(),
this.itemsContainer_.append($(templates.fourSq.ui.notificationstray.loadingNotice())),fourSq.api.services.Updates.notifications(fourSq.bind(this.showNotifications_,this),fourSq.bind(this.showError_,this),{limit:fourSq.ui.NotificationsTray.limit+1}))},hideTray_:function(){this.isVisible_&&(this.trayNode_.hide(),this.$el.removeClass("show"),this.$el.find("li").removeClass("unread_true"),this.countNode_.find("span").text("0").addClass("none"),this.isVisible_=!1)},showError_:function(){this.itemsContainer_.empty();
this.itemsContainer_.append($(templates.fourSq.ui.notificationstray.errorNotice()))},showNotifications_:function(a){this.opened_=!0;var b=_.first(a.items,fourSq.ui.NotificationsTray.limit);a=a.count;this.itemsContainer_.empty();0<a?(_.each(b,function(a){var b=$(templates.fourSq.ui.notificationstray.activityTemplate({activity:a}));b.click(function(b){fourSq.stats.Util.logNotificationClick(a.ids)});this.itemsContainer_.append(b)},this),this.trayNode_.find(".target_none").click(function(a){a.stopPropagation();
a.preventDefault()}),a>fourSq.ui.NotificationsTray.limit&&$("#notificationsSeeAll",this.$el).show()):this.itemsContainer_.append($(templates.fourSq.ui.notificationstray.noNotificationsNotice()));b=parseInt((new Date).getTime()/1E3,10);fourSq.api.services.Updates.markread({highWatermark:b},function(){},function(){fourSq.debug.error("Error setting notifications as read")})}},{limit:5,getInstance:function(){if(1===$("#notifications").length)return fourSq.isUndefinedOrNull(fourSq.ui.NotificationsTray.instance_)&&
(fourSq.ui.NotificationsTray.instance_=(new fourSq.ui.NotificationsTray({el:$("#notifications").get(0)})).decorate()),fourSq.ui.NotificationsTray.instance_}});(function(a){var b=function(a){this.$elem=a;this.isSetup=!1;a.data("noLinebreaks",this)};b.prototype.setup=function(){this.isSetup||(this.$elem.on("keypress.noLinebreaks",function(b){var d=a(b.target).data("noLinebreaks");if(13===b.which)return d.appendTrailingSpace(),b.preventDefault(),!1;d.strip()}),this.$elem.on("paste",function(b){var d=a(b.target).data("noLinebreaks");window.setTimeout(function(){d.strip()},1)}),this.strip(),this.isSetup=!0)};b.prototype.destroy=function(){this.$elem.off("keypress.noLinebreaks");
this.$elem.removeData("noLinebreaks")};b.prototype.strip=function(){var a=this.$elem.val(),a=a.replace(/(\s)?(\n)+(\s)?/g," ");this.$elem.val(a)};b.prototype.appendTrailingSpace=function(){var a=this.$elem.val();a.match(/\s$/)||this.$elem.val(a+" ")};jQuery.fn.noLinebreaks=function(c){c=c||"setup";this.each(function(){var d=a(this),e=d.data("noLinebreaks"),e=e||new b(d);if(!e[c])return this;e[c]()});return this}})(jQuery);fourSq.ui.CountryPicker=function(a,b){fourSq.api.services.Geo.countryCodes(function(c){c=c.items;for(var d=0;d<c.length;d++)a.append($("\x3coption\x3e\x3c/option\x3e").attr("value",c[d].code).text(c[d].country));$(a).find('[value\x3d"'+b+'"]').attr("selected","selected")},function(){})};fourSq.search.HistoryVenueCompleter=function(a){this.venueHistory_=a;this.results=[];this.fetch=function(a,c){this.results=[];if(this.venueHistory_)for(var d=new RegExp($.ui.autocomplete.escapeRegex(a),"i"),e=0,f;f=this.venueHistory_.at(e);e++)d.test(f.name)&&this.results.push(f);c(["  "])};this.header=function(){return 0<this.results.length?templates.fourSq.search.historyVenueCompleterHeader():""};this.render=function(){for(var a=[],c=0;c<Math.min(this.results.length,5);c++){var d=this.results[c],
e=d.location.address;"undefined"==typeof e&&(e="");var f=d.location.crossStreet;f&&(e+=" ("+f+")");a.push({label:"\x3cimg align\x3dleft valign\x3dtop src\x3d"+fourSq.api.models.companion.venue.VenueUtil.primaryCategoryIcon(d)+'\x3e\x3cdiv class\x3d"name"\x3e'+d.name+'\x3c/div\x3e\x3cdiv class\x3d"detail"\x3e'+e+"\x26nbsp;\x3c/div\x3e",item:{url:"/venue/"+d.id,id:d.id}})}return a}};fourSq.search.InlineVenueSearchView=function(a){};
fourSq.search.InlineVenueSearchView=fourSq.ui.View.extend({initialize:function(a){this.notifier_=a.notifier||fourSq.ui.Notifier.getInstance();this.venueHistory_=a.venueHistory;this.inputEl_=a.$input||$(".venue-input",this.el);this.edited_=!1;this.defaultSearchText_=this.inputEl_.val();this.inputEl_.focus(fourSq.bind(this.onFocus_,this));this.inputEl_.blur(fourSq.bind(this.onBlur_,this));this.editLocationClass_=a.editLocationClass||"location-edit";this.viewLocationClass_=a.viewLocationClass||"location-view";
this.editedClass_=a.editedClass||"edited";var b=this;this.whereAtNode_=a.$whereAt||$(".locationer",this.el);this.currentLocationNode_=a.$currentLocation||$(".location-view .location",this.whereAtNode_);this.currentLocationNode_.click(fourSq.bind(this.selectLocationEdit_,this));this.currentLocationInput_=a.$currentLocationInput||$(".location-edit .location",this.whereAtNode_);this.currentLocationInput_.blur(fourSq.bind(this.maybeChangeLocation_,this));this.currentLocationInput_.keypress(function(a){13==
a.which&&b.maybeChangeLocation_()});this.searchLatLng_={lat:this.options.initialLat,lng:this.options.initialLng};(fourSq.isUndefinedOrNull(this.options.initialLat)||fourSq.isUndefinedOrNull(this.options.initialLng))&&this.maybeChangeLocation_();var c=new fourSq.search.HistoryVenueCompleter(this.venueHistory_);a=new fourSq.autocomplete.VenueCompleter(function(){return fourSq.api.models.companion.geo.LatLngUtil.toQueryValue(b.searchLatLng_)},function(a){return 0<$.grep(c.results,function(b){return b.id==
a}).length},templates.fourSq.search.venueCompleterHeader(),this.venueHistory_?5:10);fourSq.autocomplete.applyCompleters(this.inputEl_,[c,a],function(a,c){var f=c.item.id;b.trigger(fourSq.search.InlineVenueSearchView.Events.SEARCH_RESULT_VENUE_LOADING);fourSq.api.services.Venue.find({id:f},function(a){b.trigger(fourSq.search.InlineVenueSearchView.Events.SEARCH_RESULT_VENUE,a);b.inputEl_.val("");b.inputEl_.focus()},function(a,c){b.notifier_.genericServerError();fourSq.debug.error("error adding venue",
[a,c]);b.trigger(fourSq.search.InlineVenueSearchView.Events.SEARCH_RESULT_VENUE_ERROR,[a,c])})},fourSq.bind(this.noVenueResultsText_,this),null,this.inputEl_.parent())},noVenueResultsText_:function(){return $(templates.fourSq.search.noVenueResults({location:this.currentLocationNode_.text()}))[0]},selectLocationEdit_:function(){this.currentLocationInput_.val(this.currentLocationNode_.text());this.$el.addClass(this.editLocationClass_);this.$el.removeClass(this.viewLocationClass_);this.currentLocationInput_.select()},
onFocus_:function(){this.inputEl_.addClass(this.editedClass_);this.edited_||(this.inputEl_.val(""),this.edited_=!0)},onBlur_:function(){this.edited_&&!$.trim(this.inputEl_.val())&&(this.edited_=!1,this.inputEl_.val(this.defaultSearchText_),this.inputEl_.removeClass(this.editedClass_))},maybeChangeLocation_:function(){var a=$.trim(this.currentLocationInput_.val());if(a){this.currentLocationNode_.text(a);this.$el.removeClass(this.editLocationClass_);this.$el.addClass(this.viewLocationClass_);var b=
this,c=function(){b.selectLocationEdit_();b.notifier_.warning(templates.fourSq.search.invalidAddressWarning())};fourSq.api.services.Geo.geocode({query:a},function(a){a&&a.count?(a=fourSq.api.models.companion.geo.GeocodeResponseUtil.bestInterpretation(a),fourSq.debug.debug("moving autocomplete search area",[a]),b.searchLatLng_=a.feature.geometry.center,b.trigger(fourSq.search.InlineVenueSearchView.Events.SEARCH_AREA_CHANGED,b.searchLatLng_,a.geometry&&a.geometry.bounds),b.inputEl_.select()):c()},c)}}},
{Events:{SEARCH_AREA_CHANGED:"search:search-area-changed",SEARCH_RESULT_VENUE:"search:search-result-venue",SEARCH_RESULT_VENUE_LOADING:"search:search-result-venue-loading",SEARCH_RESULT_VENUE_ERROR:"search:search-result-venue-error"}});fourSq.twitter.OAuth=function(a,b){};
fourSq.twitter.OAuth=fourSq.EventTarget.extend({connect:function(){if(!this.connecting_){this.connecting_=!0;this.flowId_=String((new Date).getTime());this.windowName_="fsq_twitter_"+this.flowId_;var a=(fourSq.isDefinedAndNotNull(window.screenX)?window.screenX:window.screenLeft)+($(window).width()-fourSq.twitter.OAuth.POPUP_WIDTH)/2,b=(fourSq.isDefinedAndNotNull(window.screenY)?window.screenY:window.screenTop)+($(window).height()-fourSq.twitter.OAuth.POPUP_HEIGHT)/2;this.window_=window.open(fourSq.twitter.OAuth.URL_STEP1+
"?flowId\x3d"+this.flowId_,this.windowName_,"resizable\x3dyes,scrollbars\x3dyes,width\x3d"+fourSq.twitter.OAuth.POPUP_WIDTH+",height\x3d"+fourSq.twitter.OAuth.POPUP_HEIGHT+",status\x3dyes,left\x3d"+a+",top\x3d"+b+",toolbar\x3dno");if(fourSq.isDefinedAndNotNull(this.window_)){fourSq.twitter.OAuth.FLOWS[this.flowId_]=this;var c=this;this.babysitTimer_=window.setInterval(function(){c.window_.closed&&(c.trigger(fourSq.twitter.OAuth.Events.FAILURE,fourSq.twitter.OAuth.Reasons.POPUP_CLOSED),window.clearInterval(c.babysitTimer_),
delete fourSq.twitter.OAuth.FLOWS[c.flowId_])},1500);this.trigger(fourSq.twitter.OAuth.Events.POPUP_OPEN)}else this.trigger(fourSq.twitter.OAuth.Events.FAILURE,fourSq.twitter.OAuth.Reasons.POPUP_BLOCKED)}},focusWindow:function(){fourSq.isDefinedAndNotNull(this.window_)?this.window_.focus():fourSq.debug.error("Window does not exist?")},complete:function(a,b,c){this.window_.close();window.clearInterval(this.babysitTimer_);delete fourSq.twitter.OAuth.FLOWS[this.flowId_];if(a){try{fourSq.api.models.companion.user.UserUtil.currentUser().contact.twitter=
c||""}catch(d){}this.trigger(fourSq.twitter.OAuth.Events.SUCCESS,c)}else this.trigger(fourSq.twitter.OAuth.Events.FAILURE,fourSq.twitter.OAuth.Reasons.CONNECT_FAILURE,b)}},{FLOWS:{},URL_STEP1:"/__twitterconnectpopup1",POPUP_WIDTH:500,POPUP_HEIGHT:400,Events:{POPUP_OPEN:"popupopen",SUCCESS:"success",FAILURE:"failure"},Reasons:{POPUP_BLOCKED:"popupblocked",POPUP_CLOSED:"popupblocked",CONNECT_FAILURE:"connectfailure"}});
fourSq.twitter.OAuth.oauthComplete=function(a,b,c,d){a=fourSq.twitter.OAuth.FLOWS[a];fourSq.isUndefinedOrNull(a)?(fourSq.debug.error("Unable to find flow: "+a),fourSq.ui.Notifier.getInstance().genericServerError()):a.complete(b,c,d)};fourSq.twitter.TwitterApi={};
fourSq.twitter.getTwitterApi=function(a){window.twttr||(window.twttr=function(a,c,d){var e=a.getElementsByTagName(c)[0],f=window.twttr||{};if(a.getElementById(d))return f;a=a.createElement(c);a.id=d;a.src="https://platform.twitter.com/widgets.js";e.parentNode.insertBefore(a,e);f._e=[];f.ready=function(a){f._e.push(a)};return f}(document,"script","twitter-wjs"));window.twttr.ready(a)};fourSq.google.GoogleOAuthHandler=function(a){};
fourSq.google.GoogleOAuthHandler=fourSq.EventTarget.extend({initialize:function(a){this.clientId_=a.clientId;this.scope_=a.scope;this.initialized_=!1;this.clientLoadedCallbackName_="googleClientCallback_"+ +new Date;window[this.clientLoadedCallbackName_]=fourSq.bind(this.onClientLoad_,this);this.loadGoogleClient_()},connect:function(){var a={client_id:this.clientId_,scope:this.scope_,immediate:!1};gapi&&gapi.auth&&gapi.auth.authorize&&gapi.auth.authorize(a,fourSq.bind(this.onAuthReturn_,this))},isInitialized:function(){return this.initialized_},
loadGoogleClient_:function(){$.getScript("https://plus.google.com/js/client.js?onload\x3d"+this.clientLoadedCallbackName_,function(){fourSq.debug.debug("Loaded Google client script")})},onClientLoad_:function(){gapi.auth.init(fourSq.bind(function(){this.trigger(fourSq.google.GoogleOAuthHandler.Events.INITIALIZED);this.initialized_=!0},this))},onAuthReturn_:function(a){fourSq.isDefinedAndNotNull(a)?a.access_token?this.trigger(fourSq.google.GoogleOAuthHandler.Events.SUCCESS,a):this.trigger(fourSq.google.GoogleOAuthHandler.Events.FAILURE,
a.error):this.trigger(fourSq.google.GoogleOAuthHandler.Events.FAILURE,"Access Denied")}});fourSq.google.GoogleOAuthHandler.Events={SUCCESS:"success",FAILURE:"failure",INITIALIZED:"initialized"};fourSq.google.GoogleOAuthHandler.Scopes={CONTACTS:"https://www.google.com/m8/feeds"};fourSq.views.Page=function(a){};
fourSq.views.Page=fourSq.ui.View.extend({initialize:function(a){a=_.extend({},{idsForLogging:void 0,additionalLoggingDetails:{},el:void 0},a);this.setEl_(a.el||$("body").first());fourSq.config.debugLevel()!=fourSq.debug.Level.OFF&&(fourSq.debug.FloatingDivLogHandler.initDebugNode(),fourSq.debug.addHandler(new fourSq.debug.ConsoleLogHandler(fourSq.config.debugLevel())),fourSq.debug.addHandler(new fourSq.debug.FloatingDivLogHandler(fourSq.config.debugLevel())),fourSq.api.getLogger().addHandler(new fourSq.debug.ConsoleLogHandler(fourSq.config.debugLevel())),fourSq.api.getLogger().addHandler(new fourSq.debug.FloatingDivLogHandler(fourSq.config.debugLevel())));
fourSq.ui.NotificationsTray.getInstance();var b=new fourSq.net.QueryString({query:window.location.search});if(b.containsKey("referralId")){var c=b.get("referralId");if(window.history&&window.history.replaceState){b.remove("referralId");var d=window.location.href.split("?");2==d.length&&(b=b.toDisplayString(),window.history.replaceState({},document.title,d[0]+(b.length?"?"+b:b)))}fourSq.config.api.REFERRAL_ID=c}this.setupRetinaFairy_();fourSq.retina.init();fourSq.pageViewName=this.pageViewName?fourSq.bind(this.pageViewName,
this):function(){return fourSq.stats.action.View.UNKNOWN};fourSq.defaultLoggingIds=a.idsForLogging;fourSq.stats.Util.logPageLoad({ids:a.idsForLogging,additionalLoggingDetails:a.additionalLoggingDetails});fourSq.signup.Logging.maybeSetRefSource();fourSq.signup.Logging.maybeSetLandingPage();this.timeOnPageLogger_=null;this.maybeLogTimeOnPage_();fourSq.postLoginAction.PostLoginActionController.getInstance().runActions()},maybeLogTimeOnPage_:function(){fourSq.config.log.timeOnPage.enabled&&_.contains(fourSq.config.log.timeOnPage.pages,
fourSq.pageViewName())&&(this.timeOnPageLogger_=new fourSq.stats.TimeOnPageLogger)},setupRetinaFairy_:function(){fourSq.retina.isRetina()&&(this.fairy_=new fourSq.ui.RetinaFairy({el:$("body").get(0)}),this.fairy_.resprinkle())}},{classInit:fourSq.classInit,init:function(){var a=arguments;return fourSq.onPageReady(fourSq.bind(function(){fourSq.currentPage=this.classInit.apply(this,a);return fourSq.currentPage},this))}});fourSq.chrome.setupCallbacks_=[];fourSq.chrome.addChromeHook=function(a){fourSq.chrome.setupCallbacks_.push(a)};fourSq.chrome.init=function(a){$("#currentLanguage").click(function(){(new fourSq.ui.LanguageSelectorDialog).render().show()});_.each(fourSq.chrome.setupCallbacks_,function(b){b(a)},this)};fourSq.chrome.getHeader=function(){return $("#desktopHeader")};fourSq.chrome.getHeaderHeight=function(){return fourSq.chrome.getHeader().height()-2};fourSq.chrome.addChromeHook(function(a){(new fourSq.signup.GetTheAppBar).render();_.delay(fourSq.curry(fourSq.signup.init,null,{withSignupModal:!0,modalScreen:a?a.modalScreen:void 0,googleOAuthClientId:a?a.googleOAuthClientId:void 0}),100);var b=fourSq.chrome.getHeader();(function(){var a=b.find(".loggedOutMenu"),c=a.find(".about"),d=a.find(".getTheApp"),a=a.find(".enterprise"),e={section:fourSq.stats.action.Section.HEADER_BAR,component:fourSq.stats.action.Component.LOGGED_OUT_MENU};fourSq.stats.Util.logActionOnLinkClick(c,
function(a){a=_.extend({},e,{element:fourSq.stats.action.Element.ABOUT_LINK});return fourSq.stats.Action.build(fourSq.stats.action.Action.CLICK,a)});fourSq.stats.Util.logActionOnLinkClick(d,function(a){a=_.extend({},e,{element:fourSq.stats.action.Element.GET_APP_LINK});return fourSq.stats.Action.build(fourSq.stats.action.Action.CLICK,a)});fourSq.stats.Util.logActionOnLinkClick(a,function(a){a=_.extend({},e,{element:fourSq.stats.action.Element.FOURSQUARE_FOR_ENTERPRISE_LINK});return fourSq.stats.Action.build(fourSq.stats.action.Action.CLICK,
a)})})();if(0<b.length){var c=b.find(".inputs"),d=b.find("#user");if(0<c.length)var e=(new fourSq.chrome.DesktopHeaderSearch({el:c,bindAutocomplete:fourSq.config.bindAutocomplete})).decorate();(new fourSq.chrome.UserMenu({el:d})).decorate();c=fourSq.stats.Action.build(fourSq.stats.action.Action.IMPRESSION,{section:fourSq.stats.action.Section.HEADER_BAR});d=$("#desktopHeaderBarDrawerContainer");0<d.length?((new fourSq.chrome.HeaderBarWithDrawer({el:d.get(0),searchView:e,config:a.richHeaderBarConfig})).decorate(),
c.details=c.details||{},_.extend(c.details,{hasDrawer:!0})):(c.details=c.details||{},_.extend(c.details,{hasDrawer:!1}));var f=b.find(".productBar");(function(){if(0<f.length){var a=f.find(".foursquare"),b=f.find(".swarm"),c=f.find(".developer"),d=f.find(".enterprise"),e=f.find(".business"),s={section:fourSq.stats.action.Section.PRODUCT_BAR};fourSq.stats.Util.logActionOnLinkClick(a,function(a){a=_.extend({},s,{element:fourSq.stats.action.Element.FOURSQUARE_LINK});return fourSq.stats.Action.build(fourSq.stats.action.Action.CLICK,
a)});fourSq.stats.Util.logActionOnLinkClick(b,function(a){a=_.extend({},s,{element:fourSq.stats.action.Element.SWARM_LINK});return fourSq.stats.Action.build(fourSq.stats.action.Action.CLICK,a)});fourSq.stats.Util.logActionOnLinkClick(c,function(a){a=_.extend({},s,{element:fourSq.stats.action.Element.DEVELOPER_LINK});return fourSq.stats.Action.build(fourSq.stats.action.Action.CLICK,a)});fourSq.stats.Util.logActionOnLinkClick(d,function(a){a=_.extend({},s,{element:fourSq.stats.action.Element.FOURSQUARE_FOR_ENTERPRISE_LINK});
return fourSq.stats.Action.build(fourSq.stats.action.Action.CLICK,a)});fourSq.stats.Util.logActionOnLinkClick(e,function(a){a=_.extend({},s,{element:fourSq.stats.action.Element.SMALL_BUSINESS_LINK});return fourSq.stats.Action.build(fourSq.stats.action.Action.CLICK,a)})}})();a=$(".fsc-recentVenuesMenu");(new fourSq.chrome.RecentVenuesMenu({el:a})).decorate();fourSq.stats.logActions(c)}fourSq.auth.Autologin.maybeFacebookAutologin()});fourSq.chrome.addChromeHook(function(a){try{console&&console.log&&_.defer(function(){console.log("%cStop!","font-size:48px; font-weight: bold; color: red;");console.log("\n%cThe JavaScript console is intended for developers. If someone told you to copy-paste something here to enable special features, it is a scam and will expose your personal information.","font-size:24px;");console.log("\n%cFor more information, see https://support.foursquare.com/hc/en-us/articles/204892504","font-size: 24px;");
console.log("\n\n")})}catch(b){}});fourSq.chrome.DesktopHeaderSearch=function(a){};
fourSq.chrome.DesktopHeaderSearch=fourSq.ui.View.extend({initialize:function(a){this.bindAutocomplete_=a.bindAutocomplete;this.locationInputView_=this.initialLocation_=this.$searchBox_=null},decorate:function(){this.initSearchBox_();this.initialLocation_=this.getLocationVal();this.bindAutocomplete_&&this.doBindAutocomplete_();this.initLogging_();this.initInputSets_();this.initDropdownArrow_();return this},initSearchBox_:function(){this.$searchBox_=this.$el.find("#search input").first();this.$searchBox_.focus(fourSq.curry(this.trigger,
this,fourSq.chrome.DesktopHeaderSearch.Events.SEARCH_BOX_FOCUS))},initDropdownArrow_:function(){var a=this.$el.find(".dropdownArrow");0!==a.length&&(a=(new fourSq.chrome.DropdownArrow({el:a,$input:this.$searchBox_})).decorate(),a.on(fourSq.chrome.DropdownArrow.Events.CLICK,fourSq.bind(function(){this.$searchBox_.focus()},this)),a.on(fourSq.chrome.DropdownArrow.Events.CLEAR,fourSq.bind(function(){this.$searchBox_.val("").change();this.$searchBox_.focus()},this)))},getExploreUrlWithLocation:function(a){a=
fourSq.util.parseParams(a);var b=this.getLocationVal();0<b.length&&(a.near=b);b=this.getCurrentGeoId();fourSq.isDefinedAndNotNull(b)&&(a.nearGeoId=b);return fourSq.util.appendParams("/explore",a)},getLocationVal:function(){var a=this.$el.find("#search input#headerLocationInput");return $.trim(a.val())},doBindAutocomplete_:function(){var a=this.$el.find("#search");this.locationInputView_=(new fourSq.ui.LocationInputView({el:a,enableResetButton:!1,useAutocomplete:!0,ignoreEnter:!0,llHinter:function(){return fourSq.api.models.companion.user.UserUtil.latLng()},
baseActionData:{section:fourSq.stats.action.Section.HEADER_BAR},setLocationCookieOnSelect:!0})).decorate();this.locationInputView_.on(fourSq.ui.LocationInputView.Events.FOCUS,fourSq.curry(this.trigger,this,fourSq.chrome.DesktopHeaderSearch.Events.LOCATION_BOX_FOCUS));this.locationInputView_.on(fourSq.ui.LocationInputView.Events.BLUR,fourSq.curry(this.trigger,this,fourSq.chrome.DesktopHeaderSearch.Events.LOCATION_BOX_BLUR));this.locationInputView_.on(fourSq.ui.LocationInputView.Events.CHANGE,fourSq.curry(this.trigger,
this,fourSq.chrome.DesktopHeaderSearch.Events.LOCATION_BOX_CHANGE));this.locationInputView_.on(fourSq.ui.LocationInputView.Events.SELECT,fourSq.curry(this.trigger,this,fourSq.chrome.DesktopHeaderSearch.Events.LOCATION_BOX_SELECT));this.$el.find("#search .locationReset").hide();var b=fourSq.bind(function(){return 0<fourSq.util.trim(this.locationInputView_.getLocationString()).length},this),c=fourSq.bind(function(){return b()?void 0:fourSq.config.user.USER_LAT+","+fourSq.config.user.USER_LNG},this),
d=fourSq.bind(function(){return b()?this.locationInputView_.getLocationString():void 0},this),c=fourSq.autocomplete.getNewAutocompleteChromeCompleters(c,d,this.$searchBox_);fourSq.config.newAutocompleteWidget?fourSq.newautocomplete.Autocompleter.forSearch(a):fourSq.autocomplete.setupSearchAutocomplete(this.$searchBox_,c,fourSq.bind(function(a,b){fourSq.autocomplete.maybePopulateSearchBox(a,b,this.$searchBox_);fourSq.autocomplete.isExploreQuery(b)?fourSq.util.redirect(this.getExploreUrlWithLocation(b.item.url)):
fourSq.autocomplete.autocompleteSelectCallback(a,b)},this),0,{section:fourSq.stats.action.Section.HEADER_BAR})},initLogging_:function(){this.$el.find(".submitButton").mousedown(fourSq.bind(function(a){var b=fourSq.stats.Action.build(fourSq.stats.action.Action.CLICK,{element:fourSq.stats.action.Element.SUBMIT_BUTTON,section:fourSq.stats.action.Section.HEADER_BAR});fourSq.stats.logActions(b);a.preventDefault()},this));this.$el.find("#search").submit(fourSq.bind(function(a){var b=this.getLocationVal(),
c=this.locationInputView_&&this.getCurrentGeoId(),d=fourSq.util.trim(this.$searchBox_.val()),d=""!==d?d:void 0,e=fourSq.util.appendParams("/explore",{near:b,nearGeoId:c,q:d,mode:d&&fourSq.explore.shared.BaseQueryData.Mode.TYPED}),b=fourSq.stats.Action.build(fourSq.stats.action.Action.SUBMIT,{section:fourSq.stats.action.Section.HEADER_BAR,details:{destination:e,initialLocation:this.initialLocation_,finalLocation:b,searchTerm:d}});this.bindAutocomplete_?fourSq.stats.logActionWithDelay(b,fourSq.bind(function(){fourSq.util.redirect(e)},
this)):fourSq.stats.logActions(b);a.preventDefault()},this))},initInputSets_:function(){(new fourSq.ui.InputSet({el:this.$el.find(".searchInputSet"),inputLoggingElement:fourSq.stats.action.Element.QUERY_INPUT})).decorate();(new fourSq.ui.InputSet({el:this.$el.find(".locationInputSet"),inputLoggingElement:fourSq.stats.action.Element.LOCATION_INPUT})).decorate()},getCurrentGeoId:function(){return this.locationInputView_.getCurrentGeoId()},setCurrentLocation:function(a){this.locationInputView_.setCurrentLocation(a)},
setCurrentLocationByNameAndGeoId:function(a,b){this.locationInputView_.setLocationString(a);this.locationInputView_.setCurrentGeoLongId(b)}},{Events:{SEARCH_BOX_FOCUS:"sfocus",LOCATION_BOX_FOCUS:"LOCATION:FOCUS",LOCATION_BOX_BLUR:"LOCATION:BLUR",LOCATION_BOX_CHANGE:"LOCATION:CHANGE",LOCATION_BOX_SELECT:"LOCATION:SELECT"}});fourSq.chrome.UserMenu=function(a,b){};
fourSq.chrome.UserMenu=fourSq.ui.View.extend({decorate:function(){this.initLogging_();return this},initLogging_:function(){var a=this.$el.find("a:not(.logoutLink)");_.each(a,function(a){var c=$(a);fourSq.stats.Util.logActionOnLinkClick(c,function(){var a=fourSq.stats.action.Section.HEADER_BAR,b=fourSq.stats.action.Component.USER_DROPDOWN,f,g="userProfileLink addTastesLink userHistoryLink userListLink userTodoLink accountSettingsLink logoutLink friendActivityLink superUserToolsLink userPathLink".split(" "),h=
c.attr("class").split(" ");switch(_.find(h,function(a){return _.contains(g,a)})){case "userProfileLink":f=fourSq.stats.action.Element.USER_PROFILE;break;case "addTastesLink":f=fourSq.stats.action.Element.ADD_TASTES_LINK;break;case "userHistoryLink":f=fourSq.stats.action.Element.USER_HISTORY_LINK;break;case "userListLink":f=fourSq.stats.action.Element.USER_LIST_LINK;break;case "userTodoLink":f=fourSq.stats.action.Element.USER_TODOS_LINK;break;case "accountSettingsLink":f=fourSq.stats.action.Element.ACCOUNT_SETTINGS_LINK;
break;case "logoutLink":f=fourSq.stats.action.Element.LOGOUT_LINK;break;case "friendActivityLink":f=fourSq.stats.action.Element.FRIEND_ACTIVITY;break;case "superUserToolsLink":f=fourSq.stats.action.Element.SUPERUSER_ACTION_LINK;break;case "userPathLink":f=fourSq.stats.action.Element.USER_PATH_LINK}a={section:a,component:b};f&&(a.element=f);return fourSq.stats.Action.build(fourSq.stats.action.Action.CLICK,a)})})}});fourSq.chrome.DropdownArrow=function(a){};
fourSq.chrome.DropdownArrow=fourSq.ui.View.extend({initialize:function(a){fourSq.chrome.DropdownArrow.__super__.initialize.call(this,a);this.$input_=a.$input},decorate:function(){this.updateState_();this.$input_.change(fourSq.bind(this.updateState_,this));this.$input_.focus(fourSq.bind(this.updateState_,this));this.$input_.blur(fourSq.bind(this.updateState_,this));this.$input_.keyup(fourSq.bind(this.updateState_,this));this.$el.click(fourSq.bind(function(){this.state_===fourSq.chrome.DropdownArrow.States.NORMAL?
this.trigger(fourSq.chrome.DropdownArrow.Events.CLICK):this.state_===fourSq.chrome.DropdownArrow.States.CLEAR&&this.trigger(fourSq.chrome.DropdownArrow.Events.CLEAR)},this));return this},updateState_:function(){0<this.$input_.val().length?(this.state_=fourSq.chrome.DropdownArrow.States.CLEAR,this.$el.addClass("clear").removeClass("expand")):(this.state_=fourSq.chrome.DropdownArrow.States.NORMAL,this.$el.addClass("expand").removeClass("clear"))}},{States:{NORMAL:"States:NORMAL",CLEAR:"States:CLEAR"},
Events:{CLICK:"Events:CLICK",CLEAR:"Events:CLEAR"}});fourSq.chrome.HeaderBarWithDrawer=function(a){};
fourSq.chrome.HeaderBarWithDrawer=fourSq.ui.View.extend({initialize:function(a){fourSq.chrome.HeaderBarWithDrawer.__super__.initialize.call(this,a);this.searchView_=a.searchView;this.config_=a.config;this.geoId_=this.$inspirationalLocations_=this.$inspirationalLocationsBlock_=this.$nearbyLocations_=this.$nearbyLocationsBlock_=this.$locationPivotDrawer_=this.$queryPivotDrawer_=null;this.queryDrawerIsShown=!0;this.locationDrawerIsShown=!1},decorate:function(){this.$queryPivotDrawer_=this.$el.find(".queryPivotDrawer");
this.$locationPivotDrawer_=this.$el.find(".locationPivotDrawer");this.$nearbyLocationsBlock_=this.$locationPivotDrawer_.find(".nearbyLocationsBlock");this.$nearbyLocations_=this.$nearbyLocationsBlock_.find(".nearbyLocations");this.$recentlyViewedVenuesClickTarget_=this.$el.find(".recentPlacesTarget");this.$inspirationalLocationsBlock_=this.$locationPivotDrawer_.find(".getInspiredBlock");this.$inspirationalLocations_=this.$inspirationalLocationsBlock_.find(".inspirationalLocations");this.searchView_&&
(this.searchView_.on(fourSq.chrome.DesktopHeaderSearch.Events.LOCATION_BOX_FOCUS,fourSq.bind(this.handleLocationFocus_,this)),this.searchView_.on(fourSq.chrome.DesktopHeaderSearch.Events.LOCATION_BOX_BLUR,fourSq.bind(this.handleLocationBlur_,this)),this.searchView_.on(fourSq.chrome.DesktopHeaderSearch.Events.LOCATION_BOX_CHANGE,fourSq.bind(this.handleLocationChange_,this)),this.searchView_.on(fourSq.chrome.DesktopHeaderSearch.Events.LOCATION_BOX_SELECT,fourSq.bind(this.handleLocationChange_,this)));
this.setUpScrollHandler_();this.setUpChicletClickHandlers_();return this},setUpScrollHandler_:function(){$(window).scroll(_.throttle(fourSq.bind(function(a){this.isScrolledToTopOfPage_()&&!this.locationDrawerIsShown&&1>fourSq.ui.dialog.Dialog.NUMBER_OF_DIALOGS?this.showQueryDrawer_():this.hideQueryDrawer_()},this),60,!0))},setUpChicletClickHandlers_:function(){var a=this.$queryPivotDrawer_.find(".chiclet").toArray();_.each(a,function(a,c){var d=$(a),e=d.data("cat"),f=fourSq.stats.Action.build(fourSq.stats.action.Action.CLICK,
{section:fourSq.stats.action.Section.HEADER_BAR,component:fourSq.stats.action.Component.QUERY_DRAWER,element:fourSq.stats.action.Element.CHICLET,componentIndex:c,details:{cat:e}});d.click(fourSq.withoutDefault(function(a){a=this.searchView_&&this.searchView_.getLocationVal();var b=this.searchView_&&this.searchView_.getCurrentGeoId(),c=fourSq.util.appendParams("/explore",{near:a,nearGeoId:b,cat:e,mode:fourSq.explore.shared.BaseQueryData.Mode.CHICLET});fourSq.stats.logActionWithDelay(f,fourSq.bind(function(){fourSq.util.redirect(c)},
this))},this))},this)},handleLocationFocus_:function(){this.showLocationDrawer_();this.hideQueryDrawer_()},handleLocationBlur_:function(){_.delay(fourSq.bind(function(){this.hideLocationDrawer_();this.isScrolledToTopOfPage_()&&this.showQueryDrawer_()},this),100)},handleLocationChange_:function(){this.fetchLocationData_()},showLocationDrawer_:function(){if(!this.config_.disableLocationDrawer){this.$locationPivotDrawer_.addClass(fourSq.chrome.HeaderBarWithDrawer.SHOW_DRAWER_CLASS);if(!this.locationDrawerIsShown){var a=
fourSq.stats.Action.build(fourSq.stats.action.Action.SHOW,{section:fourSq.stats.action.Section.HEADER_BAR,component:fourSq.stats.action.Component.LOCATION_DRAWER});fourSq.stats.logActions(a)}this.locationDrawerIsShown=!0;this.fetchLocationData_()}},hideLocationDrawer_:function(){this.$locationPivotDrawer_.removeClass(fourSq.chrome.HeaderBarWithDrawer.SHOW_DRAWER_CLASS);if(this.locationDrawerIsShown){var a=fourSq.stats.Action.build(fourSq.stats.action.Action.CLOSE,{section:fourSq.stats.action.Section.HEADER_BAR,
component:fourSq.stats.action.Component.LOCATION_DRAWER});fourSq.stats.logActions(a)}this.locationDrawerIsShown=!1},showNearbyLocations_:function(){this.$nearbyLocationsBlock_.addClass(fourSq.chrome.HeaderBarWithDrawer.SHOW_DRAWER_CLASS);var a=fourSq.stats.Action.build(fourSq.stats.action.Action.SHOW,{section:fourSq.stats.action.Section.HEADER_BAR,component:fourSq.stats.action.Component.LOCATION_DRAWER,element:fourSq.stats.action.Element.NEARBY_LOCATION_LINK});fourSq.stats.logActions(a)},hideNearbyLocations_:function(){this.$nearbyLocationsBlock_.removeClass(fourSq.chrome.HeaderBarWithDrawer.SHOW_DRAWER_CLASS);
var a=fourSq.stats.Action.build(fourSq.stats.action.Action.CLOSE,{section:fourSq.stats.action.Section.HEADER_BAR,component:fourSq.stats.action.Component.LOCATION_DRAWER,element:fourSq.stats.action.Element.NEARBY_LOCATION_LINK});fourSq.stats.logActions(a)},showInspirationalLocations_:function(){this.$inspirationalLocationsBlock_.addClass(fourSq.chrome.HeaderBarWithDrawer.SHOW_DRAWER_CLASS);var a=fourSq.stats.Action.build(fourSq.stats.action.Action.SHOW,{section:fourSq.stats.action.Section.HEADER_BAR,
component:fourSq.stats.action.Component.LOCATION_DRAWER,element:fourSq.stats.action.Element.INSPIRATIONAL_LOCATION_LINK});fourSq.stats.logActions(a)},hideInspirationalLocations_:function(){this.$inspirationalLocationsBlock_.removeClass(fourSq.chrome.HeaderBarWithDrawer.SHOW_DRAWER_CLASS);var a=fourSq.stats.Action.build(fourSq.stats.action.Action.CLOSE,{section:fourSq.stats.action.Section.HEADER_BAR,component:fourSq.stats.action.Component.LOCATION_DRAWER,element:fourSq.stats.action.Element.INSPIRATIONAL_LOCATION_LINK});
fourSq.stats.logActions(a)},showQueryDrawer_:function(){if(!this.config_.disableQueryDrawer){this.$queryPivotDrawer_.addClass(fourSq.chrome.HeaderBarWithDrawer.SHOW_DRAWER_CLASS);if(!this.queryDrawerIsShown){var a=fourSq.stats.Action.build(fourSq.stats.action.Action.SHOW,{section:fourSq.stats.action.Section.HEADER_BAR,component:fourSq.stats.action.Component.QUERY_DRAWER});fourSq.stats.logActions(a)}this.queryDrawerIsShown=!0}},hideQueryDrawer_:function(){this.$queryPivotDrawer_.removeClass(fourSq.chrome.HeaderBarWithDrawer.SHOW_DRAWER_CLASS);
if(this.queryDrawerIsShown){var a=fourSq.stats.Action.build(fourSq.stats.action.Action.CLOSE,{section:fourSq.stats.action.Section.HEADER_BAR,component:fourSq.stats.action.Component.QUERY_DRAWER});fourSq.stats.logActions(a)}this.queryDrawerIsShown=!1},isScrolledToTopOfPage_:function(){return $(window).scrollTop()<fourSq.chrome.HeaderBarWithDrawer.SHOW_DRAWER_TOP_PADDING},fetchLocationData_:function(){var a=this.searchView_.getCurrentGeoId();a&&a!=this.geoId_&&(this.fetchNearbyLocations_(a),this.fetchInspirationalLocations_(a))},
fetchNearbyLocations_:function(a){var b=fourSq.bind(function(b){this.geoId_=a;this.updateNearbyLocations_(b.context.relatedNeighborhoods)},this),c=fourSq.bind(function(){this.hideNearbyLocations_();fourSq.debug.error("Failure fetching nearby locations for geoId "+a)},this);fourSq.api.services.Search.locationContext({nearGeoId:a},b,c)},updateNearbyLocations_:function(a){a&&a.length?(this.$nearbyLocations_.empty(),a=_.first(a,fourSq.chrome.HeaderBarWithDrawer.MAX_NEARBY_LOCATIONS_TO_SHOW),_.each(a,
function(a,c){var d=$(templates.fourSq.chrome.nearbyLocation({location:a}));d.click(fourSq.curry(this.handleNearbyLocationClick_,this,a,c));this.$nearbyLocations_.append(d)},this),this.showNearbyLocations_()):this.hideNearbyLocations_()},fetchInspirationalLocations_:function(a){var b=fourSq.bind(function(b){this.geoId_=a;this.updatedInspirationalLocations_(b.locations)},this),c=fourSq.bind(function(){this.hideInspirationalLocations_();fourSq.debug.error("Failure fetching nearby locations for geoId "+
a)},this);fourSq.api.services.Geo.suggestions({nearGeoId:a},b,c)},updatedInspirationalLocations_:function(a){a&&a.length?(this.$inspirationalLocations_.empty(),a=_.first(a,fourSq.chrome.HeaderBarWithDrawer.MAX_INSPIRATIONAL_LOCATIONS_TO_SHOW),_.each(a,function(a,c){var d=$(templates.fourSq.chrome.inspirationalLocation({location:a}));d.click(fourSq.curry(this.handleInspirationalLocationClick_,this,a.name,a.geoId,c));this.$inspirationalLocations_.append(d)},this),this.showInspirationalLocations_()):
this.hideInspirationalLocations_()},handleNearbyLocationClick_:function(a,b){var c={};a&&a.feature&&(a.feature.name&&(c.geoName=a.feature.name),a.feature.id&&(c.geoId=a.feature.id));c=fourSq.stats.Action.build(fourSq.stats.action.Action.CLICK,{section:fourSq.stats.action.Section.HEADER_BAR,component:fourSq.stats.action.Component.LOCATION_DRAWER,element:fourSq.stats.action.Element.NEARBY_LOCATION_LINK,componentIndex:b,details:c});fourSq.stats.logActions(c);this.setCurrentLocation_(a)},handleInspirationalLocationClick_:function(a,
b,c){c=fourSq.stats.Action.build(fourSq.stats.action.Action.CLICK,{section:fourSq.stats.action.Section.HEADER_BAR,component:fourSq.stats.action.Component.LOCATION_DRAWER,element:fourSq.stats.action.Element.INSPIRATIONAL_LOCATION_LINK,componentIndex:c,details:{geoName:a,geoLongId:b}});fourSq.stats.logActions(c);this.setCurrentLocationByNameAndGeoId_(a,b)},setCurrentLocation_:function(a){this.searchView_.setCurrentLocation(a)},setCurrentLocationByNameAndGeoId_:function(a,b){this.searchView_.setCurrentLocationByNameAndGeoId(a,
b)}});fourSq.chrome.HeaderBarWithDrawer.SHOW_DRAWER_TOP_PADDING=10;fourSq.chrome.HeaderBarWithDrawer.MAX_NEARBY_LOCATIONS_TO_SHOW=5;fourSq.chrome.HeaderBarWithDrawer.MAX_INSPIRATIONAL_LOCATIONS_TO_SHOW=5;fourSq.chrome.HeaderBarWithDrawer.SHOW_DRAWER_CLASS="show";fourSq.chrome.RecentVenuesMenu=function(a){};
fourSq.chrome.RecentVenuesMenu=fourSq.ui.View.extend({initialize:function(a){fourSq.chrome.RecentVenuesMenu.__super__.initialize.call(this,a)},decorate:function(){this.$triggerEl_=this.$el.find(".js-recentVenuesMenu-trigger");this.$venuesEl_=this.$el.find(".js-recentVenuesMenu-venues");this.setUpRecentlyViewedVenues_();return this},setUpRecentlyViewedVenues_:function(){var a=fourSq.bind(function(a){this.updateRecentVenues_(a.viewed);this.showRecentVenues_()},this),b=fourSq.bind(function(){this.showRecentVenues_()},
this);this.$triggerEl_.click(fourSq.bind(function(){this.isShown_?this.hideRecentVenues_():fourSq.api.services.Venue.recentInteractions({},a,b)},this))},updateRecentVenues_:function(a){this.$venuesEl_.empty();a=_.first(a,5);_.each(a,fourSq.bind(function(a){this.$venuesEl_.append(templates.fourSq.chrome.recentvenuesmenu.recentVenuesMenuVenue({venue:a}))},this))},showRecentVenues_:function(){this.$venuesEl_.addClass("fsc-recentVenuesMenu-venues--shown");this.$triggerEl_.addClass("fsc-recentVenuesMenu-trigger--hasShownMenu");
this.isShown_=!0},hideRecentVenues_:function(){this.$venuesEl_.removeClass("fsc-recentVenuesMenu-venues--shown");this.$triggerEl_.removeClass("fsc-recentVenuesMenu-trigger--hasShownMenu");this.isShown_=!1}});fourSq.impressions.ContentImpressionLogger=function(a){};
fourSq.impressions.ContentImpressionLogger=fourSq.Class.extend({initialize:function(a){this.contentIdsSeen_={};this.contentIdQueue_=[];this.section_=a.section;a=fourSq.bind(function(){var a=_.map(this.contentIdQueue_,fourSq.bind(function(a){return fourSq.stats.Action.build(fourSq.stats.action.Action.IMPRESSION,{section:this.section_,ids:fourSq.api.models.companion.log.Oids.build(this.assignId_(a[0],a[1]))})},this));this.contentIdQueue_=[];fourSq.stats.logActions.apply(void 0,a)},this);this.submitLog_=
_.debounce(a,500)},assignId_:function(a,b){return"tip"==b?{tipId:a}:"pageUpdate"==b?{updateId:a}:"checkin"==b?{checkinId:a}:"user"==b?{targetUserId:a}:"venue"==b?{venueId:a}:"list"==b?{tipListId:a}:"event"==b?{eventId:a}:"special"==b?{specialId:a}:"photo"==b?{photoId:a}:"promoted"==b?{promotionId:a}:{}},log:function(a,b){this.contentIdsSeen_[a]||(this.contentIdsSeen_[a]=!0,this.contentIdQueue_.push([a,b]),this.submitLog_())}});fourSq.views.TimeInput=function(a){};
fourSq.views.TimeInput=fourSq.ui.View.extend({initialize:function(a){this.myId_=a.inputId||"timeInput";this.onChange_=a.onChange;this.onTouch_=a.onTouch;this.onSelect_=a.onSelect;this.isMilitaryTime=!!a.militaryTime;this.autoToTwelve=!this.isMilitaryTime&&!!a.autoToTwelve;this.touched_=!1;this.tabIndex_=a.tabIndex||0;this.placeholder_=a.placeholder},render:function(){this.setEl_($(templates.fourSq.ui.inputs.timeInput({inputName:this.myId_,tabindex:this.tabIndex_,placeholder:this.placeholder_})));
return this.decorate()},decorate:function(){this.textInput=$("input.timeInput",this.el);this.textInput.blur(fourSq.bind(this.handleBlurSpecials_,this)).keypress(fourSq.bind(this.touch_,this));var a={source:fourSq.bind(this.generatePossibleTimes_,this),minLength:1,appendTo:$("#completions_"+this.textInput.get(0).id,this.el),change:fourSq.bind(function(a,c){var d=[],e=!1;this.autoToTwelve&&(d=fourSq.views.TimeInput.militaryTimeAfterOnePmRegex.exec(this.textInput.val()),fourSq.isDefinedAndNotNull(d)&&
3==d.length&&fourSq.isDefinedAndNotNull(d[1])&&(e=!0));if(e){var f=parseInt(d[1],10),e=0;fourSq.isDefinedAndNotNull(d[2])&&(e=parseInt(d[2],10));d=(f-12).toString();for(e=e.toString();2>e.length;)e+="0";d=d+":"+e+" pm";this.textInput.autocomplete("disable");this.setVal(d);this.textInput.autocomplete("enable")}else d=this.parseAutocompleteValue_(c),""===d&&(e=this.textInput.autocomplete("widget").find(".ui-menu-item").first(),e.length&&(d=e.text())),d.length&&(this.textInput.autocomplete("disable"),
this.setVal(d),this.textInput.autocomplete("enable"));if(fourSq.isDefinedAndNotNull(this.onChange_))this.onChange_()},this)};fourSq.isDefinedAndNotNull(this.onSelect_)&&(a.select=fourSq.bind(function(a,c){if(fourSq.isDefinedAndNotNull(this.onSelect_))this.onSelect_();this.setVal(this.parseAutocompleteValue_(c));if(fourSq.isDefinedAndNotNull(this.onChange_))this.onChange_()},this));this.textInput.autocomplete(a);return this},touched:function(){return this.touched_},currentVal:function(){return this.textInput.val()},
setVal:function(a){this.textInput.val(a).blur()},setDisabled:function(a){a?(this.textInput.val(this.isMilitaryTime?"0:00":"12:00 am").keydown().blur(),this.textInput.attr("disabled","disabled"),this.textInput.addClass("disabled")):(this.textInput.removeAttr("disabled"),this.textInput.removeClass("disabled"))},focus:function(){this.textInput.focus();return this},clear:function(){this.textInput.val("");this.touched_=!1;if(fourSq.isDefinedAndNotNull(this.onChange_))this.onChange_()},minutesSinceMidnight:function(){var a=
this.isMilitaryTime?fourSq.views.TimeInput.militaryTimeRegex.exec(this.textInput.val()):fourSq.views.TimeInput.twelveHrTimeRegex.exec(this.textInput.val());if(fourSq.isDefinedAndNotNull(a)&&3<=a.length){var b=parseInt(a[1],10),c=parseInt(a[2],10);if(!isNaN(b)&&!isNaN(c))return this.isMilitaryTime||(12==b&&(b-=12),"pm"==a[3].toLowerCase()&&(b+=12)),60*b+c}return NaN},validate:function(){return 0>=this.textInput.val().length?!1:this.isMilitaryTime?fourSq.views.TimeInput.militaryTimeRegex.test(this.textInput.val()):
fourSq.views.TimeInput.twelveHrTimeValidator.test(this.textInput.val())},parseAutocompleteValue_:function(a){var b="";a.item&&a.item.value?b=a.item.value:a.item&&(b=a.item.text());return b},touch_:function(){if(!this.touched_&&fourSq.isDefinedAndNotNull(this.onTouch_))this.onTouch_();this.touched_=!0},handleBlurSpecials_:function(){if(!this.isMilitaryTime){var a=fourSq.views.TimeInput.twelveHrTimeRegex.exec($.trim(this.textInput.val()));fourSq.isDefinedAndNotNull(a)&&5==a.length&&!fourSq.isDefinedAndNotNull(a[2])&&
fourSq.isDefinedAndNotNull(a[1])&&fourSq.isDefinedAndNotNull(a[3])&&this.textInput.val(a[1]+":00 "+a[3][0]+"m")}},generatePossibleTimes_:function(a,b){var c=this.isMilitaryTime?fourSq.views.TimeInput.militaryTimeRegex.exec($.trim(a.term)):fourSq.views.TimeInput.twelveHrTimeRegex.exec($.trim(a.term));if(fourSq.isDefinedAndNotNull(c)&&2<c.length&&0<c[0].length){var d,e;if(fourSq.isDefinedAndNotNull(c[1])&&0<c[1].length)if(2>c[0].length)if("0"==c[1]){d=[];for(var f=this.isMilitaryTime?0:1;9>=f;f++)d[d.length]=
"0"+f}else if("1"==c[1]&&this.isMilitaryTime)for(d=[],f=0;9>f;f++)d[d.length]="1"+f;else d="1"!=c[1]||this.isMilitaryTime?"2"==c[1]&&this.isMilitaryTime?["2","20","21","22","23"]:[c[1]]:["1","10","11","12"];else d=[c[1]];else if(d=[],this.isMilitaryTime)for(f=0;24>f;f++)d[d.length]=f+"";else for(f=1;12>=f;f++)d[d.length]=f+"";e=fourSq.isDefinedAndNotNull(c[2])&&0<c[2].length?2==c[2].length?[c[2]]:[c[2]+"0",c[2]+"5"]:["00","30"];var c=this.isMilitaryTime?null:fourSq.isDefinedAndNotNull(c[3])&&0<c[3].length?
"a"==c[3].substring(0,1).toLowerCase()?["am"]:["pm"]:["am","pm"],g=[];if(this.isMilitaryTime||0<c.length)for(f=0;f<d.length;f++)for(var h=0;h<e.length;h++)if(10>=g.length)if(this.isMilitaryTime)g[g.length]=d[f]+":"+e[h];else for(var l=0;l<c.length;l++){var m=d[f]+":"+e[h]+" "+c[l];12==d[f]&&0==e[h]&&(m+="am"==c[l]?" ("+templates.fourSq.ui.inputs.midnight()+")":" ("+templates.fourSq.ui.inputs.noon()+")");g[g.length]=m}b(g)}else b([])}},{twelveHrTimeRegex:/^(1[012]|0?[1-9])?[:.]?([0-5][0-9]?)?[\s]?([ap]m?)?(\s\(.*\))?$/i,
twelveHrTimeValidator:/^(1[012]|0?[1-9])?[:.]?([0-5][0-9]?)?[\s]?([ap]m?)(\s\(.*\))?$/i,militaryTimeRegex:/^([0-1]?[0-9]|2[0-3])?[:.]?([0-5][0-9]?)?$/,militaryTimeAfterOnePmRegex:/^(1[3-9]|2[0-3])?[:.]?([0-5][0-9]?)?$/});fourSq.ui.InputSet=function(a){};fourSq.ui.InputSet=fourSq.ui.View.extend({initialize:function(a){fourSq.ui.InputSet.__super__.initialize.call(this,{})},decorate:function(){var a=this.$el.find("input"),b=this.$el.find(".inputPrefix"),c=this.$el.data("placeholder");a.attr("placeholder",c);a.placeholder();0<b.length&&(b=b.outerWidth(!0)+fourSq.ui.InputSet.BUFFER,c=a.width()-b,a.css({"padding-left":b,width:c}),$(".input-default").css("left",b));return this}},{BUFFER:15});fourSq.ui.AddTipDialog=function(a){};
fourSq.ui.AddTipDialog=fourSq.ui.dialog.Dialog.extend({initialize:function(a){this.venueId_=a.venueId;this.venueName_=a.venueName;this.additionalApiParams_=a.additionalApiParams;this.metrics_=a.metrics;this.onAddCallback_=a.opt_onAddCallback;this.hasCloseButton_=!1;this.node_=$(templates.fourSq.ui.inlineTipAddDialog({venueName:this.venueName_,placeholder:"Example: Order the burger and ask for the secret sauce!"}));this.constructor.__super__.initialize.apply(this,[{contentElement:this.node_,hasCloseButton:this.hasCloseButton_}])},
decorate:function(){this.constructor.__super__.decorate.apply(this,[]);this.$el=$(this.el);this.node_=$(".popover",this.$el);this.button_=$(".submit-button",this.$el);this.tipInput_=$(".tip-input",this.$el);this.errorNode_=$(".errormsg",this.$el);this.countNode_=$(".count",this.$el);this.addLinkButton_=$(".addLink",this.$el);this.tipLinkHolder_=$("#tipLink");this.tipLinkInput_=$("input",this.tipLinkHolder_);var a=this;this.addLinkButton_.tooltip();this.addLinkButton_.click(fourSq.bind(function(){this.tipLinkHolder_.toggle()},
this));this.tipInput_.focus(function(){a.tipInput_.hasClass("edited")||a.tipInput_.val("");a.tipInput_.addClass("edited")});this.tipInput_.noLinebreaks();this.tipInput_.keyup(function(b){b=a.tipInput_.val().length;10>b||200<b?a.button_.addClass("disabledButton"):a.button_.removeClass("disabledButton");0==b?a.countNode_.text(""):a.countNode_.text(200-b)});this.button_.click(fourSq.bind(this.maybeAddTip_,this));this.tipInput_.noLinebreaks();return this},maybeAddTip_:function(){if(this.tipInput_.hasClass("edited")){var a=
$.trim(this.tipInput_.val());if(!(!a||10>a.length||200<a.length)){this.setLoading_(!0);this.button_.addClass("loadingButton");var b=this,c=$.trim(this.tipLinkInput_.val());0<c.length&&(this.additionalApiParams_={url:c});fourSq.api.services.Tip.add(this.venueId_,a,function(a){b.button_.removeClass("loadingButton");b.postAddActions_();b.close()},function(a,c){a&&a.response&&(b.node_.addClass("has-error"),b.errorNode_.show().text(a.response.meta.errorDetail));b.setLoading_(!1)},this.additionalApiParams_,
this.metrics_)}}},setLoading_:function(a){a?(this.$el.addClass("is-loading"),this.tipInput_.attr("disabled","disabled"),this.tipLinkInput_.attr("disabled","disabled"),this.button_.attr("disabled","disabled"),this.button_.addClass("disabledButton")):(this.$el.removeClass("is-loading"),this.tipInput_.removeAttr("disabled"),this.tipLinkInput_.attr("disabled","disabled"),this.button_.removeAttr("disabled"),this.button_.removeClass("disabledButton"))},postAddActions_:function(){if(this.onAddCallback_)this.onAddCallback_()}});
fourSq.ui.InlineTipAddLink=function(a,b,c,d,e){a.click(fourSq.bind(this.onLinkClick_,this));this.dialog_=new fourSq.ui.AddTipDialog({venueId:b,venueName:c,opt_additionalApiParams:e,opt_onAddCallback:d})};fourSq.ui.InlineTipAddLink.prototype.onLinkClick_=function(){this.dialog_.show()};
window.FSQ_initTipAddDialog=function(a,b,c,d,e){var f=$(a),g=$(b);if(!f||0==f.length)throw Error("Invalid selector: "+a);if(!g||0==g.length)throw Error("Invalid selector: "+b);if(!c)throw Error("Missing venue id");if(!d)throw Error("Missing venue name");new fourSq.ui.InlineTipAddLink(g,c,d,function(){f.addClass("tip-added")},e)};fourSq.ui.Flyout=function(a){};
fourSq.ui.Flyout=fourSq.ui.View.extend({flyoutExtraClass:"",originOffset:{top:0,left:0},windowMargin:{horizontal:60,vertical:60},anchorMargin:{horizontal:3,vertical:3},positionClasses_:"hidden lefty righty above below aboveleft belowleft",initialize:function(a){this.$anchor_=$(a.anchor);this.$anchor_.hover(fourSq.curry(this.trigger,this,fourSq.ui.Flyout.Events.HOVER_IN),fourSq.curry(this.trigger,this,fourSq.ui.Flyout.Events.HOVER_OUT));this.$anchor_.on("touchstart",fourSq.curry(this.trigger,this,
fourSq.ui.Flyout.Events.TOUCH_START));fourSq.isDefinedAndNotNull(a.direction)?this.direction=a.direction:fourSq.isUndefinedOrNull(this.direction)&&(this.direction=fourSq.ui.Flyout.Directions.RIGHT);this.forceDirection_=a.forceDirection||!1},getAnchor:function(){return this.$anchor_},beforeOpen:function(){},afterOpen:function(){},getRenderedContentsHtml:function(){throw Error("Implement me please");},render:function(){this.setEl_($(templates.fourSq.ui.flyout.flyOut({extraClasses:this.flyoutExtraClass,
contentsHtml:this.getRenderedContentsHtml()})));this.$el.hover(fourSq.curry(this.trigger,this,fourSq.ui.Flyout.Events.HOVER_IN),fourSq.curry(this.trigger,this,fourSq.ui.Flyout.Events.HOVER_OUT));this.decorate();return this},isOpen:function(){return!!this.open_},open:function(a){!0!==a&&this.open_||(this.rendered_||(this.render(),this.rendered_=!0,$(document.body).append(this.$el)),this.beforeOpen(),this.updatePosition(),this.open_=!0,this.afterOpen())},updatePosition:function(){switch(this.direction){case fourSq.ui.Flyout.Directions.ABOVE:this.openAbove_();
break;case fourSq.ui.Flyout.Directions.RIGHT:this.openRight_();break;case fourSq.ui.Flyout.Directions.BELOW:this.openBelow_();break;case fourSq.ui.Flyout.Directions.LEFT:this.openLeft_();break;case fourSq.ui.Flyout.Directions.ABOVELEFT:this.openAboveLeft_();break;case fourSq.ui.Flyout.Directions.BELOWLEFT:this.openBelowLeft_();break;default:throw Error("Unrecognized position direction given to flyout");}},setVisible_:function(a){this.$el.removeClass(this.positionClasses_);this.$el.addClass(a)},openAbove_:function(){var a=
this.$anchor_.offset();a.top+=this.originOffset.top;a.left+=this.originOffset.left;var b=$(window).scrollTop()+this.windowMargin.vertical,b=a.top-this.$el.outerHeight()-this.anchorMargin.vertical>b,c=a.left,a=b||this.forceDirection_?a.top-this.$el.outerHeight()-this.anchorMargin.vertical:a.top+this.$anchor_.outerHeight()+this.anchorMargin.vertical;this.$el.css({top:a,left:c});this.setVisible_(b||this.forceDirection_?"above":"below")},openRight_:function(){var a=this.$anchor_.offset();a.top+=this.originOffset.top;
a.left+=this.originOffset.left;var b=a.left+this.$anchor_.outerWidth()+this.$el.outerWidth()+this.anchorMargin.horizontal<$(document).width()-this.windowMargin.horizontal,c=b||this.forceDirection_?a.left+this.$anchor_.outerWidth()+this.anchorMargin.horizontal:a.left-this.$el.outerWidth()-this.anchorMargin.horizontal;this.$el.css({top:a.top,left:c});this.setVisible_(b||this.forceDirection_?"righty":"lefty")},openBelow_:function(){var a=this.$anchor_.offset();a.top+=this.originOffset.top;a.left+=this.originOffset.left;
var b=$(window).scrollTop()+$(window).height()-this.windowMargin.vertical,b=a.top+this.$anchor_.outerHeight()+this.$el.outerHeight()+this.anchorMargin.vertical<b,c=a.left,a=b||this.forceDirection_?a.top+this.$anchor_.outerHeight()+this.anchorMargin.vertical:a.top-this.$el.outerHeight()-this.anchorMargin.vertical;this.$el.css({top:a,left:c});this.setVisible_(b||this.forceDirection_?"below":"above")},openLeft_:function(){var a=this.$anchor_.offset();a.top+=this.originOffset.top;a.left+=this.originOffset.left;
var b=a.left-this.$el.outerWidth()-this.anchorMargin.horizontal>this.windowMargin.horizontal,c=b||this.forceDirection_?a.left-this.$el.outerWidth()-this.anchorMargin.horizontal:a.left+this.$anchor_.outerWidth()+this.anchorMargin.horizontal;this.$el.css({top:a.top,left:c});this.setVisible_(b||this.forceDirection_?"lefty":"righty")},openAboveLeft_:function(){var a=this.$anchor_.offset();a.top+=this.originOffset.top;a.left+=this.originOffset.left;var b=$(window).scrollTop()+this.windowMargin.vertical,
b=a.top-this.$el.outerHeight()-this.anchorMargin.vertical>b,c=a.left+this.$anchor_.outerWidth()-this.$el.outerWidth(),a=b||this.forceDirection_?a.top-this.$el.outerHeight()-this.anchorMargin.vertical:a.top+this.$anchor_.outerHeight()+this.anchorMargin.vertical;this.$el.css({top:a,left:c});this.setVisible_(b||this.forceDirection_?"aboveleft":"belowleft")},openBelowLeft_:function(){var a=this.$anchor_.offset();a.top+=this.originOffset.top;a.left+=this.originOffset.left;var b=$(window).scrollTop()+$(window).height()-
this.windowMargin.vertical,b=a.top+this.$anchor_.outerHeight()+this.$el.outerHeight()+this.anchorMargin.vertical<b,c=a.left+this.$anchor_.outerWidth()-this.$el.outerWidth(),a=b||this.forceDirection_?a.top+this.$anchor_.outerHeight()+this.anchorMargin.vertical:a.top-this.$el.outerHeight()-this.anchorMargin.vertical;this.$el.css({top:a,left:c});this.setVisible_(b||this.forceDirection_?"belowleft":"aboveleft")},beforeClose:function(){},afterClose:function(){},close:function(a){if(!0===a||this.open_)this.beforeClose(),
this.$el.addClass("hidden"),this.open_=!1,this.afterClose()}},{Directions:{ABOVE:"up",BELOW:"down",LEFT:"left",RIGHT:"right",ABOVELEFT:"upleft",BELOWLEFT:"downleft"},Events:{HOVER_IN:"hoverin",HOVER_OUT:"hoverout",TOUCH_START:"touchstart"}});fourSq.views.GenericFlyout=function(a){};
fourSq.views.GenericFlyout=fourSq.ui.Flyout.extend({initialize:function(a){fourSq.views.GenericFlyout.__super__.initialize.call(this,a);this.delay=.25;this.isHovered_=!1;this.on(fourSq.ui.Flyout.Events.HOVER_IN,this.handleIn_,this);this.on(fourSq.ui.Flyout.Events.HOVER_OUT,this.handleOut_,this);this.initTouch_()},initTouch_:function(){if(this.isTouch=fourSq.util.devices.isTouchIncludingIPad())this.boundHandleDocTouch_=fourSq.bind(this.handleDocTouch_,this),this.on(fourSq.ui.Flyout.Events.TOUCH_START,
this.handleIn_,this)},afterOpen:function(){if(this.isTouch)$(document).on("touchstart",this.boundHandleDocTouch_)},afterClose:function(){this.isTouch&&$(document).off("touchstart",this.boundHandleDocTouch_)},handleDocTouch_:function(a){var b=$(this.el),c=$(a.target);b.is(c)||c.parents().is(b)||this.handleOut_(a)},handleIn_:function(a){fourSq.debug.debug("hover in");this.isHovered_=!0;setTimeout(fourSq.bind(function(){this.isHovered_&&this.open()},this),1E3*this.delay)},handleOut_:function(a){fourSq.debug.debug("hover out");
this.isHovered_=!1;setTimeout(fourSq.bind(function(){this.isHovered_||this.close()},this),250)}});fourSq.views.FacepileFlyout=function(a){};fourSq.views.FacepileFlyout=fourSq.views.GenericFlyout.extend({initialize:function(a){fourSq.views.FacepileFlyout.__super__.initialize.call(this,a);this.users_=a.users||[]},getRenderedContentsHtml:function(){return templates.fourSq.activities.facepileFlyout({users:this.users_})}});$.fn.hoverPop=function(a){var b={popup:null,offset:{top:0,left:0},zIndex:10};a&&$.extend(b,a);var c=b.popup;return this.each(function(a,e){$(e).hover(function(a){c.is(":hidden")&&(a=$(this).offset(),c.show().css({position:"absolute",zIndex:b.zIndex}).offset({top:a.top+$(this).outerHeight(!0)+b.offset.top,left:a.left+b.offset.left}))},function(a){var b=$(this).offset(),d=$(this).outerWidth(!0),e;(e=c.is(":visible"))&&!(e=a.pageY<b.top)&&(b=b.left,e=a.pageX<b||a.pageX>b+d);e&&c.hide()});c.mouseleave(function(a){var b=
$(this).offset(),c=$(this).outerWidth(!0),d;(d=$(this).is(":visible"))&&!(d=a.pageY>b.top)&&(b=b.left,d=a.pageX<b||a.pageX>b+c);d&&$(this).hide()})})};fourSq.ui.TransientFlyout=function(a,b){};
fourSq.ui.TransientFlyout=fourSq.ui.Flyout.extend({flyoutLifetimeMs:2500,mouseOverPersist:!0,decorate:function(){fourSq.ui.TransientFlyout.__super__.decorate.call(this);var a=this,b=function(){fourSq.isDefinedAndNotNull(a.dismissInterval_)&&(window.clearTimeout(a.dismissInterval_),a.dismissInterval_=window.setTimeout(fourSq.bind(a.closeOnTimeout_,a),a.flyoutLifetimeMs))};this.$el.hover(b);this.$el.click(b);this.$el.scroll(b);this.$el.mousemove(b);this.$el.keypress(b);this.mouseOverPersist&&(this.$el.mouseover(fourSq.bind(function(){this.mouseIsOver_=
!0},this)),this.$el.mouseout(fourSq.bind(function(){this.mouseIsOver_=!1},this)))},open:function(){this.mouseIsOver_=!1;this.initFlyoutTimeout_();fourSq.ui.TransientFlyout.__super__.open.call(this)},close:function(){fourSq.isDefinedAndNotNull(this.dismissInterval_)&&(window.clearInterval(this.dismissInterval_),this.dismissInterval_=null);fourSq.ui.TransientFlyout.__super__.close.call(this)},closeOnTimeout_:function(){this.mouseIsOver_?this.initFlyoutTimeout_():this.close()},initFlyoutTimeout_:function(){fourSq.isDefinedAndNotNull(this.dismissInterval_)&&
(window.clearInterval(this.dismissInterval_),this.dismissInterval_=null);this.dismissInterval_=window.setTimeout(fourSq.bind(this.close,this),this.flyoutLifetimeMs)}});fourSq.ui.PromoFlyout=function(a,b){};fourSq.ui.PromoFlyout=fourSq.ui.TransientFlyout.extend({flyoutExtraClass:"promo"});fourSq.views.TipFlagMenu=function(a){};
fourSq.views.TipFlagMenu=fourSq.ui.TransientFlyout.extend({flyoutExtraClass:"tipFlagMenu",originOffset:{top:-3,left:0},initialize:function(a){fourSq.views.TipFlagMenu.__super__.initialize.call(this,a);this.tipId_=a.tipId},decorate:function(){fourSq.views.TipFlagMenu.__super__.decorate.call(this);this.$el.find(".spam").click(fourSq.curry(this.doFlag_,this,"spam",templates.fourSq.tip.flagSpamSuccess));this.$el.find(".offensive").click(fourSq.curry(this.doFlag_,this,"offensive",templates.fourSq.tip.flagOffensiveSuccess));
this.$el.find(".notRelevant").click(fourSq.curry(this.doFlag_,this,"nolongerrelevant",templates.fourSq.tip.flagNotRelevantSuccess))},afterOpen:function(){this.outsideClickCallbackAdded_||(fourSq.ui.util.addOnOutsideClickCallback(this.$el,fourSq.bind(function(){this.close()},this),[this.getAnchor()]),this.outsideClickCallbackAdded_=!0)},doFlag_:function(a,b){fourSq.api.services.Tip.flag({id:this.tipId_,problem:a},function(){fourSq.ui.Notifier.getInstance().info({title:b()})},function(){fourSq.ui.Notifier.getInstance().error({title:templates.fourSq.tip.errorFlaggingTip()})});
this.close()},getRenderedContentsHtml:function(){return templates.fourSq.tip.flagMenu({})}});fourSq.ui.BeenHereButton=function(a){};
fourSq.ui.BeenHereButton=fourSq.ui.View.extend({initialize:function(a){this.venueWrapper=fourSq.caches.venue.upsert(a.venue.id,a.venue);this.venueWrapper.on("change",this.updateUi_,this);this.editable_=!fourSq.api.models.companion.venue.VenueUtil.hasCheckedInHere(this.venueWrapper.model);fourSq.debug.debug("Been here button on "+this.venueWrapper.model.id+" editable? "+this.editable_);this.hasBeenHere_=fourSq.api.models.companion.venue.VenueUtil.hasBeenHere(this.venueWrapper.model)},render:function(){this.setEl_($(templates.fourSq.ui.beenhere.beenHereButton({been:fourSq.api.models.companion.venue.VenueUtil.hasBeenHere(this.venueWrapper.model)})).eq(0));
this.decorate();return this},decorate:function(){this.setEl_(this.el);this.$el.click(fourSq.bind(this.onClick_,this));this.updateUi_()},updateUi_:function(){fourSq.api.models.companion.venue.VenueUtil.hasBeenHere(this.venueWrapper.model)?(this.$el.addClass("active"),fourSq.api.models.companion.venue.VenueUtil.hasCheckedInHere(this.venueWrapper.model)&&this.$el.addClass("disabledDoubleButton")):this.$el.removeClass("active disabledDoubleButton")},onClick_:function(){var a=fourSq.stats.Action.build(fourSq.stats.action.Action.CLICK,
{element:fourSq.stats.action.Element.BEEN_HERE});fourSq.stats.logActions(a);fourSq.isUndefinedOrNull(fourSq.api.models.companion.user.UserUtil.currentUser())?fourSq.signup.signupDialogFactory({titleText:templates.fourSq.ui.signupmodal.beenHereSignupTitle(),trigger:fourSq.signup.Trigger.BEEN_HERE}).show():this.editable_?(this.$el.addClass("loadingDoubleButton loadingActionButton"),fourSq.api.models.companion.venue.VenueUtil.hasBeenHere(this.venueWrapper.model)?(fourSq.debug.debug("Unmarking done"),
fourSq.api.services.Venue.unmarkdone(this.venueWrapper.model.id,fourSq.curry(this.onBeenHereStateChangeSuccess_,this,!1),fourSq.bind(this.onBeenHereStateChangeFailure_,this))):(fourSq.debug.debug("Marking done"),fourSq.api.services.Venue.markdone(this.venueWrapper.model.id,fourSq.curry(this.onBeenHereStateChangeSuccess_,this,!0),fourSq.bind(this.onBeenHereStateChangeFailure_,this)))):fourSq.ui.Notifier.getInstance().info($(templates.fourSq.lists.listControlCheckinDoneMessage()))},onBeenHereStateChangeSuccess_:function(a){this.hasBeenHere_=
a;this.$el.removeClass("loadingDoubleButton loadingActionButton");this.venueWrapper.mutate(function(b){fourSq.api.models.companion.venue.VenueUtil.markBeenHere(b,a)});this.trigger(fourSq.ui.BeenHereButton.Events.HAS_BEEN_CHANGE,a)},onBeenHereStateChangeFailure_:function(a,b){fourSq.debug.error("Unable to change done state",[a,b])},hasBeenHere:function(){return this.hasBeenHere_}},{Events:{HAS_BEEN_CHANGE:"hasbeenherechanged"}});fourSq.ui.dialog.EditListItemDialog=function(a){};
fourSq.ui.dialog.EditListItemDialog=fourSq.ui.dialog.Dialog.extend({initialize:function(a){this.list_=a.list;this.venue_=a.venue;this.tip_=a.tip;this.metricLogger_=fourSq.stats.log("listphotodialogexpt");this.item_=this.photos_=null;this.shuffleClicks_=0;a=templates.fourSq.lists.editItemContainer({venue:this.venue_,list:this.list_,tip:this.tip_});this.$container_=$(a);this.$friendsPhotos_=this.$container_.find(".friends.photos");this.$communityPhotos_=this.$container_.find(".community.photos");this.$photos_=
this.$friendsPhotos_.add(this.$communityPhotos_);this.$uploadForm_=this.$container_.find(".photoUploadForm");this.$uploadInput_=this.$uploadForm_.find("input");this.$uploadButton_=this.$uploadForm_.find(".upload");this.constructor.__super__.initialize.apply(this,[{contentElement:this.$container_}]);return this},decorate:function(){this.constructor.__super__.decorate.apply(this,[]);this.populateContents_();this.$photos_.on("click",".itemPhoto",fourSq.bind(this.photoClick_,this));this.$uploadInput_.on("change",
fourSq.bind(this.uploadPhoto_,this));this.$uploadButton_.on("click",fourSq.bind(function(a){a.target!==this.$uploadInput_.get(0)&&this.$uploadInput_.click()},this));return this},close:function(){this.metricLogger_.add("shc",this.shuffleClicks_).finish();this.constructor.__super__.close.apply(this,arguments)},maybePhotosLoaded_:function(){if(this.photos_&&this.item_){var a=this.item_.photo&&this.item_.photo.id,b=!1;this.$friendsPhotos_.hide();this.$communityPhotos_.hide();var c=[],d=0,e=0;_.each(this.photos_.groups,
fourSq.bind(function(f){_.each(f.items,fourSq.bind(function(f){"public"===f.visibility&&(f.user&&f.user.relationship&&("self"===f.user.relationship||"friend"==f.user.relationship)?(d++,f=templates.fourSq.lists.editItemDialogPhoto({photo:f,selected:f.id===a}),f=$(f),this.$friendsPhotos_.find(".containerEl").append(f),b=!0):(e++,c.push(f)))},this))},this));this.metricLogger_.add("fpc",d).add("cpc",e);b&&this.$friendsPhotos_.show();0<c.length&&this.setupCommunityPhotos_(c);this.setLoading(!1)}},setupCommunityPhotos_:function(a){if(0!==
a.length){var b=0,c=a.length,d=fourSq.bind(function(){this.$communityPhotos_.find(".itemPhoto").remove();_.each(_.range(3),function(d){3>c&&d>=c||(d=b++%c,d=templates.fourSq.lists.editItemDialogPhoto({photo:a[d],selected:!1}),d=$(d),this.$communityPhotos_.find(".containerEl").append(d))},this)},this);3<a.length?(this.$communityPhotos_.find(".shuffle").click(fourSq.bind(function(){this.shuffleClicks_++;d()},this)),this.metricLogger_.add("shv","y")):(this.$communityPhotos_.find(".shuffle").hide(),this.metricLogger_.add("shv",
"n"));d();this.$communityPhotos_.show()}},populateContents_:function(){this.setLoading(!0);fourSq.api.services.List.detail({id:this.list_.id},fourSq.bind(this.listDetailLoaded_,this),fourSq.bind(this.loadFailed_,this));fourSq.api.services.Venue.photos({id:this.venue_.id},fourSq.bind(this.photosLoaded_,this),fourSq.bind(this.loadFailed_,this))},photosLoaded_:function(a){this.photos_=a;this.maybePhotosLoaded_()},listDetailLoaded_:function(a){this.item_=_.find(a.listItems.items,fourSq.bind(function(a){return this.venue_.id===
a.venue.id},this));this.maybePhotosLoaded_()},loadFailed_:function(){fourSq.ui.Notifier.getInstance().error(templates.fourSq.lists.photosFetchError());this.setLoading(!1)},photoClick_:function(a){a=$(a.target).data("pid")||$(a.target).parents(".itemPhoto").data("pid");this.metricLogger_.add("ps","e");this.updateItemPhoto_(a);this.setLoading(!0)},updateItemPhoto_:function(a){fourSq.api.services.List.updateitem({id:this.list_.id,itemId:this.item_.id,photoId:a},fourSq.bind(this.itemPhotoUpdated_,this),
fourSq.bind(this.itemPhotoUpdateFailed_,this))},itemPhotoUpdated_:function(){fourSq.ui.Notifier.getInstance().info(templates.fourSq.lists.listItemPhotoUpdateSuccess());this.close()},itemPhotoUpdateFailed_:function(){fourSq.ui.Notifier.getInstance().error(templates.fourSq.lists.listItemPhotoUpdateFailure());this.setLoading(!1)},uploadPhoto_:function(){var a=this.$uploadInput_.val();if(fourSq.net.ImageUploader.isValidFilename(a)){var a=this.$uploadForm_,b=this.venue_.id;fourSq.net.ImageUploader.findOrCreateHiddenInput(a,
"venueIdInput","venueId").val(b);fourSq.net.ImageUploader.findOrCreateHiddenInput(a,"oauthInput","oauth_token").val(fourSq.config.api.API_TOKEN);b=new fourSq.net.IframeUploader;b.on("complete",fourSq.bind(function(a){this.metricLogger_.add("ps","u");this.updateItemPhoto_(a.id)},this));b.on("failure",fourSq.bind(function(){fourSq.ui.Notifier.getInstance().error(templates.fourSq.lists.uploadPhotoError());this.setLoading(!1)},this));b.sendForm(a);this.setLoading(!0)}else fourSq.net.ImageUploader.showInvalidFilenameNotifier()}});fourSq.ui.save.CreateListsPromoFlyout=function(a){};
fourSq.ui.save.CreateListsPromoFlyout=fourSq.ui.PromoFlyout.extend({flyoutLifetimeMs:3E3,positioning:{topOffset:-8,leftOffset:0},initialize:function(a){fourSq.ui.save.CreateListsPromoFlyout.__super__.initialize.call(this,a)},getRenderedContentsHtml:function(){return templates.fourSq.ui.save.createListsPromo()},decorate:function(){var a=$(".createListLink",this.$el);if(a&&1===a.length){var b=null,b=fourSq.isDefinedAndNotNull(this.options.tip)?{tipId:this.options.tip.id,referralId:this.options.referralId}:
{venueId:this.options.venue.id,referralId:this.options.referralId};this.createNewListLink_=new fourSq.tiplists.CreateNewListLink({link:a,opt_additionalApiParams:b,opt_listCreateCallback:fourSq.bind(this.onNewListCreated_,this)})}},onNewListCreated_:function(a){this.options.listService.informNewListCreated();fourSq.ui.Notifier.getInstance().info({title:$(templates.fourSq.ui.save.itemAddedToListMessage({listName:a.name,listUrl:a.canonicalPath})),duration:8E3})}});fourSq.ui.save.ListServiceProxy=function(a,b){};
fourSq.ui.save.ListServiceProxy=fourSq.EventTarget.extend({initialize:function(){var a=fourSq.api.models.companion.user.UserUtil.currentUser();fourSq.isDefinedAndNotNull(a)?this.userHasCreatedLists_=0<fourSq.config.user.LIST_COUNT:this.userHasCreatedLists_=!1},userHasCreatedLists:function(){return this.userHasCreatedLists_},informNewListCreated:function(){this.userHasCreatedLists_||(this.userHasCreatedLists_=!0,this.trigger(fourSq.ui.save.ListServiceProxy.Events.USER_LISTS_CHANGE,this.userHasCreatedLists_))},
getUserCreatedLists:function(a,b,c,d){var e=this;(new fourSq.ui.save.ListServiceProxy.ListedFetcher({venue:a,tip:b,callback:function(a,b){var d=0<a.length;e.userHasCreatedLists_!=d&&(e.userHasCreatedLists_=d,e.trigger(fourSq.ui.save.ListServiceProxy.Events.USER_LISTS_CHANGE,e.userHasCreatedLists_));c(a,b)},errback:d})).fetch()},toggleList:function(a,b,c,d,e,f,g,h){fourSq.api.models.companion.user.UserUtil.currentUser(!0);h=e?fourSq.api.services.List.additem:fourSq.api.services.List.deleteitem;d={id:d,
referralId:f};fourSq.isDefinedAndNotNull(b)&&(e||!e&&c)?(fourSq.debug.debug("Using tip for action. enabled?",[e]),d.tipId=b.id):(fourSq.debug.debug("Using venue for action. enabled?",[e]),d.venueId=a.id);h(d,g,function(a,b){fourSq.debug.error("Unable to toggle list",[a,b]);fourSq.ui.Notifier.getInstance().genericServerError()})}},{Events:{USER_LISTS_CHANGE:"userlistschange"}});fourSq.ui.save.ListServiceProxy.ListedFetcher=function(a){};
fourSq.ui.save.ListServiceProxy.ListedFetcher=fourSq.EventTarget.extend({initialize:function(a){this.venue_=a.venue;this.tip_=a.tip;this.callback_=a.callback;this.errback_=a.errback;this.isUsed_=this.isFetching_=!1;this.barrier_=2;this.hasFailure_=!1;this.listsWithItem_=[];this.allCreatedLists_=[]},fetch:function(){if(this.isUsed_)throw Error("Fetcher can only be used once");this.isUsed_=!0;this.startTime_=(new Date).getTime();var a=this;fourSq.api.services.User.lists({group:"created",id:"self",includeTodoList:!0},
function(b){a.allCreatedLists_=b.items;fourSq.debug.debug("Fetched created lists in: "+((new Date).getTime()-a.startTime_));a.maybeFinish_()},function(b,c){fourSq.debug.error("Unable to fetch created lists for user",[b,c]);a.hasFailure_=!0;fourSq.debug.debug("Failed to fetch created lists in: "+((new Date).getTime()-a.startTime_));a.maybeFinish_()});(this.tip_?fourSq.api.services.Tip.listed:fourSq.api.services.Venue.listed)({id:this.tip_?this.tip_.id:this.venue_.id,group:"created"},function(b){a.listsWithItem_=
b.items;fourSq.debug.debug("Fetched item listed in: "+((new Date).getTime()-a.startTime_));a.maybeFinish_()},function(b,c){fourSq.debug.error("Unable to fetch item listed",[b,c]);a.hasFailure_=!0;fourSq.debug.debug("Failed to fetch item listed in: "+((new Date).getTime()-a.startTime_));a.maybeFinish_()})},maybeFinish_:function(){this.barrier_-=1;if(!(0<this.barrier_)){var a=(new Date).getTime()-this.startTime_;fourSq.debug.debug("editable lists fetch finished in: "+a);this.hasFailure_?this.errback_&&
this.errback_():(a=_.map(this.listsWithItem_,function(a){return a.id}),this.callback_(this.allCreatedLists_,a))}}});fourSq.ui.save.ListsMenu=function(a){};
fourSq.ui.save.ListsMenu=fourSq.ui.Flyout.extend({flyoutExtraClass:"listsMenu",initialize:function(a){this.venueWrapper=a.venueWrapper;this.tipWrapper=a.tipWrapper;fourSq.ui.save.ListsMenu.__super__.initialize.call(this,a);this.listService_=a.listService;this.useTipForDelete_=a.useTipForDelete;this.useTipForListed_=a.useTipForListed;this.actionOptions_=a.actionOptions||{section:void 0};this.rendered_=!1;this.referralId_=a.referralId;this.selectListPhoto_=!1},getRenderedContentsHtml:function(){return templates.fourSq.ui.save.listsMenu({})},
decorate:function(){fourSq.ui.save.ListsMenu.__super__.decorate.call(this);this.$myListsContainer_=$(".myListsContainer",this.$el);if(1!=this.$myListsContainer_.length)throw Error("Missing my lists container");var a=$(".createNewSection",this.$el);if(1!=a.length)throw Error("Missing new list button");var b=null,b=fourSq.isDefinedAndNotNull(this.tipWrapper)?{tipId:this.tipWrapper?this.tipWrapper.model.id:void 0,referralId:this.referralId_}:{venueId:this.venueWrapper.model.id,referralId:this.referralId_};
this.createNewListLink_=new fourSq.tiplists.CreateNewListLink({link:a,opt_additionalApiParams:b,opt_listCreateCallback:fourSq.bind(this.onNewListCreated_,this)})},beforeOpen:function(){this.$myListsContainer_.empty();this.$myListsContainer_.removeClass("error");this.$myListsContainer_.addClass("loading")},actionIds_:function(){var a=this.actionOptions_||{},b=fourSq.api.models.companion.log.Oids.build({tipId:this.tipWrapper?this.tipWrapper.id:void 0,venueId:this.venueWrapper.id});return b=fourSq.api.models.companion.log.Oids.merge(b,
a.ids)},afterOpen:function(){this.listService_.getUserCreatedLists(this.venueWrapper.model,this.useTipForListed_&&fourSq.isDefinedAndNotNull(this.tipWrapper)?this.tipWrapper.model:null,fourSq.bind(this.onFetchedUserCreatedLists_,this),fourSq.bind(this.onFetchedUserCreatedListsFailure_,this));var a=this.actionOptions_||{},b=this.actionIds_(),a=fourSq.stats.Action.build(fourSq.stats.action.Action.SHOW,{section:this.actionOptions_.section,component:fourSq.stats.action.Component.SAVE_FLYOUT,componentIndex:a.componentIndex,
ids:b});fourSq.stats.logActions(a);this.outsideClickCallbackAdded_||(fourSq.ui.util.addOnOutsideClickCallback(this.$el,fourSq.bind(function(){this.close()},this),[this.getAnchor()]),this.outsideClickCallbackAdded_=!0)},afterClose:function(){fourSq.ui.save.ListsMenu.__super__.close.apply(this,arguments);var a=this.actionOptions_||{},b=this.actionIds_(),a=fourSq.stats.Action.build(fourSq.stats.action.Action.CLOSE,{section:this.actionOptions_.section,component:fourSq.stats.action.Component.SAVE_FLYOUT,
componentIndex:a.componentIndex,ids:b});fourSq.stats.logActions(a)},onFetchedUserCreatedLists_:function(a,b){var c={};_.each(b,function(a){c[a]=1});this.$myListsContainer_.removeClass("loading");_.each(a,function(a){var b=$(templates.fourSq.ui.save.listMenuItem({name:a.name,isTodo:fourSq.api.models.companion.lists.ListUtil.isTodos(a),selected:fourSq.isDefinedAndNotNull(c[a.id])}));b.click(fourSq.curry(this.toggleList_,this,b,a));this.$myListsContainer_.append(b)},this)},onFetchedUserCreatedListsFailure_:function(){this.$myListsContainer_.removeClass("loading").addClass("error");
this.$myListsContainer_.append(templates.fourSq.ui.save.listsFetchErrorMessage())},updateWrappersFromListItem_:function(a){fourSq.isDefinedAndNotNull(a.tip)&&fourSq.isDefinedAndNotNull(this.tipWrapper)&&a.tip.id===this.tipWrapper.model.id&&this.tipWrapper.set(a.tip);fourSq.isDefinedAndNotNull(a.venue)&&fourSq.isDefinedAndNotNull(this.venueWrapper)&&a.venue.id===this.venueWrapper.model.id&&this.venueWrapper.set(a.venue)},toggleList_:function(a,b){if(!a.hasClass("loading")){a.addClass("loading");var c=
!a.hasClass("selected"),d=fourSq.bind(function(d){a.removeClass("loading");a.toggleClass("selected");_.isArray(d)?_.each(d,this.updateWrappersFromListItem_,this):this.updateWrappersFromListItem_(d);c&&(fourSq.api.models.companion.lists.ListUtil.isTodos(b)?fourSq.ui.Notifier.getInstance().info($(templates.fourSq.ui.save.itemAddedToTodoListMessage())):(fourSq.ui.Notifier.getInstance().info({title:$(templates.fourSq.ui.save.itemAddedToListMessage({listName:b.name,listUrl:b.canonicalPath}))}),this.selectListPhoto_&&
this.editListItem_(a,b)))},this),e=this.actionOptions_||{},f=this.actionIds_(),f=fourSq.api.models.companion.log.Oids.copy(f,{tipListId:fourSq.api.models.companion.lists.ListUtil.isTodos(b)?void 0:b.id}),f=fourSq.api.models.companion.log.Oids.merge(e.ids,f),e=fourSq.stats.Action.build(fourSq.stats.action.Action.CLICK,{element:c?fourSq.stats.action.Element.ADD_TO_LIST:fourSq.stats.action.Element.REMOVE_FROM_LIST,section:this.actionOptions_.section,component:fourSq.stats.action.Component.SAVE_FLYOUT,
componentIndex:e.componentIndex,ids:f});fourSq.stats.logActions(e);e=fourSq.isDefinedAndNotNull(this.tipWrapper)?this.tipWrapper.model:void 0;this.listService_.toggleList(this.venueWrapper.model,e,this.useTipForDelete_,b.id,c,this.referralId_,d,function(){fourSq.ui.Notifier.getInstance().genericServerError()})}},editListItem_:function(a,b){(new fourSq.ui.dialog.EditListItemDialog({list:b,tip:fourSq.isDefinedAndNotNull(this.tipWrapper)?this.tipWrapper.model:void 0,venue:this.venueWrapper.model})).show();
return!1},onNewListCreated_:function(a){fourSq.ui.Notifier.getInstance().info({title:$(templates.fourSq.ui.save.itemAddedToListMessage({listName:a.name,listUrl:a.canonicalPath})),duration:5E3})}});fourSq.ui.save.OneClickSaveButton=function(a){};
fourSq.ui.save.OneClickSaveButton=fourSq.ui.View.extend({initialize:function(a){this.template=a.template||templates.fourSq.ui.save.doubleSaveButton;this.actionOptions_=a.actionOptions||{};this.saveState=a.isSaved||!1;this.fallback=a.loggedOutFallback||fourSq.emptyFunction;this.controller=a.controller;this.controller.on(fourSq.api.controllers.FeedbackController.Events.TODO_SET,this.updateAppearance_,this);this.controller.on(fourSq.api.controllers.FeedbackController.Events.TODO_FAILURE,this.updateAppearance_,
this)},render:function(){this.$el.append($(this.template({})));return this.decorate()},decorate:function(){this.updateAppearance_(this.saveState);this.$el.click(fourSq.withoutPropagationAndDefault(this.handleClick_,this));return this},update:function(a){this.updateAppearance_(fourSq.isDefinedAndNotNull(a)?a:this.saveState)},handleClick_:function(){var a=this.actionOptions_,a=fourSq.stats.Action.build(fourSq.stats.action.Action.CLICK,{element:this.likeState?fourSq.stats.action.Element.REMOVE_FROM_LIST:
fourSq.stats.action.Element.ADD_TO_LIST,section:a.section,component:a.component,componentIndex:a.componentIndex,ids:fourSq.api.models.companion.log.Oids.merge(a.ids,this.controller.loggingId())});fourSq.stats.logActions(a);fourSq.isDefinedAndNotNull(fourSq.api.models.companion.user.UserUtil.currentUser())?(this.controller.setTodoSave(!this.saveState),this.updateAppearance_(!this.saveState)):this.fallback()},updateAppearance_:function(a){this.saveState=a;this.trigger(fourSq.ui.save.OneClickSaveButton.Events.UPDATE,
a);this.$el.toggleClass("active",a)}},{Events:{UPDATE:"update"}});fourSq.ui.save.SaveButton=function(a){};
fourSq.ui.save.SaveButton=fourSq.ui.View.extend({initialize:function(a){this.venueWrapper=fourSq.caches.venue.upsert(a.venue.id,a.venue);this.venueWrapper.on(fourSq.api.caches.CacheEntry.Events.CHANGE,this.updateSaveState_,this);this.actionOptions_=a.actionOptions;this.listService_=a.listService;this.listService_.on(fourSq.ui.save.ListServiceProxy.Events.USER_LISTS_CHANGE,fourSq.bind(this.updateNumUserLists_,this));this.tipWrapper=fourSq.isDefinedAndNotNull(a.tip)?fourSq.caches.tip.upsert(a.tip.id,
a.tip):void 0;if(fourSq.isDefinedAndNotNull(this.tipWrapper))this.tipWrapper.on(fourSq.api.caches.CacheEntry.Events.CHANGE,this.updateSaveState_,this);if((this.savedStateIsOnTip_=a.savedStateIsOnTip||!1)&&!fourSq.isDefinedAndNotNull(this.tipWrapper))throw Error("Tip must be defined to use saved state on tip");this.referralId_=a.referralId;this.autoTodoMode_=!0;this.listsMenu_=null;this.forceSpecificCopy_=a.forceCopy||!1;this.includeSavedCount_=a.includeSavedCount||!1},render:function(){var a=this.getSavedStateFromModel_();
this.setEl_($(templates.fourSq.ui.save.saveButton({saved:a})));this.decorate();return this},decorate:function(){this.updateSaveState_();this.updateNumUserLists_();this.listsMenu_=new fourSq.ui.save.ListsMenu({venueWrapper:this.venueWrapper,tipWrapper:this.tipWrapper,useTipForListed:this.savedStateIsOnTip_,useTipForDelete:this.savedStateIsOnTip_,listService:this.listService_,referralId:this.referralId_,anchor:this.el,actionOptions:{section:this.actionOptions_&&this.actionOptions_.section||void 0,componentIndex:this.actionOptions_&&
this.actionOptions_.componentIndex||0,ids:this.actionOptions_&&this.actionOptions_.ids||void 0}});this.$el.click(fourSq.bind(this.onClick_,this));return this},listsMenu:function(){return this.listsMenu_},getLabel_:function(a){var b=fourSq.isDefinedAndNotNull(this.tipWrapper);if(this.includeSavedCount_&&b)return templates.fourSq.ui.save.saveButtonCopyWithCount({savedCount:this.tipWrapper.model.saves.count});b=this.forceSpecificCopy_?{forTip:b,forVenue:!b,saved:a}:{saved:a};return a?templates.fourSq.ui.save.savedButtonCopy(b):
templates.fourSq.ui.save.unsavedButtonCopy(b)},getSavedStateFromModel_:function(){return this.savedStateIsOnTip_?fourSq.api.models.companion.tip.TipUtil.isSaved(this.tipWrapper.model):fourSq.api.models.companion.venue.VenueUtil.isSaved(this.venueWrapper.model)},updateSaveState_:function(){var a=this.getSavedStateFromModel_();a?this.$el.removeClass("inactive").addClass("active"):this.$el.removeClass("active").addClass("inactive");$(".label",this.el).text(this.getLabel_(a))},updateNumUserLists_:function(){this.autoTodoMode_=
!this.listService_.userHasCreatedLists()},onClick_:function(a){a.stopPropagation();a.preventDefault();a=this.actionOptions_||{};var b=fourSq.api.models.companion.log.Oids.build({tipId:this.tipWrapper?this.tipWrapper.id:void 0,venueId:this.venueWrapper.id}),b=fourSq.api.models.companion.log.Oids.merge(b,a.ids);a=fourSq.stats.Action.build(fourSq.stats.action.Action.CLICK,{element:fourSq.stats.action.Element.SAVE,section:a.section,component:a.component,componentIndex:a.componentIndex,ids:b});fourSq.stats.logActions(a);
fourSq.isUndefinedOrNull(fourSq.api.models.companion.user.UserUtil.currentUser())?fourSq.signup.signupDialogFactory({titleText:templates.fourSq.ui.signupmodal.saveToListSignupTitle(),bodyText:templates.fourSq.ui.signupmodal.savePlaceOrTipSignupBody(),trigger:this.tipWrapper?fourSq.signup.Trigger.SAVE_TIP:fourSq.signup.Trigger.SAVE_VENUE}).show():this.autoTodoMode_?this.toggleTodoState_():this.listsMenu_.open()},updateWrappersFromListItem_:function(a){fourSq.isDefinedAndNotNull(a.tip)&&fourSq.isDefinedAndNotNull(this.tipWrapper)&&
a.tip.id===this.tipWrapper.model.id&&this.tipWrapper.set(a.tip);fourSq.isDefinedAndNotNull(a.venue)&&fourSq.isDefinedAndNotNull(this.venueWrapper)&&a.venue.id===this.venueWrapper.model.id&&this.venueWrapper.set(a.venue)},handleTodoToggleSuccess_:function(a,b){this.$el.removeClass("loadingDoubleButton");_.isArray(b)?_.each(b,this.updateWrappersFromListItem_,this):this.updateWrappersFromListItem_(b);a&&(fourSq.ui.Notifier.getInstance().info({title:$(templates.fourSq.ui.save.itemAddedToTodoListMessage())}),
this.showCreateListsPromo_())},toggleTodoState_:function(){var a=fourSq.api.models.companion.user.UserUtil.currentUser(!0).id+"/todos",b=!this.getSavedStateFromModel_(),c=fourSq.bind(function(){this.$el.removeClass("loadingDoubleButton");fourSq.ui.Notifier.getInstance().genericServerError()},this);this.$el.addClass("loadingDoubleButton");this.listService_.toggleList(this.venueWrapper.model,fourSq.isDefinedAndNotNull(this.tipWrapper)?this.tipWrapper.model:null,this.savedStateIsOnTip_,a,b,this.referralId_,
fourSq.curry(this.handleTodoToggleSuccess_,this,b),c)},showCreateListsPromo_:function(){(new fourSq.ui.save.CreateListsPromoFlyout({venue:this.venueWrapper.model,tip:fourSq.isDefinedAndNotNull(this.tipWrapper)?this.tipWrapper.model:null,listService:this.listService_,referralId:this.referralId_,anchor:this.$el})).open()}});fourSq.ui.save.TipFeedbackControllerCache=function(a,b){};
fourSq.ui.save.TipFeedbackControllerCache=fourSq.api.caches.Cache.extend({initialize:function(){this.cache_={}},getOrCreate:function(a){var b=this.get(a);if(b)return b;b=new fourSq.api.controllers.TipFeedbackController(a);this.set(a,b);return b},get:function(a){a=this.cache_[a];return fourSq.isDefinedAndNotNull(a)?a:void 0},inCache:function(a){return this.cache_[a]?!0:!1},prime:function(a,b){this.inCache(a)||this.set(a,b)},set:function(a,b){this.cache_[a]=b}});fourSq.ui.list.FollowButton=function(a){};
fourSq.ui.list.FollowButton=fourSq.ui.View.extend({initialize:function(a){fourSq.ui.list.FollowButton.__super__.initialize.call(this,a);this.tipList_=a.tipList;fourSq.api.models.companion.user.UserUtil.isLoggedIn()?this.setupFollowButton_():this.setupFollowButtonLoggedOut_()},decorateFollowButton_:function(a){a?(a=helpers.list.followingCopy({}),this.$el.text(a).addClass("greenButton").removeClass("greyButton")):(a=helpers.list.notFollowingCopy({}),this.$el.text(a).addClass("greyButton").removeClass("greenButton"))},setupFollowButton_:function(){this.decorateFollowButton_(this.tipList_.following);
this.$el.click(fourSq.bind(function(a){this.tipList_.following?fourSq.api.services.List.unfollow({id:this.tipList_.id},fourSq.bind(function(a){this.tipList_.following=!1;this.decorateFollowButton_(this.tipList_.following)},this),fourSq.emptyFunction):fourSq.api.services.List.follow({id:this.tipList_.id},fourSq.bind(function(a){this.tipList_.following=!0;this.decorateFollowButton_(this.tipList_.following)},this),fourSq.emptyFunction);a.preventDefault()},this))},setupFollowButtonLoggedOut_:function(){this.$el.click(fourSq.bind(function(){fourSq.signup.signupDialogFactory({titleText:templates.fourSq.ui.signupmodal.followListSignupTitle(),
bodyText:templates.fourSq.ui.signupmodal.saveListSignupBody(),continueTo:window.location.pathname,existingUserContinueTo:window.location.pathname,trigger:fourSq.signup.Trigger.FOLLOW_LIST,opacity:.2}).show()},this))}});fourSq.signup.signupDialogFactory=function(a){return new fourSq.signup.StandardSignupDialog(a)};
fourSq.signup.inlineSignupDialogFactory={instance_:null,createAndShow:function(a){null===fourSq.signup.inlineSignupDialogFactory.instance_&&(a=new fourSq.signup.InlineSignupDialog(a),a.on(fourSq.ui.dialog.Dialog.Events.DIALOG_CLOSE,function(){fourSq.signup.inlineSignupDialogFactory.instance_=null}),fourSq.signup.inlineSignupDialogFactory.instance_=a);fourSq.signup.inlineSignupDialogFactory.instance_.show();return fourSq.signup.inlineSignupDialogFactory.instance_}};fourSq.signup.SignupDialog=function(a){};
fourSq.signup.SignupDialog.prototype.show=function(){};fourSq.signup.SignupPrompt=function(a){};
fourSq.signup.SignupPrompt=fourSq.ui.View.extend({initialize:function(a){this.signupModal_=a.signupModal;this.trigger_=fourSq.signup.Trigger.STANDARD_SIGNUP_PROMPT},registerEmailClickHandler:function(a){this.signupModal_&&fourSq.isDefinedAndNotNull(a)?(a.click(fourSq.withoutPropagationAndDefault(this.modalEmailClick_,this)),fourSq.stats.Util.logClickAction(a,{element:fourSq.stats.action.Element.EMAIL_SIGNUP})):(a.click(fourSq.bind(this.linkEmailClick_,this)),fourSq.stats.Util.logActionOnLinkClick(a,
function(){return fourSq.stats.Action.build(fourSq.stats.action.Action.CLICK,{element:fourSq.stats.action.Element.EMAIL_SIGNUP})}))},linkEmailClick_:function(a){},modalEmailClick_:function(){fourSq.signup.inlineSignupDialogFactory.createAndShow({trigger:this.trigger_})}});
fourSq.signup.signupPromptFactory=function(a){var b;switch($(a.el).data("style")){case "cityPage":b=new fourSq.signup.CityPageSignupPrompt(a);break;case "explore":b=new fourSq.signup.ExploreSignupPrompt(a);break;case "mapPage":b=new fourSq.signup.MapPageSignupPrompt(a);break;case "invite":b=fourSq.signup.InviteSignupPrompt.createWithInvitingUser(a);break;case "homepage":b=new fourSq.signup.NewHomepageSignupPrompt(a);break;case "homepage-banner":b=new fourSq.signup.HomepageSignupBanner(a);break;case "localQueryPage":b=
new fourSq.signup.LocalQueryPageSignupPrompt(a);break;case "manual":break;default:b=new fourSq.signup.StandardSignupPrompt(a)}return b};fourSq.signup.signupButtonFactory=function(a){a=_.extend({},a,{isEU:fourSq.api.models.companion.user.UserUtil.isEU()});return new fourSq.signup.SignupButtonWithMenu(a)};fourSq.auth.Autologin={isEnabled_:!0,disableAutoLogin:function(){fourSq.auth.Autologin.isEnabled_=!1},maybeFacebookAutologin:function(){!window.fourSq.config.enableFacebookAutologin||$.cookie("disableFacebookAutologin")||fourSq.api.models.companion.user.UserUtil.isLoggedIn()?fourSq.facebook.getFacebookApi(function(a){}):fourSq.facebook.getFacebookApi(function(a){a.getLoginStatus(function(b){if(b===fourSq.facebook.FacebookApi.State.CONNECTED&&fourSq.auth.Autologin.isEnabled_){b=location.href.match(/https?:\/\/[^\/]+(.+)/);
var c=encodeURIComponent(b?b[1]:"/");a.loginWithPermissions(void 0,function(){var a=fourSq.stats.Action.build(fourSq.stats.action.Action.AUTOLOGIN);fourSq.stats.logActionWithDelay(a,function(){$.cookie("disableFacebookAutologin","1",{expires:1,path:"/"});fourSq.util.redirect("/facebook-login?continue\x3d"+c)})})}})})}};fourSq.postLoginAction.ActionCompleter=function(a,b){};
fourSq.postLoginAction.ActionCompleter=fourSq.EventTarget.extend({run:function(){},success:function(){fourSq.ui.Notifier.getInstance().info(this.successNotification());this.trigger(fourSq.postLoginAction.ActionCompleter.Events.SUCCESS)},failure:function(){fourSq.ui.Notifier.getInstance().error(this.failureNotification());this.trigger(fourSq.postLoginAction.ActionCompleter.Events.FAILURE)},successNotification:function(){return{title:templates.fourSq.postLoginActions.genericSuccessTitle(),text:templates.fourSq.postLoginActions.genericSuccessMessage()}},
failureNotification:function(){return{title:templates.fourSq.postLoginActions.genericFailureTitle(),text:templates.fourSq.postLoginActions.genericFailureMessage()}}});fourSq.postLoginAction.ActionCompleter.Events={SUCCESS:"SUCCESS",FAILURE:"FAILURE"};fourSq.postLoginAction.AddFriend=function(a){};
fourSq.postLoginAction.AddFriend=fourSq.postLoginAction.ActionCompleter.extend({initialize:function(a){fourSq.postLoginAction.AddFriend.__super__.initialize.call(this,a);this.id_=a.id},run:function(){fourSq.api.services.User.request({id:this.id_},fourSq.bind(this.success,this),fourSq.bind(this.failure,this))},successNotification:function(){return{title:templates.fourSq.postLoginActions.addFriendSuccessTitle(),text:templates.fourSq.postLoginActions.addFriendSuccessMessage()}},failureNotification:function(){return{title:templates.fourSq.postLoginActions.addFriendFailureTitle(),
text:templates.fourSq.postLoginActions.addFriendFailureMessage()}}},{KEY:"AddFriend"});fourSq.postLoginAction.AddFriend.buildAction=function(a){return{type:fourSq.postLoginAction.AddFriend.KEY,data:{id:a}}};fourSq.postLoginAction.DislikeVenue=function(a){};
fourSq.postLoginAction.DislikeVenue=fourSq.postLoginAction.ActionCompleter.extend({initialize:function(a){fourSq.postLoginAction.DislikeVenue.__super__.initialize.call(this,a);this.id_=a.id},run:function(){fourSq.api.services.Venue.dislike(this.id_,!0,fourSq.bind(this.success,this),fourSq.bind(this.failure,this))},successNotification:function(){return{title:templates.fourSq.postLoginActions.dislikeVenueSuccessTitle(),text:templates.fourSq.postLoginActions.dislikeVenueSuccessMessage()}},failureNotification:function(){return{title:templates.fourSq.postLoginActions.dislikeVenueFailureTitle(),
text:templates.fourSq.postLoginActions.dislikeVenueFailureMessage()}}},{KEY:"DislikeVenue"});fourSq.postLoginAction.DislikeVenue.buildAction=function(a){return{type:fourSq.postLoginAction.DislikeVenue.KEY,data:{id:a}}};fourSq.postLoginAction.OkVenue=function(a){};
fourSq.postLoginAction.OkVenue=fourSq.postLoginAction.ActionCompleter.extend({initialize:function(a){fourSq.postLoginAction.OkVenue.__super__.initialize.call(this,a);this.id_=a.id},run:function(){fourSq.api.services.Venue.ok(this.id_,!0,fourSq.bind(this.success,this),fourSq.bind(this.failure,this))},successNotification:function(){return{title:templates.fourSq.postLoginActions.okVenueSuccessTitle(),text:templates.fourSq.postLoginActions.okVenueSuccessMessage()}},failureNotification:function(){return{title:templates.fourSq.postLoginActions.okVenueFailureTitle(),
text:templates.fourSq.postLoginActions.okVenueFailureMessage()}}},{KEY:"OkVenue"});fourSq.postLoginAction.OkVenue.buildAction=function(a){return{type:fourSq.postLoginAction.OkVenue.KEY,data:{id:a}}};fourSq.postLoginAction.LikePage=function(a){};
fourSq.postLoginAction.LikePage=fourSq.postLoginAction.ActionCompleter.extend({initialize:function(a){fourSq.postLoginAction.LikePage.__super__.initialize.call(this,a);this.id_=a.id},run:function(){fourSq.api.services.User.request({id:this.id_},fourSq.bind(this.success,this),fourSq.bind(this.failure,this))},successNotification:function(){return{title:templates.fourSq.postLoginActions.likePageSuccessTitle(),text:templates.fourSq.postLoginActions.likePageSuccessMessage()}},failureNotification:function(){return{title:templates.fourSq.postLoginActions.likePageFailureTitle(),
text:templates.fourSq.postLoginActions.likePageFailureMessage()}}},{KEY:"LikePage"});fourSq.postLoginAction.LikePage.buildAction=function(a){return{type:fourSq.postLoginAction.LikePage.KEY,data:{id:a}}};fourSq.postLoginAction.LikeTip=function(a){};
fourSq.postLoginAction.LikeTip=fourSq.postLoginAction.ActionCompleter.extend({initialize:function(a){fourSq.postLoginAction.LikeTip.__super__.initialize.call(this,a);this.id_=a.id},run:function(){fourSq.api.services.Tip.like(this.id_,!0,fourSq.bind(this.success,this),fourSq.bind(this.failure,this))},successNotification:function(){return{title:templates.fourSq.postLoginActions.likeTipSuccessTitle(),text:templates.fourSq.postLoginActions.likeTipSuccessMessage()}},failureNotification:function(){return{title:templates.fourSq.postLoginActions.likeTipFailureTitle(),
text:templates.fourSq.postLoginActions.likeTipFailureMessage()}}},{KEY:"LikeTip"});fourSq.postLoginAction.LikeTip.buildAction=function(a){return{type:fourSq.postLoginAction.LikeTip.KEY,data:{id:a}}};fourSq.postLoginAction.UpvoteTip=function(a){};
fourSq.postLoginAction.UpvoteTip=fourSq.postLoginAction.ActionCompleter.extend({initialize:function(a){fourSq.postLoginAction.UpvoteTip.__super__.initialize.call(this,a);this.id_=a.id},run:function(){fourSq.api.services.Tip.vote(this.id_,!0,fourSq.bind(this.success,this),fourSq.bind(this.failure,this))},successNotification:function(){return{title:templates.fourSq.postLoginActions.upvoteTipSuccessTitle(),text:templates.fourSq.postLoginActions.upvoteTipSuccessMessage()}},failureNotification:function(){return{title:templates.fourSq.postLoginActions.upvoteTipFailureTitle(),
text:templates.fourSq.postLoginActions.upvoteTipFailureMessage()}}},{KEY:"UpvoteTip"});fourSq.postLoginAction.UpvoteTip.buildAction=function(a){return{type:fourSq.postLoginAction.UpvoteTip.KEY,data:{id:a}}};fourSq.postLoginAction.DownvoteTip=function(a){};
fourSq.postLoginAction.DownvoteTip=fourSq.postLoginAction.ActionCompleter.extend({initialize:function(a){fourSq.postLoginAction.DownvoteTip.__super__.initialize.call(this,a);this.id_=a.id},run:function(){fourSq.api.services.Tip.vote(this.id_,!1,fourSq.bind(this.success,this),fourSq.bind(this.failure,this))},successNotification:function(){return{title:templates.fourSq.postLoginActions.downvoteTipSuccessTitle(),text:templates.fourSq.postLoginActions.downvoteTipSuccessMessage()}},failureNotification:function(){return{title:templates.fourSq.postLoginActions.downvoteTipFailureTitle(),
text:templates.fourSq.postLoginActions.downvoteTipFailureMessage()}}},{KEY:"DownvoteTip"});fourSq.postLoginAction.DownvoteTip.buildAction=function(a){return{type:fourSq.postLoginAction.DownvoteTip.KEY,data:{id:a}}};fourSq.postLoginAction.LikeVenue=function(a){};
fourSq.postLoginAction.LikeVenue=fourSq.postLoginAction.ActionCompleter.extend({initialize:function(a){fourSq.postLoginAction.LikeVenue.__super__.initialize.call(this,a);this.id_=a.id},run:function(){fourSq.api.services.Venue.like(this.id_,!0,fourSq.bind(this.success,this),fourSq.bind(this.failure,this))},successNotification:function(){return{title:templates.fourSq.postLoginActions.likeVenueSuccessTitle(),text:templates.fourSq.postLoginActions.likeVenueSuccessMessage()}},failureNotification:function(){return{title:templates.fourSq.postLoginActions.likeVenueFailureTitle(),
text:templates.fourSq.postLoginActions.likeVenueFailureMessage()}}},{KEY:"LikeVenue"});fourSq.postLoginAction.LikeVenue.buildAction=function(a){return{type:fourSq.postLoginAction.LikeVenue.KEY,data:{id:a}}};fourSq.postLoginAction.SaveList=function(a){};
fourSq.postLoginAction.SaveList=fourSq.postLoginAction.ActionCompleter.extend({initialize:function(a){fourSq.postLoginAction.SaveList.__super__.initialize.call(this,a);this.id_=a.id},run:function(){fourSq.api.services.List.follow({id:this.id_},fourSq.bind(this.success,this),fourSq.bind(this.failure,this))},successNotification:function(){return{title:templates.fourSq.postLoginActions.saveListSuccessTitle(),text:templates.fourSq.postLoginActions.saveListSuccessMessage()}},failureNotification:function(){return{title:templates.fourSq.postLoginActions.saveListFailureTitle(),
text:templates.fourSq.postLoginActions.saveListFailureMessage()}}},{KEY:"SaveList"});fourSq.postLoginAction.SaveList.buildAction=function(a){return{type:fourSq.postLoginAction.SaveList.KEY,data:{id:a}}};fourSq.postLoginAction.ActionCompleterFactory={buildCompleter:function(a){if(a&&a.type){var b=fourSq.postLoginAction.ActionCompleterFactory.COMPLETERS_[a.type];if(b)return b(a.data);fourSq.debug.error("Could not find completer to match action:",[a])}}};fourSq.postLoginAction.ActionCompleterFactory.COMPLETERS_={};fourSq.postLoginAction.ActionCompleterFactory.COMPLETERS_[fourSq.postLoginAction.AddFriend.KEY]=function(a){return new fourSq.postLoginAction.AddFriend(a)};
fourSq.postLoginAction.ActionCompleterFactory.COMPLETERS_[fourSq.postLoginAction.DislikeVenue.KEY]=function(a){return new fourSq.postLoginAction.DislikeVenue(a)};fourSq.postLoginAction.ActionCompleterFactory.COMPLETERS_[fourSq.postLoginAction.LikePage.KEY]=function(a){return new fourSq.postLoginAction.LikePage(a)};fourSq.postLoginAction.ActionCompleterFactory.COMPLETERS_[fourSq.postLoginAction.LikeTip.KEY]=function(a){return new fourSq.postLoginAction.LikeTip(a)};
fourSq.postLoginAction.ActionCompleterFactory.COMPLETERS_[fourSq.postLoginAction.UpvoteTip.KEY]=function(a){return new fourSq.postLoginAction.UpvoteTip(a)};fourSq.postLoginAction.ActionCompleterFactory.COMPLETERS_[fourSq.postLoginAction.DownvoteTip.KEY]=function(a){return new fourSq.postLoginAction.DownvoteTip(a)};fourSq.postLoginAction.ActionCompleterFactory.COMPLETERS_[fourSq.postLoginAction.LikeVenue.KEY]=function(a){return new fourSq.postLoginAction.LikeVenue(a)};
fourSq.postLoginAction.ActionCompleterFactory.COMPLETERS_[fourSq.postLoginAction.OkVenue.KEY]=function(a){return new fourSq.postLoginAction.OkVenue(a)};fourSq.postLoginAction.ActionCompleterFactory.COMPLETERS_[fourSq.postLoginAction.SaveList.KEY]=function(a){return new fourSq.postLoginAction.SaveList(a)};fourSq.postLoginAction.ActionCompleterLoggingAdapter={actionTypeToElement:function(a){return fourSq.postLoginAction.ActionCompleterLoggingAdapter.Elements_[a]},Elements_:{AddFriend:fourSq.stats.action.Element.ADD_FRIEND,DislikeVenue:fourSq.stats.action.Element.DISLIKE_VENUE,LikePage:fourSq.stats.action.Element.LIKE_PAGE,LikeTip:fourSq.stats.action.Element.LIKE_TIP,UpvoteTip:fourSq.stats.action.Element.UPVOTE_TIP,DownvoteTip:fourSq.stats.action.Element.DOWNVOTE_TIP,LikeVenue:fourSq.stats.action.Element.LIKE_VENUE,
SaveList:fourSq.stats.action.Element.SAVE_LIST}};fourSq.postLoginAction.ActionCompleterLogger=function(a,b){};
fourSq.postLoginAction.ActionCompleterLogger=fourSq.Class.extend({initialize:function(){},logQueue:function(a){a=fourSq.stats.Action.build(fourSq.stats.action.Action.QUEUE,{component:fourSq.stats.action.Component.ACTION_COMPLETER,element:fourSq.postLoginAction.ActionCompleterLoggingAdapter.actionTypeToElement(a)});fourSq.stats.logActions(a)},logRun:function(a){a=fourSq.stats.Action.build(fourSq.stats.action.Action.RUN,{component:fourSq.stats.action.Component.ACTION_COMPLETER,element:fourSq.postLoginAction.ActionCompleterLoggingAdapter.actionTypeToElement(a)});
fourSq.stats.logActions(a)},logSuccess:function(a){a=fourSq.stats.Action.build(fourSq.stats.action.Action.SUCCESS,{component:fourSq.stats.action.Component.ACTION_COMPLETER,element:fourSq.postLoginAction.ActionCompleterLoggingAdapter.actionTypeToElement(a)});fourSq.stats.logActions(a)},logFailure:function(a){a=fourSq.stats.Action.build(fourSq.stats.action.Action.FAILURE,{component:fourSq.stats.action.Component.ACTION_COMPLETER,element:fourSq.postLoginAction.ActionCompleterLoggingAdapter.actionTypeToElement(a)});
fourSq.stats.logActions(a)}});fourSq.postLoginAction.PostLoginActionController=function(a,b){};
fourSq.postLoginAction.PostLoginActionController=fourSq.Class.extend({initialize:function(){this.supportsSessionStorage_=!1;try{this.supportsSessionStorage_="sessionStorage"in window&&null!==window.sessionStorage}catch(a){this.supportsSessionStorage_=!1}this.isLoggedIn_=fourSq.api.models.companion.user.UserUtil.isLoggedIn();this.logger_=new fourSq.postLoginAction.ActionCompleterLogger},addAction:function(a){if(!fourSq.isUndefinedOrNull(a)){var b=this.read_()||[];b.push(a);this.logger_.logQueue(a.type);
this.write_(b)}},runActions:function(){if(this.supportsSessionStorage_&&this.isLoggedIn_){var a=this.read_();_.each(a,function(a){this.processAction_(a)},this);this.clear_()}},processAction_:function(a){if(fourSq.isDefined(a)){var b=fourSq.postLoginAction.ActionCompleterFactory.buildCompleter(a);fourSq.isDefined(b)&&(this.logger_.logRun(a.type),b.on(fourSq.postLoginAction.ActionCompleter.Events.SUCCESS,function(){this.logger_.logSuccess(a.type)},this),b.on(fourSq.postLoginAction.ActionCompleter.Events.FAILURE,
function(){this.logger_.logFailure(a.type)},this),b.run())}},read_:function(){var a=this.readSessionStorage_(),b=$.cookie(fourSq.postLoginAction.PostLoginActionController.COOKIE_KEY_);fourSq.isDefinedAndNotNull(b)&&a.push(JSON.parse(b));return a},readSessionStorage_:function(){if(!this.supportsSessionStorage_)return[];var a=window.sessionStorage.getItem(fourSq.postLoginAction.PostLoginActionController.KEY_);return a?JSON.parse(a):[]},write_:function(a){this.supportsSessionStorage_&&window.sessionStorage.setItem(fourSq.postLoginAction.PostLoginActionController.KEY_,
JSON.stringify(a))},clear_:function(){this.write_([]);$.cookie(fourSq.postLoginAction.PostLoginActionController.COOKIE_KEY_,null)}},{getInstance:function(){fourSq.isUndefinedOrNull(fourSq.postLoginAction.PostLoginActionController.instance_)&&(fourSq.postLoginAction.PostLoginActionController.instance_=new fourSq.postLoginAction.PostLoginActionController);return fourSq.postLoginAction.PostLoginActionController.instance_},KEY_:"postLoginActions",COOKIE_KEY_:"postLoginAction"});fourSq.signup.init=function(a){if(!fourSq.api.models.companion.user.UserUtil.isLoggedIn()){var b,c;a.withSignupModal&&(c=fourSq.signup.getContinueTo(),b=c.continueTo,c=c.existingUserContinueTo);fourSq.signup.setupPrompt(a.withSignupModal);var d=$("#signupButton");d.length&&fourSq.signup.signupButtonFactory({el:d,withSignupModal:a.withSignupModal,continueTo:b,existingUserContinueTo:c}).decorate()}var e;"signup"===a.modalScreen?e=fourSq.signup.InlineSignupDialog.Screens.SIGNUP:"taste"===a.modalScreen?
e=fourSq.signup.InlineSignupDialog.Screens.TASTE:"email"===a.modalScreen?e=fourSq.signup.InlineSignupDialog.Screens.EMAIL_PROMPT:"success"===a.modalScreen?e=fourSq.signup.InlineSignupDialog.Screens.SUCCESS:"signup-prompt"===a.modalScreen&&(e=fourSq.signup.InlineSignupDialog.Screens.SIGNUP_PROMPT);e&&fourSq.signup.inlineSignupDialogFactory.createAndShow({modalScreen:e,trigger:fourSq.signup.Trigger.CONTINUE})};
fourSq.signup.getContinueTo=function(a,b){var c=void 0!==a,d=c?a:window.location.pathname,c=c?b:window.location.search,c=new fourSq.net.QueryString(c?{query:c}:void 0),e=c.toDisplayString(),e=e?d+"?"+e:d;c.set("modalScreen",fourSq.signup.InlineSignupDialog.Screens.TASTE);c.set("hideUnverified","true");return{continueTo:d+"?"+c.toDisplayString(),existingUserContinueTo:e}};
fourSq.signup.setupPrompt=function(a){var b=$("#signupPromptContainer");b.length&&!b.children().length&&(a=fourSq.signup.signupPromptFactory({el:b,signupModal:a}),fourSq.isDefinedAndNotNull(a)&&a.render())};fourSq.signup.sms=_.once(function(){return new fourSq.signup.DisplaySmsAdvisor});fourSq.signup.Logging={maybeSetRefSource:function(){fourSq.util.isExternalReferrer()&&fourSq.util.sessionStorage.set(fourSq.signup.Logging.StorageKeys.REFERRAL_SOURCE,window.document.referrer)},getRefSource:function(){return fourSq.util.sessionStorage.get(fourSq.signup.Logging.StorageKeys.REFERRAL_SOURCE)},maybeSetLandingPage:function(){fourSq.util.isExternalReferrer()&&fourSq.util.sessionStorage.set(fourSq.signup.Logging.StorageKeys.LANDING_PAGE,window.location.href)},getLandingPage:function(){return fourSq.util.sessionStorage.get(fourSq.signup.Logging.StorageKeys.LANDING_PAGE)},
assembleOrigin:function(a,b,c){b=b||[];var d=c?"":"page-"+fourSq.stats.Util.getViewName();a=[a,d].concat(c||!fourSq.config.signup.originContext?[]:fourSq.config.signup.originContext).concat(b);a=_.compact(a).join(",");b=new fourSq.net.QueryString;b.set("origin",a);return b.toDisplayString()},addGlobalOriginContext:function(a){fourSq.isUndefinedOrNull(fourSq.config.signup.originContext)&&(fourSq.config.signup.originContext=[]);fourSq.config.signup.originContext.push(a)},StorageKeys:{REFERRAL_SOURCE:"signup:rs",
LANDING_PAGE:"signup:lp"}};fourSq.signup.StandardSignupButton=function(a,b){};
fourSq.signup.StandardSignupButton=fourSq.ui.View.extend({initialize:function(){this.pageType_=fourSq.stats.Util.getViewName();this.trigger_=fourSq.signup.Trigger.STANDARD_SIGNUP_BUTTON},decorate:function(){var a=this.$el.attr("href"),b=fourSq.signup.Logging.assembleOrigin(this.trigger_),c=0>a.indexOf("?")?"?":"\x26";this.$el.attr("href",a+c+b);fourSq.stats.Util.logActionOnLinkClick(this.$el,function(){return fourSq.stats.Action.build(fourSq.stats.action.Action.CLICK,{element:fourSq.stats.action.Element.SIGNUP})});
return this}});fourSq.signup.SignupButtonWithMenu=function(a){};
fourSq.signup.SignupButtonWithMenu=fourSq.ui.View.extend({initialize:function(a){this.isEU_=a.isEU;this.$emailSignup_=this.$menu_=null;this.menuShown_=!1;this.googlePlusSignupButton_=null;this.trigger_=fourSq.signup.Trigger.STANDARD_SIGNUP_BUTTON;this.continueTo_=a.continueTo;this.existingUserContinueTo_=a.existingUserContinueTo;this.signupModal_=a.withSignupModal},decorate:function(){this.$el.on("click",fourSq.bind(function(a){a.preventDefault();this.toggleMenu_()},this));this.$el.addClass("withMenu");
return this},renderMenu_:function(){var a=fourSq.signup.Logging.assembleOrigin(this.trigger_,["signup-menu-email"],!1),a=templates.fourSq.ui.signupmenu.menu({origin:a,isEU:this.isEU_,signupModal:this.signupModal_});this.$menu_=$(a);this.$el.after(this.$menu_);this.$emailSignup_=this.$menu_.find(".emailSignup");if(this.signupModal_&&fourSq.isDefinedAndNotNull(this.$emailSignup_))this.$emailSignup_.on("click",fourSq.bind(this.signupModalEmailClick_,this));this.googlePlusSignupButton_=new fourSq.signup.GooglePlusSignupButton({el:this.$menu_.find(".googlePlusSignupButton"),
logComponent:fourSq.signup.SignupButtonWithMenu.COMPONENT});this.decorateMenu_()},signupModalEmailClick_:function(){this.hideMenu_();fourSq.signup.inlineSignupDialogFactory.createAndShow({trigger:this.trigger_})},decorateMenu_:function(){var a=fourSq.signup.Logging.assembleOrigin(this.trigger_,["signup-menu-facebook"],!1),b=fourSq.facebook.loginContinueParams(this.continueTo_,!0,this.existingUserContinueTo_),c=this.$menu_.find(".facebookButton");c.click(fourSq.bind(this.hideMenu_,this));fourSq.facebook.initFacebookSignupButton(c,
"?"+_.compact([a,b]).join("\x26"),{component:fourSq.signup.SignupButtonWithMenu.COMPONENT});this.googlePlusSignupButton_.on(fourSq.signup.GooglePlusSignupButton.Events.AUTH_SUCCESS,fourSq.bind(this.googlePlusSigninSuccess_,this));this.googlePlusSignupButton_.decorate();fourSq.isDefinedAndNotNull(this.$emailSignup_)&&(this.signupModal_?fourSq.stats.Util.logClickAction(this.$emailSignup_,{element:fourSq.stats.action.Element.EMAIL_SIGNUP,component:fourSq.signup.SignupButtonWithMenu.COMPONENT}):fourSq.stats.Util.logActionOnLinkClick(this.$emailSignup_,
fourSq.stats.Action.builder(fourSq.stats.action.Action.CLICK,{element:fourSq.stats.action.Element.EMAIL_SIGNUP,component:fourSq.signup.SignupButtonWithMenu.COMPONENT})))},googlePlusSigninSuccess_:function(a){var b=[fourSq.signup.Trigger.STANDARD_SIGNUP_BUTTON,"signup-menu-google-plus",fourSq.stats.Util.getViewName()].join(),c=new fourSq.net.QueryString,d=new fourSq.net.QueryString;d.set("origin",b);c.set("fromGooglePlus","true");fourSq.isDefinedAndNotNull(a.given_name)&&c.set("firstName",a.given_name);
fourSq.isDefinedAndNotNull(a.family_name)&&c.set("lastName",a.family_name);fourSq.isDefinedAndNotNull(a.email)&&c.set("email",a.email);fourSq.isDefinedAndNotNull(a.gender)&&c.set("gender",a.gender);fourSq.util.redirect("/signup/join?"+d.toDisplayString()+"#"+c.toDisplayString())},toggleMenu_:function(){this.menuShown_?this.hideMenu_():this.showMenu_()},showMenu_:function(){fourSq.isUndefinedOrNull(this.$menu_)&&this.renderMenu_();this.$menu_.addClass("active");this.$el.addClass("menuActive");this.menuShown_=
!0;var a=fourSq.stats.Action.build(fourSq.stats.action.Action.SHOW,{component:fourSq.signup.SignupButtonWithMenu.COMPONENT});fourSq.stats.logActions(a)},hideMenu_:function(){if(!fourSq.isUndefinedOrNull(this.$menu_)){this.$menu_.removeClass("active");this.$el.removeClass("menuActive");this.menuShown_=!1;var a=fourSq.stats.Action.build(fourSq.stats.action.Action.CLOSE,{component:fourSq.signup.SignupButtonWithMenu.COMPONENT});fourSq.stats.logActions(a)}}},{COMPONENT:fourSq.stats.action.Component.SIGNUP_MENU});fourSq.signup.StandardSignupDialog=function(a){};
fourSq.signup.StandardSignupDialog=fourSq.ui.dialog.Dialog.extend({initialize:function(a){this.titleText_=a.titleText;this.titleHtml_=a.titleHtml;this.bodyText_=a.bodyText;this.modalClass_=a.modalClass;this.actionKey_=a.actionKey;this.trigger_=a.trigger||fourSq.signup.Trigger.UNKNOWN;this.experiments_=a.experiments||[];this.continueTo_=a.continueTo||window.location.href;this.existingUserContinueTo_=a.existingUserContinueTo||window.location.href;this.logSection_=fourSq.stats.action.Section.SIGNUP_DIALOG;
fourSq.signup.StandardSignupDialog.__super__.initialize.call(this,{className:"largeModal",isModal:!0,opacity:a.opacity,overlayClass:"largeModalOverlay"})},decorate:function(){var a=fourSq.signup.Logging.assembleOrigin(this.trigger_,this.experiments_,!1),b=fourSq.facebook.loginContinueParams(this.continueTo_,!0,this.existingUserContinueTo_);fourSq.facebook.initFacebookSignupButton(this.$el.find(".facebookButton"),"?"+_.compact([a,b]).join("\x26"));fourSq.signup.StandardSignupDialog.__super__.decorate.call(this);
this.$el.find(".loginLink").click(fourSq.bind(this.loginClick_,this));this.$el.find(".emailSignupLink").click(fourSq.withoutPropagationAndDefault(this.modalEmailClick_,this));return this},modalEmailClick_:function(){var a=fourSq.stats.Action.build(fourSq.stats.action.Action.CLICK,{element:fourSq.stats.action.Element.EMAIL_SIGNUP});fourSq.stats.logActions(a);this.close();fourSq.signup.inlineSignupDialogFactory.createAndShow(_.extend({},this.options,{trigger:this.trigger_}))},loginClick_:function(){var a=
fourSq.stats.Action.build(fourSq.stats.action.Action.CLICK,{element:fourSq.stats.action.Element.LOGIN});fourSq.stats.logActionWithDelay(a,fourSq.bind(function(){var a=fourSq.signup.Logging.assembleOrigin(this.trigger_,this.experiments_,!1),c=new fourSq.net.QueryString;c.set("continue",this.continueTo_);fourSq.util.redirect("/login?"+[c.toDisplayString(),a].join("\x26"))},this))},show:function(){var a=fourSq.stats.Util.getViewName();fourSq.stats.log("showSignupPromptModal").add("page",a).add("trigger",
this.trigger_).incr(_.compact(["showSignupPromptModal",a,this.trigger_])).incr(_.compact(["showSignupPromptModal",this.trigger_])).incr(_.compact(["showSignupPromptModal",a])).finish();a=fourSq.stats.Action.build(fourSq.stats.action.Action.SHOW,{section:this.logSection_});fourSq.stats.logActions(a);fourSq.signup.StandardSignupDialog.__super__.show.call(this);return this},close:function(){var a=fourSq.stats.Action.build(fourSq.stats.action.Action.CLOSE,{section:this.logSection_});fourSq.stats.logActions(a);
fourSq.signup.StandardSignupDialog.__super__.close.call(this);return this},renderContent:function(){var a=templates.fourSq.ui.signupmodal.richSignupModal({title:this.titleText_,titleHtml:this.titleHtml_,bodyText:this.bodyText_,actionKey:this.actionKey_,continueTo:this.continueTo_,fbAppId:fourSq.config.fb.APP_ID,origin:fourSq.signup.Logging.assembleOrigin(this.trigger_,this.experiments_).replace("origin\x3d",""),modalClass:this.modalClass_});this.container_.empty().append($(a))}});fourSq.signup.InlineSignupDialog=function(a){};
fourSq.signup.InlineSignupDialog=fourSq.ui.dialog.Dialog.extend({initialize:function(a){this.addedTastes_=[];this.uploadedFile_=null;this.screen_=a.modalScreen||fourSq.signup.InlineSignupDialog.Screens.SIGNUP;this.queryString_=a.params||new fourSq.net.QueryString;this.fbUser_=a.fbUser;this.user_=void 0;this.userHasBeenCreated_=!1;this.trigger_=a.trigger||fourSq.signup.Trigger.UNKNOWN;this.continueTo_=a.continueTo;this.existingUserContinueTo_=a.existingUserContinueTo;this.allowEmailPromptSkip_=!!a.allowEmailPromptSkip;
this.skipTipsGame_=!!a.skipTipsGame;this.logSection_=fourSq.stats.action.Section.LOG_IN;this.logView_=fourSq.stats.action.View.BATMAN_ONBOARDING;this.tasteGameView_=null;this.cameFromFacebook_=fourSq.api.models.companion.user.UserUtil.isLoggedIn();this.fromTastesGame_=!1;a=fourSq.isDefinedAndNotNull(a.hideCloseButton)?!a.hideCloseButton:!0;fourSq.signup.InlineSignupDialog.__super__.initialize.call(this,{className:"largeModal",isModal:!a,allowPageToScroll:!0,hasCloseButton:a})},getFormData_:function(){return{firstName:this.$el.find("#inputFirstName").val().toString()||
void 0,lastName:this.$el.find("#inputLastName").val().toString()||void 0,email:this.$el.find("#inputEmail").val().toString()||void 0,password:this.$el.find("#inputPassword").val().toString()||void 0,birthYear:this.$el.find("#inputBirthYear").val().toString()||void 0,birthMonth:this.$el.find("#inputBirthMonth").val().toString()||void 0,birthDate:this.$el.find("#inputBirthDate").val().toString()||void 0,gender:this.getGender_(this.$el.find(".genderContainer")),landingPage:this.$el.find('input[name\x3d"landingPage"]').val().toString()||
void 0,refSource:this.$el.find('input[name\x3d"refSource"]').val().toString()||void 0,origin:this.$el.find('input[name\x3d"origin"]').val().toString()||void 0,referrer:this.$el.find('input[name\x3d"referrer"]').val().toString()||void 0,fromFacebookAppCenter:this.$el.find('input[name\x3d"fromFacebookAppCenter"]').val().toString()||void 0,recaptchaResponse:this.$el.find('textarea[name\x3d"g-recaptcha-response"]').val()||void 0}},signup_:function(){var a=_.extend(this.getFormData_(),{signupSource:"web-email"});
fourSq.signup.Coppa.isTooYoung({day:a.birthDate,month:a.birthMonth,year:a.birthYear})?(fourSq.stats.logActions(fourSq.stats.Action.build(fourSq.stats.action.Action.REDIRECT,{view:this.logView_,section:this.logSection_,element:fourSq.stats.action.Element.COPPA_TOO_YOUNG})),fourSq.signup.Coppa.setTooYoungAndRedirect()):fourSq.api.services.User.add(a,fourSq.bind(this.handleSignupSuccess_,this),fourSq.bind(this.handleSignupError_,this));return this},getGender_:function(a){if(a.find("#inputFemale").is(":checked:"))return"female";
if(a.find("#inputMale").is(":checked:"))return"male"},handleSignupSuccess_:function(a){var b=a.user;a=a.access_token;this.userHasBeenCreated_=!0;fourSq.config.api.API_TOKEN=a;this.user_=b;$.cookie("oauth_token",a+"-0",{path:"/",expires:180,secure:!0});this.uploadPhoto_();this.skipTipsGame_||(b=_.once(fourSq.bind(this.renderTastesPage_,this)),fourSq.taste.LocalTastePersister.getInstance().maybeSaveToAPI(b,b,!0),_.delay(b,1500))},uploadPhoto_:function(){null!==this.uploadedFile_?(this.$el.find("#hiddenImageHolder").attr("src"),
this.skipTipsGame_?fourSq.api.services.User.setProfilePhoto(this.uploadedFile_,fourSq.bind(this.finish_,this),fourSq.bind(this.finish_,this)):fourSq.api.services.User.setProfilePhoto(this.uploadedFile_)):this.skipTipsGame_&&this.finish_()},handleSignupError_:function(){this.getFormData_();this.setContentTo_(templates.fourSq.signup.page.inlinesignupmodal.inlineSignupModal({isUS:fourSq.api.models.companion.user.UserUtil.isUS(),isEU:fourSq.api.models.companion.user.UserUtil.isEU(),serverError:!0,prefill:this.getFormData_(),
shouldShowCAPTCHA:fourSq.config.user.SHOW_RECAPTCHA,captchaApiKey:fourSq.config.api.RECAPTCHA_SITE_KEY}));this.addSignupPageClickHandlers_(!0)},finish_:function(){this.onClose_();this.refreshPage_();return this},refreshPage_:function(){this.existingUserContinueTo_?fourSq.util.redirect(this.existingUserContinueTo_):this.continueTo_?fourSq.util.redirect(this.continueTo_):(fourSq.net.Util.stripParamsFromQuery(["modalScreen"]),window.location.reload())},onClose_:function(){$.cookie("hideUnverifiedPrompt",
"1",{path:"/"})},setContentTo_:function(a){this.container_.empty().append(a);return this},renderSignupPage_:function(){this.logSection_=fourSq.stats.action.Section.LOG_IN;void 0===window.FileReader?(fourSq.stats.logActions(fourSq.stats.Action.build(fourSq.stats.action.Action.REDIRECT,{view:this.logView_,section:this.logSection_,element:fourSq.stats.action.Element.SIGNUP})),window.location.replace("/signup")):fourSq.signup.Coppa.hasUnderageCookie()?this.setContentTo_(templates.fourSq.signup.page.inlinesignupmodal.tooYoung({})):
(this.setContentTo_(templates.fourSq.signup.page.inlinesignupmodal.inlineSignupModal({isUS:fourSq.api.models.companion.user.UserUtil.isUS(),isEU:fourSq.api.models.companion.user.UserUtil.isEU(),serverError:!1,shouldShowCAPTCHA:fourSq.config.user.SHOW_RECAPTCHA,captchaApiKey:fourSq.config.api.RECAPTCHA_SITE_KEY})),this.logShowSection_(),this.addSignupPageClickHandlers_(!1));return this},renderEmailPromptPage_:function(){this.logSection_=fourSq.stats.action.Section.EMAIL_PROMPT;this.setContentTo_(templates.fourSq.signup.page.inlinesignupmodal.inlineEmailPrompt({name:this.fbUser_&&
this.fbUser_.first_name,allowSkip:this.allowEmailPromptSkip_}));this.logShowSection_();this.addEmailPromptPageClickHandlers_();return this},renderSignupPromptPage_:function(){this.logSection_=fourSq.stats.action.Section.SIGNUP_PROMPT;this.setContentTo_(templates.fourSq.signup.page.inlinesignupmodal.inlineSignupPrompt({isEU:fourSq.api.models.companion.user.UserUtil.isEU()}));this.logShowSection_();this.addSignupPromptPageClickHandlers_();return this},getUser_:function(){return this.user_||fourSq.api.models.companion.user.UserUtil.currentUser()},
getUserName_:function(){var a=this.getUser_();return a&&a.firstName||void 0},renderTastesPage_:function(a){this.fromTastesGame_=0<(a||0);this.logSection_=fourSq.stats.action.Section.TASTES;this.logShowSection_();this.setContentTo_(templates.fourSq.signup.page.inlinesignupmodal.inlineTasteGame({name:this.getUserName_(),savedTastes:a}));this.tasteGameView_=new fourSq.taste.TasteGameView({el:this.$el.find(".tasteGameContainer"),intent:fourSq.api.services.Taste.SuggestionIntent.ONBOARDING,limit:50,uid:this.user_&&
this.user_.id||void 0,view:this.logView_,section:this.logSection_});this.tasteGameView_.render();this.addTastesPageClickHandlers_();return this},renderSuccessPage_:function(){this.setContentTo_(templates.fourSq.signup.page.inlinesignupmodal.inlineSuccessPage({tastes:this.addedTastes_,name:this.getUserName_(),fromTastesGame:this.fromTastesGame_}));this.logSection_=fourSq.stats.action.Section.SIGNUP_MODAL_SUCCESS;this.logShowSection_();fourSq.stats.logActions(fourSq.stats.Action.build(fourSq.stats.action.Action.ONBOARDING_END,
{view:this.logView_}));this.addSuccessPageClickHandlers_();return this},logShowSection_:function(){fourSq.stats.logActions(fourSq.stats.Action.build(fourSq.stats.action.Action.SHOW,{view:this.logView_,section:this.logSection_}))},decorate:function(){fourSq.signup.StandardSignupDialog.__super__.decorate.call(this);return this},show:function(){fourSq.signup.InlineSignupDialog.__super__.show.call(this);fourSq.stats.logActions(fourSq.stats.Action.build(fourSq.stats.action.Action.ONBOARDING_START,{view:this.logView_}));
return this},addSignupPageClickHandlers_:function(a){var b=(new fourSq.signup.page.SignupForm({el:this.$el,serverError:a,customSubmit:fourSq.bind(this.signup_,this),formSelector:".signUp form"})).decorate();if(a)b.on(fourSq.signup.page.Validator.Events.FAILURE,_.after(2,this.handleSignupError_),this);else b.onOnce(fourSq.signup.page.Validator.Events.FAILURE,this.handleSignupError_,this);var c=this.$el.find("#signupButton");this.$el.find("form").on("submit",fourSq.bind(function(){fourSq.stats.logActions(fourSq.stats.Action.build(fourSq.stats.action.Action.CLICK,
{view:this.logView_,section:this.logSection_,element:fourSq.stats.action.Element.SIGN_UP}));c.addClass("loading");this.$el.find(".spinner").addClass("loading")},this));this.$el.find(".labelTip").tooltip({tipWidth:"270px",extraClass:"inlineSignupLabelTip"});a=this.$el.find("#hiddenImageHolder");a.hide();this.$el.find("#inputProfilePhoto").change(fourSq.bind(this.onImageStartUpload_,this));a.on(fourSq.net.ImageUploader.Events.PREVIEW_SUCCESS,fourSq.bind(this.onImageFinishUpload_,this));a.on(fourSq.net.ImageUploader.Events.PREVIEW_FAILURE,
fourSq.bind(this.onImageFinishUpload_,this));return this},addEmailPromptPageClickHandlers_:function(){(new fourSq.signup.page.SignupForm({el:this.$el,serverError:!1,customSubmit:fourSq.bind(function(){var a=this.$el.find("#inputEmail").val().toString();fourSq.facebook.redirectToFacebookSignup(this.queryString_.set("email",a))},this),formSelector:".signUp form"})).decorate();var a=this.$el.find("#signupButton"),b=this.$el.find("#skipButton"),c=this.$el.find(".spinner"),d=function(){a.addClass("loading");
b.addClass("loading");c.addClass("loading")};this.$el.find("form").on("submit",fourSq.bind(function(){fourSq.stats.logActions(fourSq.stats.Action.build(fourSq.stats.action.Action.CLICK,{view:this.logView_,section:this.logSection_,element:fourSq.stats.action.Element.SIGN_UP}));d()},this));b.click(fourSq.bind(function(){fourSq.stats.logActions(fourSq.stats.Action.build(fourSq.stats.action.Action.CLICK,{view:this.logView_,section:this.logSection_,element:fourSq.stats.action.Element.HIDE_BUTTON}));d();
fourSq.facebook.redirectToFacebookSignup(this.queryString_)},this));return this},addSignupPromptPageClickHandlers_:function(){var a=fourSq.signup.Logging.assembleOrigin(this.trigger_,["signup-prompt-facebook"],!1),b=fourSq.facebook.loginContinueParams(this.continueTo_,!0,this.existingUserContinueTo_),c=this.$el.find(".facebookButton");fourSq.facebook.initFacebookSignupButton(c,"?"+_.compact([a,b]).join("\x26"),{view:this.logView_,section:this.logSection_,component:fourSq.signup.SignupButtonWithMenu.COMPONENT});
this.$el.find(".emailButton").click(fourSq.bind(function(){fourSq.stats.logActions(fourSq.stats.Action.build(fourSq.stats.action.Action.CLICK,{view:this.logView_,section:this.logSection_,element:fourSq.stats.action.Element.SIGN_UP}));this.renderSignupPage_()},this));return this},onImageStartUpload_:function(){var a=this.$el.find("#signupButton"),b=this.$el.find("#hiddenImageHolder"),c=this.$el.find("#inputProfilePhoto");c.prop("disabled","true");a.prop("disabled","true");this.uploadedFile_=fourSq.net.ImageUploader.showImagePreview(b,
c)||null},onImageFinishUpload_:function(){var a=this.$el.find("#signupButton");this.$el.find("#inputProfilePhoto").removeProp("disabled");a.removeProp("disabled")},addTastesPageClickHandlers_:function(){var a=this.$el.find("#finishedTastesButton");this.tasteGameView_.on(fourSq.taste.TasteGameView.Events.TASTE_ADDED,function(a){a&&this.addedTastes_.push(a);this.$el.find("#inlineTastesRichModal").addClass("canProceed");this.$el.find("#finishedTastesButton").empty().append(templates.fourSq.signup.page.inlinesignupmodal.tastesAdvanceText({}))},
this);this.tasteGameView_.on(fourSq.taste.TasteGameView.Events.TASTE_REMOVED,function(a){a&&(this.addedTastes_=_.reject(this.addedTastes_,function(c){return c.id===a.id}))},this);this.tasteGameView_.on(fourSq.taste.TasteGameView.Events.NO_TASTES,function(){fourSq.stats.logActions(fourSq.stats.Action.build(fourSq.stats.action.Action.INVALID,{view:this.logView_,section:this.logSection_}));this.renderSuccessPage_()},this);a.click(fourSq.bind(this.renderSuccessPage_,this));fourSq.stats.Util.logClickAction(a,
{view:this.logView_,section:this.logSection_,element:fourSq.stats.action.Element.NEXT});return this},addSuccessPageClickHandlers_:function(){var a=this.$el.find("#closeButton");a.click(fourSq.bind(this.finish_,this));fourSq.stats.Util.logClickAction(a,{view:this.logView_,section:this.logSection_,element:fourSq.stats.action.Element.HIDE_BUTTON});a=this.$el.find("#finishButton");a.click(fourSq.bind(function(){window.location.replace("/")},this));fourSq.stats.Util.logClickAction(a,{view:this.logView_,
section:this.logSection_,element:fourSq.stats.action.Element.SUBMIT_BUTTON});return this},close:function(){fourSq.stats.logActions(fourSq.stats.Action.build(fourSq.stats.action.Action.CLOSE,{view:this.logView_,section:this.logSection_}));fourSq.signup.InlineSignupDialog.__super__.close.call(this);this.onClose_();this.userHasBeenCreated_&&this.refreshPage_();return this},renderContent:function(){switch(this.screen_){case fourSq.signup.InlineSignupDialog.Screens.SIGNUP:this.renderSignupPage_();break;
case fourSq.signup.InlineSignupDialog.Screens.TASTE:this.renderTastesPage_();break;case fourSq.signup.InlineSignupDialog.Screens.SUCCESS:this.renderSuccessPage_();break;case fourSq.signup.InlineSignupDialog.Screens.EMAIL_PROMPT:this.renderEmailPromptPage_();break;case fourSq.signup.InlineSignupDialog.Screens.SIGNUP_PROMPT:this.renderSignupPromptPage_()}}});fourSq.signup.InlineSignupDialog.Screens={SIGNUP:"signup",TASTE:"taste",SUCCESS:"success",EMAIL_PROMPT:"email-prompt",SIGNUP_PROMPT:"signup-prompt"};fourSq.signup.Coppa={isTooYoung:function(a){var b=new Date(a.year,a.month-1,a.day,0,0,0,0),c=new Date;a=c.getYear()-b.getYear();var d=c.getMonth()-b.getMonth(),b=c.getDate()-b.getDate();return 13>a||13==a&&0>d||13==a&&0==d&&0>b},hasUnderageCookie:function(){return null!==$.cookie("ty")},setTooYoungAndRedirect:function(){$.cookie("ty","1",{path:"/",expires:1});window.location.reload()}};fourSq.signup.StandardDownloadDialog=function(a){};
fourSq.signup.StandardDownloadDialog=fourSq.ui.dialog.Dialog.extend({initialize:function(a){fourSq.signup.StandardDownloadDialog.__super__.initialize.call(this,{className:"downloadModal",isModal:!0});this.pageType_=fourSq.stats.Util.getViewName();this.logSection_=fourSq.stats.action.Section.DOWNLOAD_DIALOG;this.logPrefix_=a.logPrefix;this.phoneEmailInputView_=null},decorate:function(){fourSq.signup.StandardDownloadDialog.__super__.decorate.call(this);this.phoneEmailInputView_.decorate();this.phoneEmailInputView_.on(fourSq.ui.PhoneEmailInput.Events.INVALID_INPUT,
fourSq.bind(this.showValidationError_,this));this.phoneEmailInputView_.on(fourSq.ui.PhoneEmailInput.Events.VALID_INPUT,fourSq.bind(this.clearValidationError_,this));this.$el.find(".sendToPhone form").submit(fourSq.withoutPropagationAndDefault(this.maybeSendToPhone_,this));var a=fourSq.api.models.companion.user.UserUtil.currentUser();a&&a.contact&&a.contact.phone&&this.$el.find("input.phoneEmail").val(a.contact.phone);return this},show:function(){fourSq.signup.StandardDownloadDialog.__super__.show.call(this);
var a=fourSq.stats.Action.build(fourSq.stats.action.Action.SHOW,{section:this.logSection_});fourSq.stats.log(this.logPrefix_+"-showdialog").add("page",this.pageType_).incr([this.logPrefix_,"impression","dialog"]).addActions(a).finish();this.$el.find(".sendToPhone form input[name\x3dphone]").focus();return this},close:function(){var a=fourSq.stats.Action.build(fourSq.stats.action.Action.CLOSE,{section:this.logSection_});fourSq.stats.logActions(a);fourSq.signup.StandardDownloadDialog.__super__.close.call(this);
return this},renderContent:function(){var a=templates.fourSq.ui.downloadDialog.standard();this.container_.empty().append($(a));a=fourSq.api.models.companion.user.UserUtil.currentUser();this.phoneEmailInputView_=new fourSq.ui.PhoneEmailInput({countryCode:a&&a.location?a.location.countryCode:void 0,el:this.$el.find(".sendToPhone form input[name\x3dphone]").get(0)})},maybeSendToPhone_:function(){var a=this.phoneEmailInputView_.getIfValid(),b=this.$el.find("#downloadDialog");a&&!b.hasClass("sending")&&
(b.addClass("sending"),fourSq.api.services.PrivateWeb.sendDownloadEmail({email:a,source:"downloadDialog["+fourSq.stats.Util.getViewName()+"]"},fourSq.bind(this.onTextSuccess_,this),fourSq.bind(this.onTextError_,this)))},onTextSuccess_:function(){this.close();fourSq.ui.Notifier.getInstance().info(helpers.download.getTheAppSuccess({}));fourSq.stats.log(this.logPrefix_+"-sendtophone").incr([this.logPrefix_,"text-sent","dialog"]).finish();fourSq.signup.sms().hide()},onTextError_:function(a){fourSq.ui.Notifier.getInstance().error(helpers.download.getTheAppError({}));
this.$el.find("#downloadDialog").removeClass("sending");fourSq.stats.log(this.logPrefix_+"-senderror").incr([this.logPrefix_,"text-error","dialog"]).add("errorType",a.response.meta.errorType).add("errorDetail",a.response.meta.errorDetail).add("errorMessage",a.response.meta.errorMessage).finish()},showValidationError_:function(a){var b=this.$el.find(".sendToPhone form");b.addClass("invalid");b.find(".validationMessage").empty().append(a)},clearValidationError_:function(){var a=this.$el.find(".sendToPhone form");
a.removeClass("invalid");a.find(".validationMessage").empty()}});fourSq.signup.StandardSignupPrompt=function(a){};
fourSq.signup.StandardSignupPrompt=fourSq.signup.SignupPrompt.extend({initialize:function(a){fourSq.signup.StandardSignupPrompt.__super__.initialize.call(this,a)},render:function(){var a=templates.fourSq.ui.signupPrompt.standard({fbAppId:fourSq.config.fb.APP_ID,queryString:this.signupQuery_()});this.$el.empty().append(a);return this.decorate()},signupQuery_:function(){return fourSq.signup.Logging.assembleOrigin(this.trigger_,[],!1)},decorate:function(){var a=fourSq.signup.getContinueTo(),a=_.compact([this.signupQuery_(),
fourSq.facebook.loginContinueParams(a.continueTo,!0,a.existingUserContinueTo)]).join("\x26");fourSq.facebook.initFacebookSignupButton(this.$el.find("#facebookButton, .facebookButton"),"?"+a);fourSq.facebook.getFacebookApi(fourSq.bind(function(a){a.getLoginStatus(fourSq.bind(this.updateFacebookStatus_,this))},this));this.registerEmailClickHandler(this.$el.find("a.emailSignup"));return this},updateFacebookStatus_:function(a){"connected"===a?this.$el.addClass("facebookUser facebookConnected"):"not_authorized"===
a?this.$el.addClass("facebookUser"):this.$el.addClass("notFacebookUser")}});fourSq.signup.MapPageSignupPrompt=function(a,b){};fourSq.signup.MapPageSignupPrompt=fourSq.signup.StandardSignupPrompt.extend({render:function(){var a=templates.fourSq.ui.signupPrompt.mapPage({fbAppId:fourSq.config.fb.APP_ID,queryString:this.signupQuery_()});this.$el.empty().append(a);return this.decorate()}});fourSq.signup.ExploreSignupPrompt=function(a,b){};
fourSq.signup.ExploreSignupPrompt=fourSq.signup.StandardSignupPrompt.extend({render:function(){this.hide_();var a=templates.fourSq.ui.signupPrompt.explore({fbAppId:fourSq.config.fb.APP_ID,queryString:this.signupQuery_()});this.$el.empty().append(a);this.explorePromptCloser_=new fourSq.signup.ExplorePromptCloser({el:this.$el.find(".close").get(0)});return this.decorate()},decorate:function(){this.explorePromptCloser_.shouldDisplay()&&this.show_();this.explorePromptCloser_.on(fourSq.signup.ExplorePromptCloser.Event.CLOSE,fourSq.bind(this.hide_,
this));this.explorePromptCloser_.decorate();fourSq.signup.ExploreSignupPrompt.__super__.decorate.call(this)},hide_:function(){this.$el.hide()},show_:function(){this.$el.show()}});fourSq.signup.ExplorePromptCloser=function(a,b){};
fourSq.signup.ExplorePromptCloser=fourSq.ui.View.extend({initialize:function(){fourSq.signup.ExplorePromptCloser.__super__.initialize.call(this);this.maybeExpireClosedState_()},decorate:function(){this.$el.click(fourSq.bind(this.close_,this));fourSq.signup.ExplorePromptCloser.__super__.decorate.call(this)},close_:function(){this.trigger(fourSq.signup.ExplorePromptCloser.Event.CLOSE);this.setClosedCookie_()},shouldDisplay:function(){return"localStorage"in window&&null!==window.localStorage?"true"!==
window.localStorage[fourSq.signup.ExplorePromptCloser.LocalStorageKey.IS_CLOSED]:!0},maybeExpireClosedState_:function(){if("localStorage"in window&&null!==window.localStorage){var a=1*window.localStorage[fourSq.signup.ExplorePromptCloser.LocalStorageKey.EXPIRY_TIME],b=(new Date).getTime();if(isNaN(a)||b>a)delete window.localStorage[fourSq.signup.ExplorePromptCloser.LocalStorageKey.IS_CLOSED],delete window.localStorage[fourSq.signup.ExplorePromptCloser.LocalStorageKey.EXPIRY_TIME]}},setClosedCookie_:function(){if("localStorage"in
window&&null!==window.localStorage){var a=1*(window.localStorage[fourSq.signup.ExplorePromptCloser.LocalStorageKey.CLOSED_COUNT]||0);window.localStorage[fourSq.signup.ExplorePromptCloser.LocalStorageKey.CLOSED_COUNT]=a+1;var b=30;0===a?b=3:1===a&&(b=10);a=(new Date).getTime()+864E5*b;window.localStorage[fourSq.signup.ExplorePromptCloser.LocalStorageKey.EXPIRY_TIME]=a;window.localStorage[fourSq.signup.ExplorePromptCloser.LocalStorageKey.IS_CLOSED]="true"}}},{Event:{CLOSE:"close"},LocalStorageKey:{IS_CLOSED:"explore:signup:closed",
CLOSED_COUNT:"explore:signup:closed:count",EXPIRY_TIME:"explore:signup:closed:expiry"},resetCloseState:function(){"localStorage"in window&&null!==window.localStorage&&(delete window.localStorage[fourSq.signup.ExplorePromptCloser.LocalStorageKey.IS_CLOSED],delete window.localStorage[fourSq.signup.ExplorePromptCloser.LocalStorageKey.EXPIRY_TIME],delete window.localStorage[fourSq.signup.ExplorePromptCloser.LocalStorageKey.CLOSED_COUNT])}});fourSq.signup.CityPageSignupPrompt=function(a,b){};fourSq.signup.CityPageSignupPrompt=fourSq.signup.StandardSignupPrompt.extend({render:function(){var a=templates.fourSq.ui.signupPrompt.cityPage({fbAppId:fourSq.config.fb.APP_ID,queryString:this.signupQuery_()});this.$el.empty().append(a);return this.decorate()}});fourSq.signup.NewHomepageSignupPrompt=function(a,b){};fourSq.signup.NewHomepageSignupPrompt=fourSq.signup.StandardSignupPrompt.extend({render:function(){var a=templates.fourSq.ui.signupPrompt.newHomepage({fbAppId:fourSq.config.fb.APP_ID,queryString:this.signupQuery_()});this.$el.empty().append(a);return this.decorate()}});fourSq.signup.HomepageSignupBanner=function(a,b){};fourSq.signup.HomepageSignupBanner=fourSq.signup.StandardSignupPrompt.extend({render:function(){var a=templates.fourSq.ui.signupPrompt.homepageBanner({queryString:this.signupQuery_()});this.$el.empty().append(a);return this.decorate()}});fourSq.signup.VenuePageSignupPrompt=function(a){};fourSq.signup.VenuePageSignupPrompt=fourSq.signup.StandardSignupPrompt.extend({initialize:function(a){fourSq.signup.VenuePageSignupPrompt.__super__.initialize.apply(this,arguments);this.venue_=a.venue},render:function(){var a=templates.fourSq.ui.signupPrompt.venuePage({fbAppId:fourSq.config.fb.APP_ID,queryString:this.signupQuery_(),venue:this.venue_});this.$el.empty().append(a);return this.decorate()}});fourSq.signup.LocalQueryPageSignupPrompt=function(a,b){};fourSq.signup.LocalQueryPageSignupPrompt=fourSq.signup.StandardSignupPrompt.extend({render:function(){var a=templates.fourSq.ui.signupPrompt.localQueryPage({fbAppId:fourSq.config.fb.APP_ID,queryString:this.signupQuery_()});this.$el.empty().append(a);return this.decorate()}});fourSq.signup.InviteSignupPrompt=function(a){};
fourSq.signup.InviteSignupPrompt=fourSq.signup.StandardSignupPrompt.extend({initialize:function(a){fourSq.signup.InviteSignupPrompt.__super__.initialize.apply(this,arguments);this.invitingUser_=a.invitingUser;this.hasTopMargin_=a.withTopMargin;this.trigger_=fourSq.signup.Trigger.INVITE_SIGNUP_PROMPT;this.inviteChannel_=new fourSq.signup.InviteChannel;if(this.inviteChannel_.isDefined()){var b=fourSq.stats.Action.build(fourSq.stats.action.Action.IMPRESSION,{section:fourSq.stats.action.Section.INVITE_SIGNUP_PROMPT,
details:{inviteChannel:this.inviteChannel_.getChannel()}});fourSq.stats.logActions(b)}},signupQuery_:function(){return this.inviteChannel_.isDefined()?fourSq.signup.Logging.assembleOrigin(this.trigger_,this.inviteChannel_.toContext()):fourSq.signup.InviteSignupPrompt.__super__.signupQuery_.apply(this)},render:function(){var a=templates.fourSq.ui.signupPrompt.invite({queryString:this.signupQuery_(),invitingUser:this.invitingUser_,withTopMargin:this.hasTopMargin_});this.$el.empty().append(a);return this.decorate()}},
{createWithInvitingUser:function(a){var b=fourSq.util.parseParams().inviteFrom;fourSq.isDefinedAndNotNull(b)&&(b=parseInt(b,10),isNaN(b)||fourSq.api.services.User.detail({id:b},function(b){(new fourSq.signup.InviteSignupPrompt(_.extend({invitingUser:b},a))).render()},function(a){}))}});fourSq.signup.InviteChannel=function(a,b){};
fourSq.signup.InviteChannel=fourSq.Class.extend({initialize:function(){this.channel_=fourSq.util.parseParams().inviteChannel},isDefined:function(){return fourSq.isDefinedAndNotNull(this.channel_)},toTrackingId:function(){if(this.isDefined())return fourSq.signup.InviteChannel.TRACKING_ID_PREFIX+this.getChannel()},toContext:function(){return[this.getChannel()+fourSq.signup.InviteChannel.CONTEXT_SUFFIX]},getChannel:function(){return this.channel_}},{TRACKING_ID_PREFIX:"inviteVia-",CONTEXT_SUFFIX:"-invite"});fourSq.signup.Trigger={LIKE_CHECKIN:"trigger-like-checkin",LIKE_TIP:"trigger-like-tip",LIKE_VENUE:"trigger-like-venue",DISLIKE_VENUE:"trigger-dislike-venue",OK_VENUE:"trigger-ok-venue",LIKE_PAGE:"trigger-like-page",LIKE_SPECIAL:"trigger-like-special",SAVE_TIP:"trigger-save-tip",SAVE_VENUE:"trigger-save-venue",SHARE_FACEBOOK:"trigger-share-facebook",SHARE_TWITTER:"trigger-share-twitter",SHARE_EMAIL:"trigger-share-email",SHARE_FOURSQUARE:"trigger-share-foursquare",BEEN_HERE:"trigger-been-here",CREATE_LIST:"trigger-create-list",
PAGE_LOAD_DIALOG:"trigger-page-load-dialog",TASTE_GAME_DIALOG:"trigger-taste-game-dialog",TOP_50_DIALOG:"trigger-top50-dialog",CLAIM_VENUE:"trigger-claim-venue",ADD_FRIEND:"trigger-add-friend",FOLLOW_LIST:"trigger-follow-list",FACEBOOK_UNTOSED:"trigger-facebook-untosed",FILTER_HAVE_NOT_BEEN:"trigger-filter-have-not-been",FILTER_HAVE_BEEN:"trigger-filter-have-been",FILTER_FRIENDS_HAVE_BEEN:"trigger-filter-friends-have-been",FILTER_SAVED:"trigger-filter-saved",FILTER_LIKED:"trigger-filter-liked",STANDARD_SIGNUP_PROMPT:"trigger-standard-signup-prompt",
STANDARD_SIGNUP_BUTTON:"trigger-standard-signup-button",INVITE_SIGNUP_PROMPT:"trigger-invite-signup-prompt",HOMEPAGE_VISIT_PROMPT:"trigger-homepage-visit-prompt",LOGIN_PAGE_SIGNUP_LINK:"trigger-login-page-signup-link",CONTINUE:"trigger-continue",EXPERIMENTAL:"trigger-experimental",UNKNOWN:"trigger-unknown",FACEBOOK_SIGNUP_FAILURE:"trigger-facebook-signup-failure",BLANK:""};fourSq.signup.DisplaySmsAdvisor=function(a,b){};
fourSq.signup.DisplaySmsAdvisor=fourSq.EventTarget.extend({isHidden:function(){return fourSq.util.localStorage.getBooleanWithDefault(fourSq.signup.DisplaySmsAdvisor.LocalStorageKeys.HIDDEN,!1)},hide:function(){this.trigger(fourSq.signup.DisplaySmsAdvisor.Events.HIDE);fourSq.util.localStorage.setBoolean(fourSq.signup.DisplaySmsAdvisor.LocalStorageKeys.HIDDEN,!0)},reset:function(){fourSq.util.localStorage.remove(fourSq.signup.DisplaySmsAdvisor.LocalStorageKeys.HIDDEN)}},{Events:{HIDE:"hide"},LocalStorageKeys:{HIDDEN:"foursq:signup:dsa"}});fourSq.signup.GetTheAppBar=function(a,b){};
fourSq.signup.GetTheAppBar=fourSq.ui.View.extend({render:function(){if(fourSq.config.displayGetTheAppBar&&!fourSq.signup.sms().isHidden()){var a=helpers.download.getAppChrome();this.$el.append(a);fourSq.chrome.getHeader().after(this.$el);this.decorate()}return this},decorate:function(){$(document.body).addClass("withGetTheAppBar");this.$el.find(".close").click(fourSq.bind(this.hide_,this));fourSq.util.devices.isTouchIncludingIPad()?(new fourSq.util.mobile.NativeAppLinkWithFallback({el:this.$el.find(".downloadApp"),urlFactory:new fourSq.util.mobile.urlfactory.HomescreenUrlFactory,
loggingContext:{section:fourSq.stats.action.Section.GET_THE_APP_PROMPT}})).decorate():(fourSq.signup.sms().on(fourSq.signup.DisplaySmsAdvisor.Events.HIDE,fourSq.bind(this.hide_,this)),this.$el.find(".downloadApp").click(function(a){a.preventDefault();(new fourSq.signup.StandardDownloadDialog({logPrefix:"getTheAppBar"})).show()}))},hide_:function(){this.$el.remove()}});fourSq.signup.GooglePlusSignupButton=function(a){};
fourSq.signup.GooglePlusSignupButton=fourSq.ui.View.extend({initialize:function(a){this.callbackFunctionName_="googlePlusCallback_"+ +new Date;window[this.callbackFunctionName_]=fourSq.bind(this.onAuth_,this);this.logSection_=a.logSection;this.logComponent_=a.logComponent},decorate:function(){this.loadGooglePlusScript_();this.$el.on("click",fourSq.bind(function(){this.log_(fourSq.stats.action.Action.CLICK)},this));return this},onAuth_:function(a){a.error?(this.log_(fourSq.stats.action.Action.FAILURE),
this.trigger(fourSq.signup.GooglePlusSignupButton.Events.AUTH_FAILURE)):gapi.client.request({path:"/oauth2/v2/userinfo"}).execute(fourSq.bind(this.onUserData_,this))},onUserData_:function(a){this.log_(fourSq.stats.action.Action.SUCCESS);this.trigger(fourSq.signup.GooglePlusSignupButton.Events.AUTH_SUCCESS,a)},loadGooglePlusScript_:function(){window.gapi&&window.gapi.signin&&window.gapi.signin.render?this.gapiLoaded_():$.getScript("https://plus.google.com/js/client:plusone.js",fourSq.bind(this.gapiLoaded_,
this))},gapiLoaded_:function(){gapi.signin.render(this.el,{callback:this.callbackFunctionName_,apppackagename:"com.joelapenna.foursquared",clientid:"536543795324-5ckjl6hmicvjqa2v8m82otk120f0vskc.apps.googleusercontent.com",cookiepolicy:"single_host_origin",requestvisibleactions:"http://schemas.google.com/AddActivity",scope:"https://www.googleapis.com/auth/plus.login https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile",approvalprompt:"force"})},log_:function(a){a=
fourSq.stats.Action.build(a,{element:fourSq.stats.action.Element.GOOGLE_PLUS_SIGNUP,section:this.logSection_,component:this.logComponent_});fourSq.stats.logActions(a)}},{Events:{AUTH_FAILURE:"auth-failure",AUTH_SUCCESS:"auth-success"}});fourSq.signup.page.SignupForm=function(a){};
fourSq.signup.page.SignupForm=fourSq.ui.View.extend({initialize:function(a){fourSq.signup.page.SignupForm.__super__.initialize.call(this,a);this.hadServerError_=a.serverError;this.submitFunction=a.customSubmit||fourSq.bind(this.submitFormWithoutValidation,this);this.formSelector_=a.formSelector},decorate:function(){this.$emailContainer_=this.$el.find(".emailContainer");this.$passwordContainer_=this.$el.find(".passwordContainer");this.$firstNameContainer_=this.$el.find(".firstNameContainer");this.$birthdayContainer_=
this.$el.find(".birthdayContainer");this.$ppContainer_=this.$el.find(".ppContainer");this.$form_=this.$el.find(this.formSelector_);this.setupLogFields_();this.setupValidators_();this.setupBirthdayView_();this.setupFullFormValidation_();this.setupFocusStates_();this.hadServerError_&&this.formValidator_.validate([this.passwordField_]);return this},setupLogFields_:function(){var a=fourSq.net.Util.stripParamsFromQuery(["fb_source"]),b=this.$form_.find("input.referrer"),c=this.$form_.find("input.landingPage"),
d=this.$form_.find("input.refSource"),e=this.$form_.find("input.fromFacebookAppCenter");""===b.val()&&b.val(document.referrer||"BLANK");""===c.val()&&c.val(fourSq.signup.Logging.getLandingPage()||"");""===d.val()&&d.val(fourSq.signup.Logging.getRefSource()||"");""===e.val()&&e.val("appcenter"===a.fb_source?"true":"false")},loginRedirect_:function(a){return"/login?email\x3d"+encodeURIComponent(a)},forgotPasswordRedirect_:function(a){return"/forgot_password?email\x3d"+encodeURIComponent(a)},setupValidators_:function(){if(this.$emailContainer_.length){this.emailField_=
(new fourSq.signup.page.ValidatedEmailField({el:this.$emailContainer_,logActionData:{section:fourSq.stats.action.Section.SIGNUP_FORM,element:fourSq.stats.action.Element.EMAIL},loggingOptions:{suppressFailureLogging:!0}})).decorate();var a=this.$emailContainer_.find("input");this.$emailContainer_.find(".login").click(fourSq.bind(function(b){b.preventDefault();b=a.val();fourSq.util.redirect(this.loginRedirect_(b))},this));this.$emailContainer_.find(".forgotPassword").click(fourSq.bind(function(b){b.preventDefault();
b=a.val();fourSq.util.redirect(this.forgotPasswordRedirect_(b))},this))}this.$firstNameContainer_.length&&(this.firstNameField_=(new fourSq.signup.page.ValidatedLengthField({el:this.$firstNameContainer_,logActionData:{section:fourSq.stats.action.Section.SIGNUP_FORM,element:fourSq.stats.action.Element.FIRST_NAME},minLength:1})).decorate());this.$passwordContainer_.length&&(this.passwordField_=(new fourSq.signup.page.ValidatedLengthField({el:this.$passwordContainer_,logActionData:{section:fourSq.stats.action.Section.SIGNUP_FORM,
element:fourSq.stats.action.Element.PASSWORD},minLength:6})).decorate());this.$ppContainer_.length&&(this.ppChecked_=(new fourSq.signup.page.ValidatedCheckboxField({el:this.$ppContainer_,logActionData:{section:fourSq.stats.action.Section.SIGNUP_FORM,element:fourSq.stats.action.Element.PRIVACY_POLICY}})).decorate())},setupBirthdayView_:function(){this.$birthdayContainer_.length&&(this.birthdayView_=(new fourSq.signup.page.BirthdayFields({el:this.$birthdayContainer_,logActionData:{section:fourSq.stats.action.Section.SIGNUP_FORM,
element:fourSq.stats.action.Element.BIRTHDAY}})).decorate())},setupFullFormValidation_:function(){var a=_.compact([this.emailField_,this.firstNameField_,this.passwordField_,this.birthdayView_,this.ppChecked_]);this.formValidator_=new fourSq.signup.page.ValidatorAggregator({validators:a});this.formValidator_.on(fourSq.signup.page.Validator.Events.SUCCESS,this.submitFunction);this.formValidator_.on(fourSq.signup.page.Validator.Events.FAILURE,function(){fourSq.debug.error("Tried to submit form but there was a validation error.");
this.trigger(fourSq.signup.page.Validator.Events.FAILURE)},this);(new fourSq.signup.page.ValidatorLogger({section:fourSq.stats.action.Section.SIGNUP_FORM})).respondTo(this.formValidator_);this.$form_.submit(fourSq.bind(function(a){a.preventDefault();this.formValidator_.validate()},this))},submitFormWithoutValidation:function(){var a=fourSq.stats.Action.build(fourSq.stats.action.Action.SUBMIT,{section:fourSq.stats.action.Section.SIGNUP_FORM});fourSq.stats.logActionWithDelay(a,fourSq.bind(function(){this.$form_.get(0).submit()},
this))},setupFocusStates_:function(){var a=this.$el.find(".decor");_.each(a,function(a){$(a).focusin(function(a){$(a.currentTarget).addClass("focus")}).focusout(function(c){$.contains(a,c.relatedTarget)||$(c.currentTarget).removeClass("focus")})},this)}});fourSq.signup.page.Validator=function(a){};
fourSq.signup.page.Validator=fourSq.EventTarget.extend({initialize:function(a){this.$el=$(a.el);0===this.$el.length?fourSq.debug.error("Validator is missing an element"):this.severTimeStamp_=null},test_:function(a){fourSq.abstractMethod()},validate:function(){var a=this.severTimeStamp_=+new Date,b=fourSq.bind(function(b,d){if(!(a<this.severTimeStamp_)){var e=this;_.defer(function(){b?e.trigger(fourSq.signup.page.Validator.Events.SUCCESS,d):e.trigger(fourSq.signup.page.Validator.Events.FAILURE,d)})}},
this);this.test_(b)}});fourSq.signup.page.Validator.Events={SUCCESS:"SUCCESS",FAILURE:"FAILURE"};fourSq.signup.page.CheckboxValidator=function(a){};fourSq.signup.page.CheckboxValidator=fourSq.signup.page.Validator.extend({initialize:function(a){fourSq.signup.page.MinLengthValidator.__super__.initialize.call(this,a);this.descriptiveFieldName_=a.descriptiveFieldName},test_:function(a){var b=!0===this.$el.is(":checked");a(b,void 0)}});fourSq.signup.page.MinLengthValidator=function(a){};
fourSq.signup.page.MinLengthValidator=fourSq.signup.page.Validator.extend({initialize:function(a){fourSq.signup.page.MinLengthValidator.__super__.initialize.call(this,a);this.minLength_=a.minLength;this.descriptiveFieldName_=a.descriptiveFieldName},buildErrorMessage_:function(){var a=" character"+(1<this.minLength_?"s":"")+" long.";return fourSq.isDefined(this.descriptiveFieldName_)?this.descriptiveFieldName_+" must be at least "+this.minLength_+a:"The field must be at least "+this.minLength_+a},
test_:function(a){var b=this.$el.val().length>=this.minLength_,c=void 0;b||(c={message:this.buildErrorMessage_()});a(b,c)}});fourSq.signup.page.MaxLengthValidator=function(a){};fourSq.signup.page.MaxLengthValidator=fourSq.signup.page.Validator.extend({initialize:function(a){fourSq.signup.page.MaxLengthValidator.__super__.initialize.call(this,a);this.maxLength_=a.maxLength},test_:function(a){var b=this.$el.val();a(b.length<=this.maxLength_)}});fourSq.signup.page.UnregisteredPhoneValidator=function(a){};
fourSq.signup.page.UnregisteredPhoneValidator=fourSq.signup.page.Validator.extend({initialize:function(a){fourSq.signup.page.UnregisteredPhoneValidator.__super__.initialize.call(this,a);this.allowedUserId_=a.allowedUserId},test_:function(a){var b=this.$el.val().replace(/\D/g,""),c=fourSq.bind(function(b){fourSq.isDefinedAndNotNull(this.allowedUserId_)&&b&&b.id?a(this.allowedUserId_===b.id):a(!1)},this);fourSq.api.services.User.lookup({phone:b},c,fourSq.curry(a,void 0,!0))}});fourSq.signup.page.PhoneFormatValidator=function(a){};fourSq.signup.page.PhoneFormatValidator=fourSq.signup.page.Validator.extend({initialize:function(a){fourSq.signup.page.PhoneFormatValidator.__super__.initialize.call(this,a);this.pattern_=/^\+?[\d()\-\. ]+$/;this.allowBlank_=!!a.allowBlank},test_:function(a){var b=this.$el.val(),c=this.pattern_.test(b),d=b.replace(/\D/g,""),d=7<=d.length&&15>=d.length;a(this.allowBlank_&&""===b||c&&d)}});fourSq.signup.page.ValidationResponder=function(a,b){};fourSq.signup.page.ValidationResponder=fourSq.EventTarget.extend({respondTo:function(a){a.on(fourSq.signup.page.Validator.Events.SUCCESS,this.success,this);a.on(fourSq.signup.page.Validator.Events.FAILURE,this.failure,this)},success:function(a){fourSq.abstractMethod()},failure:function(a){fourSq.abstractMethod()}});fourSq.signup.page.TwoElementResponder=function(a,b){};fourSq.signup.page.TwoElementResponder=fourSq.signup.page.ValidationResponder.extend({initialize:function(a,b){fourSq.signup.page.ValidationResponder.__super__.initialize.call(this,a,b);this.$successEl_=a;this.$failureEl_=b},success:function(a){this.$failureEl_&&this.$failureEl_.hide();this.$successEl_&&this.$successEl_.show()},failure:function(a){this.$successEl_&&this.$successEl_.hide();this.$failureEl_&&this.$failureEl_.show()}});fourSq.signup.page.ValidatedField=function(a){};
fourSq.signup.page.ValidatedField=fourSq.ui.View.extend({initialize:function(a){fourSq.signup.page.ValidatedField.__super__.initialize.call(this,a);this.logActionData_=a.logActionData;this.loggingOptions_=a.loggingOptions;this.validatorLogger_=null},decorate:function(){this.responder_=this.buildResponder_();this.validator_=this.buildValidator_();this.proxyValidatorEvents_();this.responder_.respondTo(this.validator_);this.setupValidation_(this.validator_);this.setupLogging_();this.afterDecorate_();
return this},buildResponder_:fourSq.abstractMethod,buildValidator_:fourSq.abstractMethod,setupValidation_:function(a){},setupLogging_:function(){this.validatorLogger_=new fourSq.signup.page.ValidatorLogger(this.logActionData_,this.loggingOptions_);this.validatorLogger_.respondTo(this.validator_)},afterDecorate_:function(){},proxyValidatorEvents_:function(){var a=fourSq.curry(this.trigger,this,fourSq.signup.page.Validator.Events.SUCCESS),b=fourSq.curry(this.trigger,this,fourSq.signup.page.Validator.Events.FAILURE);
this.validator_.on(fourSq.signup.page.Validator.Events.SUCCESS,a);this.validator_.on(fourSq.signup.page.Validator.Events.FAILURE,b)},validate:function(){this.validator_.validate()}});fourSq.signup.page.DefaultValidatedField=function(a){};
fourSq.signup.page.DefaultValidatedField=fourSq.signup.page.ValidatedField.extend({initialize:function(a){fourSq.signup.page.DefaultValidatedField.__super__.initialize.call(this,a)},buildResponder_:function(){return new fourSq.signup.page.TwoElementResponder(this.$el.find(".validation.success"),this.$el.find(".validation.failure"))},setupValidation_:function(a){this.$el.find(".validate").blur(function(){a.validate()})},hideValidationOnFocus_:function(){this.$el.find(".validate").focus(fourSq.bind(function(){this.$el.find(".validation").hide()},this))},
afterDecorate_:function(){this.hideValidationOnFocus_()}});fourSq.signup.page.ValidatedCheckboxField=function(a){};fourSq.signup.page.ValidatedCheckboxField=fourSq.signup.page.DefaultValidatedField.extend({initialize:function(a){fourSq.signup.page.ValidatedLengthField.__super__.initialize.call(this,a);this.minLength=a.minLength},buildValidator_:function(){return new fourSq.signup.page.CheckboxValidator({el:this.$el.find(".validate"),minLength:this.minLength})}});fourSq.signup.page.ValidatedLengthField=function(a){};fourSq.signup.page.ValidatedLengthField=fourSq.signup.page.DefaultValidatedField.extend({initialize:function(a){fourSq.signup.page.ValidatedLengthField.__super__.initialize.call(this,a);this.minLength=a.minLength},buildValidator_:function(){return new fourSq.signup.page.MinLengthValidator({el:this.$el.find(".validate"),minLength:this.minLength})}});fourSq.signup.page.ValidatedMaxLengthField=function(a){};fourSq.signup.page.ValidatedMaxLengthField=fourSq.signup.page.DefaultValidatedField.extend({initialize:function(a){fourSq.signup.page.ValidatedMaxLengthField.__super__.initialize.call(this,a);this.maxLength=a.maxLength},buildValidator_:function(){return new fourSq.signup.page.MaxLengthValidator({el:this.$el.find(".validate"),maxLength:this.maxLength})}});fourSq.signup.page.ValidatedPhoneField=function(a){};
fourSq.signup.page.ValidatedPhoneField=fourSq.signup.page.DefaultValidatedField.extend({initialize:function(a){fourSq.signup.page.ValidatedPhoneField.__super__.initialize.call(this,a);this.unregisteredPhoneValidator_=this.phoneFormatValidator_=null;this.allowedUserId_=a.allowedUserId},buildValidator_:function(){this.phoneFormatValidator_=new fourSq.signup.page.PhoneFormatValidator({el:this.$el.find(".validate"),allowBlank:!0});this.unregisteredPhoneValidator_=new fourSq.signup.page.UnregisteredPhoneValidator({el:this.$el.find(".validate"),
allowedUserId:this.allowedUserId_});return new fourSq.signup.page.ValidatorAggregator({validators:[this.phoneFormatValidator_,this.unregisteredPhoneValidator_]})},afterDecorate_:function(){fourSq.signup.page.ValidatedPhoneField.__super__.afterDecorate_.call(this);(new fourSq.signup.page.TwoElementResponder(null,this.$el.find(".invalidPhone"))).respondTo(this.phoneFormatValidator_);(new fourSq.signup.page.TwoElementResponder(null,this.$el.find(".alreadyRegistered"))).respondTo(this.unregisteredPhoneValidator_);
var a=_.extend({},this.logActionData_,{details:{reason:"format"}});(new fourSq.signup.page.ValidatorLogger(a,{suppressSuccessLogging:!0})).respondTo(this.phoneFormatValidator_);a=_.extend({},this.logActionData_,{details:{reason:"registered"}});(new fourSq.signup.page.ValidatorLogger(a,{suppressSuccessLogging:!0})).respondTo(this.unregisteredPhoneValidator_)}});fourSq.signup.page.ValidatorAggregator=function(a){};
fourSq.signup.page.ValidatorAggregator=fourSq.EventTarget.extend({initialize:function(a){this.validators_=a.validators;this.responders_=_.each(this.validators_,function(a,c){a.on(fourSq.signup.page.Validator.Events.SUCCESS,function(){this.receiveChildValidation_(c,!0)},this);a.on(fourSq.signup.page.Validator.Events.FAILURE,function(){this.receiveChildValidation_(c,!1)},this)},this)},validate:function(a){if(!this.validating_){this.reset_();this.validating_=!0;var b=a||[];_.each(this.validators_,function(a){_.contains(b,
a)||a.validate()},this)}},reset_:function(){this.valid_=_.map(this.validators_,function(a,b){return!1},this);this.waitingFor_=this.validators_.length},receiveChildValidation_:function(a,b){if(this.validating_){var c=this;b?(this.valid_[a]||this.waitingFor_--,this.valid_[a]=!0,0>=this.waitingFor_&&_.every(this.valid_,_.identity)&&(this.validating_=!1,_.defer(function(){c.trigger(fourSq.signup.page.Validator.Events.SUCCESS)}))):this.validating_&&(this.validating_=!1,_.defer(function(){c.trigger(fourSq.signup.page.Validator.Events.FAILURE)}))}}});fourSq.signup.page.ValidatorLogger=function(a,b){};
fourSq.signup.page.ValidatorLogger=fourSq.signup.page.ValidationResponder.extend({initialize:function(a,b){fourSq.signup.page.ValidatorLogger.__super__.initialize.call(this,a,b);this.lastResult_=null;this.logActionData_=a;this.suppressSuccessLogging_=!(!b||!b.suppressSuccessLogging);this.suppressFailureLogging_=!(!b||!b.suppressFailureLogging)},success:function(){if(!0!==this.lastResult_&&(this.lastResult_=!0,!this.suppressSuccessLogging_)){var a=fourSq.stats.Action.build(fourSq.stats.action.Action.VALID,
this.logActionData_);fourSq.stats.logActions(a)}},failure:function(){if(!1!==this.lastResult_&&(this.lastResult_=!1,!this.suppressFailureLogging_)){var a=fourSq.stats.Action.build(fourSq.stats.action.Action.INVALID,this.logActionData_);fourSq.stats.logActions(a)}}});fourSq.signup.page.EmailValidator=function(a){};fourSq.signup.page.EmailValidator=fourSq.signup.page.Validator.extend({initialize:function(a){fourSq.signup.page.EmailValidator.__super__.initialize.call(this,a);this.pattern_=/^[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i},test_:function(a){var b=this.$el.val();a(this.pattern_.test(b))}});fourSq.signup.page.UnregisteredEmailValidator=function(a){};
fourSq.signup.page.UnregisteredEmailValidator=fourSq.signup.page.Validator.extend({initialize:function(a){fourSq.signup.page.EmailValidator.__super__.initialize.call(this,a);this.allowedEmail_=a.allowedEmail},test_:function(a){var b=this.$el.val(),c=fourSq.bind(function(b){fourSq.isDefinedAndNotNull(this.allowedEmail_)&&b&&b.contact&&b.contact.email?a(this.allowedEmail_===b.contact.email):a(!1)},this);fourSq.api.services.User.lookup({email:b},c,fourSq.curry(a,void 0,!0))}});fourSq.signup.page.BirthdayValidator=function(a){};
fourSq.signup.page.BirthdayValidator=fourSq.signup.page.Validator.extend({initialize:function(a){fourSq.signup.page.BirthdayValidator.__super__.initialize.call(this,a);this.$day_=this.$el.find(".day");this.$month_=this.$el.find(".month");this.$year_=this.$el.find(".year")},test_:function(a){var b=parseInt(this.$day_.val(),10),c=parseInt(this.$month_.val(),10),d=parseInt(this.$year_.val(),10),e=new Date(d,c-1,b);a(e.getFullYear()==d&&e.getMonth()+1==c&&e.getDate()==b&&+e<+new Date&&1900<=e.getFullYear())}});fourSq.signup.page.BirthdayFields=function(a){};
fourSq.signup.page.BirthdayFields=fourSq.ui.View.extend({initialize:function(a){fourSq.signup.page.BirthdayFields.__super__.initialize.call(this,a);this.logActionData_=a.logActionData;this.validatorLogger_=null},decorate:function(){this.$birthDate_=this.$el.find(".day");this.$birthMonth_=this.$el.find(".month");this.$birthYear_=this.$el.find(".year");this.setupInputEnhancements_();this.validator_=this.setupValidator_();this.hideValidationOnFocus_();this.proxyValidatorEvents_();return this},setupInputEnhancements_:function(){var a=
RegExp("[^0-9]+","g"),b=function(b){b.keyup(function(c){c?(c=c.which,c=48<=c&&57>=c||96<=c&&105>=c):c=!1;if(!c){c=b.val();var f=c.replace(a,"");f!=c&&b.val(f)}})},c=this.$el.find("input");b(c.eq(0));b(c.eq(1));b(c.eq(2))},setupValidator_:function(){var a=new fourSq.signup.page.TwoElementResponder(this.$el.find(".validation.success"),this.$el.find(".validation.failure")),b=new fourSq.signup.page.BirthdayValidator({el:this.el});a.respondTo(b);var c=this;$(this.$el).focusout(function(){setTimeout(function(){0==
c.$el.find(":focus").length&&c.validate()},300)});this.validatorLogger_=new fourSq.signup.page.ValidatorLogger(this.logActionData_);this.validatorLogger_.respondTo(b);return b},hideValidationOnFocus_:function(){var a=fourSq.bind(function(){this.$el.find(".validation").hide()},this);$(this.$birthDate_).focus(a);$(this.$birthMonth_).focus(a);$(this.$birthYear_).focus(a)},proxyValidatorEvents_:function(){var a=fourSq.curry(this.trigger,this,fourSq.signup.page.Validator.Events.SUCCESS),b=fourSq.curry(this.trigger,
this,fourSq.signup.page.Validator.Events.FAILURE);this.validator_.on(fourSq.signup.page.Validator.Events.SUCCESS,a);this.validator_.on(fourSq.signup.page.Validator.Events.FAILURE,b)},validate:function(){this.validator_.validate()}});fourSq.signup.page.ValidatedEmailField=function(a){};
fourSq.signup.page.ValidatedEmailField=fourSq.signup.page.DefaultValidatedField.extend({initialize:function(a){fourSq.signup.page.ValidatedEmailField.__super__.initialize.call(this,a);this.unregisteredEmailValidator_=this.validEmailValidator_=null;this.allowedEmail_=a.allowedEmail},buildValidator_:function(){this.validEmailValidator_=new fourSq.signup.page.EmailValidator({el:this.$el.find(".validate")});this.unregisteredEmailValidator_=new fourSq.signup.page.UnregisteredEmailValidator({el:this.$el.find(".validate"),allowedEmail:this.allowedEmail_});
return new fourSq.signup.page.ValidatorAggregator({validators:[this.validEmailValidator_,this.unregisteredEmailValidator_]})},afterDecorate_:function(){fourSq.signup.page.ValidatedEmailField.__super__.afterDecorate_.call(this);(new fourSq.signup.page.TwoElementResponder(null,this.$el.find(".invalidEmail"))).respondTo(this.validEmailValidator_);(new fourSq.signup.page.TwoElementResponder(null,this.$el.find(".alreadyRegistered"))).respondTo(this.unregisteredEmailValidator_);var a=_.extend({},this.logActionData_,
{details:{reason:"format"}});(new fourSq.signup.page.ValidatorLogger(a,{suppressSuccessLogging:!0})).respondTo(this.validEmailValidator_);a=_.extend({},this.logActionData_,{details:{reason:"registered"}});(new fourSq.signup.page.ValidatorLogger(a,{suppressSuccessLogging:!0})).respondTo(this.unregisteredEmailValidator_)}});fourSq.views.NewSignupPage=function(a){};fourSq.views.NewSignupPage=fourSq.views.Page.extend({initialize:function(a){fourSq.views.NewSignupPage.__super__.initialize.call(this,a);this.signupSection=(new fourSq.signup.page.SignupSection({el:$(".signupSection"),serverError:a.error,formSelector:".signUpSection form"})).decorate()},pageViewName:function(){return fourSq.stats.action.View.SIGNUP}});fourSq.signup.page.SignupSection=function(a,b){};
fourSq.signup.page.SignupSection=fourSq.ui.View.extend({initialize:function(a){fourSq.signup.page.SignupSection.__super__.initialize.call(this,a);this.hadServerError_=a.serverError;this.googlePlusSignupButton_=new fourSq.signup.GooglePlusSignupButton({el:this.$el.find(".alternativeSignUp .googlePlus span")});this.signupForm_=new fourSq.signup.page.SignupForm(a)},decorate:function(){this.$privacy_=this.$el.find(".legal .privacy");this.$termsOfService_=this.$el.find(".legal .tos");this.$login_=this.$el.find(".alternativeSignUp .login");
this.setupActionLogging_();this.$origin_=[];this.$form_=this.$el.find(".signUp form");this.setupLogFields_();this.signupForm_.decorate();this.setupLabelTooltips_();this.setupFacebook_();this.setupGooglePlus_();this.prefillForm_();return this},setupLabelTooltips_:function(){this.$el.find(".labelTip").tooltip({tipWidth:"270px"})},setupActionLogging_:function(){var a=fourSq.stats.action.Action.CLICK;fourSq.stats.Util.logActionOnLinkClick(this.$login_,fourSq.stats.Action.builder(a,{element:fourSq.stats.action.Element.LOGIN}));
fourSq.stats.Util.logActionOnLinkClick(this.$privacy_,fourSq.stats.Action.builder(a,{element:fourSq.stats.action.Element.PRIVACY}));fourSq.stats.Util.logActionOnLinkClick(this.$termsOfService_,fourSq.stats.Action.builder(a,{element:fourSq.stats.action.Element.TERMS_OF_SERVICE}))},setupLogFields_:function(){var a=this.$form_.find("input.origin"),b=fourSq.net.Util.stripParamsFromQuery(["origin"]);""===a.val()&&b.origin?(this.origin_=b.origin?b.origin.split(","):[],a.val(b.origin)):this.origin_=0<a.length?
a.val().split(","):[]},setupFacebook_:function(){var a=this.origin_.concat("fb-via-email-signup"),a=fourSq.signup.Logging.assembleOrigin(fourSq.signup.Trigger.BLANK,a,!0);fourSq.facebook.initFacebookSignupButton(this.$el.find(".alternativeSignUp .facebook"),"?"+a)},setupGooglePlus_:function(){this.googlePlusSignupButton_.on(fourSq.signup.GooglePlusSignupButton.Events.AUTH_SUCCESS,fourSq.bind(this.googlePlusSignupSuccess_,this));this.googlePlusSignupButton_.decorate()},googlePlusSignupSuccess_:function(a){this.populateForm_({firstName:a.given_name,
lastName:a.family_name,email:a.email,gender:a.gender,fromGooglePlus:!0})},prefillForm_:function(){var a=fourSq.net.Util.stripParamsFromHash(["firstName","lastName","email","gender","fromGooglePlus"]);this.populateForm_({firstName:a.firstName,lastName:a.lastName,email:a.email,gender:a.gender,fromGooglePlus:"true"===a.fromGooglePlus})},populateForm_:function(a){fourSq.isDefinedAndNotNull(a.firstName)&&this.$el.find("#inputFirstName").val(a.firstName).blur();fourSq.isDefinedAndNotNull(a.lastName)&&this.$el.find("#inputLastName").val(a.lastName).blur();
fourSq.isDefinedAndNotNull(a.email)&&this.$el.find("#inputEmail").val(a.email).blur();fourSq.isDefinedAndNotNull(a.gender)&&("male"===a.gender?this.$el.find("#inputMale").prop("checked",!0).blur():"female"===a.gender&&this.$el.find("#inputFemale").prop("checked",!0).blur());if(a.fromGooglePlus){a=this.$form_.find("input.origin");var b=a.val();a.val(b?b+",filled-by-google-plus":"filled-by-google-plus");this.$el.prepend(templates.fourSq.signup.page.signupsection.googleSignupNotice());this.$el.find(".googlePlus").hide()}}});fourSq.signup.page.OnboardSection=function(a){};
fourSq.signup.page.OnboardSection=fourSq.ui.View.extend({initialize:function(a){fourSq.signup.page.OnboardSection.__super__.initialize.call(this,a);this.$el=$(this.el);var b=fourSq.api.models.companion.user.UserUtil.currentUser();this.findFriendsStep_=(new fourSq.signup.page.FindFriendsStep({el:this.$el.find(".findFriendsStep"),twitter:b&&b.contact&&b.contact.twitter,facebook:b&&b.contact&&b.contact.facebook,googleClientId:a.googleClientId,includeProfileStep:!0,isBatman:a.isBatman})).decorate()}});fourSq.signup.page.OnboardingStep=function(a){};
fourSq.signup.page.OnboardingStep=fourSq.ui.View.extend({initialize:function(a){fourSq.signup.page.OnboardingStep.__super__.initialize.call(this);this.$heading_=null;this.unified_=!!a.unified},decorate:function(){fourSq.signup.page.OnboardingStep.__super__.decorate.call(this);this.$heading_=this.$el.find(".heading");this.$content_=this.$el.find(".inner");this.$heading_.click(fourSq.curry(this.trigger,this,fourSq.signup.page.OnboardingStep.Events.HEADING_CLICK));this.unified_||this.logStepImpression_();
return this},stepSection_:fourSq.stats.action.Section.GENERIC_STEP,hide:function(){this.$el.hide()},show:function(){this.$content_.show();this.$el.show();this.afterShow()},expand:function(){this.$content_.slideDown(600);this.$el.show();this.afterExpand()},collapse:function(){this.$content_.slideUp(600);this.$el.show()},afterExpand:function(){this.logStepImpression_()},afterShow:function(){this.logStepImpression_()},logStepImpression_:function(){var a=fourSq.stats.Action.build(fourSq.stats.action.Action.SHOW,
{section:this.stepSection_,details:{unified:this.unified_}});fourSq.stats.logActions(a)}});fourSq.signup.page.OnboardingStep.Events={HEADING_CLICK:"HEADING_CLICK",NEXT_STEP:"NEXT_STEP",STEP_IS_INVALID:"STEP_IS_INVALID"};fourSq.signup.page.DownloadStep=function(a,b){};
fourSq.signup.page.DownloadStep=fourSq.signup.page.OnboardingStep.extend({initialize:function(){fourSq.signup.page.DownloadStep.__super__.initialize.apply(this,arguments);this.$el=$(this.el);this.iphone_=new fourSq.signup.page.DeviceDownload({el:this.$el.find(".iphone"),actionData:{element:fourSq.stats.action.Element.IPHONE,section:fourSq.signup.page.DownloadStep.SECTION}});this.android_=new fourSq.signup.page.DeviceDownload({el:this.$el.find(".android"),actionData:{element:fourSq.stats.action.Element.ANDROID,
section:fourSq.signup.page.DownloadStep.SECTION}});this.blackberry_=new fourSq.signup.page.DeviceDownload({el:this.$el.find(".blackberry"),actionData:{element:fourSq.stats.action.Element.BLACKBERRY,section:fourSq.signup.page.DownloadStep.SECTION}});this.windowsPhone_=new fourSq.signup.page.DeviceDownload({el:this.$el.find(".windows"),actionData:{element:fourSq.stats.action.Element.WINDOWS_PHONE,section:fourSq.signup.page.DownloadStep.SECTION}})},decorate:function(){fourSq.signup.page.DownloadStep.__super__.decorate.call(this);
var a=[this.iphone_,this.android_,this.blackberry_,this.windowsPhone_];_.each(a,fourSq.bind(function(b){b.decorate();b.on(fourSq.signup.page.DeviceDownload.Events.INSTALLED,fourSq.bind(function(){var c=_.without(a,b);_.each(c,function(a){a.setOtherInstalled()})},this))},this));this.unified_&&this.$el.find(".submitButton a").click(fourSq.bind(function(a){a.preventDefault();a.stopPropagation();this.trigger(fourSq.signup.page.OnboardingStep.Events.NEXT_STEP)},this));return this},stepSection_:fourSq.stats.action.Section.DOWNLOAD_STEP},
{SECTION:fourSq.stats.action.Section.DOWNLOAD});fourSq.signup.page.FindFriendsStep=function(a){};
fourSq.signup.page.FindFriendsStep=fourSq.signup.page.OnboardingStep.extend({initialize:function(a){fourSq.signup.page.FindFriendsStep.__super__.initialize.call(this,a);this.isBatman_=a.isBatman;this.includeProfileStep_=!!a.includeProfileStep;this.network_=this.networkBar_=this.$finder_=this.$splash_=null;this.twitter_=a.twitter;this.facebook_=a.facebook;this.gmail_=void 0;this.infoWindow_=this.$friendsContainer_=this.twitterOAuth_=null;this.userCards_={facebook:[],twitter:[],gmail:[]};this.fetched_=
{facebook:!1,twitter:!1,gmail:!1};this.userCount_={facebook:null,twitter:null,gmail:null};this.containers_={};fourSq.facebook.getFacebookApi(fourSq.emptyFunction);this.googleOauth_=new fourSq.google.GoogleOAuthHandler({clientId:a.googleClientId,scope:fourSq.google.GoogleOAuthHandler.Scopes.CONTACTS})},decorate:function(){fourSq.signup.page.FindFriendsStep.__super__.decorate.call(this);this.$splash_=this.$el.find(".splash");this.$finder_=this.$el.find(".finder");this.$splash_.find(".network").click(fourSq.bind(function(a){a=
$(a.currentTarget).data("network");this.showFinder_();this.goToTab_(fourSq.signup.page.FriendNetworkAdapter.fromString(a),fourSq.stats.action.Section.SPLASH)},this));this.networkBar_=(new fourSq.signup.page.ProgressBar({el:this.$el.find(".progress"),isBatman:this.isBatman_})).decorate();this.networkBar_.setMax(10);this.networkBar_.on(fourSq.signup.page.ProgressBar.Events.SELECT_NETWORK,fourSq.bind(function(a){this.goToTab_(a,this.currentSection_(),fourSq.stats.action.Component.PROGRESS_BAR)},this));
this.networkBar_.on(fourSq.signup.page.ProgressBar.Events.ADD_ALL,this.addAll_,this);this.$friendsContainer_=this.$el.find(".friends");this.containers_.facebook=this.$friendsContainer_.find(".facebook");this.containers_.twitter=this.$friendsContainer_.find(".twitter");this.containers_.gmail=this.$friendsContainer_.find(".gmail");this.infoWindow_=new fourSq.signup.page.FindFriendsInfoWindow({el:this.$el.find(".infoWindow"),hideTarget:this.$friendsContainer_});this.infoWindow_.on(fourSq.signup.page.FindFriendsInfoWindow.Events.SYNC_FACEBOOK,
fourSq.bind(function(){this.goToTab_(fourSq.signup.page.FriendNetwork.FACEBOOK,this.currentSection_(),fourSq.stats.action.Component.INFO_WINDOW)},this));this.infoWindow_.on(fourSq.signup.page.FindFriendsInfoWindow.Events.SYNC_TWITTER,fourSq.bind(function(){this.goToTab_(fourSq.signup.page.FriendNetwork.TWITTER,this.currentSection_(),fourSq.stats.action.Component.INFO_WINDOW)},this));this.infoWindow_.on(fourSq.signup.page.FindFriendsInfoWindow.Events.SYNC_GMAIL,fourSq.bind(function(){this.goToTab_(fourSq.signup.page.FriendNetwork.GMAIL,
this.currentSection_(),fourSq.stats.action.Component.INFO_WINDOW)},this));this.googleOauth_.on(fourSq.google.GoogleOAuthHandler.Events.SUCCESS,fourSq.bind(function(a){this.gmail_=a.access_token;this.fetchGmailFriends_()},this));this.googleOauth_.on(fourSq.google.GoogleOAuthHandler.Events.FAILURE,fourSq.bind(function(a){this.infoWindow_.showGmailAuthFailure()},this));this.googleOauth_.on(fourSq.google.GoogleOAuthHandler.Events.FAILURE,fourSq.bind(function(a){fourSq.debug.debug("Google Auth was unsuccessful:"+
a)},this));var a=fourSq.bind(function(){var a={section:this.currentSection_(),element:fourSq.stats.action.Element.NEXT_SECTION};return fourSq.stats.Action.build(fourSq.stats.action.Action.CLICK,a)},this),b=fourSq.bind(function(){var a={section:this.currentSection_(),component:fourSq.stats.action.Component.PROGRESS_BAR,element:fourSq.stats.action.Element.NEXT_SECTION};return fourSq.stats.Action.build(fourSq.stats.action.Action.CLICK,a)},this);this.includeProfileStep_?(this.$el.find(".submitButton a").click(fourSq.bind(function(b){b.preventDefault();
b.stopPropagation();fourSq.stats.logActions(a());this.trigger(fourSq.signup.page.OnboardingStep.Events.NEXT_STEP)},this)),this.$el.find(".nextStepPrompt a").click(fourSq.bind(function(a){a.preventDefault();a.stopPropagation();fourSq.stats.logActions(b());this.trigger(fourSq.signup.page.OnboardingStep.Events.NEXT_STEP)},this))):(fourSq.stats.Util.logActionOnLinkClick(this.$el.find(".submitButton a"),a),fourSq.stats.Util.logActionOnLinkClick(this.$el.find(".nextStepPrompt a"),b));return this},stepSection_:fourSq.stats.action.Section.FIND_FRIENDS_STEP,
showFinder_:function(){this.$splash_.hide();this.$finder_.show()},goToTab_:function(a,b,c){this.networkBar_.setNetwork(a);this.networkBar_.setStatus("");this.network_=a;var d={};fourSq.isDefinedAndNotNull(b)&&(d.section=b);fourSq.isDefinedAndNotNull(c)&&(d.component=c);a==fourSq.signup.page.FriendNetwork.FACEBOOK?(d.element=fourSq.stats.action.Element.FIND_FRIENDS_FACEBOOK,this.syncAndFetchFacebookFriends_()):a==fourSq.signup.page.FriendNetwork.TWITTER?(d.element=fourSq.stats.action.Element.FIND_FRIENDS_TWITTER,
this.syncAndFetchTwitterFriends_()):a==fourSq.signup.page.FriendNetwork.GMAIL&&(d.element=fourSq.stats.action.Element.FIND_FRIENDS_GMAIL,this.syncAndFetchGmailFriends_());a=fourSq.stats.Action.build(fourSq.stats.action.Action.CLICK,d);fourSq.stats.logActions(a)},syncAndFetchFacebookFriends_:function(){this.facebookIsSynced_()?this.fetched_.facebook?this.showFacebookUsers_():this.fetchFBFriends_():this.syncFacebook_()},syncAndFetchTwitterFriends_:function(){this.twitterIsSynced_()?this.fetched_.twitter?
this.showTwitterUsers_():this.fetchTwitterFriends_():this.syncTwitter_()},syncAndFetchGmailFriends_:function(){this.gmailIsSynced_()?this.fetched_.gmail?this.showGmailUsers_():this.fetchGmailFriends_():this.syncGmail_()},facebookIsSynced_:function(){return!!this.facebook_},twitterIsSynced_:function(){return!!this.twitter_},gmailIsSynced_:function(){return!!this.gmail_},syncFacebook_:function(){this.infoWindow_.showFacebookSyncing();var a=fourSq.bind(function(a){fourSq.debug.debug("Facebook API initialized");
a.maybeLogin(c)},this),b=fourSq.bind(function(){fourSq.debug.error("Couldn't initialize FB API.");this.infoWindow_.showFacebookAuthFailure()},this),c=fourSq.bind(function(a,b){var c=fourSq.bind(function(a){this.facebook_=a.contact.facebook;this.fetchFBFriends_()},this),g=fourSq.bind(function(){fourSq.debug.error("Error updating FB token.");this.infoWindow_.showFacebookAuthFailure()},this);a===fourSq.facebook.FacebookApi.State.CONNECTED?fourSq.api.services.User.update({fbToken:b.authResponse.accessToken},
c,g):(fourSq.debug.debug("User didn't log in to Facebook or permissions were rejected."),this.infoWindow_.showFacebookAuthFailure())},this);fourSq.facebook.getFacebookApi(a,b)},syncTwitter_:function(){if(fourSq.isDefinedAndNotNull(this.twitterOAuth_))this.twitterOAuth_.focusWindow();else{this.infoWindow_.showTwitterSyncing();this.twitterOAuth_=new fourSq.twitter.OAuth;var a=this;this.twitterOAuth_.on(fourSq.twitter.OAuth.Events.POPUP_OPEN,function(){fourSq.debug.debug("Starting Twitter auth flow.")});
this.twitterOAuth_.on(fourSq.twitter.OAuth.Events.FAILURE,function(b,c){fourSq.debug.debug("Failure to auth with Twitter.");fourSq.isDefinedAndNotNull(c)?fourSq.ui.Notifier.getInstance().error($(c)):fourSq.ui.Notifier.getInstance().genericServerError();a.infoWindow_.showTwitterAuthFailure();a.twitterOAuth_=null});this.twitterOAuth_.on(fourSq.twitter.OAuth.Events.SUCCESS,function(b){a.twitterOAuth_=null;a.twitter_=b;a.trigger(fourSq.signup.page.FindFriendsStep.Events.SYNCED_TWITTER,b);a.fetchTwitterFriends_()});
this.twitterOAuth_.connect()}},syncGmail_:function(){this.infoWindow_.showGmailSyncing();this.googleOauth_.connect()},fetchFBFriends_:function(){this.infoWindow_.showLoadingFriends();var a={intent:fourSq.api.services.Private.FacebookFriendsIntent.ALL_NO_INVITE,m:"foursquare"},b=fourSq.bind(function(a){a=_.map(a.friends,function(a){return a.user});a=_.filter(a,function(a){return fourSq.api.models.companion.user.UserUtil.isFollowable(a)});this.fetched_.facebook=!0;this.userCount_.facebook=a.length;
this.userCount_.facebook&&this.renderFriends_(a,fourSq.signup.page.FriendNetwork.FACEBOOK);this.showFacebookUsers_()},this),c=fourSq.bind(function(){fourSq.debug.error("Error loading Facebook friends.");this.infoWindow_.showFacebookAuthFailure()},this);fourSq.api.services.Private.facebookFriends(a,b,c)},showFacebookUsers_:function(){this.networkBar_.setStatus(templates.fourSq.signup.page.findfriendsstep.facebookProgressStatusMessage({foursquareUserCount:this.userCount_.facebook,isBatman:this.isBatman_}));
this.userCount_.facebook?(this.clearFriendsList_(),this.containers_.facebook.show()):this.infoWindow_.showNoFacebookFriends();this.logShowingFriendList_(fourSq.stats.action.Section.RESULTS_FACEBOOK,this.userCount_.facebook)},fetchTwitterFriends_:function(){this.infoWindow_.showLoadingFriends();var a={twitterSource:this.twitter_,m:"foursquare"},b=fourSq.bind(function(a){a=_.filter(a,function(a){return fourSq.api.models.companion.user.UserUtil.isFollowable(a)});this.fetched_.twitter=!0;this.userCount_.twitter=
a.length;this.userCount_.twitter&&this.renderFriends_(a,fourSq.signup.page.FriendNetwork.TWITTER);this.showTwitterUsers_()},this),c=fourSq.bind(function(){fourSq.debug.error("Error loading twitter friends.");this.infoWindow_.showTwitterAuthFailure()},this);fourSq.api.services.User.search(a,b,c)},showTwitterUsers_:function(){this.networkBar_.setStatus(templates.fourSq.signup.page.findfriendsstep.twitterProgressStatusMessage({foursquareUserCount:this.userCount_.twitter,isBatman:this.isBatman_}));this.userCount_.twitter?
(this.clearFriendsList_(),this.containers_.twitter.show()):this.infoWindow_.showNoTwitterFriends();this.logShowingFriendList_(fourSq.stats.action.Section.RESULTS_TWITTER,this.userCount_.twitter)},fetchGmailFriends_:function(){this.infoWindow_.showLoadingFriends();var a={googleAccessToken:this.gmail_,m:"foursquare"},b=fourSq.bind(function(a){a=_.filter(a.users,function(a){return fourSq.api.models.companion.user.UserUtil.isFollowable(a)});this.fetched_.gmail=!0;this.userCount_.gmail=a.length;this.userCount_.gmail&&
this.renderFriends_(a,fourSq.signup.page.FriendNetwork.GMAIL);this.showGmailUsers_()},this),c=fourSq.bind(function(){fourSq.debug.error("Error loading Gmail friends.");this.infoWindow_.showGmailAuthFailure()},this);fourSq.api.services.Private.googleContacts(a,b,c)},showGmailUsers_:function(){this.networkBar_.setStatus(templates.fourSq.signup.page.findfriendsstep.gmailProgressStatusMessage({foursquareUserCount:this.userCount_.gmail,isBatman:this.isBatman_}));this.userCount_.gmail?(this.clearFriendsList_(),
this.containers_.gmail.show()):this.infoWindow_.showNoGmailFriends();this.logShowingFriendList_(fourSq.stats.action.Section.RESULTS_GMAIL,this.userCount_.gmail)},logShowingFriendList_:function(a,b){var c=fourSq.stats.Action.build(fourSq.stats.action.Action.IMPRESSION,{section:a,component:fourSq.stats.action.Component.FRIEND_LIST,details:{count:b}});fourSq.stats.logActions(c)},clearFriendsList_:function(){_.each(this.containers_,function(a){a.hide()});this.$friendsContainer_.show();this.infoWindow_.hide()},
renderFriends_:function(a,b){this.clearFriendsList_();var c=$(templates.fourSq.signup.page.findfriendsstep.renderUsers({users:a}));this.containers_[b].append(c);c=_.map(c.get(),function(b,c){var f=(new fourSq.signup.page.UserCard({el:b,user:a[c],isBatman:this.isBatman_})).decorate();f.on(fourSq.signup.page.UserCard.Events.FRIEND,fourSq.bind(function(){fourSq.stats.logExperimentAction("nofpe",this.network_+"-friend-added");this.networkBar_.increment(1)},this));f.on(fourSq.signup.page.UserCard.Events.UNFRIEND,
fourSq.curry(this.networkBar_.decrement,this.networkBar_,1));return f},this);this.userCards_[b]=c},addAll_:function(){if(this.network_){var a=_.reject(this.userCards_[this.network_],function(a){return a.areFriends()},this),b=_.map(a,function(a){return a.getUser().id},this);this.isBatman_?fourSq.api.services.User.createFollows({userIds:b},fourSq.emptyFunction,fourSq.emptyFunction):fourSq.api.services.User.bulkRequest({userIds:b},fourSq.emptyFunction,fourSq.emptyFunction);0<b.length&&(this.networkBar_.increment(b.length),
fourSq.stats.logExperimentAction("nofpe",this.network_+"-friend-added",b.length));_.each(a,function(a){a.markRequested()},this);a={section:this.currentSection_(),component:fourSq.stats.action.Component.PROGRESS_BAR,element:fourSq.stats.action.Element.ADD_ALL,details:{count:b.length}};a=fourSq.stats.Action.build(fourSq.stats.action.Action.CLICK,a);fourSq.stats.logActions(a)}},currentSection_:function(){return this.network_==fourSq.signup.page.FriendNetwork.FACEBOOK?fourSq.stats.action.Section.RESULTS_FACEBOOK:
this.network_==fourSq.signup.page.FriendNetwork.TWITTER?fourSq.stats.action.Section.RESULTS_TWITTER:this.network_==fourSq.signup.page.FriendNetwork.GMAIL?fourSq.stats.action.Section.RESULTS_GMAIL:fourSq.stats.action.Section.SPLASH}});fourSq.signup.page.FindFriendsStep.Events={SYNCED_TWITTER:"SYNCED_TWITTER"};fourSq.signup.page.TasteGameStep=function(a,b){};
fourSq.signup.page.TasteGameStep=fourSq.signup.page.OnboardingStep.extend({initialize:function(){fourSq.signup.page.TasteGameStep.__super__.initialize.apply(this,arguments);this.tasteGameView_=new fourSq.taste.TasteGameView({el:this.$el.find(".tasteGameContainer"),intent:fourSq.api.services.Taste.SuggestionIntent.ONBOARDING,limit:60})},decorate:function(){fourSq.signup.page.TasteGameStep.__super__.decorate.call(this);this.tasteGameView_.render();this.tasteGameView_.on(fourSq.taste.TasteGameView.Events.TASTE_ADDED,function(){this.$el.addClass("canProceed")},
this);this.tasteGameView_.on(fourSq.taste.TasteGameView.Events.NO_TASTES,function(){this.trigger(fourSq.signup.page.OnboardingStep.Events.STEP_IS_INVALID)},this);this.unified_&&this.$el.find(".submitButton a").click(fourSq.bind(function(a){this.trigger(fourSq.signup.page.OnboardingStep.Events.NEXT_STEP)},this));return this},stepSection_:fourSq.stats.action.Section.TASTE_GAME_STEP});fourSq.signup.page.DeviceDownload=function(a){};
fourSq.signup.page.DeviceDownload=fourSq.ui.View.extend({initialize:function(a){fourSq.signup.page.DeviceDownload.__super__.initialize.call(this,a);this.$caption_=this.$el.find(".bubble");this.$installed_=this.$el.find(".installed");this.actionData_=a.actionData},decorate:function(){this.$el.click(fourSq.bind(this.setInstalled,this));fourSq.isDefinedAndNotNull(this.actionData_)&&fourSq.stats.Util.logClickAction(this.$el,this.actionData_);return this},setInstalled:function(){this.$installed_.show();
this.$caption_.hide();this.unsetOtherInstalled();this.trigger(fourSq.signup.page.DeviceDownload.Events.INSTALLED)},unsetInstalled:function(){this.$installed_.hide();this.$caption_.show()},setOtherInstalled:function(){this.unsetInstalled();this.$el.addClass("otherInstalled")},unsetOtherInstalled:function(){this.$el.removeClass("otherInstalled")}},{Events:{INSTALLED:"installed"}});fourSq.views.OnboardingFriendsPage=function(a){};fourSq.views.OnboardingFriendsPage=fourSq.views.Page.extend({initialize:function(a){fourSq.views.OnboardingFriendsPage.__super__.initialize.call(this);var b=fourSq.api.models.companion.user.UserUtil.currentUser();this.findFriendsStep_=(new fourSq.signup.page.FindFriendsStep({el:$(".findFriendsStep"),twitter:b&&b.contact&&b.contact.twitter,facebook:b&&b.contact&&b.contact.facebook,googleClientId:a.googleClientId,isBatman:a.isBatman})).decorate()},pageViewName:function(){return fourSq.stats.action.View.ADD_FRIENDS_NEW}});fourSq.signup.page.OnboardingDownloadPage=function(a,b){};fourSq.signup.page.OnboardingDownloadPage=fourSq.views.Page.extend({initialize:function(){fourSq.signup.page.OnboardingDownloadPage.__super__.initialize.call(this);this.downloadStep_=(new fourSq.signup.page.DownloadStep({el:$(".downloadStep")})).decorate()},pageViewName:function(){return fourSq.stats.action.View.SIGNUP_DOWNLOAD_NEW}});fourSq.views.OnboardingPage=function(a){};
fourSq.views.OnboardingPage=fourSq.views.Page.extend({initialize:function(a){fourSq.views.OnboardingPage.__super__.initialize.call(this);this.initialStep_=a.initialStep;this.includeTasteGameStep_=!0;fourSq.api.models.companion.user.UserUtil.currentUser();this.tasteGameStep_=null;this.tasteGameStep_=new fourSq.signup.page.TasteGameStep({el:$(".tasteGameStep"),unified:!0});this.setupExpansions_();this.tasteGameStep_.decorate();a=_.once(fourSq.bind(this.showInitialStep_,this));fourSq.taste.LocalTastePersister.getInstance().maybeSaveToAPI(a,
a);_.delay(a,1500)},showInitialStep_:function(){this.tasteGameStep_.show()},setupExpansions_:function(){var a=[this.tasteGameStep_];_.each(a,function(b){b.on(fourSq.signup.page.OnboardingStep.Events.HEADING_CLICK,function(){var c=_.without(a,b);_.each(c,function(a){a.collapse()},this);b.expand()})},this);if(this.includeTasteGameStep_)this.tasteGameStep_.on(fourSq.signup.page.OnboardingStep.Events.STEP_IS_INVALID,fourSq.bind(function(){this.tasteGameStep_.collapse();this.tasteGameStep_.$el.hide();
this.includeTasteGameStep_=!1;window.location.href="/"},this))},pageViewName:function(){return fourSq.stats.action.View.ONBOARDING}});fourSq.views.OnboardingPage.Steps={TASTE:"taste"};fourSq.signup.page.ProgressBar=function(a){};
fourSq.signup.page.ProgressBar=fourSq.ui.View.extend({initialize:function(a){fourSq.signup.page.ProgressBar.__super__.initialize.call(this,a);this.isBatman_=a.isBatman;this.$nextStepMessage_=this.$statusBarMessage_=this.$status_=this.$addAll_=this.$caret_=this.$bar_=null;this.max_=100;this.value_=0},decorate:function(){this.$bar_=this.$el.find(".bar");this.$caret_=this.$el.find(".caret");this.$el.find(".networks li").click(fourSq.bind(function(a){a=$(a.currentTarget).data("network");a=fourSq.signup.page.FriendNetworkAdapter.fromString(a);
this.trigger(fourSq.signup.page.ProgressBar.Events.SELECT_NETWORK,a);this.setNetwork(a)},this));this.$addAll_=this.$el.find(".addAll");this.$addAll_.click(fourSq.curry(this.trigger,this,fourSq.signup.page.ProgressBar.Events.ADD_ALL));this.$status_=this.$el.find(".status");this.$nextStepMessage_=this.$el.find(".nextStepPrompt");this.$statusBarMessage_=this.$el.find(".statusMessage");return this},setNetwork:function(a){this.$caret_.removeClass().addClass("caret").addClass(a)},setMax:function(a){this.max_=
a;this.recalculateProgress_()},setValue:function(a){this.value_=a;this.recalculateProgress_()},increment:function(a){this.value_+=a;this.recalculateProgress_()},decrement:function(a){this.value_-=a;this.recalculateProgress_()},setStatus:function(a){this.$status_.text(a)},recalculateProgress_:function(){var a=this.value_/this.max_*100;this.setProgressPercent_(a);100<=a?(this.showNextStepMessage_(),this.showBarStatusMessage_(this.value_)):this.hideBarStatusMessage_();0<a?this.hideStatus_():this.showStatus_()},
setProgressPercent_:function(a){this.$bar_.css("width",a+"%")},showNextStepMessage_:function(){this.$nextStepMessage_.slideDown(800)},showBarStatusMessage_:function(a){this.$statusBarMessage_.text(templates.fourSq.signup.page.findfriendsstep.progressBarStatusMessage({requestCount:a,isBatman:this.isBatman_}));this.$statusBarMessage_.fadeIn()},hideBarStatusMessage_:function(){this.$statusBarMessage_.hide()},hideStatus_:function(){this.$status_.hide()},showStatus_:function(){this.$status_.show()}});
fourSq.signup.page.ProgressBar.Events={SELECT_NETWORK:"SELECT_NETWORK",ADD_ALL:"ADD_ALL"};fourSq.signup.page.FriendNetwork={FACEBOOK:"facebook",TWITTER:"twitter",GMAIL:"gmail"};fourSq.signup.page.FriendNetworkAdapter={fromString:function(a){return this.networks_[a]||this.default_},networks_:{facebook:fourSq.signup.page.FriendNetwork.FACEBOOK,twitter:fourSq.signup.page.FriendNetwork.TWITTER,gmail:fourSq.signup.page.FriendNetwork.GMAIL},default_:fourSq.signup.page.FriendNetwork.FACEBOOK};fourSq.signup.page.UserCard=function(a){};
fourSq.signup.page.UserCard=fourSq.ui.View.extend({initialize:function(a){fourSq.signup.page.UserCard.__super__.initialize.call(this,a);this.user_=a.user;this.addFriendButton_=null;this.isBatman_=a.isBatman},decorate:function(){this.addFriendButton_=(new fourSq.signup.page.AddFriendButton({el:this.$el.find(".buttonContainer"),user:this.user_,isBatman:this.isBatman_})).decorate();this.addFriendButton_.on(fourSq.signup.page.AddFriendButton.Events.FRIEND,fourSq.curry(this.trigger,this,fourSq.signup.page.UserCard.Events.FRIEND));
this.addFriendButton_.on(fourSq.signup.page.AddFriendButton.Events.UNFRIEND,fourSq.curry(this.trigger,this,fourSq.signup.page.UserCard.Events.UNFRIEND));return this},markRequested:function(){this.addFriendButton_.setState(fourSq.signup.page.AddFriendButton.States.FRIENDS)},getUser:function(){return this.user_},areFriends:function(){return this.addFriendButton_.getState()==fourSq.signup.page.AddFriendButton.States.FRIENDS}});fourSq.signup.page.UserCard.Events={FRIEND:"FRIEND",UNFRIEND:"UNFRIEND"};fourSq.signup.page.AddFriendButton=function(a){};
fourSq.signup.page.AddFriendButton=fourSq.ui.View.extend({initialize:function(a){fourSq.signup.page.AddFriendButton.__super__.initialize.call(this,a);this.user_=a.user;this.isBatman_=a.isBatman;this.state_=this.determineState_(this.user_)},determineState_:function(a){return this.isBatman_?fourSq.api.models.companion.user.UserUtil.isFollowable(a)?fourSq.signup.page.AddFriendButton.States.NOT_FRIENDS:fourSq.signup.page.AddFriendButton.States.FRIENDS:fourSq.api.models.companion.user.UserUtil.isFriendable(a)?
fourSq.signup.page.AddFriendButton.States.NOT_FRIENDS:fourSq.signup.page.AddFriendButton.States.FRIENDS},decorate:function(){this.$el.find(".addButton").click(fourSq.bind(function(a){a.stopPropagation();this.requestFriendship_()},this));this.$el.find(".unfriendButton").click(fourSq.bind(function(a){a.stopPropagation();this.unfriend_()},this));this.setState(this.state_);return this},setState:function(a){this.state_=a;a==fourSq.signup.page.AddFriendButton.States.FRIENDS?this.$el.addClass("friends"):
a==fourSq.signup.page.AddFriendButton.States.NOT_FRIENDS&&this.$el.removeClass("friends")},requestFriendship_:function(){var a=fourSq.bind(function(){this.setState(fourSq.signup.page.AddFriendButton.States.NOT_FRIENDS);this.trigger(fourSq.signup.page.AddFriendButton.Events.UNFRIEND)},this);this.isBatman_?fourSq.api.services.User.createFollow({userId:this.user_.id,m:"foursquare"},fourSq.emptyFunction,a):fourSq.api.services.User.request({id:this.user_.id},fourSq.emptyFunction,a);this.setState(fourSq.signup.page.AddFriendButton.States.FRIENDS);
this.trigger(fourSq.signup.page.AddFriendButton.Events.FRIEND)},unfriend_:function(){var a=fourSq.bind(function(){this.setState(fourSq.signup.page.AddFriendButton.States.FRIENDS);this.trigger(fourSq.signup.page.AddFriendButton.Events.FRIEND)},this);this.isBatman_?fourSq.api.services.User.unfollow({userId:this.user_.id,m:"foursquare"},fourSq.emptyFunction,a):fourSq.api.services.User.unfriend({id:this.user_.id},fourSq.emptyFunction,a);this.setState(fourSq.signup.page.AddFriendButton.States.NOT_FRIENDS);
this.trigger(fourSq.signup.page.AddFriendButton.Events.UNFRIEND)},getState:function(){return this.state_}});fourSq.signup.page.AddFriendButton.Events={FRIEND:"FRIEND",UNFRIEND:"UNFRIEND"};fourSq.signup.page.AddFriendButton.States={FRIENDS:"FRIENDS",NOT_FRIENDS:"NOT_FRIENDS"};fourSq.signup.page.FindFriendsInfoWindow=function(a){};
fourSq.signup.page.FindFriendsInfoWindow=fourSq.ui.View.extend({initialize:function(a){this.hideTarget_=a.hideTarget},hide:function(){this.$el.hide()},showLoadingFriends:function(){this.showTemplate_($(templates.fourSq.signup.page.findfriendsstep.loader()))},showFacebookSyncing:function(){this.showTemplate_($(templates.fourSq.signup.page.findfriendsstep.facebookSyncInfoWindow()));this.addSyncFacebookHandler_()},showTwitterSyncing:function(){this.showTemplate_($(templates.fourSq.signup.page.findfriendsstep.twitterSyncInfoWindow()));this.addSyncTwitterHandler_()},
showGmailSyncing:function(){this.showTemplate_($(templates.fourSq.signup.page.findfriendsstep.gmailSyncInfoWindow()));this.addSyncGmailHandler_()},showNoFacebookFriends:function(){this.showTemplate_($(templates.fourSq.signup.page.findfriendsstep.noFacebookFriendsInfoWindow()));this.addSyncTwitterHandler_();this.addSyncGmailHandler_()},showNoTwitterFriends:function(){this.showTemplate_($(templates.fourSq.signup.page.findfriendsstep.noTwitterFriendsInfoWindow()));this.addSyncFacebookHandler_();this.addSyncGmailHandler_()},
showNoGmailFriends:function(){this.showTemplate_($(templates.fourSq.signup.page.findfriendsstep.noGmailFriendsInfoWindow()));this.addSyncFacebookHandler_();this.addSyncTwitterHandler_()},showFacebookAuthFailure:function(){this.showTemplate_($(templates.fourSq.signup.page.findfriendsstep.facebookAuthFailureInfoWindow()));this.addSyncFacebookHandler_()},showTwitterAuthFailure:function(){this.showTemplate_($(templates.fourSq.signup.page.findfriendsstep.twitterAuthFailureInfoWindow()));this.addSyncTwitterHandler_()},
showGmailAuthFailure:function(){this.showTemplate_($(templates.fourSq.signup.page.findfriendsstep.gmailAuthFailureInfoWindow()));this.addSyncGmailHandler_()},showTemplate_:function(a){this.hideTarget_&&this.hideTarget_.hide();this.$el.empty();this.$el.append(a);this.$el.show()},addSyncFacebookHandler_:function(){this.$el.find(".syncFacebook").click(fourSq.curry(this.trigger,this,fourSq.signup.page.FindFriendsInfoWindow.Events.SYNC_FACEBOOK))},addSyncTwitterHandler_:function(){this.$el.find(".syncTwitter").click(fourSq.curry(this.trigger,
this,fourSq.signup.page.FindFriendsInfoWindow.Events.SYNC_TWITTER))},addSyncGmailHandler_:function(){this.$el.find(".syncGmail").click(fourSq.curry(this.trigger,this,fourSq.signup.page.FindFriendsInfoWindow.Events.SYNC_GMAIL))}});fourSq.signup.page.FindFriendsInfoWindow.Events={SYNC_FACEBOOK:"SYNC_FACEBOOK",SYNC_TWITTER:"SYNC_TWITTER",SYNC_GMAIL:"SYNC_GMAIL"};fourSq.profilesettings.shared.EditProfileForm=function(a){};
fourSq.profilesettings.shared.EditProfileForm=fourSq.ui.View.extend({initialize:function(a){this.formValidator_=this.$importTwitterLink_=this.bioCharCounter_=this.$bio_=this.$form_=this.phoneField_=this.$phoneContainer_=this.$firstNameContainer_=this.$emailContainer_=null;this.twitter_=a.twitter;this.twitterOAuth_=null;this.loggingSection_=a.loggingSection},decorate:function(){this.$form_=this.$el.find("form");this.$emailContainer_=this.$el.find(".emailContainer");this.$firstNameContainer_=this.$el.find(".firstNameContainer");
this.$bio_=this.$el.find(".bioContainer");this.$phoneContainer_=this.$el.find(".phoneContainer");this.bioCharCounter_=new fourSq.ui.CharCounter({el:this.$bio_.find("textarea").get(0),counter:this.$bio_.find(".charCount"),maxLength:160});this.$importTwitterLink_=this.$bio_.find(".importTwitter");this.$importTwitterLink_.click(fourSq.bind(this.importTwitterBio_,this));this.setupValidators_();this.setupFocusStates_();this.setupFullFormValidation_();this.setupLocationAutocomplete_();this.runInitialValidation_();
this.setupLabelTooltips_();return this},setupLocationAutocomplete_:function(){this.locationInputView_=(new fourSq.ui.LocationInputView({el:this.$el.find(".locationContainer"),enableResetButton:!1,useAutocomplete:!0,ignoreEnter:!1,llHinter:function(){return fourSq.api.models.companion.user.UserUtil.latLng()},baseActionData:{section:this.loggingSection_},appendTo:this.$el.find(".locationContainer").eq(0)})).decorate()},importTwitterBio_:function(){this.$importTwitterLink_.addClass("loading");var a=
fourSq.bind(function(a){a.twitterUser&&a.twitterUser.description&&(this.$bio_.find("textarea").val(a.twitterUser.description),this.bioCharCounter_.update());this.$importTwitterLink_.removeClass("loading")},this),b=fourSq.bind(function(){this.$importTwitterLink_.removeClass("loading");fourSq.debug.error("Error fetching Twitter user information")},this);this.twitter_?fourSq.api.services.Private.twitterUser({},a,b):this.syncTwitter_()},setupValidators_:function(){var a=fourSq.api.models.companion.user.UserUtil.currentUser();
this.emailField_=(new fourSq.signup.page.ValidatedEmailField({el:this.$emailContainer_,allowedEmail:a&&a.contact&&a.contact.email,logActionData:{section:this.loggingSection_,element:fourSq.stats.action.Element.EMAIL},loggingOptions:{suppressFailureLogging:!0}})).decorate();this.phoneField_=(new fourSq.signup.page.ValidatedPhoneField({el:this.$phoneContainer_,allowedUserId:a.id,logActionData:{section:this.loggingSection_,element:fourSq.stats.action.Element.PHONE},loggingOptions:{suppressFailureLogging:!0}})).decorate();
this.firstNameField_=(new fourSq.signup.page.ValidatedLengthField({el:this.$firstNameContainer_,logActionData:{section:this.loggingSection_,element:fourSq.stats.action.Element.FIRST_NAME},minLength:1})).decorate();this.bioField_=(new fourSq.signup.page.ValidatedMaxLengthField({el:this.$bio_,logActionData:{section:this.loggingSection_,element:fourSq.stats.action.Element.BIO},maxLength:160})).decorate()},runInitialValidation_:function(){""!==this.$emailContainer_.find("input").val()&&this.emailField_.validate();
this.firstNameField_.validate();""!==this.$bio_.find("textarea").val()&&this.bioField_.validate();""!==this.$phoneContainer_.find("input").val()&&this.phoneField_.validate()},setupLabelTooltips_:function(){this.$el.find(".labelTip").tooltip()},setupFocusStates_:function(){var a=this.$el.find(".decor");_.each(a,function(a){$(a).focusin(function(a){$(this).addClass("focus")}).focusout(function(c){$.contains(a,c.relatedTarget)||$(this).removeClass("focus")})},this)},setupFullFormValidation_:function(){this.formValidator_=
new fourSq.signup.page.ValidatorAggregator({validators:[this.emailField_,this.firstNameField_,this.phoneField_,this.bioField_]});this.formValidator_.on(fourSq.signup.page.Validator.Events.SUCCESS,function(){var a=fourSq.stats.Action.build(fourSq.stats.action.Action.SUBMIT,{section:this.loggingSection_});fourSq.stats.logActionWithDelay(a,fourSq.bind(function(){this.$form_.get(0).submit()},this))},this);this.formValidator_.on(fourSq.signup.page.Validator.Events.FAILURE,function(){fourSq.debug.error("Tried to submit form but there was a validation error.")},
this);(new fourSq.signup.page.ValidatorLogger({section:this.loggingSection_})).respondTo(this.formValidator_);this.$form_.submit(fourSq.bind(function(a){a.preventDefault();this.formValidator_.validate()},this))},syncTwitter_:function(){fourSq.isDefinedAndNotNull(this.twitterOAuth_)?this.twitterOAuth_.focusWindow():(this.twitterOAuth_=new fourSq.twitter.OAuth,this.twitterOAuth_.on(fourSq.twitter.OAuth.Events.FAILURE,function(a,b){fourSq.debug.debug("Failure to auth with Twitter.");fourSq.isDefinedAndNotNull(b)?
fourSq.ui.Notifier.getInstance().error($(b)):fourSq.ui.Notifier.getInstance().genericServerError();this.twitterOAuth_=null;this.$importTwitterLink_.removeClass("loading")},this),this.twitterOAuth_.on(fourSq.twitter.OAuth.Events.SUCCESS,function(a){this.twitterOAuth_=null;this.twitter_=a;this.importTwitterBio_()},this),this.twitterOAuth_.connect())}});fourSq.taste.TasteGameView=function(a){};
fourSq.taste.TasteGameView=fourSq.ui.View.extend({initialize:function(a){this.knownTastes_={};this.intent_=a.intent;this.initialSuggestions_=a.initialSuggestions;var b=fourSq.api.models.companion.user.UserUtil.currentUser();this.uid_=a.uid||b&&b.id||void 0;this.tastePersister_=null;this.tastePersister_=this.uid_?fourSq.taste.ApiTastePersister.getInstance():fourSq.taste.LocalTastePersister.getInstance();this.campaignParams_=a.campaignParams;this.$yourTasteGroups_=this.$allYourTastes_=this.$yourTastesLink_=
this.$yourTastes_=this.$viewYourTastes_=this.$loadMoreSuggestions_=this.$suggestionsTasteList_=this.$viewSuggestions_=this.$suggestions_=null;this.seed_=void 0;this.offset_=0;this.limit_=a.limit||20;this.isRefreshing_=!1;this.userTasteCount_=0;this.logView_=a.view;this.logSection_=a.section},render:function(){var a=templates.fourSq.tastes.tastegame.skeleton({loggedIn:!!this.uid_});this.$el.empty().append(a);this.$base_=this.$el.children(".tasteGame");this.$suggestions_=this.$base_.find(".suggestions");
this.$yourTastes_=this.$base_.find(".yourTastes");this.$suggestionsTasteList_=this.$suggestions_.find(".tasteList");this.$loadMoreSuggestions_=this.$suggestions_.find(".loadMore");this.$viewYourTastes_=this.$suggestions_.find(".viewYourTastes");this.$viewSuggestions_=this.$base_.find(".viewSuggestions");this.$yourTasteGroups_=this.$yourTastes_.find(".tasteGroups");return this.decorate()},decorate:function(){this.$loadMoreSuggestions_.click(fourSq.bind(this.refresh,this));fourSq.stats.Util.logClickAction(this.$loadMoreSuggestions_,
{view:this.logView_,section:this.logSection_,element:fourSq.stats.action.Element.MORE});this.$el.on("click",".tasteList .taste",fourSq.bind(function(a){this.toggleTaste_($(a.currentTarget))},this));this.initialSuggestions_?this.refreshSuccess_(this.initialSuggestions_):this.refresh();this.maybeLoadUserTastes_();return this},refresh:function(){this.isRefreshing_||(this.setIsRefreshing_(!0),fourSq.api.services.Taste.suggestions({intent:this.intent_,seed:this.seed_,offset:this.offset_,limit:this.limit_,
ll:fourSq.api.models.companion.user.UserUtil.latLng(),campaignParams:this.campaignParams_},fourSq.bind(this.refreshSuccess_,this),fourSq.bind(this.refreshError_,this)))},refreshSuccess_:function(a){0===a.tastes.length&&this.trigger(fourSq.taste.TasteGameView.Events.NO_TASTES);_.each(a.tastes,function(a){this.knownTastes_[a.id]=a},this);if(!this.uid_){var b=fourSq.taste.LocalTastePersister.getInstance().getSavedTastes();_.each(b,fourSq.bind(function(a){(a=this.knownTastes_[a.id])&&(a.onUser=!0)},this))}b=
templates.fourSq.tastes.tastegame.tasteList({tastes:a.tastes});this.$suggestionsTasteList_.empty().append(b);this.seed_=a.seed;this.offset_+=this.limit_;this.setIsRefreshing_(!1);this.$base_.removeClass("loading")},refreshError_:function(){this.setIsRefreshing_(!1);this.trigger(fourSq.taste.TasteGameView.Events.NO_TASTES)},setIsRefreshing_:function(a){this.isRefreshing_=a;this.$suggestions_.toggleClass("loading",a)},toggleTaste_:function(a){var b=a.attr("data-tasteid"),c=this.knownTastes_[b];c||(c=
{id:b,text:""});var d=this.$el.find('[data-tasteid\x3d"'+b+'"]').toArray();_.each(d,function(a){var b=$(a);b.removeClass("pop");b.toggleClass("added");_.defer(function(){b.addClass("pop")})},this);a.hasClass("added")?(this.tastePersister_.add(c,fourSq.curry(this.tasteUpdateSuccess_,this,a),fourSq.curry(this.tasteUpdateError_,this,a)),fourSq.stats.logActions(fourSq.stats.Action.build(fourSq.stats.action.Action.ADD,{view:this.logView_,section:this.logSection_,component:fourSq.stats.action.Component.TASTE,
element:fourSq.stats.action.Element.TASTE,ids:fourSq.api.models.companion.log.Oids.build({tasteId:b})})),this.userTasteCount_+=1,this.trigger(fourSq.taste.TasteGameView.Events.TASTE_ADDED,this.knownTastes_[b])):(this.tastePersister_.remove(c,fourSq.curry(this.tasteUpdateSuccess_,this,a),fourSq.curry(this.tasteUpdateError_,this,a)),this.userTasteCount_-=1,fourSq.stats.logActions(fourSq.stats.Action.build(fourSq.stats.action.Action.REMOVE,{view:this.logView_,section:this.logSection_,component:fourSq.stats.action.Component.TASTE,
element:fourSq.stats.action.Element.ADDED_TASTE,ids:fourSq.api.models.companion.log.Oids.build({tasteId:b})})),this.trigger(fourSq.taste.TasteGameView.Events.TASTE_REMOVED,this.knownTastes_[b]));this.updateUserTasteCount_()},tasteUpdateSuccess_:function(a){},tasteUpdateError_:function(a){a.toggleClass("added");this.userTasteCount_+=a.hasClass("added")?1:-1;this.updateUserTasteCount_()},maybeLoadUserTastes_:function(){this.uid_&&(this.$yourTasteGroups_.empty(),this.$yourTastes_.addClass("loading"),
fourSq.api.services.User.tastes({uid:this.uid_},fourSq.bind(this.loadUserTastesSuccess_,this),fourSq.bind(this.loadUserTastesError_,this)))},loadUserTastesSuccess_:function(a){var b=_.find(a.groups,function(a){return"allTastes"===a.type});this.userTasteCount_=b?b.count:0;this.$yourTastes_.removeClass("loading");this.$base_.removeClass("loading");a=templates.fourSq.tastes.tastegame.userTasteGroups({groups:a.groups});this.$yourTasteGroups_.empty().append(a);this.$allYourTastes_=this.$yourTasteGroups_.find(".group[data-type\x3dallTastes] .groupName");
this.updateUserTasteCount_()},loadUserTastesError_:function(){this.$yourTastes_.removeClass("loading")},updateUserTasteCount_:function(){if(this.uid_){var a=templates.fourSq.tastes.tastegame.yourTastesLink({tasteCount:this.userTasteCount_});this.$viewYourTastes_.empty().append(a);this.$yourTastesLink_=this.$viewYourTastes_.find(".yourTastesLink");this.$yourTastesLink_.click(fourSq.bind(this.showYourTastes,this));fourSq.stats.Util.logClickAction(this.$yourTastesLink_,{view:this.logView_,section:this.logSection_,
element:fourSq.stats.action.Element.YOUR_TASTES});a=templates.fourSq.tastes.tastegame.allYourTastes({tasteCount:this.userTasteCount_});this.$allYourTastes_.empty().append(a)}},isShowingYourTastes:function(){return this.showingYourTastes_},showYourTastes:function(){this.trigger(fourSq.taste.TasteGameView.Events.SHOW_YOUR_TASTES);this.showingYourTastes_=!0;this.maybeLoadUserTastes_();this.$base_.addClass("showingYourTastes")},hideYourTastes:function(){this.trigger(fourSq.taste.TasteGameView.Events.HIDE_YOUR_TASTES);
this.showingYourTastes_=!1;this.$base_.removeClass("showingYourTastes")}},{Events:{TASTE_ADDED:"TasteGameView:TASTE_ADDED",TASTE_REMOVED:"TasteGameView:TASTE_REMOVED",NO_TASTES:"TasteGameView:NO_TASTES",SHOW_YOUR_TASTES:"TasteGameView:SHOW_YOUR_TASTES",HIDE_YOUR_TASTES:"TasteGameView:HIDE_YOUR_TASTES"}});fourSq.taste.TastePersister=function(a,b){};fourSq.taste.TastePersister=fourSq.Class.extend({add:fourSq.abstractMethod,remove:fourSq.abstractMethod});fourSq.taste.ApiTastePersister=function(a,b){};fourSq.taste.ApiTastePersister=fourSq.taste.TastePersister.extend({add:function(a,b,c){fourSq.api.services.Taste.add({tasteId:a.id},b,c)},remove:function(a,b,c){fourSq.api.services.Taste.remove({tasteId:a.id},b,c)}},{instance_:null,getInstance:function(){fourSq.taste.ApiTastePersister.instance_||(fourSq.taste.ApiTastePersister.instance_=new fourSq.taste.ApiTastePersister);return fourSq.taste.ApiTastePersister.instance_}});fourSq.taste.LocalTastePersister=function(a,b){};
fourSq.taste.LocalTastePersister=fourSq.taste.TastePersister.extend({initialize:function(){this.selectedTastes_=this.getTastesFromStorage_();this.counter_=0;this.promptEvery_=5;this.showPrompt_=fourSq.emptyFunction},showPrompt:function(){this.showPrompt_()},setOptions:function(a){this.promptEvery_=fourSq.isDefinedAndNotNull(a.promptEvery)?a.promptEvery:this.promptEvery_;this.showPrompt_=fourSq.isDefinedAndNotNull(a.showPrompt)?a.showPrompt:this.showPrompt_},add:function(a,b,c){_.find(this.selectedTastes_,
function(b){return b.id===a.id})||(this.selectedTastes_.push(a),this.saveTastes_());this.maybePrompt_();b()},remove:function(a,b,c){this.selectedTastes_=_.filter(this.selectedTastes_,function(b){return b.id!==a.id});this.saveTastes_();b()},getSavedTastes:function(){return this.selectedTastes_},clearSavedTastes:function(){this.selectedTastes_=[];fourSq.util.sessionStorage.remove(fourSq.taste.LocalTastePersister.STORAGE_KEY_)},maybeSaveToAPI:function(a,b,c){a=a||fourSq.emptyFunction;b=b||fourSq.emptyFunction;
0<this.selectedTastes_.length&&(c||fourSq.api.models.companion.user.UserUtil.isLoggedIn())?(c=_.map(this.selectedTastes_,function(a){return a.id}),fourSq.api.services.Taste.add({tasteId:c},fourSq.bind(function(){var b=this.selectedTastes_.length;this.clearSavedTastes();a(b)},this),b)):_.defer(fourSq.curry(a,null,0))},getTastesFromStorage_:function(){return fourSq.util.sessionStorage.getArrayWithDefault(fourSq.taste.LocalTastePersister.STORAGE_KEY_,[])},saveTastes_:function(){fourSq.util.sessionStorage.setArray(fourSq.taste.LocalTastePersister.STORAGE_KEY_,
this.selectedTastes_)},maybePrompt_:function(){0<++this.counter_%this.promptEvery_||this.showPrompt_()}},{STORAGE_KEY_:"fs:tastes:selected",instance_:null,getInstance:function(){fourSq.taste.LocalTastePersister.instance_||(fourSq.taste.LocalTastePersister.instance_=new fourSq.taste.LocalTastePersister);return fourSq.taste.LocalTastePersister.instance_}});$(function(){fourSq.taste.LocalTastePersister.getInstance().setOptions({promptEvery:5,showPrompt:function(){fourSq.signup.signupDialogFactory({titleText:templates.fourSq.ui.signupPrompt.standardTasteHeader(),bodyText:templates.fourSq.ui.signupPrompt.standardTasteBody(),trigger:fourSq.signup.Trigger.TASTE_GAME_DIALOG,opacity:.2}).show()}})});fourSq.tip.TipCreator=function(a){};
fourSq.tip.TipCreator=fourSq.ui.View.extend({initialize:function(a){this.currentPhoto_=a.photo;this.$addTipBlock_=$(templates.fourSq.photos.addTipBlock({}))},decorate:function(){this.$el.click(fourSq.bind(this.openTipBlock_,this));this.$addTipBlock_.find(".shareButton").click(fourSq.bind(this.shareTip_,this));$(document).on("close.facebox",fourSq.curry(this.trigger,this,fourSq.tip.TipCreator.Events.HIDE));return this},setCurrentPhoto:function(a){this.currentPhoto_=a},openTipBlock_:function(a){fourSq.isUndefinedOrNull(this.currentPhoto_)||
(a.stopPropagation(),a.preventDefault(),this.$addTipBlock_.find("#tipText").val("").attr("placeholder",templates.fourSq.photos.addTipPlaceholder({venue:this.currentPhoto_.venue})),$.facebox({el:this.$addTipBlock_}),this.trigger(fourSq.tip.TipCreator.Events.SHOW))},shareTip_:function(){if(!fourSq.isUndefinedOrNull(this.currentPhoto_)){var a=$.trim(this.$addTipBlock_.find("#tipText").val());if(0!==a.length){var b={photoId:this.currentPhoto_.id};fourSq.api.services.Tip.add(this.currentPhoto_.venue.id,
a,fourSq.bind(this.handleTipAddSuccess_,this),fourSq.bind(this.handleTipAddFailure_,this),b)}}},handleTipAddSuccess_:function(a){fourSq.ui.Notifier.getInstance().info(helpers.tip.tipCreationSuccess());window.setTimeout(function(){$(document).trigger("close.facebox")},1E3);this.$el.hide()},handleTipAddFailure_:function(a,b){this.currentPhoto_&&(fourSq.ui.Notifier.getInstance().info(helpers.tip.tipCreationFailure()),window.setTimeout(function(){$(document).trigger("close.facebox")},1E3))}},{Events:{HIDE:"hide",
SHOW:"show"}});fourSq.views.Toggle=function(a,b){};
fourSq.views.Toggle=fourSq.ui.View.extend({initialize:function(a){this.callback=a.callback;this.touched_=!1},render:function(){this.setEl_($(templates.fourSq.ui.inputs.basicToggle({contents:this.options.text.toString(),checkboxName:this.options.name.toString()})));return this.decorate()},decorate:function(){this.checkbox_=$("input.toggleCheckbox",this.el);this.checkbox_.change(fourSq.bind(this.handleChange_,this));this.name=this.checkbox_.get(0).name;this.$el.click(fourSq.bind(this.handleClick_,this));
return this},touched:function(){return this.touched_},checked:function(){return this.checkbox_[0].checked},setChecked:function(a){this.checkbox_.prop("checked",a);this.handleChange_()},handleChange_:function(){this.checkbox_.prop("checked")?$(this.el).addClass("selected"):$(this.el).removeClass("selected");fourSq.isDefinedAndNotNull(this.callback)&&this.callback();this.touched_=!0},handleClick_:function(a){this.setChecked(!this.checked())}});fourSq.views.UserInput=function(a,b){};
fourSq.views.UserInput=fourSq.ui.View.extend({initialize:function(a){fourSq.views.UserInput.__super__.initialize.call(this,a);this.multi_=a.multi;var b=a.allowedTypes||["user","page","chain","venuePage","celebrity"];this.allowedTypes_={};_.each(b,fourSq.bind(function(a){this.allowedTypes_[a]=a},this));this.twitterRegex_=/^\s*@?(\S+)\s*$/;this.twitterUrlRegex_=/^.*foursquare.com\/([^\/\?]+).*$/;this.userUrlRegex_=/^.*foursquare.com\/user\/([0-9]+).*$/;this.useridRegex_=/^\s*([0-9]+)\s*$/;this.userList_=
[];this.initialQuery_=a.initial},canDecorate:function(){return $(this.el).hasClass("userInputForm")||0<$(".userInputForm",this.el).length},render:function(){$(this.el).append($(templates.fourSq.ui.inputs.userInputContainer()));this.decorate();return this},decorate:function(){if(!this.canDecorate())throw Error("Invalid element");this.inputElem_=$(".userFinderInput",this.el);this.listElem_=$(".userFinderList",this.el);this.alertElem_=$(".userFinderAlert",this.el);this.lookupPages_(this.initialQuery_);
this.inputElem_.change(fourSq.bind(function(){this.lookupPages_(this.inputElem_.val())},this))},addOnChangeCallback:function(a){this.listElem_.on(fourSq.views.UserInput.Events.LISTCHANGE,fourSq.bind(function(){a(this.userList_)},this));this.triggerChange_()},triggerChange_:function(){this.listElem_.trigger(fourSq.views.UserInput.Events.LISTCHANGE)},indexOfUser_:function(a){for(var b=0;b<this.userList_.length;b++)if(this.userList_[b].id==a)return b;return-1},buildQuery_:function(a){if(0==fourSq.util.trim(a).length)return null;
a=this.multi_?a.split(","):[a];var b=[],c=[],d=[];_.each(a,fourSq.bind(function(a){var f;(f=this.userUrlRegex_.exec(a))||(f=this.useridRegex_.exec(a))?c.push(f[1]):(f=this.twitterUrlRegex_.exec(a))||(f=this.twitterRegex_.exec(a))?d.push(f[1]):0<fourSq.util.trim(a).length&&b.push({t:"badquery",v:a})},this));return{userIds:c,twitter:d,errors:b}},lookupPages_:function(a){this.alertElem_.empty();var b=this.buildQuery_(a);if(null!=b){var c=b.errors;if(0<b.twitter.length||0<b.userIds.length){var d={};0<
b.twitter.length&&(d.twitter=b.twitter.join(","));0<b.userIds.length&&(d.userIds=b.userIds.join(","));fourSq.api.services.User.search(d,fourSq.bind(function(b){0==b.length?(c.push({t:"nonefound",v:a}),this.renderErrors_(c)):(b=_.filter(b,fourSq.bind(function(a){return 0>this.indexOfUser_(a.id)},this)),_.each(b,fourSq.bind(function(a){this.allowedTypes_[a.type||"user"]||c.push({t:"badtype",v:fourSq.api.models.companion.user.UserUtil.fullName(a)})},this)),b=_.filter(b,fourSq.bind(function(a){return this.allowedTypes_[a.type||
"user"]},this)),this.userList_=this.multi_?this.userList_.concat(b):0<b.length?[b[0]]:this.userList_,this.listElem_.empty(),_.each(this.userList_,fourSq.bind(function(a){var b="userInput"+a.id,c=$(templates.fourSq.ui.inputs.userInputResult({pic:a.photo,fullName:fourSq.api.models.companion.user.UserUtil.fullName(a),uri:a.canonicalPath,location:a.homeCity,rowId:b})),c=this.listElem_.append(c);$("#"+b+" .removeUser").click(fourSq.bind(function(){var c=this.indexOfUser_(a.id);this.userList_.splice(c,
1);$("#"+b).remove();this.triggerChange_()},this))},this)),this.renderErrors_(c),this.triggerChange_())},this),function(){c.push({t:"searchfailed",v:a});this.renderErrors_(c)})}else this.renderErrors_(c);this.inputElem_.val("")}},renderErrors_:function(a){if(0<a.length){this.alertElem_.empty();for(var b=0;b<a.length;b++){var c=templates.fourSq.ui.inputs.userInputNotFound({errtype:a[b].t,errarg:a[b].v});this.alertElem_.append(c)}}}},{Events:{LISTCHANGE:"foursq:ui:userfinder:listchange"}});fourSq.ui.Notifier=function(a){};
fourSq.ui.Notifier=fourSq.ui.View.extend({initialize:function(a){this.isSetup_=!1;this.setPosition(a.position);if(!_.include(_.values(fourSq.ui.Notifier.Position),this.position_))throw Error("Invalid position");},setPosition:function(a){this.position_=fourSq.isDefinedAndNotNull(a)?a:fourSq.ui.Notifier.Position.TOP_LEFT;this.changePosition_()},info:function(a){if("string"==typeof a||a instanceof jQuery)a={title:a};a.duration=a.duration||4E3;this.add(a,"info")},warning:function(a){if("string"==typeof a||
a instanceof jQuery)a={title:a};a.duration=a.duration||6E3;this.add(a,"warning")},error:function(a){if("string"==typeof a||a instanceof jQuery)a={title:a};a.duration=a.duration||6E3;this.add(a,"error")},genericServerError:function(){this.error({title:templates.fourSq.ui.notification.genericServerError()})},add:function(a,b){this.setupWrapper_();(new fourSq.ui.NotifierItem(a,b||"")).render();return this},setupWrapper_:function(){!1===this.isSetup_&&($("body").append(templates.fourSq.ui.notifier.wrapper()),
this.$el=$("#notifierNoticeWrapper"),this.$el.addClass(this.position_),this.isSetup_=!0)},changePosition_:function(a){this.isSetup_&&a!==this.position_&&this.$el.removeClass().addClass(this.position_)},stop:function(){this.$el.fadeOut(function(){$(this).remove()})}},{Position:{TOP_LEFT:"top-left",TOP_RIGHT:"top-right",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right"}});
fourSq.ui.Notifier.getInstance=function(){if(fourSq.ui.Notifier.instance_)return fourSq.ui.Notifier.instance_;fourSq.ui.Notifier.instance_=new fourSq.ui.Notifier({position:fourSq.ui.Notifier.Position.TOP_LEFT});return fourSq.ui.Notifier.instance_};fourSq.ui.Notifier.instance_=null;fourSq.ui.NotifierItem=function(a,b){};
fourSq.ui.NotifierItem=fourSq.ui.View.extend({initialize:function(a,b){var c;c=a instanceof jQuery||_.isString(a)?{title:a}:a;this.fadeOutSpeed_=500;this.time_=c.duration||1E3;this.className_=b;this.text_=c.text;this.title_=c.title;this.image_=c.image;this.sticky_=c.sticky;this.url_=c.url},decorate:function(){this.$closeButton_=$(".notifierClose",this.$el);this.sticky_||this.setFadeTimer_();var a=this;this.$el.on("mouseenter",fourSq.bind(function(b){a.sticky_||a.restoreItemIfFading_();a.onMouseEnter_()},
this));this.$el.on("mouseleave",fourSq.bind(function(b){a.sticky_||a.setFadeTimer_();a.onMouseLeave_()},this));fourSq.isDefinedAndNotNull(this.url_)&&this.$el.click(fourSq.curry(fourSq.util.redirect,null,this.url_));this.$closeButton_.click(fourSq.withoutPropagation(function(){a.fade_()},this));return this},fade_:function(){var a=this;this.$el.animate({opacity:0},this.fadeOutSpeed_,function(){a.$el.animate({height:0},300,function(){a.$el.remove()})})},onMouseEnter_:function(){this.$el.addClass("hover");
this.$closeButton_.show()},onMouseLeave_:function(){this.$el.removeClass("hover");this.$closeButton_.hide()},render:function(){this.$el=$(templates.fourSq.ui.notifier.item({className:this.className_,title:"string"==typeof this.title_?this.title_:void 0,text:"string"==typeof this.text_?this.text_:void 0,image:this.image_,withLink:fourSq.isDefinedAndNotNull(this.url_)}));this.messageBody_=$(".notifierText",this.$el);this.messageTitle_=$(".notifierTitle",this.$el);this.title_ instanceof jQuery&&this.messageTitle_.append(this.title_);
this.text_ instanceof jQuery&&this.messageBody_.append(this.text_);$("#notifierNoticeWrapper").append(this.$el);this.decorate();return this},restoreItemIfFading_:function(){window.clearTimeout(this.timeoutId_);this.$el.stop().css({opacity:"",height:""})},setFadeTimer_:function(){var a=this;this.timeoutId_=setTimeout(function(){a.fade_()},this.time_)}});fourSq.views.AccountPicker=function(a,b){};
fourSq.views.AccountPicker=fourSq.ui.View.extend({initialize:function(a){fourSq.views.AccountPicker.__super__.initialize.call(this,a);this.managementType=a.managementType||"updates";this.renderParentsOnly_=a.renderParentsOnly;this.redirectParam_="";fourSq.isDefinedAndNotNull(a.redirectUrl)&&0<a.redirectUrl.length&&(this.redirectParam_="\x26redirect\x3d"+a.redirectUrl);this.pickerContainer_=$(".accountPicker",this.el);this.listElem_=$(".accountList",this.el);this.unconnectedActionUri="/connectvenues"},
levelToCss:function(a,b,c){c=c?"accountPickerRow unconnected":"accountPickerRow";return 0==a&&b?c+" accountPickerLevel0 currentUserTopLevel":c+" accountPickerLevel"+a},renderVenue:function(a,b,c,d,e,f,g,h,l){f="/accounts?pageId\x3d"+g+"\x26venueId\x3d"+h+(e?"":"\x26actAs\x3d"+f)+this.redirectParam_+"\x26type\x3d"+this.managementType;if(g=!fourSq.isDefinedAndNotNull(g))f=this.unconnectedActionUri;return $(templates.fourSq.accountPicker.accountPickerPageVenue({name:a,viewUri:b,pic:c,loc:d,actionLinkId:h,
actionUri:f,css:this.levelToCss(l,e,g)}))},renderPage:function(a,b,c,d,e,f,g,h){var l="/accounts?pageId\x3d"+g+(e?"":"\x26actAs\x3d"+f)+this.redirectParam_+"\x26type\x3d"+this.managementType,m=!fourSq.isDefinedAndNotNull(g);m&&(l=this.unconnectedActionUri);return $(templates.fourSq.accountPicker.accountPickerPage({name:a,viewUri:b,pic:c,venueCount:d,actingAsPage:f==g,actionLinkId:g,actionUri:l,css:this.levelToCss(h,e,m)}))},renderUser:function(a,b,c,d,e,f,g){return $(templates.fourSq.accountPicker.accountPickerUser({name:a,
viewUri:b,pic:c,actionLinkId:f,actionUri:d?"":"/accounts?manage\x3dfalse"+this.redirectParam_+"\x26actAs\x3d"+f,isLoginUser:e,css:this.levelToCss(g,d,!1)}))},renderEmpty:function(){return $(templates.fourSq.accountPicker.accountPickerEmpty({}))},renderHasMoreFooter:function(a){return $(templates.fourSq.accountPicker.accountPickerHasMoreFooter({more:a}))},accountLimit:function(){return 1E3},render:function(){fourSq.api.services.PrivateWeb.management(this.accountLimit(),fourSq.bind(function(a){this.processResults(a)},
this),fourSq.bind(function(){this.listElem_.empty();var a=this.renderEmpty();this.listElem_.append(a)},this))},addPage:function(a,b,c,d,e,f,g,h){a=this.renderPage(a,b,c,d,e,f,g,h);this.listElem_.append(a)},addUser:function(a,b,c,d,e,f,g){a=this.renderUser(a,b,c,d,e,f,g);this.listElem_.append(a)},addSingleVenue:function(a,b,c,d,e,f){a=this.renderVenue(a.name,a.uri,b,a.loc,c,d,e,a.vid,f);this.listElem_.append(a)},addHasMoreFooter:function(a){a=this.renderHasMoreFooter(a);this.listElem_.after(a)},processResults:function(a){a=
a.items;this.listElem_.empty();if(0==a.length)a=this.renderEmpty(),this.listElem_.append(a);else{var b=a[0].uid;_.each(a,function(a){a.pageVenue?this.addSingleVenue(a.pageVenue,a.pic,a.isCurrentUser,a.uid,a.uid,0):a.isPage?this.addPage(a.name,a.uri,a.pic,a.brandedVenueCount,a.isCurrentUser,a.uid,a.uid,0):this.addUser(a.name,a.uri,a.pic,a.isCurrentUser,a.uid==b,a.uid,0);!0!==this.renderParentsOnly_&&_.each(a.pages,function(b){b.pageVenue?this.addSingleVenue(b.pageVenue,b.pic,a.isCurrentUser,a.uid,
b.uid,1):this.addPage(b.name,b.uri,b.pic,b.venueCount,a.isCurrentUser,a.uid,b.uid,1)},this)},this)}}});fourSq.views.AccountPickerMenu=function(a,b){};
fourSq.views.AccountPickerMenu=fourSq.views.AccountPicker.extend({initialize:function(a){fourSq.views.AccountPickerMenu.__super__.initialize.call(this,a)},processResults:function(a){var b=a.items,c=0,d=0,e=a=void 0;0<b.length&&(a=b[0].uid);_.each(b,function(a){c++;a.isCurrentUser&&(e=a.uid);d+=a.pages.length},this);b=c+d;this.listElem_.empty();2>=b&&fourSq.isDefinedAndNotNull(a)&&a!=e?(a=fourSq.util.appendParams("/accounts",{manage:!1,redirect:"/?consumerView",actAs:a}),this.listElem_.append($(templates.fourSq.accountPicker.accountSwitchLinkToPersonal({actAsUrl:a})))):
this.listElem_.append($(templates.fourSq.accountPicker.accountSwitchLink()))},accountLimit:function(){return 10},renderEmpty:function(){return $(templates.fourSq.accountPicker.accountSwitchLink())}});fourSq.views.BusinessAccountPicker=function(a,b){};
fourSq.views.BusinessAccountPicker=fourSq.views.AccountPicker.extend({initialize:function(a){fourSq.views.BusinessAccountPicker.__super__.initialize.call(this,a);this.managementType=a.managementType||"home"},levelToCss:function(a,b,c){return(c?"accountPickerRow unconnected":"accountPickerRow")+" accountPickerLevel"+a},accountLimit:function(){return 100},processResults:function(a){var b=a.items;a=a.potentialTotal;var c=fourSq.stats.Action.build(fourSq.stats.action.Action.SHOW,{element:fourSq.stats.action.Element.ACCOUNT_PICKER_PAGE});
fourSq.stats.logActions(c);var d=[],e=void 0;if(0<b.length){var f=b[0].uid;_.each(b,function(a){if(a.pageVenue){var b=this.renderVenue(a.pageVenue.name,a.pageVenue.uri,a.pic,a.pageVenue.loc,a.isCurrentUser,a.uid,a.uid,a.pageVenue.vid,0);d.push({name:a.pageVenue.name.toLowerCase(),$el:b})}else if(a.isPage)b=this.renderPage(a.name,a.uri,a.pic,a.brandedVenueCount,a.isCurrentUser,a.uid,a.uid,0),d.push({name:a.name.toLowerCase(),$el:b});else if(a.uid==f){b=this.redirectParam_;if(fourSq.isUndefinedOrNull(b)||
""==b)b="\x26redirect\x3d"+encodeURIComponent("/?consumerView");e="/accounts?manage\x3dfalse"+b+"\x26actAs\x3d"+a.uid}else b=this.renderUser(a.name,a.uri,a.pic,a.isCurrentUser,!1,a.uid,0),d.push({name:a.name.toLowerCase(),$el:b});_.each(a.pages,function(b){if(b.pageVenue){var c=this.renderVenue(b.pageVenue.name,b.pageVenue.uri,b.pic,b.pageVenue.loc,a.isCurrentUser,a.uid,b.uid,b.pageVenue.vid,0);d.push({name:b.pageVenue.name.toLowerCase(),$el:c})}else c=this.renderPage(b.name,b.uri,b.pic,b.venueCount,
a.isCurrentUser,a.uid,b.uid,0),b=fourSq.isDefinedAndNotNull(b.uid)?b.name.toLowerCase():"",d.push({name:b,$el:c})},this)},this)}this.listElem_.empty();0==d.length?fourSq.isUndefinedOrNull(e)?(b=this.renderEmpty(),this.listElem_.addClass("empty").after(b)):fourSq.util.redirect(e):(c=_.sortBy(d,function(a){return a.name}),_.each(c,fourSq.bind(function(a){this.listElem_.append(a.$el)},this)),b=$(templates.fourSq.accountPicker.accountPickerPersonalAccountLink({actAsUrl:e,nMoreAccounts:a>this.accountLimit()?
a-b.length:void 0})),this.listElem_.after(b))}});fourSq.ui.CharCounter=function(a){};
fourSq.ui.CharCounter=fourSq.ui.View.extend({initialize:function(a){this.$el=$(this.el);this.minLength=a.minLength;this.maxLength=a.maxLength;this.counter=$(a.counter);this.buttonToDisable=$(a.buttonToDisable);this.cleanText=a.cleanText;this.update();this.$el.keyup(fourSq.bind(this.update,this))},update:function(){var a=this.$el.val();fourSq.isDefinedAndNotNull(this.cleanText)&&"string"===typeof a&&(a=this.cleanText(a));var b=a.length,a=!(this.minLength&&b<this.minLength),b=this.maxLength-b;this.buttonToDisable&&
(0>b||!a?this.buttonToDisable.attr("disabled","disabled"):this.buttonToDisable.removeAttr("disabled"));b<this.maxLength?this.counter.text(String(b)):this.counter.text("");0>b||!a?this.counter.addClass("error"):this.counter.removeClass("error")}});fourSq.ui.LocationInputView=function(a){};
fourSq.ui.LocationInputView=fourSq.ui.View.extend({initialize:function(a){this.llHinter_=a.llHinter;this.boundsHinter_=a.boundsHinter;this.onCurrentLocation_=!1;this.currentQueryString_="";this.currentGeoId_=void 0;this.ignoreEnter_=!!a.ignoreEnter;this.currentBounds_=a.bounds;this.refitAutocompleteMenu_=!!a.refitAutocompleteMenu;fourSq.isDefinedAndNotNull(a.geocode)&&(this.maybeSetCurrentBoundsFromGeocode_(a.geocode),this.setCurrentGeoId_(a.geocode));this.useAutocomplete_=!!a.useAutocomplete;this.enableResetButton_=
a.enableResetButton;this.allowCountry_=!!a.allowCountry;this.baseActionData_=a.baseActionData;this.appendTo_=a.appendTo;this.topLocations_=a.topLocations||[];this.woeRestrict_=a.woeRestrict;this.noResultsFn_=a.noResultsFn;this.autocompleteBias_=a.autocompleteBias;this.setLocationCookieOnSelect_=!!a.setLocationCookieOnSelect;this.maxInterpretations_=a.maxInterpretations||3;this.rankingOverride_=a.rankingOverride;this.selectFirst_=a.selectFirst},setTopLocation:function(a){this.topLocations_=a},render:function(){this.$el.append($(templates.fourSq.ui.locationinput.input({showPlaceholder:!0,
showLocationReset:this.enableResetButton_})));this.decorate();return this},decorate:function(){this.$input_=this.$el.find("input.location");this.$input_.focus(fourSq.bind(function(){this.hideBackgroundImage_();this.hasFocus_=!0;0===this.getLocationInput_().length&&setTimeout(fourSq.bind(function(){this.$input_.autocomplete("search","")},this),400);this.trigger(fourSq.ui.LocationInputView.Events.FOCUS)},this));this.$input_.blur(fourSq.bind(function(){this.hasFocus_=!1;this.trigger(fourSq.ui.LocationInputView.Events.BLUR)},
this));this.$input_.keypress(fourSq.bind(function(a){this.currentGeoId_=null;13!==a.which||this.ignoreEnter_||(a.preventDefault(),""!==this.getLocationInput_()&&(this.onChange_(!0),this.$input_.blur()))},this));this.$input_.keyup(fourSq.bind(function(a){this.trigger(fourSq.ui.LocationInputView.Events.KEYPRESS,this.getLocationInput_())},this));this.$input_.blur(fourSq.bind(function(){""===this.getLocationInput_()&&this.onCurrentLocation_&&this.activateCurrentLocation()},this));this.$input_.click(fourSq.bind(function(){this.$input_.select()},
this));this.currentLocationText_=templates.fourSq.ui.locationinput.onCurrentLocationText();this.currentMapBoundsText_=templates.fourSq.ui.locationinput.currentMapBoundsText();this.unknownLocationText_=templates.fourSq.ui.locationinput.unknownLocationText();this.enableResetButton_&&(this.$reset_=this.$el.find(".locationReset"),this.$reset_.tooltip({position:"bottom"}),this.$reset_.click(fourSq.bind(this.onLocationResetClick_,this)));this.initAutocomplete_();this.currentGeoId_=this.$input_.attr("data-longgeoid");
return this},initAutocomplete_:function(){if(this.useAutocomplete_){var a=fourSq.bind(function(a,b,e){var f=b.item.interpretation.feature.matchedName||b.item.interpretation.feature.displayName;this.setCurrentGeoId_(b.item.interpretation);this.trigger(fourSq.ui.LocationInputView.Events.SELECT,b.item,e);this.$input_.val(f);this.onChange_(!1);this.setLocationCookieOnSelect_&&this.maybeSetLocationCookie(b.item.interpretation.feature);a.stopPropagation();a.preventDefault()},this),b=fourSq.isDefinedAndNotNull(this.baseActionData_)?
_.extend({},this.baseActionData_,{element:fourSq.stats.action.Element.LOCATION_SUGGESTION}):void 0;this.$input_&&fourSq.autocomplete.applyCompleters(this.$input_,[new fourSq.autocomplete.LocationCompleter({input:this.$input_,allowCountry:this.allowCountry_,llHinter:this.llHinter_,boundsHinter:this.boundsHinter_,defaultLocations:this.topLocations_,woeRestrict:this.woeRestrict_,autocompleteBias:this.autocompleteBias_,maxInterpretations:this.maxInterpretations_,rankingOverride:this.rankingOverride_})],
a,this.noResultsFn_,void 0,this.appendTo_,void 0,this.selectFirst_,0,void 0,this.refitAutocompleteMenu_,b)}},maybeSetLocationCookie:function(a){if(JSON.stringify&&a&&a.geometry&&a.geometry.center&&(a.name||a.displayName)&&a.cc){var b={lat:a.geometry.center.lat,lng:a.geometry.center.lng,loc:a.displayName,cc:a.cc};a.longId&&(b.longGeoId=a.longId);!a.name||!a.longId&&b.loc||(b.loc=a.name);a=new Date(+new Date+36E5*fourSq.ui.LocationInputView.COOKIE_EXPIRATION_HOURS);$.cookie(fourSq.ui.LocationInputView.LOCATION_COOKIE_NAME,
JSON.stringify(b),{path:"/",expires:a})}},isTemplateCopy_:function(a){a=$.trim(a||"").toLowerCase();return a===this.currentLocationText_.toLowerCase()||a===this.currentMapBoundsText_.toLowerCase()||a===this.unknownLocationText_.toLowerCase()},getLocationString:function(){var a=this.getLocationInput_();return this.isTemplateCopy_(a)?"":a},getLocationInput_:function(){return $.trim(this.$input_.val())},maybeSetLocationString:function(a){this.hasFocus_||""!==this.getLocationInput_()||this.setLocationString(a)},
setLocationString:function(a){a=$.trim(a);this.hideBackgroundImage_();this.$input_.val(a);this.$input_.removeClass("error");this.currentQueryString_=a;this.enableResetButton_&&(a.toLowerCase()===this.currentLocationText_.toLowerCase()?this.$reset_.addClass("active"):this.$reset_.removeClass("active"))},getCurrentGeoId:function(){return this.currentGeoId_},setCurrentGeoLongId:function(a){this.currentGeoId_=a},setCurrentGeoId_:function(a){this.setCurrentGeoLongId(a.feature.longId)},checkForChange:function(){var a=
this.getLocationInput_();if(""===a||this.isTemplateCopy_(a)||a.toLowerCase()===this.currentQueryString_.toLowerCase())return!1;this.onChange_(!1);return!0},ensureAutocompleteClosed:function(){this.hasFocus_&&this.$input_.blur()},onChange_:function(a){var b=this.getLocationInput_();if(b.toLowerCase()===this.currentLocationText_.toLowerCase())if(this.onCurrentLocation_)this.activateCurrentLocation();else this.onLocationResetClick_();else if(!this.isTemplateCopy_(b)){this.currentQueryString_=b;a=fourSq.curry(this.onGeocodeSuccess_,
this,b,a);var c=fourSq.curry(this.onGeocodeFailure_,this,b);if(this.llHinter_){var d=fourSq.api.models.companion.geo.LatLngUtil.toQueryValue(this.llHinter_());fourSq.api.services.Private.webbounds(b,d,a,c)}}},onLocationResetClick_:function(){if(this.baseActionData_){var a=_.extend({},this.baseActionData_,{element:fourSq.stats.action.Element.CURRENT_LOCATION}),a=fourSq.stats.Action.build(fourSq.stats.action.Action.CLICK,a);fourSq.stats.logActions(a)}this.onCurrentLocation_||this.trigger(fourSq.ui.LocationInputView.Events.GO_CURRENT_LOCATION)},
activateCurrentLocation:function(){this.setLocationString(this.currentLocationText_);this.onCurrentLocation_=!0},deactivateCurrentLocation:function(){this.enableResetButton_&&this.$reset_.removeClass("active");this.onCurrentLocation_=!1},isOnCurrentLocation:function(){return this.onCurrentLocation_},activateMapBoundsText:function(){this.deactivateCurrentLocation();this.setLocationString(this.currentMapBoundsText_)},activateUnknownLocation:function(){this.deactivateCurrentLocation();this.setLocationString(this.unknownLocationText_);
this.$input_.addClass("error");this.$input_.focus(fourSq.bind(function(){this.setLocationString(void 0);this.$input_.off("focus")},this))},getCurrentGeocodeBounds:function(){return this.currentBounds_},hideBackgroundImage_:function(){this.$input_.css("background-image","none")},maybeSetCurrentBoundsFromGeocode_:function(a){fourSq.isDefinedAndNotNull(a)&&a.feature&&a.feature.geometry&&a.feature.geometry.bounds&&!fourSq.api.models.companion.geo.LatLngBoundsUtil.isPoint(a.feature.geometry.bounds)?this.currentBounds_=
a.feature.geometry.bounds:this.currentBounds_=void 0},onGeocodeSuccess_:function(a,b,c){a===this.getLocationInput_()&&(0<c.count?(c=fourSq.api.models.companion.geo.GeocodeResponseUtil.bestInterpretation(c),this.maybeSetCurrentBoundsFromGeocode_(c),this.trigger(fourSq.ui.LocationInputView.Events.CHANGE,a,c,b)):(this.currentBounds_=void 0,this.onGeocodeFailure_(a)))},onGeocodeFailure_:function(a,b){this.activateUnknownLocation()},setCurrentLocation:function(a){this.maybeSetCurrentBoundsFromGeocode_(a);
this.setLocationString(a.feature.name);this.setCurrentGeoLongId(a.feature.id);this.setLocationCookieOnSelect_&&this.maybeSetLocationCookie(a.feature);this.trigger(fourSq.ui.LocationInputView.Events.CHANGE,a.feature.name,a,!1)},serialize:function(){return{text:this.getLocationInput_(),curLoc:this.onCurrentLocation_,bounds:this.currentBounds_}},deserialize:function(a){a.curLoc?this.activateCurrentLocation():this.setLocationString(a.text);this.currentBounds_=a.bounds}},{Events:{SELECT:"LOCATION:SELECT",
KEYPRESS:"LOCATION:KEYPRESS",CHANGE:"LOCATION:CHANGE",GO_CURRENT_LOCATION:"LOCATION:GO_CURRENT",FOCUS:"LOCATION:FOCUS",BLUR:"LOCATION:BLUR"},LOCATION_COOKIE_NAME:"lc",COOKIE_EXPIRATION_HOURS:2});fourSq.ui.OutgoingLink=function(a,b){this.$element_=$(a);this.signature_=this.$element_.data("sig")||"";this.origUrl_=this.$element_.attr("href");this.source_=this.$element_.data("source");this.venueId_=this.$element_.attr("venueid");this.bindEvents_();if(b)this.onMouseDown_(b)};
fourSq.ui.OutgoingLink.prototype.bindEvents_=function(){this.$element_.click(fourSq.bind(this.onClick_,this)).mouseup(fourSq.bind(this.onMouseUp_,this)).mousedown(fourSq.bind(this.onMouseDown_,this)).mouseout(fourSq.bind(this.onMouseOut_,this))};
fourSq.ui.OutgoingLink.prototype.getSignedHref_=function(){var a=window.location.host,b=0==window.location.href.indexOf("https")?"https":"http";/^(..\.)?foursquare\.com/.test(a)&&(a="redirect.foursquare.com",b="http");a=b+"://"+a+"/l/?u\x3d"+encodeURIComponent(this.origUrl_)+"\x26sig\x3d"+encodeURIComponent(this.signature_);fourSq.isDefined(this.source_)&&(a+="\x26s\x3d"+encodeURIComponent(this.source_));fourSq.isDefined(this.venueId_)&&(a+="\x26vid\x3d"+encodeURIComponent(this.venueId_));return a};
fourSq.ui.OutgoingLink.prototype.onMouseDown_=function(a){3==a.which&&this.setHref_(this.getSignedHref_())};fourSq.ui.OutgoingLink.prototype.onMouseUp_=function(a){this.setHref_(this.getSignedHref_())};fourSq.ui.OutgoingLink.prototype.onMouseOut_=function(a){this.setHref_(this.origUrl_)};fourSq.ui.OutgoingLink.prototype.onClick_=function(a){a=fourSq.bind(function(){this.setHref_(this.origUrl_)},this);_.delay(a,100);this.setHref_(this.getSignedHref_())};
fourSq.ui.OutgoingLink.prototype.setHref_=function(a){if(fourSq.util.devices.isMsie()&&9>fourSq.util.devices.getVersion()){var b=$("\x3cspan\x3e");this.$element_.append(b);this.$element_.attr("href",a);b.remove()}else this.$element_.attr("href",a)};fourSq.ui.OutgoingLink.mousedown=function(a,b){if(!a.data("bootstrapped")){a.data("bootstrapped",!0);var c=b?$.event.fix(b):void 0;new fourSq.ui.OutgoingLink(a,c)}};fourSq.exportSymbol("fourSq.ui.OutgoingLink.mousedown",fourSq.ui.OutgoingLink.mousedown);fourSq.views.PageFollowLink=function(a){};
fourSq.views.PageFollowLink=fourSq.ui.View.extend({initialize:function(a){this.clicking=!1;fourSq.isDefinedAndNotNull(a.optimistic)?this.optimistic=a.optimistic:this.optimistic=!0},decorate:function(){$(this.el).on("click",fourSq.bind(this.request,this));return this},request:function(){if(!this.clicking){this.clicking=!0;var a;this.optimistic?(this.success(),a=function(){}):a=fourSq.bind(this.success,this);fourSq.api.services.User.request({id:this.id},a,fourSq.bind(this.failure,this))}},success:function(){$(this.el).removeClass("link follow").addClass("following").off("click")},
failure:function(){this.clicking=!1;$(this.el).removeClass("following").addClass("link follow");fourSq.ui.Notifier.getInstance().info(templates.fourSq.activities.pageLikeError());this.optimistic&&this.decorate()}});fourSq.ui.PromoGallery=function(a){};
fourSq.ui.PromoGallery=fourSq.ui.View.extend({initialize:function(a){this.logName=a.logName||"unknown"},canDecorate:function(){return!0},canRender:function(){return!1},decorate:function(){this.$next=$(".newsFlashNext",this.el);this.$prev=$(".newsFlashPrev",this.el);this.$promoElements=$(".promo",this.el);this.count=this.$promoElements.length;this.show(0);this.$next.click(fourSq.bind(this.next,this));this.$prev.click(fourSq.bind(this.prev,this));this.registerStatLogging_();return this},registerStatLogging_:function(){var a=
this.logName;fourSq.stats.incr(["promo",a,"impr"]);var b={promoCount:this.count};this.$next.clicktrack("promo-"+a+"-next",b,{beforeLog:function(b){b.incr(["promo",a,"next"])}});this.$prev.clicktrack("promo-"+a+"-prev",b,{beforeLog:function(b){b.incr(["promo",a,"prev"])}});$("a",this.el).clicktrack("promo-"+a+"-click",b,{includeElementIndex:!0,beforeLog:function(b,d,e){d=d.closest(".promo").attr("id");b.add("promoid",d);b.incr(["promo",a,"clickid",d]);b.incr(["promo",a,"clickindex",String(e)])}})},
next:function(){this.index>=this.count-1||this.show(this.index+1)},prev:function(){0>=this.index||this.show(this.index-1)},show:function(a){this.index=a;this.$promoElements.hide();this.$promoElements.eq(this.index).show();1>=this.count?(this.disablePrev_(),this.disableNext_()):0==this.index?(this.disablePrev_(),this.enableNext_()):this.index==this.count-1?(this.enablePrev_(),this.disableNext_()):(this.enablePrev_(),this.enableNext_())},enableNext_:function(){this.$next.removeClass("faded")},disableNext_:function(){this.$next.addClass("faded")},
enablePrev_:function(){this.$prev.removeClass("faded")},disablePrev_:function(){this.$prev.addClass("faded")}});fourSq.ui.Promo=function(a,b){};fourSq.ui.Promo=fourSq.ui.View.extend({});fourSq.ui.FacebookPromo=function(a){};
fourSq.ui.FacebookPromo=fourSq.ui.Promo.extend({initialize:function(a){},decorate:function(){this.$el=$(this.el);var a=!this.$el.hasClass("unlinked"),b=this.$el.hasClass("linkedAndFrictionlessOn");if(a&&b)throw Error("Promo should be disabled if frictionless is already enabled");var c=this;if(a){a=this.$el.find(".enableFrictionlessButton");if(1!=a.length)throw Error("Missing enable frictionless button");a.click(fourSq.curry(c.enableFrictionless_,c,a))}else{var d=this.$el.find(".linkFacebookButton");
if(1!=d.length)throw Error("Missing link fb button");fourSq.facebook.getFacebookApi(function(a){d.click(fourSq.curry(c.linkFacebook_,c,a,d))})}},linkFacebook_:function(a,b){b.addClass("loadingButton");var c=this;a.login(function(a,e){a===fourSq.facebook.FacebookApi.State.CONNECTED?fourSq.api.services.Private.linkFacebook({fbid:e.authResponse.userID,facebookTimeline:!0,signedRequest:e.authResponse.signedRequest},function(){b.removeClass("loadingButton");b.off();c.setStyles_(!0,!0)},function(){b.removeClass("loadingButton");
fourSq.ui.Notifier.getInstance().genericServerError()}):window.top.location="/settings/sharing"})},enableFrictionless_:function(a){var b=this;a.addClass("loadingButton");fourSq.api.services.Settings.set("facebookTimeline",!0,function(){a.removeClass("loadingButton");a.off();b.setStyles_(!0,!0)},function(){fourSq.ui.Notifier.getInstance().genericServerError();a.removeClass("loadingButton")})},setStyles_:function(a,b){var c="unlinked";a&&(c=b?"linkedAndFrictionlessOn":"linkedAndFrictionlessOff");this.$el.removeClass("unlinked linkedAndFrictionlessOn linkedAndFrictionlessOff");
this.$el.addClass(c)}});fourSq.ui.share.ShareDialog=function(a){};
fourSq.ui.share.ShareDialog=fourSq.ui.dialog.Dialog.extend({initialize:function(a){this.noun_=a.noun;this.object_=a.object;this.network_=a.network;this.noFacebook_=!!a.noFacebook;this.noTwitter_=!!a.noTwitter;this.noEmail_=!!a.noEmail;this.noFoursquare_=!!a.noFoursquare;this.constructor.__super__.initialize.apply(this,[a])},show:function(){this.constructor.__super__.show.apply(this,[]);this.getShareMessages_(fourSq.bind(this.displayDialogWithMessages_,this))},getShareMessages_:function(a){var b={};
if("tip"==this.noun_)b.tipId=this.object_.id;else if("venue"==this.noun_)b.venueId=this.object_.id;else if("list"==this.noun_)b.listId=this.object_.id;else if("checkin"==this.noun_)b.checkinId=this.object_.id;else throw Error("Unknown share type: "+this.noun_);return fourSq.api.services.Private.shareMessages(b,function(b){a(b.messages)},function(b){fourSq.debug.error("Failed to fetch Share Social Messages");a(void 0)})},displayDialogWithMessages_:function(a){var b=null,c=null;fourSq.isUndefinedOrNull(a)?
b=c=templates.fourSq.ui.sharesocial.defaultShareMessage():(b=a.twitter,c=a.facebook);this.loadTemplate_(b,c)},loadTemplate_:function(a,b){var c=fourSq.api.models.companion.user.UserUtil.currentUser(),d=!!c.contact.twitter,c=!!c.contact.facebook,e={twitterMessage:a,isTwitterLinked:d,isFacebookLinked:c,defaultSendMessage:b,dontShareFacebook:this.noFacebook_,dontShareTwitter:this.noTwitter_,dontShareEmail:this.noEmail_,dontShareFoursquare:this.noFoursquare_};_.extend(e,this.getFacebookTemplateData_());
e=$(templates.fourSq.ui.sharesocial.shareSocialDialog(e));this.getContentContainer().empty().append(e);this.setLoading(!1);this.decorateAfterTemplateLoad_(d,c,a,b)},decorateAfterTemplateLoad_:function(a,b,c,d){this.socialModal_=$(".shareSocialFacebox",this.$el);this.socialList_=$("div.tabs ul",this.$el);this.facebookShare_=$(".shareSocialFacebook",this.socialModal_);this.twitterShare_=$(".shareSocialTwitter",this.socialModal_);this.emailShare_=$(".shareSocialEmail",this.socialModal_);this.foursquareShare_=
$(".shareSocialFoursquare",this.socialModal_);this.facebookButton_=$(".facebook",this.facebookShare_);this.foursquareButton_=$(".foursquare",this.foursquareShare_);this.twitterButton_=$(".twitter",this.twitterShare_);this.emailButton_=$(".email",this.emailShare_);this.shareButtons_=this.emailButton_.add(this.foursquareButton_);if(0<_([this.socialModal_,this.socialList_]).filter(function(a){return 1!==a.length}).length)throw Error("Cannot initialize share dialog");if(!this.noTwitter_&&0===this.twitterButton_.length)throw Error("Share dialog missing twitter button");
if(!this.noFacebook_&&0===this.facebookButton_.length)throw Error("Share dialog missing facebook button");if(!this.noEmail_&&0===this.emailButton_.length)throw Error("Share dialog missing email button");if(!this.noFoursquare_&&0===this.foursquareButton_.length)throw Error("Share dialog missing foursquare button");this.tokenInput_=$(".emailAddresses2",this.emailShare_);this.tokenInputHandler=new fourSq.ui.share.ShareDialog.TokenInputNameFetcher({input:this.tokenInput_});this.tokenInputHandler.on(fourSq.ui.share.ShareDialog.TokenInputNameFetcher.Events.NO_TOKENS,
this.disableShareButtons_,this);this.tokenInputHandler.on(fourSq.ui.share.ShareDialog.TokenInputNameFetcher.Events.TOKENS,this.enableShareButtons_,this);this.foursquareButton_.add(this.emailButton_).click(fourSq.bind(function(){this.doShare_(!0,$(".emailShare textarea[name\x3dmessage]",this.$el),200,"email",d)},this));this.facebookButton_.click(fourSq.bind(function(){this.doShare_(!1,$(".facebookShare textarea[name\x3dmessage]",this.$el),200,"facebook",d)},this));this.twitterButton_.click(fourSq.bind(function(){this.doShare_(!1,
$(".twitterShare textarea[name\x3dmessage]",this.$el),140,"twitter",c)},this));this.bindTabClickHandlers_();this.createCharCounters_();a||this.noTwitter_||(a=$(".linkTwitter",this.$el),this.setupTwitterAuth_(a));b||this.noFacebook_||(b=$(".linkFacebook",this.$el),this.setupFacebookAuth_(b));this.constructor.__super__.decorate.apply(this,[]);this.showShareDetails_(this.network_)},setupTwitterAuth_:function(a){var b=this;a.click(function(){fourSq.isDefinedAndNotNull(b.twitterAuth_)||(b.twitterAuth_=
new fourSq.twitter.OAuth,b.twitterAuth_.on(fourSq.twitter.OAuth.Events.FAILURE,function(a,d){fourSq.isDefinedAndNotNull(d)?fourSq.ui.Notifier.getInstance().error($(d)):fourSq.ui.Notifier.getInstance().genericServerError();b.twitterAuth_=null}),b.twitterAuth_.on(fourSq.twitter.OAuth.Events.SUCCESS,function(){b.twitterShare_.removeClass("unlinked").addClass("linked");b.twitterAuth_=null}),b.twitterAuth_.connect())})},setupFacebookAuth_:function(a){var b=this;fourSq.facebook.getFacebookApi(function(c){a.click(function(){c.login(function(a,
c){if(a===fourSq.facebook.FacebookApi.State.CONNECTED){var f=c.authResponse.userID;fourSq.api.services.Private.linkFacebook({fbid:f,facebookTimeline:!0,signedRequest:c.authResponse.signedRequest},function(){try{fourSq.api.models.companion.user.UserUtil.currentUser().contact.facebook=f}catch(a){}b.facebookShare_.removeClass("unlinked").addClass("linked")},function(){fourSq.ui.Notifier.getInstance().genericServerError()})}else window.top.location="/settings/sharing"})})})},bindTabClickHandlers_:function(){$(".foursquare span",
this.socialList_).click(fourSq.bind(function(){this.showShareDetails_("foursquare")},this));$(".facebook span",this.socialList_).click(fourSq.bind(function(){this.showShareDetails_("facebook")},this));$(".twitter span",this.socialList_).click(fourSq.bind(function(){this.showShareDetails_("twitter")},this));$(".email span",this.socialList_).click(fourSq.bind(function(){this.showShareDetails_("email")},this))},createCharCounters_:function(){this.emailCharCounter_=new fourSq.ui.CharCounter({el:$(".shareTextEmail",
this.emailShare_).get(0),counter:$(".messageCharCount",this.emailShare_),maxLength:200});this.facebookCharCounter_=new fourSq.ui.CharCounter({el:$(".shareTextFacebook",this.facebookShare_).get(0),counter:$(".messageCharCount",this.facebookShare_),maxLength:200});this.twitterCharCounter_=new fourSq.ui.CharCounter({el:$(".shareTextTweet",this.twitterShare_).get(0),counter:$(".messageCharCount",this.twitterShare_),maxLength:140})},enableShareButtons_:function(){this.shareButtons_.attr("disabled",!1);
this.shareButtons_.toggleClass("greenButton",!0);this.shareButtons_.toggleClass("greyButton",!1)},disableShareButtons_:function(){this.shareButtons_.attr("disabled",!0);this.shareButtons_.toggleClass("greenButton",!1);this.shareButtons_.toggleClass("greyButton",!0)},getFacebookTemplateData_:function(){var a;switch(this.noun_){case "tip":a=fourSq.facebook.composeWallPostPreviewTip(this.object_);break;case "venue":a=fourSq.facebook.composeWallPostPreviewVenue(this.object_);break;case "list":a=fourSq.facebook.composeWallPostPreviewList(this.object_);
break;case "checkin":a=fourSq.facebook.composeWallPostPreviewCheckin(this.object_);break;default:throw Error("Must be sharing a tip, venue, or list");}return a},onShareSuccess_:function(a,b){var c;"email"==a||"foursquare"==a?c=templates.fourSq.ui.sharesocial.emailSuccessNotifierMessage():"facebook"==a?c=templates.fourSq.ui.sharesocial.facebookSuccessNotifierMessage():"twitter"==a&&(c=templates.fourSq.ui.sharesocial.twitterSuccessNotifierMessage());this.close();fourSq.ui.Notifier.getInstance().info(c)},
onShareFailure_:function(a,b){var c=templates.fourSq.ui.sharesocial.failureNotifierMessage();fourSq.debug.error("Sharing this "+b+" to "+a+" failed");fourSq.ui.Notifier.getInstance().error(c)},doShare_:function(a,b,c,d,e){var f=[],g=[];b=$.trim(b.val());var h=this.tokenInput_.length?this.tokenInput_.val().split(","):[];if(!(b.length>c))if(_(h).each(function(a){a=$.trim(a);0<a.length&&(/^\d*$/.test(a)?f.push(a):g.push(a))}),a&&0===f.length&&0===g.length)fourSq.ui.Notifier.getInstance().warning(templates.fourSq.ui.sharesocial.emailsOrFriendsRequired());
else{a={broadcast:d,userIds:0<f.length?f.join():void 0,emails:0<g.length?g.join():void 0};b!=e&&(a.text=b);a[this.noun_+"Id"]=this.object_.id;var l=this;"tip"==this.noun_?fourSq.api.services.Tip.share(this.object_.id,a,function(){l.onShareSuccess_(d,l.noun_)},function(){l.onShareFailure_(d,l.noun_)}):"venue"==this.noun_?fourSq.api.services.Venue.share(this.object_.id,a,function(){l.onShareSuccess_(d,l.noun_)},function(){l.onShareFailure_(d,l.noun_)}):"list"==this.noun_?fourSq.api.services.List.share(this.object_.id,
a,function(){l.onShareSuccess_(d,l.noun_)},function(){l.onShareFailure_(d,l.noun_)}):"checkin"==this.noun_&&fourSq.api.services.Checkin.share(this.object_.id,a,function(){l.onShareSuccess_(d,l.noun_)},function(){l.onShareFailure_(d,l.noun_)})}},showShareDetails_:function(a){$("li",this.socialModal_).removeClass("selected");this.socialModal_.find("li."+a).addClass("selected");$(".shareSocialSite",this.socialModal_).hide();if("facebook"==a)this.facebookShare_.show();else if("twitter"==a)this.twitterShare_.show();
else if("email"==a||"foursquare"==a)this.emailShare_.show();else throw Error("Must call showShareDetails with exactly 1 argument in (facebook|twitter|email|foursquare)");}});fourSq.ui.share.ShareDialog.TokenInputNameFetcher=function(a){};
fourSq.ui.share.ShareDialog.TokenInputNameFetcher=fourSq.ui.View.extend({initialize:function(a){this.input_=a.input;this.inputList_=$(".token-input-list",this.input_);this.tokenCount_=0;0==this.inputList_.length&&this.input_.tokenInput(null,{allowEmails:!0,searchingText:null,hintText:null,promptText:templates.fourSq.ui.sharesocial.tokenInputPrompt(),noResultsText:templates.fourSq.ui.sharesocial.tokenInputNoResults(),searchDelay:0,preventDuplicates:!0,animateDropdown:!1,onAdd:fourSq.bind(this.onTokenAdd_,
this),onDelete:fourSq.bind(this.onTokenRemove_,this)});0<this.input_.length&&(this.fetchFollowees_(),this.input_.tokenInput("show"));$("#token-input-").css("width","500")},onTokenAdd_:function(){this.tokenCount_+=1;this.trigger(fourSq.ui.share.ShareDialog.TokenInputNameFetcher.Events.TOKENS)},onTokenRemove_:function(){this.tokenCount_-=1;0==this.tokenCount_&&this.trigger(fourSq.ui.share.ShareDialog.TokenInputNameFetcher.Events.NO_TOKENS)},fetchFollowees_:function(){var a=this;$(document.body).data("cachedFollowees")?
this.input_.tokenInput("addLocalData",$(document.body).data("cachedFollowees")):fourSq.api.services.User.following({id:"self",limit:500},function(b){a.fetchSuccess_(b,a)},function(){fourSq.debug.error("Failed to fetch friend list")})},fetchSuccess_:function(a,b){for(var c=[],d=0,e=a.following.items,f=0;f<e.length;f++){var g=e[f].user,h=g.firstName;g.lastName&&(h+=" "+g.lastName);c[d]={};c[d].name=h;c[d].id=g.id;d++}$(document.body).data("cachedFollowees",c);b.input_.tokenInput("addLocalData",c)}},
{Events:{NO_TOKENS:"notokens",TOKENS:"tokens"}});fourSq.ui.share.ShareLinks=function(a){};
fourSq.ui.share.ShareLinks=fourSq.ui.View.extend({initialize:function(a){this.noun_=a.noun;this.object_=a.object;this.noFacebook_=!!a.noFacebook;this.noTwitter_=!!a.noTwitter;this.noEmail_=!!a.noEmail;this.noFoursquare_=!!a.noFoursquare},decorate:function(){this.$el=$(this.el);this.$facebook=$(".shareFacebook",this.$el);this.$twitter=$(".shareTwitter",this.$el);this.$email=$(".shareEmail",this.$el);this.$foursquare=$(".shareFoursquare",this.$el);if(!this.noTwitter_&&0===this.$twitter.length)throw Error("Twitter share link does not exist");
if(!this.noFacebook_&&0===this.$facebook.length)throw Error("Facebook share link does not exist");if(!this.noEmail_&&0===this.$email.length)throw Error("Email share link does not exist");if(!this.noFoursquare_&&0===this.$foursquare.length)throw Error("Foursquare share link does not exist");this.$facebook.click(fourSq.curry(this.displayDialog_,this,"facebook"));this.$twitter.click(fourSq.curry(this.displayDialog_,this,"twitter"));this.$email.click(fourSq.curry(this.displayDialog_,this,"email"));this.$foursquare.click(fourSq.curry(this.displayDialog_,
this,"foursquare"))},displayDialog_:function(a){var b=fourSq.stats.Action.build(fourSq.stats.action.Action.CLICK,{element:fourSq.stats.action.Element.SHARE,details:{network:a}});fourSq.stats.logActions(b);fourSq.isUndefinedOrNull(fourSq.api.models.companion.user.UserUtil.currentUser())?(b=fourSq.signup.Trigger.UNKNOWN,"facebook"===a?b=fourSq.signup.Trigger.SHARE_FACEBOOK:"twitter"===a?b=fourSq.signup.Trigger.SHARE_TWITTER:"email"===a?b=fourSq.signup.Trigger.SHARE_EMAIL:"foursquare"===a&&(b=fourSq.signup.Trigger.SHARE_FOURSQUARE),
fourSq.signup.signupDialogFactory({titleText:templates.fourSq.ui.signupmodal.shareWithFriendsSignupTitle(),bodyText:templates.fourSq.ui.signupmodal.defaultSignupPromptBody(),trigger:b}).show()):(this.dialog=new fourSq.ui.share.ShareDialog({noFacebook:this.noFacebook_,noEmail:this.noEmail_,noTwitter:this.noTwitter_,noFoursquare:this.noFoursquare_,hasCloseButton:!1,noun:this.noun_,object:this.object_,network:a}),this.dialog.show())}});fourSq.ui.share.ShareLinkTip=function(a){};fourSq.ui.share.ShareLinkTip=fourSq.ui.share.ShareLinks.extend({initialize:function(a){_.extend(a,{noun:"tip",object:a.tip});this.constructor.__super__.initialize.call(this,a)}});fourSq.ui.share.ShareLinkVenue=function(a){};fourSq.ui.share.ShareLinkVenue=fourSq.ui.share.ShareLinks.extend({initialize:function(a){_.extend(a,{noun:"venue",object:a.venue});this.constructor.__super__.initialize.call(this,a)}});fourSq.ui.share.ShareLinkList=function(a){};
fourSq.ui.share.ShareLinkList=fourSq.ui.share.ShareLinks.extend({initialize:function(a){_.extend(a,{noFoursquare:!0,noun:"list",object:a.list});this.constructor.__super__.initialize.call(this,a)}});fourSq.ui.share.ShareLinkCheckin=function(a){};fourSq.ui.share.ShareLinkCheckin=fourSq.ui.share.ShareLinks.extend({initialize:function(a){_.extend(a,{noEmail:!0,noFoursquare:!0,noun:"checkin",object:a.checkin});this.constructor.__super__.initialize.call(this,a)}});fourSq.ui.share.FacebookShareButton=function(a){};
fourSq.ui.share.FacebookShareButton=fourSq.ui.View.extend({initialize:function(a){this.url=a.url||window.location.href;fourSq.facebook.getFacebookApi(fourSq.emptyFunction);a.el.click(fourSq.bind(this.openShareDialog,this))},openShareDialog:function(){window.FB&&(window.FB.ui({method:"share",href:this.url},fourSq.bind(function(a){a&&a.post_id&&fourSq.stats.logActions(fourSq.stats.Action.build(fourSq.stats.action.Action.SUCCESS,{element:fourSq.stats.action.Element.SHARE_FACEBOOK}))},this)),fourSq.stats.logActions(fourSq.stats.Action.build(fourSq.stats.action.Action.IMPRESSION,
{element:fourSq.stats.action.Element.SHARE_FACEBOOK})))}});fourSq.ui.share.TwitterTweetButton=function(a){};
fourSq.ui.share.TwitterTweetButton=fourSq.ui.View.extend({initialize:function(a){this.url_=a.url||window.location.href;this.message_=a.message||document.title;fourSq.twitter.getTwitterApi(fourSq.emptyFunction);this.updateUrl_();this.$el.click(this.logUL_)},updateUrl_:function(){this.$el.attr("href","https://twitter.com/intent/tweet?\x26text\x3d"+encodeURIComponent(this.message_)+"\x26url\x3d"+encodeURIComponent(this.url_))},logUL_:function(){fourSq.stats.logActions(fourSq.stats.Action.build(fourSq.stats.action.Action.IMPRESSION,{element:fourSq.stats.action.Element.SHARE_TWITTER}))}});fourSq.ui.tip.MoreMenu=function(a){};
fourSq.ui.tip.MoreMenu=fourSq.ui.Flyout.extend({flyoutExtraClass:"tipMoreFlyout",originOffset:{top:-3,left:-100},initialize:function(a){fourSq.ui.tip.MoreMenu.__super__.initialize.call(this,a);this.tip_=a.tip;this.venue_=a.venue;a.anchor.click(fourSq.bind(this.open,this))},decorate:function(){fourSq.ui.tip.MoreMenu.__super__.decorate.call(this);this.$el.find(".spam").click(fourSq.curry(this.doFlag_,this,"spam",templates.fourSq.tip.flagSpamSuccess));this.$el.find(".offensive").click(fourSq.curry(this.doFlag_,this,
"offensive",templates.fourSq.tip.flagOffensiveSuccess));this.$el.find(".notRelevant").click(fourSq.curry(this.doFlag_,this,"nolongerrelevant",templates.fourSq.tip.flagNotRelevantSuccess));this.$el.find(".editTipLink").click(fourSq.bind(function(){this.close();this.trigger(fourSq.ui.tip.MoreMenu.Events.EDIT,this.tip_)},this));this.$el.find(".deleteTipLink").click(fourSq.bind(function(){this.close();this.trigger(fourSq.ui.tip.MoreMenu.Events.DELETE,this.tip_)},this))},afterOpen:function(){this.outsideClickCallbackAdded_||
(fourSq.ui.util.addOnOutsideClickCallback(this.$el,fourSq.bind(function(){this.close()},this),[this.getAnchor()]),this.outsideClickCallbackAdded_=!0)},doFlag_:function(a,b){fourSq.api.services.Tip.flag({id:this.tip_.id,problem:a},function(){fourSq.ui.Notifier.getInstance().info({title:b()})},function(){fourSq.ui.Notifier.getInstance().error({title:templates.fourSq.tip.errorFlaggingTip()})});this.close()},getRenderedContentsHtml:function(){return templates.fourSq.tip.tipMoreMenu({tip:this.tip_,venue:this.venue_,
currentUser:fourSq.api.models.companion.user.UserUtil.currentUser()})}},{Events:{DELETE:"delete",EDIT:"edit"}});fourSq.ui.VenuePhotoViewer=function(a){};
fourSq.ui.VenuePhotoViewer=fourSq.views.PhotoViewer.extend({FETCH_AMOUNT:50,FETCH_THRESHOLD:3,initialize:function(a){this.initialPhotoIds_=_.map(a.photos,function(a){return a.id});this.venueId_=a.venueId;this.noMorePhotos_=!!a.isAllPhotos;this.isFetching_=!1;this.fetchPosition_=0;fourSq.ui.VenuePhotoViewer.__super__.initialize.call(this,a)},addPhotos:function(){throw Error("addPhotos not supported.");},openById:function(a){a=_(this.photos_).chain().map(function(a){return a.id}).indexOf(a).value();this.open(a)},
showPhoto_:function(){this.isFetching_||!this.inFetchThreshold_()||this.noMorePhotos_||this.fetchNext_();fourSq.ui.VenuePhotoViewer.__super__.showPhoto_.apply(this,arguments)},inFetchThreshold_:function(){return this.currentPhotoIndex>=this.photos_.length-this.FETCH_THRESHOLD},fetchNext_:function(){this.isFetching_=!0;fourSq.api.services.Venue.photos({id:this.venueId_,group:"venue",limit:this.FETCH_AMOUNT,offset:this.fetchPosition_},fourSq.bind(this.fetchSuccess_,this),fourSq.bind(this.fetchError_,
this))},fetchSuccess_:function(a){this.isFetching_=!1;var b=this.stripOriginalPhotos_(a.items);fourSq.ui.VenuePhotoViewer.__super__.addPhotos.call(this,b);this.noMorePhotos_=0===a.items.length||this.photos_.length>=a.count;this.fetchPosition_+=this.FETCH_AMOUNT},stripOriginalPhotos_:function(a){return _.filter(a,fourSq.bind(function(a){return-1===_.indexOf(this.initialPhotoIds_,a.id)},this))},fetchError_:function(){this.isFetching_=!1;this.noMorePhotos_=!0}});var templates={},helpers={};fourSq.soyhelpers.markEntities=function(a){a=_.map(a.entities||[],function(a,b){return{entity:a,index:b}});a=a.sort(function(a,b){if(a.entity.indices[0]<b.entity.indices[0])return-1;if(a.entity.indices[0]>b.entity.indices[0])return 1;var c=b.entity.indices[1]-a.entity.indices[1];return 0!==c?c:a.index-b.index});for(var b=[],c=0;c<a.length;c++){var d=a[c];if(-1===b.indexOf(c))for(var e=c+1;e<a.length;e++){var f=a[e];d.entity.indices[0]<f.entity.indices[0]&&f.entity.indices[0]<d.entity.indices[1]&&
d.entity.indices[1]<f.entity.indices[1]&&b.push(e)}}d=[];for(c=0;c<a.length;c++)-1===b.indexOf(c)&&d.push(a[c]);a=_.flatten(_.map(d,function(a){a=a.entity;return[{index:a.indices[0],isOpen:!0,entity:a},{index:a.indices[1],isOpen:!1,entity:a}]}));return _.sortBy(a,function(a){return a.index})};fourSq.views.TipAddForm=function(a){};
fourSq.views.TipAddForm=fourSq.ui.View.extend({initialize:function(a){this.$el=$(this.el);this.venueId_=a.venueId;this.metrics_=a.metrics;this.newTipCallback_=null;this.alwaysShowLink_=!!a.alwaysShowLink;this.resizePhotos_=!a.noPhotoResizing;this.applyPlaceholder_=!a.noPlaceholder},decorate:function(){this.charCounter_=new fourSq.ui.CharCounter({el:$("textarea",this.el).get(0),counter:$("#charCount, .charCount",this.el),maxLength:fourSq.views.TipAddForm.MAX_TIP_LENGTH});this.addLinkButton_=$(".addLink",
this.el);this.addImageButton_=$(".photoAddButtonHolder",this.el);this.addTipTextarea_=$("textarea",this.el);this.addImageOriginalTooltip_=this.addImageButton_.attr("title");0===this.addImageButton_.find(".text").length&&this.addImageButton_.tooltip();this.addLinkButton_.tooltip();this.applyPlaceholder_&&this.addTipTextarea_.placeholder();this.tipImageUploadForm_=$(".photoUploadForm",this.el);this.tipImageFileInput_=$("input",this.tipImageUploadForm_);this.tipImageFileInput_.change(fourSq.bind(this.onImageChosen_,
this));this.$tipImagePreview_=this.$el.find(".photoPreview");this.tipLinkHolder_=$("#tipLink",this.el);this.tipLinkInput_=$("input",this.tipLinkHolder_);this.addLinkButton_.click(fourSq.bind(function(){this.isLoading_||this.tipLinkHolder_.toggle()},this));this.shareButton_=$("button",this.el);this.shareButton_.click(fourSq.bind(this.maybeShareTip_,this));this.errorNode_=$("#tipInputError, .inputError",this.el);return this},setNewTipCallback:function(a){this.newTipCallback_=a},removePhoto_:function(){if(this.attachedPhoto_){this.attachedPhoto_.remove();
this.photoExists_=!1;this.addImageButton_.data("title",this.addImageOriginalTooltip_).removeClass("has-photo");var a=this.tipImageFileInput_.val(null).clone(!1);this.tipImageFileInput_.replaceWith(a);this.tipImageFileInput_=a;this.tipImageFileInput_.change(fourSq.bind(this.onImageChosen_,this));this.$tipImagePreview_.empty().hide();this.$el.removeClass("hasTipPhoto")}return!1},onImageChosen_:function(){var a=$.trim(this.tipImageFileInput_.val());if(!fourSq.net.ImageUploader.isValidFilename(a))return fourSq.ui.Notifier.getInstance().error(templates.fourSq.ui.imageUpload.errorMsg()),
!1;this.photoExists_=!0;$(".hoverTip:last").hide();a=a.split("\\");this.addImageButton_.data("title",a[a.length-1]);this.addImageButton_.addClass("has-photo");this.attachedPhoto_=$(templates.fourSq.ui.imageUpload.attachedPhoto());a=this.attachedPhoto_.find("img");a.on(fourSq.net.ImageUploader.Events.PREVIEW_SUCCESS,fourSq.bind(this.onImagePreviewSuccess_,this));a.on(fourSq.net.ImageUploader.Events.PREVIEW_FAILURE,fourSq.bind(this.onImagePreviewFailure_,this));fourSq.net.ImageUploader.showImagePreview(a,
this.tipImageFileInput_);return!0},onImagePreviewSuccess_:function(){$(templates.fourSq.broadcast.removeAttachmentButton()).click(fourSq.bind(this.removePhoto_,this)).appendTo(this.attachedPhoto_);this.$tipImagePreview_.append(this.attachedPhoto_).show();this.resizePhotos_&&this.resizePreviewPhoto_(this.attachedPhoto_.find("img"),0);this.$el.addClass("hasTipPhoto");this.trigger(fourSq.views.TipAddForm.Events.PHOTO_ADDED)},resizePreviewPhoto_:function(a,b){var c=a.parents(".photoAttachmentClip").height(),
d=a.parents(".photoAttachmentClip").width();a.load(function(){if(a.height()<a.width()){a.height(c);var b=(a.width()-d)/2;a.css({left:-Math.floor(b)})}else a.width(d),b=(a.height()-c)/2,a.css({top:-Math.floor(b)})})},onImagePreviewFailure_:function(a){this.$tipImagePreview_.append(templates.fourSq.ui.imageUpload.attachedPhotoPlaceholder()).show()},maybeShareTip_:function(){if(!this.isLoading_){var a=$.trim(this.addTipTextarea_.val());if(0!==a.length){var b={},c=$.trim(this.tipLinkInput_.val());0<c.length&&
_.extend(b,{url:c});this.setLoading_(!0);fourSq.api.services.Tip.add(this.venueId_,a,fourSq.bind(this.handleTipAddSuccess_,this),fourSq.bind(this.handleTipAddFailure_,this),b,this.metrics_);this.trigger(fourSq.views.TipAddForm.Events.TIP_SUBMITTED)}}},handleTipAddSuccess_:function(a){var b=fourSq.stats.Action.build(fourSq.stats.action.Action.API_RESPONSE_SUCCESS,{element:fourSq.stats.action.Element.ADD_TIP});fourSq.stats.logActions(b);fourSq.util.parseParams(fourSq.location.href);a.isLiked=!1;a.likes=
{count:0,items:[],summary:""};this.maybeAttachPhoto_(a,fourSq.bind(function(a){this.newTipCallback_&&this.newTipCallback_(a);this.trigger(fourSq.views.TipAddForm.Events.TIP_CREATED,a);this.setLoading_(!1);this.reset_()},this))},handleTipAddFailure_:function(a,b){var c=fourSq.stats.Action.build(fourSq.stats.action.Action.API_RESPONSE_FAILURE,{element:fourSq.stats.action.Element.ADD_TIP});fourSq.stats.logActions(c);a&&a.response&&(this.$el.addClass("has-error"),this.errorNode_.text(a.response.meta.errorDetail));
this.setLoading_(!1);this.trigger(fourSq.views.TipAddForm.Events.TIP_CREATE_ERROR)},maybeAttachPhoto_:function(a,b){if(this.photoExists_){var c=function(a,b,c){var g=$("."+b,a);0===g.length&&(g=$("\x3cinput\x3e\x3c/input\x3e").attr("type","hidden").attr("class",b).attr("name",c),a.append(g));return g};c(this.tipImageUploadForm_,"tipIdInput","tipId").val(a.id);c(this.tipImageUploadForm_,"oauthInput","oauth_token").val(fourSq.config.api.API_TOKEN);$.ajax({url:this.tipImageUploadForm_.attr("action"),
type:"post",data:new FormData(this.tipImageUploadForm_[0]),contentType:!1,processData:!1,success:function(c){c?window.setTimeout(function(){window.location.reload()},2E3):(fourSq.ui.Notifier.getInstance().error(helpers.tip.imageUploadFailedMessage()),b(a))}})}else b(a)},reset_:function(){this.addTipTextarea_.val("");this.tipLinkInput_.val("");this.alwaysShowLink_||this.tipLinkHolder_.hide();this.$el.removeClass("has-error");this.removePhoto_();this.errorNode_.text("");this.charCounter_.update()},
setLoading_:function(a){(this.isLoading_=a)?(this.$el.addClass("loading"),this.shareButton_.addClass("loadingButton"),this.tipLinkInput_.attr("disabled","disabled"),this.addTipTextarea_.attr("disabled","disabled")):(this.$el.removeClass("loading"),this.shareButton_.removeClass("loadingButton"),this.tipLinkInput_.removeAttr("disabled"),this.addTipTextarea_.removeAttr("disabled"))},hasTipPhoto:function(){return this.$el.hasClass("hasTipPhoto")}},{MAX_TIP_LENGTH:200,Events:{TIP_SUBMITTED:"TipAddForm:tip-submitted",
TIP_CREATED:"TipAddForm:tip-created",TIP_CREATE_ERROR:"TipAddForm:tip-create-error",PHOTO_ADDED:"TipAddForm:photo-added"}});fourSq.views.TipEditor=function(a){};
fourSq.views.TipEditor=fourSq.ui.View.extend({initialize:function(a){this.onSaveTipHandler_=null;this.$el=$(this.el);this.$parent=$(this.el).parent()},show:function(){this.$parent.removeClass("viewTipMode");this.$parent.addClass("editTipMode")},hide:function(){this.$parent.removeClass("editTipMode");this.$parent.addClass("viewTipMode")},setOnSaveTipHandler:function(a){this.onSaveTipHandler_=a},reset:function(){this.editButton_.removeClass("loadingButton")},decorate:function(){var a=this;this.editText_=
this.$el.find("#editText");this.editButton_=this.$el.find("#editButton");this.$el.find("#editButton").click(function(){if(!a.editButton_.hasClass("loadingButton")&&(a.editButton_.addClass("loadingButton"),a.onSaveTipHandler_))a.onSaveTipHandler_(a.editText_.val())});this.$el.find("#cancelLink").click(fourSq.bind(this.hide,this));return this}});fourSq.ui.Facepile=function(a){};
fourSq.ui.Facepile=fourSq.ui.View.extend({initialize:function(a){this.users=a.users;this.count_=a.count;this.isLoaded_=this.isLoading_=!1;this.baseMaxFaces_=a.maxFaces||5},render:function(){if(this.count_>this.users.length&&this.users.length<this.baseMaxFaces_&&!this.isLoaded_)return this.maybeFetchAndRender_(),this;this.doRender_();return this},facepileTemplate:fourSq.abstractMethod,doRender_:function(){var a=this.calculateMaxFaces_(),b=_.first(this.users,a),a=this.facepileTemplate(b,this.count_-
b.length,a);this.$el.empty().append(a);0===this.count_?this.$el.addClass("empty"):this.$el.removeClass("empty");this.decorate();return this},maybeFetchAndRender_:function(){this.isLoading_||this.isLoaded_||(this.isLoading_=!0,this.fetchAndRender())},fetchAndRender:fourSq.abstractMethod,onLoadSuccess:function(){this.isLoading_=!1;this.isLoaded_=!0},onLoadError:function(){this.isLoading_=!1;this.isLoaded_=!0},calculateMaxFaces_:function(){return this.users.length===this.baseMaxFaces_+1?this.baseMaxFaces_+
1:this.baseMaxFaces_}});fourSq.ui.LikesFacepile=function(a){};
fourSq.ui.LikesFacepile=fourSq.ui.Facepile.extend({initialize:function(a){this.like_=!!a.like;fourSq.ui.LikesFacepile.__super__.initialize.call(this,{el:this.el,users:a.likes?this.processLikes_(a.likes):[],count:a.likes&&a.likes.count||0,maxFaces:a.maxFaces})},decorate:function(){fourSq.ui.LikesFacepile.__super__.decorate.call(this);this.$el.find(".facepileFace").tooltip();this.$el.find(".additionalLikes").click(fourSq.bind(this.showAllLikes_,this));return this},fetchAndRender:function(){this.loadLikes(fourSq.bind(this.onLoadSuccess,
this),fourSq.bind(this.onLoadError,this))},facepileTemplate:function(a,b,c){return templates.fourSq.ui.facepiles.likes({likers:a,additionalLikes:b})},onLoadSuccess:function(a){this.users=this.processLikes_(a);this.count_=a.count;this.render();fourSq.ui.LikesFacepile.__super__.onLoadSuccess.call(this)},setLike:function(a){if(!fourSq.isUndefinedOrNull(a)&&a!==this.like_){if(a){this.count_++;var b=fourSq.api.models.companion.user.UserUtil.currentUser(!1);b&&(this.users=[b].concat(this.users))}else this.count_--,
this.users=this.users.slice(1);this.like_=a;this.likesDialog().setLike(a);this.render()}},loadLikes:fourSq.abstractMethod,likesDialog:fourSq.abstractMethod,processLikes_:function(a){var b=fourSq.api.models.companion.user.UserUtil.flattenGroups(a);this.likesDialog().setLikes(a);return this.like_?[fourSq.api.models.companion.user.UserUtil.currentUser(!1)].concat(b):b},showAllLikes_:function(){this.likesDialog().show()}});fourSq.ui.LikesFacepileSection=function(a){};
fourSq.ui.LikesFacepileSection=fourSq.ui.View.extend({initialize:function(a){var b=_.find(a.likes.groups,function(a){return"friends"===a.type});this.friendLikesCount_=b&&b.count||0;this.likesCount_=a.likes.count-(a.like?1:0);this.currentUserLikes_=a.like;this.facepile_=a.facepile;if(fourSq.isDefinedAndNotNull(a.feedbackController))a.feedbackController.on(fourSq.api.controllers.FeedbackController.Events.LIKE_SET,function(a){this.currentUserLikes_=a;this.doRender_()},this);fourSq.ui.LikesFacepileSection.__super__.initialize.call(this,
a)},render:function(){this.doRender_();return this},doRender_:function(){var a=templates.fourSq.ui.facepiles.likesTitle({like:this.currentUserLikes_,likesCount:this.likesCount_,friendLikesCount:this.friendLikesCount_});this.$el.find(".likesTitle").empty().append(a);this.facepile_.setLike(this.currentUserLikes_);this.facepile_.render();this.currentUserLikes_||0<this.likesCount_?this.$el.show():this.$el.hide()}});fourSq.ui.TipLikesFacepile=function(a){};fourSq.ui.TipLikesFacepile=fourSq.ui.LikesFacepile.extend({initialize:function(a){this.tipId_=a.tipId;this.likesDialog_=new fourSq.ui.dialog.TipLikesDialog({tipId:this.tipId_,like:a.like});fourSq.ui.TipLikesFacepile.__super__.initialize.call(this,a)},loadLikes:function(a,b){fourSq.api.services.Tip.likes(this.tipId_,{limit:1E4},a,b)},likesDialog:function(){return this.likesDialog_}});fourSq.ui.CheckinLikesFacepile=function(a){};fourSq.ui.CheckinLikesFacepile=fourSq.ui.LikesFacepile.extend({initialize:function(a){this.checkinId_=a.checkinId;this.likesDialog_=new fourSq.ui.dialog.CheckinLikesDialog({checkinId:this.checkinId_,like:a.like});fourSq.ui.CheckinLikesFacepile.__super__.initialize.call(this,a)},loadLikes:function(a,b){fourSq.api.services.Checkin.likes(this.checkinId_,{limit:1E4,intent:"checkindetailpage"},a,b)},likesDialog:function(){return this.likesDialog_}});fourSq.ui.dialog.LikesDialog=function(a){};
fourSq.ui.dialog.LikesDialog=fourSq.ui.dialog.Dialog.extend({initialize:function(a){this.like_=a.like;this.likes_=a.likes;this.isRendered_=!1;a={title:templates.fourSq.likesDialog.title()};this.hasFetched_=!1;fourSq.ui.dialog.LikesDialog.__super__.initialize.call(this,a)},renderContent:function(){if(this.likes_){var a=fourSq.api.models.companion.user.UserUtil.flattenGroups(this.likes_);(this.likes_.count===a.length&&!this.forceInitialFetch()||this.hasFetched_)&&this.renderLikes_()}this.isRendered_||
(this.setLoading(!0),this.loadLikes(fourSq.bind(this.loadSuccess_,this),fourSq.bind(this.loadError_,this)))},setLike:function(a){this.like_=a;this.isRendered_&&this.renderLikes_()},setLikes:function(a){this.likes_=a},close:function(){this.hide();$(document.body).css({overflow:"visible"})},forceInitialFetch:function(){return!1},renderLikes_:function(){if(fourSq.isUndefinedOrNull(this.likes_))throw Error("Likes must be initialised before rendering.");this.container_.empty().addClass("likesList");var a=
fourSq.api.models.companion.user.UserUtil.flattenGroups(this.likes_),b=a;this.like_&&(b=[fourSq.api.models.companion.user.UserUtil.currentUser(!1)].concat(a));_.each(b,fourSq.bind(function(a){a=templates.fourSq.likesDialog.row({liker:a});this.container_.append(a)},this));this.isRendered_=!0;this.setLoading(!1)},loadLikes:fourSq.abstractMethod,loadSuccess_:function(a){this.hasFetched_=!0;this.setLikes(a);this.renderLikes_()},loadError_:function(){this.hasFetched_=!0;this.container_.empty().append(templates.fourSq.likesDialog.loadFailed());
this.setLoading(!1)}});fourSq.ui.dialog.TipLikesDialog=function(a){};fourSq.ui.dialog.TipLikesDialog=fourSq.ui.dialog.LikesDialog.extend({initialize:function(a){this.tipId_=a.tipId;fourSq.ui.dialog.TipLikesDialog.__super__.initialize.call(this,a)},loadLikes:function(a,b){fourSq.api.services.Tip.likes(this.tipId_,{limit:1E4},a,b)}});fourSq.ui.dialog.CheckinLikesDialog=function(a){};fourSq.ui.dialog.CheckinLikesDialog=fourSq.ui.dialog.LikesDialog.extend({initialize:function(a){this.checkinId_=a.checkinId;fourSq.ui.dialog.CheckinLikesDialog.__super__.initialize.call(this,a)},loadLikes:function(a,b){fourSq.api.services.Checkin.likes(this.checkinId_,{limit:1E4,intent:"checkindetailpage"},a,b)},forceInitialFetch:function(){return!0}});fourSq.ui.ImpressionMonitor=function(a,b,c){};
fourSq.ui.ImpressionMonitor=fourSq.EventTarget.extend({initialize:function(a,b,c){c=c||{revealPercent:void 0};this.$container_=a;this.selector_=b;this.revealPercent_=c.revealPercent||0;this.revealedContainer_={top:0,height:0};this.monitoredElements_=null;"static"===this.$container_.css("position")&&this.$container_.css("position","relative");this.monitor_()},update:function(){if(0===this.$container_.length)return this;this.monitoredElements_=this.$container_.find(this.selector_).toArray();this.checkContainerAndElements_();
return this},monitor_:function(){0!==this.$container_.length&&($(window).on("scroll",_.debounce(fourSq.bind(this.checkContainerAndElements_,this),100)),this.$container_.on("scroll",_.debounce(fourSq.bind(this.checkElements_,this),100)))},checkContainerAndElements_:function(){var a=$(window),b=a.height();this.revealedContainer_=this.calculateVisibleWindow_(a,this.$container_,!0,0,b);this.checkElements_()},checkElements_:function(){0!==this.revealedContainer_.height&&_.each(this.monitoredElements_,
fourSq.bind(this.checkElementVisibility_,this))},checkElementVisibility_:function(a){a=$(a);var b=this.calculateVisibleWindow_(this.$container_,a,!1,this.revealedContainer_.top,this.revealedContainer_.height);this.triggerEvents_(a,b.percentRevealed)},triggerEvents_:function(a,b){var c=a.data(fourSq.ui.ImpressionMonitor.DataKeys.IS_CURRENT_IMPRESSION),d=a.data(fourSq.ui.ImpressionMonitor.DataKeys.IS_CURRENT_FULL_IMPRESSION),e=a.data(fourSq.ui.ImpressionMonitor.DataKeys.IMPRESSION_COUNT)||0,f=a.data(fourSq.ui.ImpressionMonitor.DataKeys.FULL_IMPRESSION_COUNT)||
0;b>this.revealPercent_&&!c?(this.trigger(fourSq.ui.ImpressionMonitor.Events.IMPRESSION,a,e),0===e&&this.trigger(fourSq.ui.ImpressionMonitor.Events.FIRST_IMPRESSION,a),a.data(fourSq.ui.ImpressionMonitor.DataKeys.IS_CURRENT_IMPRESSION,!0),a.data(fourSq.ui.ImpressionMonitor.DataKeys.IMPRESSION_COUNT,f+1)):b<=this.revealPercent_&&c&&(this.trigger(fourSq.ui.ImpressionMonitor.Events.IMPRESSION_LOST,a),a.data(fourSq.ui.ImpressionMonitor.DataKeys.IS_CURRENT_IMPRESSION,!1));100!==b||d?0===b&&d&&a.data(fourSq.ui.ImpressionMonitor.DataKeys.IS_CURRENT_FULL_IMPRESSION,
!1):(this.trigger(fourSq.ui.ImpressionMonitor.Events.FULL_IMPRESSION,a,f),0===f&&this.trigger(fourSq.ui.ImpressionMonitor.Events.FIRST_FULL_IMPRESSION,a),a.data(fourSq.ui.ImpressionMonitor.DataKeys.IS_CURRENT_FULL_IMPRESSION,!0),a.data(fourSq.ui.ImpressionMonitor.DataKeys.FULL_IMPRESSION_COUNT,f+1))},calculateVisibleWindow_:function(a,b,c,d,e){a=a.scrollTop();d=a+d;e+=d;a=c?b.offset().top:b.position().top+a;b=b.height();var f=a+b;c=a<d?d-a:0;d=_.max([d,a]);e=_.min([e,f]);d=_.max([0,e-d]);return{top:0===
d?0:c,height:d,percentRevealed:d/b*100|0}}},{Events:{FIRST_IMPRESSION:"first-impression",IMPRESSION:"impression",FULL_IMPRESSION:"full-impression",FIRST_FULL_IMPRESSION:"first-full-impression",IMPRESSION_LOST:"impression-lost"},DataKeys:{IS_CURRENT_IMPRESSION:"impression-monitor-impression",IMPRESSION_COUNT:"impression-monitor-count",IS_CURRENT_FULL_IMPRESSION:"impression-monitor-full-impression",FULL_IMPRESSION_COUNT:"impression-monitor-full-count"}});fourSq.ui.NumberCounter=function(a){};
fourSq.ui.NumberCounter=fourSq.ui.View.extend({initialize:function(a){fourSq.ui.NumberCounter.__super__.initialize.call(this,a);this.currentTimeout_=null;this.cap_=a.cap;this.useApproximations_=!!a.useApproximations},decorate:function(){return this},update:function(a){a=Math.min(a.goalValue,this.cap_);this.setValue_(a)},runCounter:function(a){var b=Math.min(a.goalValue,this.cap_);fourSq.util.devices.isTouchIncludingIPad()?this.setValue_(b):this.runAnimatedCounter_(b,a);return this},runAnimatedCounter_:function(a,
b){window.clearTimeout(this.currentTimeout_);b=_.defaults(b||{},{desiredDuration:1E3,initialDelay:0});var c=b.desiredDuration/30,d=a-this.getValue_(),e=Math.ceil(d/c),f=Math.min(150,Math.ceil(b.desiredDuration/(d/e))),c=fourSq.bind(function(){this.counterStep_(a,e,f,this.getValue_())},this);this.currentTimeout_=window.setTimeout(c,b.initialDelay)},counterStep_:function(a,b,c,d){if(d!==a){var e=0<b?Math.min(d+this.fuzzGap_(b),a):Math.max(d+this.fuzzGap_(b),a);d=fourSq.bind(function(){this.counterStep_(a,
b,c,e)},this);this.setValue_(e);this.currentTimeout_=window.setTimeout(d,c)}},fuzzGap_:function(a){return 1===a?1:Math.ceil(a-a/2+a*Math.random())},setValue_:function(a){a=this.useApproximations_?helpers.util.cappedApproximateNumber({num:a,cap:this.cap_}):fourSq.i18n.formatNumber(a);this.$el.empty().append(a);return this},getValue_:function(){var a=this.$el.text();return-1===a.indexOf("k")?parseInt(a,10):1E3*parseFloat(a)}});fourSq.views.FakeDropdown=function(a,b){};
fourSq.views.FakeDropdown=fourSq.ui.View.extend({decorate:function(){this.open_=!1;this.button_=$(this.el).find(".fakeDropdownButton");this.content_=$(this.el).find(".fakeDropdownContents");this.button_.click(fourSq.bind(this.toggleContent_,this));fourSq.ui.util.addOnOutsideClickCallback(this.content_,fourSq.bind(this.hideContent_,this),[this.button_])},toggleContent_:function(){this.isOpen_?this.hideContent_():this.showContent_()},hideContent_:function(){this.content_.slideUp("fast");this.isOpen_=
!1},showContent_:function(){this.content_.show();this.isOpen_=!0}});fourSq.facebook.composeWallPostPreviewTip=function(a){return{facebookPostType:"tip",facebookPostImage:fourSq.api.models.companion.category.IconUtil.mapThumbnail(fourSq.api.models.companion.venue.VenueUtil.primaryCategory(a.venue).icon),facebookTipText:a.text,facebookUser:fourSq.api.models.companion.user.UserUtil.fullName(a.user),facebookPostDate:fourSq.util.fullDate(a.createdAt),facebookVenueName:a.venue.name,facebookVenueCategory:fourSq.api.models.companion.venue.VenueUtil.primaryCategory(a.venue).name}};
fourSq.facebook.composeWallPostPreviewVenue=function(a){var b=fourSq.api.models.companion.venue.VenueUtil.primaryCategory(a);if(fourSq.isDefinedAndNotNull(b))var c=fourSq.api.models.companion.category.IconUtil.mapThumbnail(b.icon),d=b.name;return{facebookPostType:"venue",facebookPostImage:c,facebookVenueName:a.name,facebookVenueCityState:a.location.city+", "+a.location.state,facebookVenueAddress:fourSq.api.models.companion.venue.VenueUtil.fullAddress(a),facebookVenueCategory:d}};
fourSq.facebook.composeWallPostPreviewList=function(a){var b=a.photo;a={facebookPostType:"list",facebookPostTitle:a.name,facebookPostListDescription:a.description,facebookUser:a.user.firstName,facebookNumberOfPlaces:a.venueCount,facebookFollowerCount:a.followers.count};b&&(a.facebookPostImage=b.prefix+b.height+"x"+b.width+b.suffix);return a};fourSq.facebook.composeWallPostPreviewCheckin=function(a){return{facebookPostType:"checkin",facebookPostTitle:a.name,facebookUser:a.user.firstName}};fourSq.facebook.FacebookReferral=function(a,b){};fourSq.facebook.FacebookReferral=fourSq.Class.extend({initialize:function(){this.isFacebookReferral_=0<window.location.search.indexOf("fb_ref")},maybeTidyUrl:function(){this.isFacebookReferral_&&fourSq.net.Util.stripParamsFromQuery(["fb_action_ids","fb_action_types","fb_ref","fb_source"]);return this},maybeAddOriginString:function(){this.isFacebookReferral_&&fourSq.signup.Logging.addGlobalOriginContext("facebook-referral");return this},isFacebookReferral:function(){return this.isFacebookReferral_}});fourSq.venueflag.models.DefaultConfig={showOsmEditLink:!1,afterEditUpsellToSU:!1,afterEditUpsellToQueues:!0,canEditFacebook:!0,canEditInstagram:!0,showFeaturesFrame:!0,showParentEditor:!0,showNfc:!1,showParentAddressImporter:!1,showTranslatedNameEditor:!0,showIataInLanguageSelector:!1,showSeasonalHoursEditor:!1,showLabeledLatLngEditor:!1,setLabeledLatLngByDefault:!1};fourSq.util.mobile.urlfactory.UrlFactory=function(a){};
fourSq.util.mobile.urlfactory.UrlFactory=fourSq.Class.extend({initialize:function(a){a=a||{};this.scheme_=a.scheme||"foursquare";this.package_=a.pkg||"com.joelapenna.foursquared"},getModelType_:fourSq.abstractMethod,getModelId_:fourSq.abstractMethod,supportedOnDevice:function(){return!0},getOptionalQueryParams_:function(){return""},getPathSegment:function(){return""},createNativeSchemePath_:function(){return this.getModelType_()+"/"+this.getModelId_()+this.getPathSegment()+this.getOptionalQueryParams_()},
createNativeSchemeUrl:function(){return this.scheme_+"://"+this.createNativeSchemePath_()},createAndroidIntentUrl:function(){return"intent://"+this.createNativeSchemePath_()+"#Intent;scheme\x3d"+this.scheme_+";package\x3d"+this.package_+";end;"},createFallbackUrl:function(a){return fourSq.util.mobile.urlfactory.UrlFactory.createContextSerializedGetUrl(a)}},{createContextSerializedGetUrl:function(a){return"/get/"+fourSq.util.mobile.urlfactory.UrlFactory.createAppsflyerid(a)},createAppsflyerid:function(a){a=
a||{};var b=fourSq.signup.Logging.getRefSource(),b=fourSq.util.mobile.urlfactory.UrlFactory.getInterestingReferrerName_(b),c=a.details||{};b&&(c=_.extend({},c,{referrerName:b}),a=_.extend({},a,{details:c}));var d=function(a){return _.isString(a)?a.replace(RegExp("\\|","g"),"").replace(RegExp("\\,","g"),""):a},b="w";fourSq.logAsEmail?b="e":fourSq.logAsMobile&&(b="m");b="|4sq|"+b+","+d(a.view||fourSq.stats.Util.getViewName())+","+d(a.section||"")+","+d(a.component||"")+","+d(a.element||"")+"|";a=_.reduce(a.details,
function(a,b,c){return _.isObject(b)||fourSq.isUndefinedOrNull(b)?a:a+d(c)+","+d(b)+"|"},"");return encodeURIComponent(b+a)},getInterestingReferrerName_:function(a){if(a){var b=new RegExp(_.map(fourSq.util.mobile.urlfactory.UrlFactory.InterestingReferrers_,function(a){var b=a.indexOf(".");return"("+a.substr(0,b)+")"+a.substr(b)}).join("|"),"i");if(a=a.match(b))return a[1]}},InterestingReferrers_:"google.com bing.com yahoo.com yandex.com naver.com facebook.com t.co pinterest.com instagram.com".split(" ")});fourSq.util.mobile.urlfactory.GenericUrlFactory=function(a){};fourSq.util.mobile.urlfactory.GenericUrlFactory=fourSq.util.mobile.urlfactory.UrlFactory.extend({initialize:function(a){fourSq.util.mobile.urlfactory.GenericUrlFactory.__super__.initialize.call(this,a);this.nativePath_=a.path.replace(/^\//,"")},createNativeSchemePath_:function(){return fourSq.util.devices.isAndroid()&&""===this.nativePath_?"home":this.nativePath_}});fourSq.util.mobile.urlfactory.HomescreenUrlFactory=function(a,b){};fourSq.util.mobile.urlfactory.HomescreenUrlFactory=fourSq.util.mobile.urlfactory.GenericUrlFactory.extend({initialize:function(){fourSq.util.mobile.urlfactory.HomescreenUrlFactory.__super__.initialize.call(this,{path:"home"})}});"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.accountPicker&&(templates.fourSq.accountPicker={});templates.fourSq.accountPicker.accountListLoading=function(a,b){return'\x3cdiv class\x3d"accountList"\x3e\x3cdiv class\x3d"loading"\x3e\x3cimg src\x3d"'+soy.$$escapeHtml("https://ss0.4sqi.net/img/ajax_spinner-a51c5608d01acf32df728f299767f82b.gif")+'" style\x3d"display:block; margin-left:auto; margin-right:auto" height\x3d"32" width\x3d"32" alt\x3d"wait"/\x3e\x3c/div\x3e\x3c/div\x3e'};
templates.fourSq.accountPicker.accountPickerPersonal=function(a,b){return'\x3cdiv id\x3d"accountPicker"\x3e\x3ch2\x3eChoose an account\x3c/h2\x3e'+templates.fourSq.accountPicker.accountListLoading(null)+"\x3c/div\x3e\x3cscript\x3efourSq.currentPage \x3d new fourSq.views.AccountPicker({el: $('#accountPicker'), managementType: '"+soy.$$escapeHtml(a.managementType)+"', renderParentsOnly: "+soy.$$escapeHtml(a.renderParentsOnly)+", redirectUrl: '"+soy.$$escapeJsString(a.redirectUrl)+"'}); fourSq.currentPage.render();\x3c/script\x3e"};
templates.fourSq.accountPicker.accountPickerBusiness=function(a,b){return'\x3cdiv id\x3d"accountPicker"\x3e\x3ch2\x3eManage your business on Foursquare\x3c/h2\x3e'+templates.fourSq.accountPicker.accountListLoading(null)+"\x3c/div\x3e\x3cscript\x3efourSq.currentPage \x3d new fourSq.views.BusinessAccountPicker({el: $('#accountPicker'), managementType: '"+soy.$$escapeHtml(a.managementType)+"', redirectUrl: '"+soy.$$escapeJsString(a.redirectUrl)+"'}); fourSq.currentPage.render();\x3c/script\x3e"+(a.shouldShowSupportChatWidget?
templates.fourSq.pagesBar.liveChatWidget(a):"")};templates.fourSq.accountPicker.accountPickerPersonalAccountLink=function(a,b){return'\x3cdiv class\x3d"personalAccountLink"\x3e'+(a.nMoreAccounts&&0<a.nMoreAccounts?templates.fourSq.accountPicker.accountPickerHasMoreFooter({more:a.nMoreAccounts}):"")+'Or, \x3ca href\x3d"'+soy.$$escapeHtml(a.actAsUrl)+'"\x3euse your personal account\x3c/a\x3e\x3c/div\x3e'};
templates.fourSq.accountPicker.accountMenu=function(a,b){return'\x3cdiv id\x3d"accountPickerMenu"\x3e\x3cdiv class\x3d"accountList"\x3e'+templates.fourSq.accountPicker.accountMenuLoading(null)+"\x3c/div\x3e\x3c/div\x3e\x3cscript type\x3d\"text/javascript\"\x3e\n      (function() {\n        var f \x3d function() {\n          var picker \x3d new fourSq.views.AccountPickerMenu({\n            el: $('#accountPickerMenu')\n          });\n          picker.render();\n        };\n\n        if (window.fourSq \x26\x26 window.fourSq.queue) {\n          fourSq.queue.push(f);\n        } else {\n          $(f);\n        }\n      })();\n    \x3c/script\x3e"};
templates.fourSq.accountPicker.accountPickerEmpty=function(a,b){return"\x3cdiv\x3eNo accounts found, please refresh page.\x3c/div\x3e"};templates.fourSq.accountPicker.accountPickerBasicVenueCount=function(a,b){return 1==a.venueCount?"1 location":fourSq.i18n.formatNumber(a.venueCount,"decimal",void 0,"")+" locations"};
templates.fourSq.accountPicker.accountPickerManagingVenueCount=function(a,b){return 1==a.venueCount?"1 location you can manage":fourSq.i18n.formatNumber(a.venueCount,"decimal",void 0,"")+" locations you can manage"};
templates.fourSq.accountPicker.accountPickerVenueCount=function(a,b){return'\x3cdiv class\x3d"venueCountSummary"\x3e'+(0<a.venueCount?1==a.actingAsPage?templates.fourSq.accountPicker.accountPickerBasicVenueCount(a):templates.fourSq.accountPicker.accountPickerManagingVenueCount(a):'\x3cdiv class\x3d"venueCountSummary"\x3ePage\x3c/div\x3e')+"\x3c/div\x3e"};templates.fourSq.accountPicker.cancelButton=function(a,b){return'\x3ca class\x3d"cancelButton" href\x3d"'+soy.$$escapeHtml(a.cancelUrl)+'"\x3eCancel\x3c/a\x3e'};
templates.fourSq.accountPicker.accountPickerPage=function(a,b){return(a.actionUri?'\x3ca href\x3d"'+soy.$$escapeHtml(a.actionUri)+'" id\x3d"'+soy.$$escapeHtml(a.actionLinkId)+'"\x3e':'\x3cdiv class\x3d"noLink" id\x3d"'+soy.$$escapeHtml(a.actionLinkId)+'"\x3e')+'\x3cdiv class\x3d"'+soy.$$escapeHtml(a.css)+'"\x3e\x3cimg src\x3d'+soy.$$escapeHtml(a.pic)+' class\x3d"image" /\x3e\x3cdiv class\x3d"desc"\x3e\x3cspan class\x3d"name"\x3e'+soy.$$escapeHtml(a.name)+"\x3c/span\x3e\x3c!-- "+soy.$$escapeHtml(a.viewUri)+
" --\x3e"+templates.fourSq.accountPicker.accountPickerVenueCount(a)+"\x3c/div\x3e\x3c/div\x3e"+(a.actionUri?"\x3c/a\x3e":"\x3cdiv\x3e")};
templates.fourSq.accountPicker.accountPickerUser=function(a,b){return(a.actionUri?'\x3ca href\x3d"'+soy.$$escapeHtml(a.actionUri)+'" id\x3d"'+soy.$$escapeHtml(a.actionLinkId)+'"\x3e':'\x3cdiv class\x3d"noLink" id\x3d"'+soy.$$escapeHtml(a.actionLinkId)+'"\x3e')+'\x3cdiv class\x3d"'+soy.$$escapeHtml(a.css)+'"\x3e\x3cimg src\x3d'+soy.$$escapeHtml(a.pic)+' class\x3d"image" /\x3e\x3cdiv class\x3d"desc"\x3e\x3cspan class\x3d"name"\x3e'+soy.$$escapeHtml(a.name)+"\x3c/span\x3e\x3c!-- "+soy.$$escapeHtml(a.viewUri)+
" --\x3e\x3c/div\x3e\x3c/div\x3e"+(a.actionUri?"\x3c/a\x3e":"\x3cdiv\x3e")};
templates.fourSq.accountPicker.accountPickerPageVenue=function(a,b){return(a.actionUri?'\x3ca href\x3d"'+soy.$$escapeHtml(a.actionUri)+'" id\x3d"'+soy.$$escapeHtml(a.actionLinkId)+'"\x3e':'\x3cdiv class\x3d"noLink" id\x3d"'+soy.$$escapeHtml(a.actionLinkId)+'"\x3e')+'\x3cdiv class\x3d"'+soy.$$escapeHtml(a.css)+'"\x3e\x3cimg src\x3d'+soy.$$escapeHtml(a.pic)+' class\x3d"image" /\x3e\x3cdiv class\x3d"desc"\x3e\x3cspan class\x3d"name"\x3e'+soy.$$escapeHtml(a.name)+"\x3c/span\x3e\x3c!-- "+soy.$$escapeHtml(a.viewUri)+
' --\x3e\x3cdiv class\x3d"supplemental"\x3e'+soy.$$escapeHtml(a.loc)+"\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e"+(a.actionUri?"\x3c/a\x3e":"\x3cdiv\x3e")};templates.fourSq.accountPicker.accountPickerSimpleLink=function(a,b){return"\x3ca id\x3d"+a.id+' href\x3d"'+soy.$$escapeHtml(a.link)+'"\x3e'+soy.$$escapeHtml(a.actionName)+"\x3c/a\x3e"};templates.fourSq.accountPicker.accountPickerHasMoreFooter=function(a,b){return"\x3cdiv\x3eThere're potentially "+soy.$$escapeHtml(a.more)+" more accounts. Please access them via API.\x3c/div\x3e"};
templates.fourSq.accountPicker.accountMenuLoading=function(a,b){return'\x3ca href\x3d"/accounts"\x3e\x3cdiv class\x3d"loading"\x3e\x3cimg src\x3d"'+soy.$$escapeHtml("https://ss0.4sqi.net/img/ajax_spinner-a51c5608d01acf32df728f299767f82b.gif")+'" style\x3d"display:block; margin-left:auto; margin-right:auto" height\x3d"12" width\x3d"12" alt\x3d"wait"/\x3e\x3c/div\x3e\x3c/a\x3e'};templates.fourSq.accountPicker.accountSwitchLink=function(a,b){return'\x3ca href\x3d"/accounts" class\x3d"accountPickerRow accountPickerLevel0"\x3e\x3cdiv class\x3d"desc"\x3e\x3cli\x3e\x3cspan class\x3d"name"\x3eSwitch Accounts\x3c/span\x3e\x3c/li\x3e\x3c/div\x3e\x3c/a\x3e'};
templates.fourSq.accountPicker.billingLink=function(a,b){return'\x3ca href\x3d"/billing" class\x3d"accountPickerRow accountPickerLevel0"\x3e\x3cdiv class\x3d"desc"\x3e\x3cli\x3e\x3cspan class\x3d"name"\x3eBilling\x3c/span\x3e\x3c/li\x3e\x3c/div\x3e\x3c/a\x3e'};templates.fourSq.accountPicker.accountSwitchLinkToPersonal=function(a,b){return'\x3ca href\x3d"'+soy.$$escapeHtml(a.actAsUrl)+'" class\x3d"accountPickerRow accountPickerLevel0"\x3e\x3cdiv class\x3d"desc"\x3e\x3cli\x3e\x3cspan class\x3d"name"\x3eSwitch to Personal Account\x3c/span\x3e\x3c/li\x3e\x3c/div\x3e\x3c/a\x3e'};
templates.fourSq.accountPicker.accountPickerForPageManagement=function(a,b){for(var c='\x3cdiv id\x3d"interstitialPicker"\x3e\x3ch2\x3eManage '+soy.$$escapeHtml(a.pageName)+' on Foursquare\x3c/h2\x3e\x3cdiv class\x3d"accountList"\x3e',d=a.accounts,e=d.length,f=0;f<e;f++)var g=d[f],c=c+('\x3ca href\x3d"'+soy.$$escapeHtml(g.actionUri)+'" id\x3d"'+soy.$$escapeHtml(g.actionLinkId)+'"\x3e\x3cdiv class\x3d"accountPickerRow"\x3e\x3cimg src\x3d"'+soy.$$escapeHtml(g.pic)+'" class\x3d"image" /\x3e\x3cdiv class\x3d"desc"\x3e'+
(a.isSingleVenuePage?'\x3cdiv class\x3d"name oneLineDesc"\x3e'+soy.$$escapeHtml(g.name)+"\x3c/div\x3e":'\x3cdiv class\x3d"name"\x3e'+soy.$$escapeHtml(g.name)+"\x3c/div\x3e"+templates.fourSq.accountPicker.accountPickerVenueCount({venueCount:g.venueCount,actingAsPage:g.actingAsPage}))+"\x3c/div\x3e\x3c/div\x3e\x3c/a\x3e");return c+='\x3c/div\x3eOr, \x3ca class\x3d"cancelButton" href\x3d"'+soy.$$escapeHtml(a.viewUri)+'"\x3eview your business listing\x3c/a\x3e\x3c/div\x3e'};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.activities&&(templates.fourSq.activities={});templates.fourSq.activities.homepageStream=function(a,b){for(var c="",d=a.stream.items,e=d.length,f=0;f<e;f++)c+=templates.fourSq.activities.renderActivity({activity:d[f],currentUser:a.currentUser,activityIndex:f,debug:a.debug});return c};
templates.fourSq.activities.renderActivity=function(a,b){return'\x3cdiv class\x3d"activity '+helpers.activity.activityClass(a)+" "+(a.debug?"activityStreamCard"+soy.$$escapeHtml(a.activityIndex):"")+'"\x3e'+templates.fourSq.activities.activityAuthor(a)+templates.fourSq.activities.activityCore(a)+templates.fourSq.activities.activityStreamContentBlock({activity:a.activity,referralId:a.activity.referralId})+templates.fourSq.activities.activityActions(a)+templates.fourSq.activities.activityStreamCommentsBlockWithPlugins(a)+
'\x3cdiv style\x3d"clear: both;"\x3e\x3c/div\x3e\x3c/div\x3e'};templates.fourSq.activities.activityAuthor=function(a,b){return'\x3cdiv class\x3d"activityAuthor"\x3e'+(a.activity.thumbnails&&0<a.activity.thumbnails.length&&a.activity.thumbnails[0].photo?helpers.user.smallImageWLink(soy.$$augmentMap(a.activity.thumbnails[0],{referralId:a.activity.referralId})):"")+"\x3c/div\x3e"};
templates.fourSq.activities.activityCore=function(a,b){return'\x3cdiv class\x3d"activityCore"\x3e'+("aggregation"!=a.activity.content.type&&"user"!=a.activity.content.type?'\x3ca class\x3d"disclosureArrow" href\x3d"'+helpers.activity.contentUrl(a.activity)+'"\x3eCheck-in Details\x3c/a\x3e':"")+'\x3cdiv class\x3d"text"\x3e'+helpers.entities.textWithEntitiesLinks(soy.$$augmentMap(a.activity.summary,{referralId:a.activity.referralId}))+(a.activity.promoted?" - $$$$$ INTERNAL TEST $$$$$":"")+("checkin"==
a.activity.content.type&&a.activity.content.object.venue?(a.activity.content.object["private"]?'\x3cspan class\x3d"private"\x3e [not shared with friends]':"")+(a.activity.content.object.venue.location?'\x3cdiv class\x3d"address"\x3e'+helpers.venue.globalLocalAddress(a.activity.content.object.venue)+"\x3c/div\x3e":""):"")+"\x3c/div\x3e\x3c/div\x3e"};
templates.fourSq.activities.activityActions=function(a,b){return'\x3cdiv class\x3d"activityActions"\x3e\x3cspan class\x3d"meta actionItem"\x3e\x3cspan class\x3d"icon"\x3e\x3c/span\x3e\x3cspan class\x3d"date"\x3e'+templates.fourSq.activities.activityPermalinkHelper(a)+"\x3c/span\x3e\x3c/span\x3e"+("pageUpdate"==a.activity.content.type?'\x3cspan class\x3d"actionItem hidden pageUpdateDeleteAction"\x3e\x3cspan class\x3d"deleteInline link"\x3e\x3ca class\x3d"pageUpdateDeleteLink" data-objectId\x3d"'+soy.$$escapeHtml(a.activity.content.object.id)+
'" href\x3d"#" title\x3d"Click to remove this update"\x3e\x3cspan class\x3d"icon"\x3e\x3c/span\x3eDelete\x3c/a\x3e\x3c/span\x3e\x3c/span\x3e':"")+(a.activity.content.commentable?'\x3cspan class\x3d"actionItem"\x3e\x3cspan class\x3d"comment link"\x3e\x3cspan class\x3d"icon"\x3e\x3c/span\x3eComment\x3c/span\x3e\x3c/span\x3e':"")+templates.fourSq.activities.addSaveButton_({content:a.activity.content})+(a.activity.content.likeable?'\x3cspan class\x3d"actionItem"\x3e'+templates.fourSq.ui.liking.likeLink({likes:a.activity.content.object.likes})+
"\x3c/span\x3e":"")+"\x3c/div\x3e"};
templates.fourSq.activities.addSaveButton_=function(a,b){return"tip"==a.content.type?'\x3cspan class\x3d"actionItem"\x3e'+templates.fourSq.ui.save.saveLink({forTip:!0})+"\x3c/span\x3e":"venue"==a.content.type?'\x3cspan class\x3d"actionItem"\x3e'+templates.fourSq.ui.save.saveLink({forVenue:!0})+"\x3c/span\x3e":"activity"==a.content.type&&a.content.object.content?templates.fourSq.activities.addSaveButton_({content:a.content.object.content}):"aggregation"==a.content.type&&a.content.object.groupContent?
templates.fourSq.activities.addSaveButton_({content:a.content.object.groupContent}):""};
templates.fourSq.activities.activityFeedBottom=function(a,b){return'\x3cdiv class\x3d"feedBottom"\x3e\x3cdiv class\x3d"loading" style\x3d"display: none;"\x3e\x3cp\x3e\x3cimg src\x3d"'+soy.$$escapeHtml("https://ss1.4sqi.net/img/ajax_spinner_small_light-23e3947767aef347abf9160b5961e904.gif")+'" alt\x3d"Loading..." /\x3eLoading more of your friends\' adventures...\x3c/p\x3e\x3c/div\x3e\x3cdiv class\x3d"error" style\x3d"display: none;"\x3e\x3ch4\x3eUh-oh, we weren\'t able to get the next page. \x3cspan class\x3d"link tryagain"\x3eClick here\x3c/span\x3e to try again.\x3c/h4\x3e\x3c/div\x3e\x3cdiv class\x3d"ending" style\x3d"display: none"\x3e\x3cimg src\x3d"'+soy.$$escapeHtml("https://ss0.4sqi.net/img/mayorCrownDark-e55a34797b4d266dfc139322fac8cb5c.png")+
'" alt\x3d"A Crown" /\x3e\x3ch4\x3eThat\'s all we\'ve got on this page.\x3cbr /\x3eWant to relive all your check-ins? Check out \x3ca href\x3d"/user/history"\x3eyour history page\x3c/a\x3e!\x3c/h4\x3e\x3c/div\x3e\x3c/div\x3e'};
templates.fourSq.activities.swarmActivityFeedBottom=function(a,b){return'\x3cdiv class\x3d"feedBottom"\x3e\x3cdiv class\x3d"loading" style\x3d"display: none;"\x3e\x3cp\x3e\x3cimg src\x3d"'+soy.$$escapeHtml("https://ss1.4sqi.net/img/ajax_spinner_small_light-23e3947767aef347abf9160b5961e904.gif")+'" alt\x3d"Loading..." /\x3eLoading more of your friends\' adventures...\x3c/p\x3e\x3c/div\x3e\x3cdiv class\x3d"error" style\x3d"display: none;"\x3e\x3ch4\x3eUh-oh, we weren\'t able to get the next page. \x3cspan class\x3d"link tryagain"\x3eClick here\x3c/span\x3e to try again.\x3c/h4\x3e\x3c/div\x3e\x3cdiv class\x3d"ending" style\x3d"display: none"\x3e\x3cimg src\x3d"'+
soy.$$escapeHtml("https://ss1.4sqi.net/img/swarm/icons/icon120-43ee0cf30805db50ddacf1ce188818ef.png")+'" alt\x3d"A Bee" /\x3e\x3ch4\x3eThat\'s all we\'ve got on this page.\x3cbr /\x3eWant to relive all your check-ins? Check out \x3ca href\x3d"/history"\x3eyour history page\x3c/a\x3e!\x3c/h4\x3e\x3c/div\x3e\x3c/div\x3e'};
templates.fourSq.activities.historyStreamBottom=function(a,b){return'\x3cdiv class\x3d"feedBottom"\x3e\x3cdiv class\x3d"loading" style\x3d"display: none;"\x3e\x3cp\x3e\x3cimg src\x3d"'+soy.$$escapeHtml("https://ss1.4sqi.net/img/ajax_spinner_small_light-23e3947767aef347abf9160b5961e904.gif")+'" alt\x3d"Loading..." /\x3eLoading more of your awesome adventures...\x3c/p\x3e\x3c/div\x3e\x3cdiv class\x3d"error" style\x3d"display: none;"\x3e\x3ch4\x3eUh-oh, we weren\'t able to get the next page. \x3cspan class\x3d"link tryagain"\x3eClick here\x3c/span\x3e to try again.\x3c/h4\x3e\x3c/div\x3e\x3cdiv class\x3d"ending" style\x3d"display: none"\x3e\x3c/div\x3e\x3c/div\x3e'};
templates.fourSq.activities.swarmHistoryStreamBottom=function(a,b){return'\x3cdiv class\x3d"feedBottom"\x3e\x3cdiv class\x3d"loading" style\x3d"display: none;"\x3e\x3cp\x3e\x3cimg src\x3d"'+soy.$$escapeHtml("https://ss1.4sqi.net/img/ajax_spinner_small_light-23e3947767aef347abf9160b5961e904.gif")+'" alt\x3d"Loading..." /\x3eLoading more of your awesome adventures...\x3c/p\x3e\x3c/div\x3e\x3cdiv class\x3d"error" style\x3d"display: none;"\x3e\x3ch4\x3eUh-oh, we weren\'t able to get the next page. \x3cspan class\x3d"link tryagain"\x3eClick here\x3c/span\x3e to try again.\x3c/h4\x3e\x3c/div\x3e\x3cdiv class\x3d"ending" style\x3d"display: none"\x3e\x3cimg src\x3d"'+
soy.$$escapeHtml("https://ss1.4sqi.net/img/swarm/icons/icon120-43ee0cf30805db50ddacf1ce188818ef.png")+'" alt\x3d"A Bee" /\x3e\x3ch4\x3eThat\'s all we\'ve got on this page.\x3cbr /\x3eCurious what your friends are up to? Check out \x3ca href\x3d"/activity"\x3etheir check-ins\x3c/a\x3e!\x3c/h4\x3e\x3c/div\x3e'};
templates.fourSq.activities.activityPermalinkHelper=function(a,b){return("aggregation"!=a.activity.content.type?'\x3ca class\x3d"timestamp autoupdate" href\x3d"'+helpers.activity.contentUrl(a.activity)+'" data-created-at\x3d"'+soy.$$escapeHtml(a.activity.createdAt)+'"\x3e':'\x3cspan class\x3d"timestamp autoupdate" data-created-at\x3d"'+soy.$$escapeHtml(a.activity.createdAt)+'"\x3e')+helpers.util.createdAtSmartDate({createdAt:a.activity.createdAt})+("aggregation"!=a.activity.content.type?"\x3c/a\x3e":
"\x3c/span\x3e")};templates.fourSq.activities.activityStreamContentBlock=function(a,b){return'\x3cdiv class\x3d"activityContent"\x3e'+templates.fourSq.activities.contentBlock({content:a.activity.content,referralId:a.activity.referralId,suppressCheckinVenueBlock:!0,userCount:a.activity.thumbnails.length,isLike:"like"==a.activity.type})+"\x3c/div\x3e"};
templates.fourSq.activities.contentBlock=function(a,b){var c="",d="pageUpdate"==a.content.type?templates.fourSq.activities.broadcastContentDetail({broadcast:a.content.object,isLike:a.isLike}):"special"==a.content.type?templates.fourSq.special.activityStream({special:a.content.object}):"checkin"==a.content.type?templates.fourSq.activities.checkinContentDetail({checkin:a.content.object,referralId:a.referralId,suppressVenueBlock:a.suppressCheckinVenueBlock}):"tip"==a.content.type?templates.fourSq.activities.tipContentDetail({tip:a.content.object,
referralId:a.referralId,suppressVenueBlock:a.suppressTipVenueBlock}):"list"==a.content.type?templates.fourSq.activities.listContentDetail({list:a.content.object,referralId:a.referralId,suppressListPhoto:a.suppressListPhoto}):"venue"==a.content.type?templates.fourSq.activities.venueContentDetail({venue:a.content.object,referralId:a.referralId}):"aggregation"==a.content.type?templates.fourSq.activities.aggregations.aggregationContentDetail({aggregation:a.content.object,referralId:a.referralId,userCount:a.userCount,
isLike:a.isLike}):"activity"==a.content.type?templates.fourSq.activities.activityContentDetail({content:a.content.object.content,indirectContent:a.content.object.indirectContent,referralId:a.referralId,suppressListPhoto:a.suppressListPhoto}):"page"==a.content.type?templates.fourSq.activities.pageContentDetail({page:a.content.object,referralId:a.referralId}):"photo"==a.content.type?templates.fourSq.activities.photoContentDetail({photo:a.content.object,referralId:a.referralId}):"plugin"==a.content.type?
templates.fourSq.activities.pluginContentDetail({plugin:a.content.object,referralId:a.referralId}):"";return c+=helpers.impressions.addContentBlockId({contentType:a.content.type,contentId:a.content.object.id,logView:a.content.object.logView,contentHtml:d&&d.contentKind&&d.contentKind==goog.soy.data.SanitizedContentKind.HTML?d:soydata.VERY_UNSAFE.ordainSanitizedHtml(d)})};
templates.fourSq.activities.activityStreamCommentsBlockWithPlugins=function(a,b){return a.activity.content.commentable||a.activity.content.object.comments&&0<a.activity.content.object.comments.count||a.activity.content.object.posts&&0<a.activity.content.object.posts.count?'\x3cdiv class\x3d"card commentsWrapper commentThread"\x3e\x3cdiv class\x3d"comments"\x3e\x3cdiv class\x3d"commentsList"\x3e\x3c/div\x3e\x3c/div\x3e'+(a.currentUser&&a.activity.content.commentable?templates.fourSq.comments.miniCommentForm(a):
"")+"\x3c/div\x3e":""};
templates.fourSq.activities.commentsAndPosts_=function(a,b){var c="";if(a.commentIndex<a.comments.length&&a.postIndex<a.posts.length)c+=a.comments[a.commentIndex].createdAt<a.posts[a.postIndex].createdAt?(a.commentIndex+a.postIndex>=a.comments.length+a.posts.length-a.showCount?templates.fourSq.comments.streamCommentForThread({comment:a.comments[a.commentIndex]}):"")+templates.fourSq.activities.commentsAndPosts_(soy.$$augmentMap(a,{commentIndex:a.commentIndex+1})):(a.posts[a.postIndex].text||a.posts[a.postIndex].url?
a.commentIndex+a.postIndex>=a.comments.length+a.posts.length-a.showCount?templates.fourSq.comments.streamAppPostForThread({post:a.posts[a.postIndex],owner:a.owner}):"":"")+templates.fourSq.activities.commentsAndPosts_(soy.$$augmentMap(a,{postIndex:a.postIndex+1}));else if(a.commentIndex<a.comments.length)for(var d=a.comments.length,e=a.commentIndex;e<d;e++)c+=e+a.postIndex>=a.comments.length+a.posts.length-a.showCount?templates.fourSq.comments.streamCommentForThread({comment:a.comments[e]}):"";else if(a.postIndex<
a.posts.length)for(d=a.posts.length,e=a.postIndex;e<d;e++)c+=a.posts[e].text||a.posts[e].url?a.commentIndex+e>=a.comments.length+a.posts.length-a.showCount?templates.fourSq.comments.streamAppPostForThread({post:a.posts[e],owner:a.owner}):"":"";return c};
templates.fourSq.activities.showMoreCommentsButton=function(a,b){return'\x3cdiv class\x3d"showMore"\x3e\x3cspan class\x3d"link"\x3e'+(0==a.count?"Show all comments":1==a.count?"Show all comments":"Show all "+soy.$$escapeHtml(a.count)+" comments")+"\x3c/span\x3e\x3c/div\x3e"};templates.fourSq.activities.unreadCount=function(a,b){return 1==a.count?"There is 1 new activity. Click here to show.":"There are "+soy.$$escapeHtml(a.count)+" new activities. Click here to show."};
templates.fourSq.activities.manyNewActivitiesMessage=function(a,b){return"Whoa, a lot has happened! Click to refresh."};
templates.fourSq.activities.listContentDetail=function(a,b){var c='\x3cdiv class\x3d"list detailsBox '+(!a.list.photo||a.suppressListPhoto?"nophoto":"")+'"\x3e\x3cdiv class\x3d"listImage"\x3e';if(a.list.photo&&!a.suppressListPhoto)var d=helpers.photo.nearestBigger(soy.$$augmentMap(a.list.photo,{targetWidth:542,targetHeight:271})),c=c+('\x3ca href\x3d"'+helpers.list.href(soy.$$augmentMap(a.list,{referralId:a.referralId}))+'"\x3e\x3cimg src\x3d"'+soy.$$escapeHtml(d)+'" /\x3e\x3c/a\x3e');return c+='\x3c/div\x3e\x3cdiv class\x3d"listContents"\x3e\x3cp\x3e\x3ca href\x3d"'+
helpers.list.href(soy.$$augmentMap(a.list,{referralId:a.referralId}))+'" class\x3d"name"\x3e'+soy.$$escapeHtml(a.list.name)+'\x3c/a\x3e\x3c/p\x3e\x3cp class\x3d"meta"\x3e\x3cspan class\x3d"creator"\x3e'+helpers.user.microImageWLink(a.list.user)+"Created by "+helpers.user.fullNameLinkWithPrivacy({user:a.list.user,relationship:a.list.user.relationship})+'\x3c/span\x3e\x3cspan class\x3d"listFollow list'+soy.$$escapeHtml(a.list.id)+'"\x3e | \x3cspan class\x3d"button"\x3e\x3c/span\x3e\x3c/span\x3e\x3c/p\x3e\x3c!--\x3cp\x3e'+
helpers.entities.textWithEntitiesLinks({text:a.list.description,entities:a.list.entities,dataSource:"list-desc",referralId:a.referralId})+"\x3c/p\x3e--\x3e\x3c/div\x3e\x3c/div\x3e"};
templates.fourSq.activities.tipContentDetail=function(a,b){var c='\x3cdiv class\x3d"tipDetails"\x3e\x3cspan class\x3d"tipBlock"\x3e\x3cdiv class\x3d"tipContent"\x3e'+helpers.entities.textWithEntitiesLinks({text:a.tip.text,entities:a.tip.entities,referralId:a.referralId,dataSource:"tip-text"})+'\x3cdiv class\x3d"meta"\x3e- '+helpers.user.shortNameWLink(a.tip.user)+' \u00b7 \x3ca class\x3d"createdAt" href\x3d"'+helpers.tip.href(soy.$$augmentMap(a.tip,{referralId:a.referralId}))+'"\x3e'+helpers.util.createdAtSmartDate({createdAt:a.tip.createdAt})+
"\x3c/a\x3e"+(a.tip.url?" \u00b7 "+helpers.tip.readMoreLink(a.tip):"")+"\x3c/div\x3e\x3c/div\x3e";if(a.tip.photo)var d=helpers.photo.nearestBigger(soy.$$augmentMap(a.tip.photo,{targetWidth:512,targetHeight:256})),c=c+('\x3ca href\x3d"'+helpers.tip.href(soy.$$augmentMap(a.tip,{referralId:a.referralId}))+'"\x3e\x3cimg src\x3d"'+soy.$$escapeHtml(d)+'" class\x3d"tipPhoto" /\x3e\x3c/a\x3e');return c+=(a.tip.venue&&!a.suppressVenueBlock?templates.fourSq.activities.venueDetails({venue:a.tip.venue,referralId:a.referralId}):
"")+"\x3c/span\x3e\x3c/div\x3e"};templates.fourSq.activities.venueContentDetail=function(a,b){return'\x3cdiv class\x3d"venueBlock"\x3e'+templates.fourSq.activities.venueDetails(a)+"\x3c/div\x3e"};
templates.fourSq.activities.venueDetails=function(a,b){return'\x3cdiv class\x3d"venueDetails"\x3e'+helpers.venue.primaryCategoryIcon(a.venue)+'\x3cdiv class\x3d"venueInfo"\x3e\x3ch5 class\x3d"venue"\x3e'+helpers.venue.nameWithLink(a)+" \x3c/h5\x3e"+(a.venue.location?"\x3cp\x3e"+helpers.venue.addressCityState({location:a.venue.location})+"\x3c/p\x3e":"")+"\x3c/div\x3e\x3c/div\x3e"};
templates.fourSq.activities.checkinContentDetail=function(a,b){var c="",d=helpers.activity.photosCountClass({photos:a.checkin.photos.items});return c+=(a.checkin.venue&&!a.suppressVenueBlock?templates.fourSq.activities.venueDetails({venue:a.checkin.venue,referralId:a.referralId}):"")+'\x3cdiv class\x3d"shoutPhotosContainer '+soy.$$escapeHtml(d)+'"\x3e\x3cdiv class\x3d"shoutWithPhoto"\x3e'+(a.checkin.shout?'\x3cdiv class\x3d"shout"\x3e\x3cimg src\x3d"'+soy.$$escapeHtml("https://ss1.4sqi.net/img/shout-carat-332ced0f1f6cda4ad646067fa47be7ce.png")+
'" alt\x3d"" class\x3d"shoutCarat" height\x3d"8" width\x3d"14" /\x3e'+helpers.entities.textWithEntitiesLinks({text:a.checkin.shout,entities:a.checkin.entities,referralId:a.referralId,dataSource:"shout"})+"\x3c/div\x3e":"")+(a.checkin.photos&&a.checkin.photos.items?helpers.activity.photos({photos:a.checkin.photos,link:helpers.util.appendReferralId({url:a.checkin.canonicalPath,referralId:a.referralId})}):"")+"\x3c/div\x3e\x3c/div\x3e"};
templates.fourSq.activities.broadcastContentDetail=function(a,b){var c="",d=helpers.activity.photosCountClass({photos:a.broadcast.photos.items});return c+='\x3cdiv class\x3d"shoutPhotosContainer '+soy.$$escapeHtml(d)+' broadcastDetails"\x3e'+(a.broadcast.page&&a.isLike?'\x3cdiv class\x3d"pageDetails"\x3e'+helpers.user.xsmallImageWLink(soy.$$augmentMap(a.broadcast.page,{referralId:a.referralId}))+'\x3cdiv class\x3d"pageInfo"\x3e'+helpers.user.fullNameWLink(a.broadcast.page)+templates.fourSq.activities.broadcastNearbyVenues(a)+
"\x3c/div\x3e\x3c/div\x3e":templates.fourSq.activities.broadcastNearbyVenues(a))+'\x3cdiv class\x3d"shoutWithPhoto"\x3e'+(a.broadcast.shout?'\x3cdiv class\x3d"shout"\x3e\x3cimg src\x3d"'+soy.$$escapeHtml("https://ss1.4sqi.net/img/shout-carat-332ced0f1f6cda4ad646067fa47be7ce.png")+'" alt\x3d"" class\x3d"shoutCarat" height\x3d"8" width\x3d"14" /\x3e'+helpers.entities.textWithEntitiesLinks({text:a.broadcast.shout,entities:a.broadcast.entities,dataSource:"bshout",referralId:a.referralId})+"\x3c/div\x3e":
"")+(a.broadcast.photos&&a.broadcast.photos.items?helpers.activity.photos({photos:a.broadcast.photos,link:helpers.util.appendReferralId({url:a.broadcast.canonicalPath,referralId:a.referralId})}):"")+(a.broadcast.campaign&&a.broadcast.campaign.special?templates.fourSq.special.activityStream({special:a.broadcast.campaign.special}):"")+"\x3c/div\x3e\x3c/div\x3e"};
templates.fourSq.activities.broadcastNearbyVenues=function(a,b){return a.broadcast.nearbyVenues?'\x3cdiv class\x3d"venueDetails"\x3e'+(a.broadcast.nearbyVenues.items&&a.broadcast.nearbyVenues.items[0]?helpers.venue.cityState(a.broadcast.nearbyVenues.items[0]):"")+"\x3c/div\x3e":""};
templates.fourSq.activities.pageContentDetail=function(a,b){return'\x3cdiv class\x3d"page detailsBox"\x3e\x3cdiv class\x3d"pageImage left"\x3e'+helpers.user.mediumImageWLink(soy.$$augmentMap(a.page,{referralId:a.referralId}))+'\x3c/div\x3e\x3cdiv class\x3d"pageContents"\x3e\x3ch5\x3e'+helpers.user.fullNameLinkWithPrivacy({user:a.page,relationship:a.page.relationship,referralId:a.referralId})+'\x3c/h5\x3e\x3cp class\x3d"pageMetaData"\x3e'+(a.page.followers&&a.page.followers.count?'\x3cspan class\x3d"followers"\x3e'+
templates.fourSq.activities.likersCountMessage({count:a.page.followers.count})+"\x3c/span\x3e":"")+(a.page.tips&&a.page.tips.count?' - \x3cspan class\x3d"tips"\x3e'+(0==a.page.tips.count?"0 tips":1==a.page.tips.count?"1 tip":fourSq.i18n.formatNumber(a.page.tips.count,"decimal",void 0,"")+" tips")+"\x3c/span\x3e":"")+"\x3c/p\x3e"+(a.page.pageInfo&&a.page.pageInfo.description?'\x3cp class\x3d"description"\x3e'+soy.$$truncate(soy.$$escapeHtml(a.page.pageInfo.description),200,!0)+"\x3c/p\x3e":"")+templates.fourSq.activities.pageFollowLink(a)+
"\x3c/div\x3e\x3c/div\x3e"};templates.fourSq.activities.likersCountMessage=function(a,b){return 0==a.count?"No followers":1==a.count?"1 follower":fourSq.i18n.formatNumber(a.count,"decimal",void 0,"")+" followers"};
templates.fourSq.activities.pageFollowLink=function(a,b){var c;return c=""+('\x3cp class\x3d"followButton '+soy.$$escapeHtml("followingThem"==a.page.relationship?"following":"link follow")+'"\x3e\x3cspan class\x3d"follow"\x3e'+templates.fourSq.activities.pageFollowButtonLikeMessage(a)+'\x3c/span\x3e\x3cspan class\x3d"following"\x3e'+templates.fourSq.activities.pageFollowButtonLikingMessage(a)+"\x3c/span\x3e\x3c/p\x3e")};
templates.fourSq.activities.pageFollowButtonLikeMessage=function(a,b){return"Follow "+helpers.user.fullNameWithPrivacy({user:a.page,relationship:a.page.relationship})};templates.fourSq.activities.pageFollowButtonLikingMessage=function(a,b){return"You Follow "+helpers.user.fullNameWithPrivacy({user:a.page,relationship:a.page.relationship})};templates.fourSq.activities.pageLikeError=function(a,b){return"There was a problem following that page. Try again soon."};
templates.fourSq.activities.pluginContentDetail=function(a,b){return'\x3cdiv class\x3d"plugin detailsBox"\x3e\x3cdiv class\x3d"pluginImage left"\x3e'+helpers.apps.imageWLink(soy.$$augmentMap(a.plugin,{referralId:a.referralId}))+'\x3c/div\x3e\x3cdiv class\x3d"pluginContents"\x3e\x3ch5\x3e'+helpers.apps.nameWLink(soy.$$augmentMap(a.plugin,{referralId:a.referralId}))+"\x3c/h5\x3e"+(a.plugin.tagline?'\x3cp class\x3d"tagline"\x3e'+soy.$$escapeHtml(a.plugin.tagline)+"\x3c/p\x3e":"")+"\x3c/div\x3e\x3c/div\x3e"};
templates.fourSq.activities.postContentDetails=function(a,b){for(var c='\x3cdiv class\x3d"post detailsBox"\x3e\x3cdiv class\x3d"postContents"\x3e',d=a.posts,e=d.length,f=0;f<e;f++)var g=d[f],c=c+(g.source?(g.text?"\x3cp\x3e"+soy.$$escapeHtml(g.text)+"\x3c/p\x3e":"")+helpers.apps.basicInfo({app:g.source,referralId:a.referralId}):"");return c+"\x3c/div\x3e\x3c/div\x3e"};
templates.fourSq.activities.photoContentDetail=function(a,b){return'\x3cdiv class\x3d"shoutPhotosContainer photos1"\x3e\x3cdiv class\x3d"photos"\x3e'+helpers.activity.onePhoto({photos:[a.photo],link:helpers.photo.href(soy.$$augmentMap(a.photo,{referralId:a.referralId}))})+"\x3c/div\x3e\x3c/div\x3e"};
templates.fourSq.activities.activityContentDetail=function(a,b){return(a.content?templates.fourSq.activities.contentBlock({content:a.content,referralId:a.referralId,suppressListPhoto:"list"==a.content.type&&a.suppressListPhoto}):"")+(a.indirectContent?templates.fourSq.activities.contentBlock({content:a.indirectContent,referralId:a.referralId,suppressListPhoto:"tip"==a.content.type&&a.content.object.photo}):"")};
templates.fourSq.activities.facepileFlyout=function(a,b){for(var c='\x3cdiv class\x3d"facepile"\x3e',d=a.users,e=d.length,f=0;f<e;f++)c+=helpers.user.xsmallImageWLink(d[f]);return c+"\x3c/div\x3e"};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.autocomplete&&(templates.fourSq.autocomplete={});templates.fourSq.autocomplete.exploreAutocompleterHeader=function(a,b){return'\x3cdiv class\x3d"exploreHeader"\x3eExplore\x3c/div\x3e'};templates.fourSq.autocomplete.exploreAutocompleterItem=function(a,b){return'Search for... \x3cspan class\x3d"term"\x3e'+soy.$$escapeHtml(a.term)+"\x3c/span\x3e"};
templates.fourSq.autocomplete.peopleAutocompleterHeader=function(a,b){return'\x3cdiv class\x3d"peopleHeader"\x3ePeople\x3c/div\x3e'};templates.fourSq.autocomplete.peopleAutocompleterItem=function(a,b){return'Search people for... \x3cspan class\x3d"term"\x3e'+soy.$$escapeHtml(a.term)+"\x3c/span\x3e"};templates.fourSq.autocomplete.pagesAutocompleterHeader=function(a,b){return'\x3cdiv class\x3d"pagesHeader"\x3ePages\x3c/div\x3e'};
templates.fourSq.autocomplete.pagesAutocompleterItem=function(a,b){return'Search pages for... \x3cspan class\x3d"term"\x3e'+soy.$$escapeHtml(a.term)+"\x3c/span\x3e"};templates.fourSq.autocomplete.placesHeader=function(a,b){return'\x3cdiv class\x3d"placesHeader"\x3ePlaces\x3c/div\x3e'};templates.fourSq.autocomplete.friendsHeader=function(a,b){return"Friends"};templates.fourSq.autocomplete.followingHeader=function(a,b){return"Following"};templates.fourSq.autocomplete.categoriesHeader=function(a,b){return"Categories"};
templates.fourSq.autocomplete.chainsHeader=function(a,b){return"Chains"};templates.fourSq.autocomplete.queriesHeader=function(a,b){return"Search for..."};
templates.fourSq.autocomplete.userCompletion=function(a,b){return'\x3cdiv class\x3d"userCompletion"\x3e\x3cdiv class\x3d"userImgContainer"\x3e\x3cimg class\x3d"userImg" src\x3d"'+soy.$$escapeHtml(a.resultPhotoUrl)+'" /\x3e\x3c/div\x3e\x3cdiv class\x3d"name"\x3e'+soy.$$escapeHtml(a.firstName)+(a.lastName?" "+soy.$$escapeHtml(a.lastName):'\x3cdiv class\x3d"detail"\x3e \x3c/div\x3e')+"\x3c/div\x3e\x3c/div\x3e"};
templates.fourSq.autocomplete.venueCompletion=function(a,b){return'\x3cdiv class\x3d"venueCompletion"\x3e\x3cdiv class\x3d"categoryIconContainer"\x3e\x3cimg class\x3d"categoryIcon" src\x3d"'+soy.$$escapeHtml(a.categoryIcon)+'" /\x3e\x3c/div\x3e\x3cdiv class\x3d"name"\x3e'+soy.$$escapeHtml(a.venueName)+"\x3c/div\x3e"+(a.address?'\x3cdiv class\x3d"detail"\x3e'+soy.$$escapeHtml(a.address)+(a.crossStreet?" ("+soy.$$escapeHtml(a.crossStreet)+")":"")+"\x26nbsp;\x3c/div\x3e":"")+"\x3c/div\x3e"};
templates.fourSq.autocomplete.categoryCompletion_=function(a,b){return'\x3cdiv class\x3d"categoryCompletion"\x3e\x3cdiv class\x3d"categoryIconContainer"\x3e\x3cimg class\x3d"categoryIcon" src\x3d"'+soy.$$escapeHtml(a.categoryIcon)+'" /\x3e\x3c/div\x3e\x3cdiv class\x3d"name"\x3e'+soy.$$escapeHtml(a.categoryName)+"\x3c/div\x3e\x3c/div\x3e"};
templates.fourSq.autocomplete.categoryCompletionWithEntities=function(a,b){var c="",d=templates.fourSq.autocomplete.categoryWithEntities_(a);return c+=templates.fourSq.autocomplete.categoryCompletion_({categoryName:d&&d.contentKind&&d.contentKind==goog.soy.data.SanitizedContentKind.HTML?d:soydata.VERY_UNSAFE.ordainSanitizedHtml(d),categoryIcon:helpers.category.thumbnail(a.category)})};
templates.fourSq.autocomplete.categoryWithEntities_=function(a,b){return a.category.query?helpers.entities.textWithEntities(a.category.query):soy.$$escapeHtml(a.category.name)};
templates.fourSq.autocomplete.hierarchicalCategoryCompletion=function(a,b){var c="",d=a.parentCategory?templates.fourSq.autocomplete.categoryWithEntities_({category:a.parentCategory})+" \x3e "+templates.fourSq.autocomplete.categoryWithEntities_(a):templates.fourSq.autocomplete.categoryWithEntities_(a);return c+=templates.fourSq.autocomplete.categoryCompletion_({categoryName:d&&d.contentKind&&d.contentKind==goog.soy.data.SanitizedContentKind.HTML?d:soydata.VERY_UNSAFE.ordainSanitizedHtml(d),categoryIcon:helpers.category.thumbnail(a.category)})};
templates.fourSq.autocomplete.queryCompletion=function(a,b){var c="",d=a.icon?a.icon.fullPath?soy.$$escapeHtml(a.icon.fullPath):helpers.image.nearestBigger(soy.$$augmentMap(a.icon,{desiredSize:32})):"";return c+='\x3cdiv class\x3d"queryCompletion"\x3e'+(a.icon?'\x3cdiv class\x3d"categoryIconContainer"\x3e\x3cimg class\x3d"categoryIcon" src\x3d"'+soy.$$escapeHtml(d)+'" /\x3e\x3c/div\x3e':"")+'\x3cdiv class\x3d"name"\x3e'+helpers.entities.textWithEntities(a.query)+"\x3c/div\x3e\x3c/div\x3e"};
templates.fourSq.autocomplete.categoryAutocompleterHeader=function(a,b){return"Categories"};templates.fourSq.autocomplete.locationCompletion=function(a,b){return a.interpretation.feature.highlightedName?soy.$$filterNoAutoescape(a.interpretation.feature.highlightedName):soy.$$escapeHtml(a.interpretation.feature.displayName)};templates.fourSq.autocomplete.chicletAutocompleterHeader=function(a,b){return'\x3cdiv class\x3d"chicletHeader"\x3eSearch for...\x3c/div\x3e'};
templates.fourSq.autocomplete.unifiedQueryTerm=function(a,b){return'\x3cdiv class\x3d"unifiedQueryComplete"\x3e\x3cdiv class\x3d"autocompleteIconWrapper"\x3e'+(a.apiResult.object.icon?'\x3cimg src\x3d"'+helpers.image.nearestBigger(soy.$$augmentMap(a.apiResult.object.icon,{targetWidth:32}))+'" alt\x3d"'+soy.$$escapeHtml(a.apiResult.text)+'" /\x3e':a.apiResult.object.bestPhoto?helpers.photo.squareImage(soy.$$augmentMap(a.apiResult.object.bestPhoto,{size:32,altText:a.apiResult.text})):"")+'\x3c/div\x3e\x3cdiv class\x3d"autocompleteDetailsWrapper"\x3e\x3cdiv class\x3d"autocompleteText"\x3e'+
helpers.entities.textWithEntities({text:a.apiResult.text,entities:a.apiResult.entities})+"\x3c/div\x3e"+(a.apiResult.object.additionalText?'\x3cdiv class\x3d"additionalText"\x3e'+soy.$$escapeHtml(a.apiResult.object.additionalText)+"\x3c/div\x3e":a.apiResult.object.location?'\x3cdiv class\x3d"additionalText"\x3e'+helpers.venue.addressWithCross({location:a.apiResult.object.location})+"\x3c/div\x3e":"")+"\x3c/div\x3e\x3c/div\x3e"};
templates.fourSq.autocomplete.chainCompletion_=function(a,b){return'\x3cdiv class\x3d"chainCompletion"\x3e\x3cdiv class\x3d"chainLogoContainer"\x3e\x3cimg class\x3d"chainLogo" src\x3d"'+soy.$$escapeHtml(a.chainLogo)+'" /\x3e\x3c/div\x3e\x3cdiv class\x3d"name"\x3e'+soy.$$escapeHtml(a.chainName)+"\x3c/div\x3e\x3c/div\x3e"};
templates.fourSq.autocomplete.chainCompletionWithEntities=function(a,b){var c="",d=templates.fourSq.autocomplete.chainWithEntities_(a);return c+=templates.fourSq.autocomplete.chainCompletion_({chainName:d&&d.contentKind&&d.contentKind==goog.soy.data.SanitizedContentKind.HTML?d:soydata.VERY_UNSAFE.ordainSanitizedHtml(d),chainLogo:helpers.category.thumbnail({icon:a.chain.logo,transparent:!0})})};
templates.fourSq.autocomplete.chainWithEntities_=function(a,b){return a.chain.query?helpers.entities.textWithEntities(a.chain.query):soy.$$escapeHtml(a.chain.bestName.name)};templates.fourSq.autocomplete.autocompleteSuggestion=function(a,b){return'\x3ctr class\x3d"autocompleteSuggestion"\x3e\x3ctd class\x3d"target"\x3e'+soy.$$escapeHtml(a.label)+"\x3c/td\x3e\x3c/tr\x3e"};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.autocomplete&&(templates.fourSq.autocomplete={});"undefined"==typeof templates.fourSq.autocomplete.chiclet&&(templates.fourSq.autocomplete.chiclet={});
templates.fourSq.autocomplete.chiclet.chicletSection=function(a,b){return'\x3cdiv class\x3d"chiclet'+(a.subtext?" multiline":"")+'" data-id\x3d"'+soy.$$escapeHtml(a.category)+'"\x3e\x3cdiv class\x3d"chicletIconContainer"\x3e\x3cimg src\x3d"'+soy.$$escapeHtml(a.img)+'" alt\x3d"" width\x3d"32" height\x3d"32" /\x3e\x3c/div\x3e\x3cspan class\x3d"term"\x3e'+soy.$$escapeHtml(a.term)+"\x3c/span\x3e"+(a.subtext?'\x3cbr/\x3e\x3cspan class\x3d"subtext"\x3e'+soy.$$escapeHtml(a.subtext)+"\x3c/span\x3e":"")+"\x3c/div\x3e"};
templates.fourSq.autocomplete.chiclet.chicletCompleterItem=function(a,b){a=a||{};var c="";switch(a.category){case "food":c+=templates.fourSq.autocomplete.chiclet.chicletSection(soy.$$augmentMap(a,{img:fourSq.retina.isRetina()?"https://ss0.4sqi.net/img/autocomplete/icon-food@2x-0ef4087b14d302cf49b7d4c59b81e4a5.png":"https://ss1.4sqi.net/img/autocomplete/icon-food-ed3a94563906ecfc0e8200f889bb7b3e.png",term:"Food"}));break;case "coffee":c+=templates.fourSq.autocomplete.chiclet.chicletSection(soy.$$augmentMap(a,
{img:fourSq.retina.isRetina()?"https://ss0.4sqi.net/img/autocomplete/icon-coffee@2x-4574bd748d1aa8f82af3be19a63abba5.png":"https://ss0.4sqi.net/img/autocomplete/icon-coffee-52ac3da1562f76aae325f3e519775dde.png",term:"Coffee"}));break;case "drinks":c+=templates.fourSq.autocomplete.chiclet.chicletSection(soy.$$augmentMap(a,{img:fourSq.retina.isRetina()?"https://ss0.4sqi.net/img/autocomplete/icon-nightlife@2x-ca1c5f155cec8de7b7b24f8b348846cd.png":"https://ss1.4sqi.net/img/autocomplete/icon-nightlife-2b61ef59dd026fc8fef47abed9d13cea.png",
term:"Nightlife"}));break;case "shops":c+=templates.fourSq.autocomplete.chiclet.chicletSection(soy.$$augmentMap(a,{img:fourSq.retina.isRetina()?"https://ss1.4sqi.net/img/autocomplete/icon-shops@2x-fc00a6f3308e568a1b784e913f0da339.png":"https://ss0.4sqi.net/img/autocomplete/icon-shops-3179ec4f15a8a11bb8f572f9917cf7ea.png",term:"Shopping"}));break;case "arts":c+=templates.fourSq.autocomplete.chiclet.chicletSection(soy.$$augmentMap(a,{img:fourSq.retina.isRetina()?"https://ss1.4sqi.net/img/autocomplete/icon-arts@2x-93ef728e02e9a8789a1c6c3bd7c9407f.png":
"https://ss1.4sqi.net/img/autocomplete/icon-arts-78db8c2bded4dc431381277ba99b4b15.png",term:"Arts"}));break;case "sights":c+=templates.fourSq.autocomplete.chiclet.chicletSection(soy.$$augmentMap(a,{img:fourSq.retina.isRetina()?"https://ss1.4sqi.net/img/autocomplete/icon-sights@2x-483ba89aac81d6fadfc969275c7d5d30.png":"https://ss0.4sqi.net/img/autocomplete/icon-sights-b9967e3df67c84e0ab2ca6ea56bcb25b.png",term:"Sights"}));break;case "outdoors":c+=templates.fourSq.autocomplete.chiclet.chicletSection(soy.$$augmentMap(a,
{img:fourSq.retina.isRetina()?"https://ss1.4sqi.net/img/autocomplete/icon-outdoors@2x-538e1730d97ff73e956af21a67cf5794.png":"https://ss1.4sqi.net/img/autocomplete/icon-outdoors-9aa65094c88446b54f98b23a958156f7.png",term:"Outdoors"}));break;case "trending":c+=templates.fourSq.autocomplete.chiclet.chicletSection(soy.$$augmentMap(a,{img:fourSq.retina.isRetina()?"https://ss1.4sqi.net/img/autocomplete/icon-trending@2x-7fb68540fe61905ab9dc01574f548c29.png":"https://ss0.4sqi.net/img/autocomplete/icon-trending-5e3867ea97a5b07f8345ce8202f4a950.png",
term:"Trending"}));break;case "saved":c+=templates.fourSq.autocomplete.chiclet.chicletSection(soy.$$augmentMap(a,{img:fourSq.retina.isRetina()?"https://ss0.4sqi.net/img/autocomplete/icon-savedplaces@2x-35c11fdf99509b56e4b4133b0a5e081f.png":"https://ss0.4sqi.net/img/autocomplete/icon-savedplaces-c68d4451a98d21ad87d51fa70ea81df7.png",term:"Saved",subtext:"Places you've saved to your lists"}));break;case "newVenues":c+=templates.fourSq.autocomplete.chiclet.chicletSection(soy.$$augmentMap(a,{img:fourSq.retina.isRetina()?
"https://ss0.4sqi.net/img/autocomplete/icon-newvenue@2x-57c3bf502bad4ae6db8240fb3fd1740c.png":"https://ss1.4sqi.net/img/autocomplete/icon-newvenue-36a5ecb0feeeae564193b7fc991374f8.png",term:"Recently Opened"}));break;case "specials":c+=templates.fourSq.autocomplete.chiclet.chicletSection(soy.$$augmentMap(a,{img:fourSq.retina.isRetina()?"https://ss1.4sqi.net/img/autocomplete/icon-specials@2x-a6f11ca726e059a2f4f12a96d159b4b7.png":"https://ss0.4sqi.net/img/autocomplete/icon-specials-2a255212316086ffc62a7e569ab73612.png",
term:"Specials"}));break;default:c+=templates.fourSq.autocomplete.chiclet.chicletSection(soy.$$augmentMap(a,{img:fourSq.retina.isRetina()?"https://ss0.4sqi.net/img/autocomplete/icon-toppicks@2x-22646c9f01c97da8fd11da838363292d.png":"https://ss0.4sqi.net/img/autocomplete/icon-toppicks-bb747e8674bd76a3cf7253df822f7013.png",term:"Best Nearby",subtext:"Our best suggestions for right now"}))}return c};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.broadcast&&(templates.fourSq.broadcast={});
templates.fourSq.broadcast.contents=function(a,b){var c;c=0<a.venuePickerData.numAllowedOpenVenues;return c='\x3cdiv id\x3d"broadcastPage" class\x3d"twoColumns"\x3e'+('\x3cdiv class\x3d"wideColumn"\x3e'+(c?"\x3ch1\x3eWrite a Tip\x3c/h1\x3e"+templates.fourSq.venuePicker.scopeStatusBar(soy.$$augmentMap(a.venuePickerData,{page:a.page}))+'\x3cdiv id\x3d"addBroadcastBlock"\x3e'+templates.fourSq.broadcast.add(a)+"\x3c/div\x3e":"")+'\x3cdiv class\x3d"blockContainer recentUpdates broadcasts"\x3e\x3cdiv class\x3d"blockHeader noBuffer"\x3e\x3ch3\x3ePast Tips\x3c/h3\x3e\x3c/div\x3e'+
(a.updatesJson?templates.fourSq.activities.homepageStream({stream:a.updatesJson,currentUser:a.currentUser}):"")+'\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"narrowColumn"\x3e'+(c?templates.fourSq.broadcast.eduSmall(a):"")+"\x3c/div\x3e\x3c/div\x3e")};templates.fourSq.broadcast.removeAttachmentButton=function(a,b){return'\x3ca href\x3d"#" class\x3d"removeAttachment delete"\x3eRemove\x3c/a\x3e'};templates.fourSq.broadcast.genericDeleteSuccess=function(a,b){return"Successfully deleted your update"};
templates.fourSq.broadcast.genericDeleteFailure=function(a,b){return"Failed to delete your update. "+soy.$$escapeHtml(a.error)};templates.fourSq.broadcast.genericPhotoFailure=function(a,b){return"Failed to upload photo(s)... Please ensure your photo is formatted for the web (encoded using sRGB) and try again."};templates.fourSq.broadcast.genericCreateFailure=function(a,b){return"Failed to share update... please try again"};templates.fourSq.broadcast.duplicateScopeFailure=function(a,b){return"Sent an update to that scope too recently. Wait a bit or delete your previous update"};
templates.fourSq.broadcast.deleteConfirmationPrompt=function(a,b){return'\x3cdiv\x3e\x3ch2 class\x3d"title"\x3eAre you sure you want to delete?\x3c/h2\x3e\x3cdiv class\x3d"dialogButtonContainer"\x3e\x3cspan class\x3d"orangeButton dialogButton confirmYes"\x3eDelete\x3c/span\x3e\x3cspan class\x3d"greyButton dialogButton confirmNo"\x3eCancel\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e'};templates.fourSq.broadcast.hourlyRateFailure=function(a,b){return"Too many chainwide updates sent this hour. Delete one or wait a bit"};
templates.fourSq.broadcast.dailyRateFailure=function(a,b){return"Too many chainwide updates sent today. Delete one or wait a bit"};
templates.fourSq.broadcast.add=function(a,b){var c;return c='\x3cform id\x3d"addBroadcastForm" class\x3d"notrans"\x3e'+('\x3ctextarea class\x3d"formStyle" id\x3d"addBroadcastShout" name\x3d"shout" placeholder\x3d"'+soy.$$escapeHtml("\u201cJoin us for trivia night every Thursday at 7pm!\u201d or \u201cCheck out our seasonal gelato flavors!\u201d")+'" tabindex\x3d"1"\x3e\x3c/textarea\x3e\x3cdiv class\x3d"charCount"\x3e\x3c/div\x3e\x3c/form\x3e\x3cdiv id\x3d"attachButtons"\x3e'+helpers.photoupload.photoMultiUploadControl({inputName:"broadcastPhoto",
action:"/__uploadbroadcastphoto",addButtonHolderClass:"photoAddButtonHolder greyButton",count:3,text:"Attach a photo"})+'\x3c/div\x3e\x3ch5 class\x3d"hidden attachments"\x3eCurrent attachments (maximum of 1 special and 3 photos):\x3c/h5\x3e\x3cdiv id\x3d"currentAttachments" class\x3d"attachments hidden"\x3e\x3cdiv id\x3d"specialAttachments" class\x3d"hidden attachment"\x3e\x3c/div\x3e\x3cdiv id\x3d"photoAttachments" class\x3d"hidden attachment"\x3e\x3c/div\x3e\x3c/div\x3e'+(a.canCreateSilentUpdates?
'\x3cdiv id\x3d"silentUpdates"\x3e\x3cinput type\x3d"checkbox" id\x3d"isSilentCheckbox" style\x3d"float: left;"/\x3e\x3clabel for\x3d"isSilentCheckbox" id\x3d"silentUpdatesLabel"\x3eOnly show this update after it\'s been promoted.\x3cbr/\x3e(Checking this box means your update won\'t appear anywhere until it gets promoted.)\x3c/label\x3e\x3c/div\x3e':"")+'\x3cdiv id\x3d"controls"\x3e\x3cdiv id\x3d"controlsLeft"\x3e'+(a.shareLinkUrl?'\x3cdiv id\x3d"socialTitle"\x3eAlso share with other networks:\x3c/div\x3e\x3cdiv class\x3d"socialButtons"\x3e\x3cinput type\x3d"checkbox" class\x3d"socialCheckbox'+
(a.fbUrl&&a.fbName&&a.fbHasValidUserToken?" linked":"")+'" id\x3d"facebookCheckbox" /\x3e\x3clabel for\x3d"facebookCheckbox"'+(a.fbUrl&&a.fbName&&a.fbHasValidUserToken?' class\x3d"linked"':"")+"\x3e\x3cspan\x3eFacebook\x3c/span\x3e ("+(a.fbUrl&&a.fbName?a.fbHasValidUserToken?'\x3ca href\x3d"'+soy.$$escapeHtml(a.fbUrl)+'" target\x3d"_blank" title\x3d"The update would be shared with this Facebook account"\x3e'+soy.$$truncate(soy.$$escapeHtml(a.fbName),21,!0)+"\x3c/a\x3e":'\x3ca href\x3d"'+soy.$$escapeHtml(a.shareLinkUrl)+
'"\x3eReconnect!\x3c/a\x3e':'\x3ca href\x3d"'+soy.$$escapeHtml(a.shareLinkUrl)+'"\x3eLink your account!\x3c/a\x3e')+')\x3c/label\x3e\x3cinput type\x3d"checkbox" class\x3d"socialCheckbox'+(a.twitterName?" linked":"")+'" id\x3d"twitterCheckbox" /\x3e\x3clabel for\x3d"twitterCheckbox"'+(a.twitterName?' class\x3d"linked"':"")+"\x3e\x3cspan\x3eTwitter\x3c/span\x3e ("+(a.twitterName?'\x3ca target\x3d"_blank" href\x3d"https://twitter.com/'+soy.$$escapeHtml(a.twitterName)+'" title\x3d"The update would be published to this Twitter account"\x3e@'+
soy.$$truncate(soy.$$escapeHtml(a.twitterName),18,!0)+"\x3c/a\x3e":'\x3ca href\x3d"'+soy.$$escapeHtml(a.shareLinkUrl)+'"\x3eLink your account!\x3c/a\x3e')+")\x3c/label\x3e\x3c/div\x3e":"")+'\x3c/div\x3e\x3cdiv id\x3d"controlsRight"\x3e\x3cspan id\x3d"addBroadcastCancel" class\x3d"addBroadcastCancel link"\x3eCancel\x3c/span\x3e\x3cbutton id\x3d"addBroadcastSubmit" class\x3d"addBroadcastSubmit greenButton"\x3eShare\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e')};
templates.fourSq.broadcast.attachedPhotoPlaceholder=function(a,b){return'\x3cdiv class\x3d"attachmentRow"\x3e\x3cdiv class\x3d"photoPlaceholder"\x3ePhoto loaded\x3c/div\x3e\x3c/div\x3e'};templates.fourSq.broadcast.attachedPhoto=function(a,b){return'\x3cdiv class\x3d"attachmentRow"\x3e\x3cdiv class\x3d"photoAttachmentContainer"\x3e\x3cdiv class\x3d"photoAttachmentClip"\x3e\x3cimg class\x3d"photoAttachmentPreview" /\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'};
templates.fourSq.broadcast.eduSmall=function(a,b){return'\x3cdiv class\x3d"eduSmall box"\x3e\x3ch4\x3eHighlight what\u2019s great at your business with a tip. It will appear:\x3c/h4\x3e\x3cul class\x3d"eduText"\x3e\x3cli class\x3d"eduVenue"\x3e\x3ch5\x3eOn your business listing\x3c/h5\x3e\x3cp\x3eTell people what you\u2019re known for or what you do best. Keep them up to date on news, special events, or featured items.\x3c/p\x3e\x3c/li\x3e\x3cli class\x3d"eduTipLocation"\x3e\x3ch5\x3eAbove tips from customers\x3c/h5\x3e\x3cp\x3eMake sure people see your content first. This is your space!\x3c/p\x3e\x3c/li\x3e\x3c/ul\x3e\x3ch4\x3eThen, supercharge your tip!\x3c/h4\x3e\x3cp\x3ePromote your tip as a Foursquare Ad, and we\u2019ll feature it prominently to people nearby to drive them to your business.\x3c/p\x3e\x3cp\x3eLearn more about \x3ca href\x3d"http://business.foursquare.com/ads" target\x3d"_blank"\x3eFoursquare Ads\x3c/a\x3e.\x3c/p\x3e\x3c/div\x3e'};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.chrome&&(templates.fourSq.chrome={});templates.fourSq.chrome.nearbyLocation=function(a,b){return'\x3cli class\x3d"nearbyLocation"\x3e'+soy.$$escapeHtml(a.location.feature.name)+"\x3c/li\x3e"};
templates.fourSq.chrome.inspirationalLocation=function(a,b){return'\x3cli class\x3d"city"\x3e'+(a.location.photo?helpers.photo.nearestBiggerImage(soy.$$augmentMap(a.location.photo,{targetWidth:160,targetHeight:80,extraImgClass:"photo",altText:a.location.name})):'\x3cimg class\x3d"photo" alt\x3d"'+soy.$$escapeHtml(null!=(null==a.location?null:a.location.name)?null==a.location?null:a.location.name:"")+'" src\x3d"'+soy.$$escapeHtml("https://ss1.4sqi.net/img/venuepage/blank-photo-d7f560004201c3d6efa7a79f56b22724.jpg")+
'" /\x3e')+'\x3cdiv class\x3d"photoShadow"\x3e\x3c/div\x3e\x3cdiv class\x3d"details"\x3e\x3cspan\x3e'+soy.$$escapeHtml(a.location.name)+"\x3c/span\x3e\x3c/div\x3e\x3c/li\x3e"};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.chrome&&(templates.fourSq.chrome={});"undefined"==typeof templates.fourSq.chrome.recentvenuesmenu&&(templates.fourSq.chrome.recentvenuesmenu={});
templates.fourSq.chrome.recentvenuesmenu.recentVenuesMenuVenue=function(a,b){return'\x3cli class\x3d"fsc-recentVenuesMenu-venue"\x3e\x3ca class\x3d"fsc-recentVenuesMenu-venueLink" href\x3d"'+helpers.venue.href(a.venue)+'"\x3e\x3cdiv class\x3d"fsc-recentVenuesMenu-venueIconWrapper"\x3e'+helpers.venue.primaryCategoryIcon(soy.$$augmentMap(a.venue,{size:32}))+'\x3c/div\x3e\x3cdiv class\x3d"fsc-recentVenuesMenu-detailsWrapper"\x3e\x3cdiv class\x3d"fsc-recentVenuesMenu-venueName"\x3e'+soy.$$escapeHtml(a.venue.name)+
'\x3c/div\x3e\x3cdiv class\x3d"fsc-recentVenuesMenu-venueAddress"\x3e'+helpers.venue.addressWithCross(a.venue)+"\x3c/div\x3e\x3c/div\x3e\x3c/a\x3e\x3c/li\x3e"};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.debug&&(templates.fourSq.debug={});templates.fourSq.debug.debugNode=function(a,b){return'\x3cdiv\x3e\n  \x3cstyle type\x3d"text/css"\x3e\n    #debug-node {\n      position: fixed;\n      bottom: 0;\n      right: 0;\n      width: 400px;\n      font-size: 10px;\n      overflow: auto;\n      z-index: 300;\n    }\n\n    #debug-node-header {\n      overflow: auto;\n      background-color: #888;\n      font-weight: bold;\n      cursor: pointer;\n      padding: 3px 6px;\n      border: 1px solid #000;\n      border-bottom: 0;\n    }\n\n    #debug-node-header.hidden {\n      display: none;\n    }\n\n    #debug-node-header .type {\n      padding: 3px 6px;\n      margin-right: 12px;\n    }\n\n    #debug-node-msg-container .log-message.info,\n    #debug-node-header .info {\n      background-color: #b5d29c;\n    }\n\n    #debug-node-msg-container .log-message.error,\n    #debug-node-header .error {\n      background-color: #ff776b;\n    }\n\n    #debug-node-msg-container .log-message.debug,\n    #debug-node-header .debug {\n      background-color: #fffb89;\n    }\n\n    #debug-node-messages {\n      display: none;\n      background-color: #fff;\n    }\n\n    #debug-node:hover #debug-node-messages {\n      display: block;\n      border: 1px solid #888;\n    }\n\n    #debug-node-msg-container {\n      overflow: auto;\n      height: 400px;\n    }\n\n    #debug-node-msg-container .log-message {\n      border-bottom: 1px solid #888;\n      padding: 6px;\n    }\n\n    #debug-node-msg-container .log-message .logger {\n      font-weight: bold;\n    }\n\n    #debug-node-msg-container .log-message .args {\n      margin-bottom: 6px;\n      font-style: italic;\n    }\n  \x3c/style\x3e\n  \x3cdiv id\x3d"debug-node"\x3e\x3cdiv id\x3d"debug-node-header" class\x3d"hidden"\x3enerd area/logging:\x3cspan class\x3d"info type"\x3e\x3cspan class\x3d"info-count"\x3e0\x3c/span\x3e\x3c/span\x3e\x3cspan class\x3d"error type"\x3e\x3cspan class\x3d"error-count"\x3e0\x3c/span\x3e\x3c/span\x3e\x3cspan class\x3d"debug type"\x3e\x3cspan class\x3d"debug-count"\x3e0\x3c/span\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv id\x3d"debug-node-messages"\x3e\x3cdiv id\x3d"debug-node-msg-container"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'};
templates.fourSq.debug.logMessage=function(a,b){return'\x3cdiv class\x3d"log-message '+soy.$$escapeHtml(a.className)+'"\x3e\x3cdiv class\x3d"logger"\x3e['+soy.$$escapeHtml(a.loggerName)+"] "+soy.$$escapeHtml(a.time)+"\x3c/div\x3e"+(a.msg?'\x3cdiv class\x3d"msg"\x3e'+soy.$$escapeHtml(a.msg)+"\x3c/div\x3e":"")+(a.args?'\x3cdiv class\x3d"args"\x3e'+soy.$$escapeHtml(a.args)+"\x3c/div\x3e":"")+"\x3c/div\x3e"};
templates.fourSq.debug.traceLink=function(a,b){return'\x3cdiv style\x3d"margin-left: 1em"\x3e\x3ca target\x3d"_blank" href\x3d"http://quickmon.prod.foursquare.com/tracing/trace/'+soy.$$escapeHtml(a.traceId)+'"\x3eView on Traceweb\x3c/a\x3e\x3c/div\x3e'};
templates.fourSq.debug.traceNode=function(a,b){return'\x3cdiv id\x3d"traceContainer" class\x3d"off"\x3e\x3cdiv id\x3d"traceTrigger"\x3eTracer (\x3cspan class\x3d"count"\x3e0\x3c/span\x3e)'+(a.env?" - \x3cspan\x3e"+soy.$$escapeHtml(a.env)+"\x3c/span\x3e":"")+'\x3c/div\x3e\x3cdiv id\x3d"trace" style\x3d"overflow-x: scroll;"\x3e\x3c/div\x3e\x3c/div\x3e'};
templates.fourSq.debug.traceItems=function(a,b){var c;c=""+('\x3cdiv style\x3d"margin-left: 1em"\x3e\x3c!-- \x3ca class\x3d"traceViewToggle"\x3e'+soy.$$escapeHtml(a.trace.name)+'\x3c/a\x3e \x3cbr /\x3e --\x3e\x3ca class\x3d"link traceViewToggle"\x3e[Toggle Timeline]\x3c/a\x3e |\x3ca class\x3d"link togglable-link" data-toggle-type\x3d"threadName"\x3e[Toggle Thread IDs]\x3c/a\x3e |   \x3ca target\x3d"_blank" class\x3d"traceweb-link" style\x3d"display: none" data-id\x3d"'+soy.$$escapeHtml(a.trace.id)+
'" href\x3d"http://quickmon.prod.foursquare.com/tracing/trace/'+soy.$$escapeHtml(a.trace.id)+'"\x3eView on Traceweb\x3c/a\x3e\x3cdiv class\x3d"traceList" style\x3d"padding-left:1em; width:99%;"\x3e');for(var d=a.trace.span.log,e=d.length,f=0;f<e;f++){var g=d[f],h=null!=g.end?g.end-g.start:null;c+='\x3cdiv class\x3d"trace-item closed " style\x3d"text-decoration: none;"\x3e'+(g.backtrace&&0<g.backtrace.length?'\x3cspan class\x3d"toggler closed"\x3e\x26#9654;\x3c/span\x3e\x3cspan class\x3d"toggler open"\x3e\x26#9660;\x3c/span\x3e':
"")+'\x3cdiv class\x3d"trace-summary" style\x3d"font-family: monospace; display: inline; white-space: pre;"\x3e'+soy.$$escapeHtml(f+1)+" thread:"+(null!=g.startThreadId?soy.$$escapeHtml(Math.round(g.startThreadId)):"-")+" "+(null!=h?"\x3cb\x3e"+soy.$$escapeHtml(Math.round(h))+" ms\x3c/b\x3e":"incomplete")+' \x3cspan class\x3d"remote-marker"\x3e\x3c/span\x3e\x3cspan\x3e'+soy.$$escapeHtml(g.message)+':\x3c/span\x3e \x3cspan class\x3d"traceText"\x3e'+soy.$$escapeHtml(g.message)+"\x3c/span\x3e\x3c/div\x3e";
if(g.backtrace&&0<g.backtrace.length){c+='\x3cdiv class\x3d"backtrace"\x3e\x3cdiv\x3eThread Name : '+soy.$$escapeHtml(g.startThreadName)+"\x3c/div\x3e\x3cdiv\x3e\x3cb\x3e"+soy.$$escapeHtml(g.mostRelevantTraceItem)+"(Most relevant stack trace item)\x3c/b\x3e\x3c/div\x3e\x3chr/\x3e";for(var g=g.backtrace,h=g.length,l=0;l<h;l++)c+="\x3cdiv\x3e"+soy.$$escapeHtml(g[l])+"\x3c/div\x3e";c+="\x3c/div\x3e"}c+="\x3c/div\x3e"}d=a.trace.span.runLog.end-a.trace.span.runLog.start;c+='\x3c/div\x3e\x3cdiv class\x3d"traceTimeline"\x3e\x3ctable class\x3d"trace"\x3e\x3cthead\x3e\x3cth\x3e\x3c/th\x3e\x3cth\x3ename\x3c/th\x3e\x3cth\x3ethread name\x3c/th\x3e\x3cth\x3ethread id\x3c/th\x3e\x3cth\x3eduration ms\x3c/th\x3e\x3cth class\x3d"traceTimeline"\x3etimeline\x3c/th\x3e\x3c/thead\x3e\x3ctbody\x3e';
e=a.trace.span.log;f=e.length;for(g=0;g<f;g++){var h=e[g],l=null!=h.end?h.end-h.start:null,m=Math.round((h.start-a.trace.span.runLog.start)/d*900),q=Math.round(l/d*900);c+='\x3ctr class\x3d"traceRow" data-async-stack\x3d"'+soy.$$escapeHtml(h.asyncStack)+'"'+(h.stackTrace?'data-stack-trace\x3d"'+soy.$$escapeHtml(h.stackTrace)+'"':"")+"\x3e\x3ctd\x3e"+soy.$$escapeHtml(g+1)+"\x3c/td\x3e\x3ctd\x3e"+("statmon"==h.name?"Statmon \u2014 "+soy.$$escapeHtml(h.message):soy.$$escapeHtml(h.message))+"\x3c/td\x3e\x3ctd\x3e"+
(null!=h.startThreadName?'\x3cspan class\x3d"togglable togglable-hidden" data-toggle-type\x3d"threadName"\x3e'+soy.$$escapeHtml(h.startThreadName)+'\x3c/span\x3e\x3cspan class\x3d"togglable" data-toggle-type\x3d"threadName"\x3e\x3ca title\x3d"'+soy.$$escapeHtml(h.startThreadName)+'" class\x3d"togglable-link" data-toggle-type\x3d"threadName"\x3ehidden\x3c/a\x3e\x3c/span\x3e':"-")+"\x3c/td\x3e\x3ctd\x3e"+(null!=h.startThreadId?soy.$$escapeHtml(Math.round(h.startThreadId)):"-")+"\x3c/td\x3e\x3ctd\x3e"+
(null!=l?soy.$$escapeHtml(Math.round(l)):"-")+'\x3c/td\x3e\x3ctd\x3e\x3cdiv class\x3d"traceTimeSegment" style\x3d"margin-left:'+soy.$$escapeHtml(m)+"px; width:"+soy.$$escapeHtml(q)+'px;"/\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr class\x3d"traceText "\x3e\x3ctd colspan\x3d"7"\x3e\x3cdiv\x3e\x3cdiv\x3e\x3cstrong\x3eAsync Stack\x3c/strong\x3e\x3c/div\x3e\x3csmall\x3e';if(null!=h.asyncStack&&null!=h.asyncStack.stackTrace){l=h.asyncStack.stackTrace;m=l.length;for(q=0;q<m;q++)c+="\x3cdiv\x3e"+soy.$$escapeHtml(l[q])+
"\x3c/div\x3e";c+="\x3c/small\x3e"+(h.stackGap?"\x3cb\x3eStack Gap\x3cbr/\x3ePrevious: "+soy.$$escapeHtml(h.stackGap[0])+"\x3cbr/\x3eCurrent: "+soy.$$escapeHtml(h.stackGap[1])+"\x3c/b\x3e\x3cbr/\x3e":"")}c+="\x3c/div\x3e\x3cdiv\x3e";if(h.backtrace){c+='\x3ca class\x3d"link expandTraceAnchor"\x3eFull Trace\x3c/a\x3e\x3cdiv style\x3d"display:none;"\x3e';l=h.backtrace;m=l.length;for(q=0;q<m;q++){var s=l[q];c+=(h.stackGap&&s==h.stackGap[1]?"\x3cb\x3e"+soy.$$escapeHtml(s)+"\x3c/b\x3e":soy.$$escapeHtml(s))+
"\x3cbr/\x3e"}c+="\x3c/div\x3e"}c+="\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e"}return c+="\x3c/tbody\x3e\x3c/table\x3e\x3c/div\x3e\x3c/div\x3e\x3chr/\x3e"};
templates.fourSq.debug.spanChildren=function(a,b){var c;c=""+('\x3cdiv style\x3d"margin-left: 1em"\x3e\x3c!-- \x3ca class\x3d"traceViewToggle"\x3e'+soy.$$escapeHtml(a.trace.name)+'\x3c/a\x3e \x3cbr /\x3e --\x3e\x3ca class\x3d"link traceViewToggle"\x3e[Toggle Timeline]\x3c/a\x3e |\x3ca class\x3d"link togglable-link" data-toggle-type\x3d"threadName"\x3e[Toggle Thread IDs]\x3c/a\x3e |   \x3ca target\x3d"_blank" class\x3d"traceweb-link" style\x3d"display: none" data-id\x3d"'+soy.$$escapeHtml(a.trace.id)+
'" href\x3d"http://quickmon.prod.foursquare.com/tracing/trace/'+soy.$$escapeHtml(a.trace.id)+'"\x3eView on Traceweb\x3c/a\x3e\x3cdiv class\x3d"traceList" style\x3d"padding-left:1em; width:99%;"\x3e');for(var d=a.children,e=d.length,f=0;f<e;f++){var g=d[f],h=null!=g.span.runLog.end?g.span.runLog.end-g.span.runLog.start:null;c+='\x3cdiv class\x3d"trace-item closed " style\x3d"text-decoration: none;"\x3e'+(g.span.runLog.backtrace&&0<g.span.runLog.backtrace.length?'\x3cspan class\x3d"toggler closed"\x3e\x26#9654;\x3c/span\x3e\x3cspan class\x3d"toggler open"\x3e\x26#9660;\x3c/span\x3e':
"")+'\x3cdiv class\x3d"trace-summary" style\x3d"font-family: monospace; display: inline; white-space: pre;"\x3e'+soy.$$escapeHtml(f+1)+" thread:"+(null!=g.span.runLog.startThreadId?soy.$$escapeHtml(Math.round(g.span.runLog.startThreadId)):"-")+" "+(null!=h?"\x3cb\x3e"+soy.$$escapeHtml(Math.round(h))+" ms\x3c/b\x3e":"incomplete")+' \x3cspan class\x3d"remote-marker"\x3e\x3c/span\x3e\x3cspan\x3e\x3ca href\x3d"/trace/'+soy.$$escapeHtml(g.span.id.asString)+'"\x3e'+soy.$$escapeHtml(g.span.app)+":"+soy.$$escapeHtml(g.span.name)+
'\x3c/a\x3e\x3c/span\x3e \x3cspan class\x3d"traceText"\x3e'+soy.$$escapeHtml(g.span.runLog.message)+"\x3c/span\x3e\x3c/div\x3e";if(g.span.runLog.backtrace&&0<g.span.runLog.backtrace.length){c+='\x3cdiv class\x3d"backtrace"\x3e\x3cdiv\x3eThread Name : '+soy.$$escapeHtml(g.span.runLog.startThreadName)+"\x3c/div\x3e\x3cdiv\x3e\x3cb\x3e"+soy.$$escapeHtml(g.span.runLog.mostRelevantTraceItem)+"(Most relevant stack trace item)\x3c/b\x3e\x3c/div\x3e\x3chr/\x3e";for(var g=g.span.runLog.backtrace,h=g.length,
l=0;l<h;l++)c+="\x3cdiv\x3e"+soy.$$escapeHtml(g[l])+"\x3c/div\x3e";c+="\x3c/div\x3e"}c+="\x3c/div\x3e"}d=a.trace.span.runLog.end-a.trace.span.runLog.start;c+='\x3c/div\x3e\x3cdiv class\x3d"traceTimeline"\x3e\x3ctable class\x3d"trace"\x3e\x3cthead\x3e\x3cth\x3e\x3c/th\x3e\x3cth\x3ename\x3c/th\x3e\x3cth\x3ethread name\x3c/th\x3e\x3cth\x3ethread id\x3c/th\x3e\x3cth\x3eduration ms\x3c/th\x3e\x3cth class\x3d"traceTimeline"\x3etimeline\x3c/th\x3e\x3c/thead\x3e\x3ctbody\x3e';e=a.children;f=e.length;for(g=
0;g<f;g++){var h=e[g],l=null!=h.span.runLog.end?h.span.runLog.end-h.span.runLog.start:null,m=Math.round((h.span.runLog.start-a.trace.span.runLog.start)/d*900),q=Math.round(l/d*900);c+='\x3ctr class\x3d"traceRow" data-async-stack\x3d"'+soy.$$escapeHtml(h.span.runLog.asyncStack)+'"'+(h.span.runLog.stackTrace?'data-stack-trace\x3d"'+soy.$$escapeHtml(h.span.runLog.stackTrace)+'"':"")+"\x3e\x3ctd\x3e"+soy.$$escapeHtml(g+1)+'\x3c/td\x3e\x3ctd\x3e\x3ca href\x3d"/trace/'+soy.$$escapeHtml(h.span.id.asString)+
'"\x3e'+soy.$$escapeHtml(h.span.app)+":"+soy.$$escapeHtml(h.span.name)+"\x3c/a\x3e\x3c/td\x3e\x3ctd\x3e"+(null!=h.span.runLog.startThreadName?'\x3cspan class\x3d"togglable togglable-hidden" data-toggle-type\x3d"threadName"\x3e'+soy.$$escapeHtml(h.span.runLog.startThreadName)+'\x3c/span\x3e\x3cspan class\x3d"togglable" data-toggle-type\x3d"threadName"\x3e\x3ca title\x3d"'+soy.$$escapeHtml(h.span.runLog.startThreadName)+'" class\x3d"togglable-link" data-toggle-type\x3d"threadName"\x3ehidden\x3c/a\x3e\x3c/span\x3e':
"-")+"\x3c/td\x3e\x3ctd\x3e"+(null!=h.span.runLog.startThreadId?soy.$$escapeHtml(Math.round(h.span.runLog.startThreadId)):"-")+"\x3c/td\x3e\x3ctd\x3e"+(null!=l?soy.$$escapeHtml(Math.round(l)):"-")+'\x3c/td\x3e\x3ctd\x3e\x3cdiv class\x3d"traceTimeSegment" style\x3d"margin-left:'+soy.$$escapeHtml(m)+"px; width:"+soy.$$escapeHtml(q)+'px;"/\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr class\x3d"traceText "\x3e\x3ctd colspan\x3d"7"\x3e\x3cdiv\x3e\x3cdiv\x3e\x3cstrong\x3eAsync Stack\x3c/strong\x3e\x3c/div\x3e\x3csmall\x3e';
if(null!=h.span.runLog.asyncStack&&null!=h.span.runLog.asyncStack.stackTrace){l=h.span.runLog.asyncStack.stackTrace;m=l.length;for(q=0;q<m;q++)c+="\x3cdiv\x3e"+soy.$$escapeHtml(l[q])+"\x3c/div\x3e";c+="\x3c/small\x3e"+(h.span.runLog.stackGap?"\x3cb\x3eStack Gap\x3cbr/\x3ePrevious: "+soy.$$escapeHtml(h.span.runLog.stackGap[0])+"\x3cbr/\x3eCurrent: "+soy.$$escapeHtml(h.span.runLog.stackGap[1])+"\x3c/b\x3e\x3cbr/\x3e":"")}c+="\x3c/div\x3e\x3cdiv\x3e";if(h.span.runLog.backtrace){c+='\x3ca class\x3d"link expandTraceAnchor"\x3eFull Trace\x3c/a\x3e\x3cdiv style\x3d"display:none;"\x3e';
l=h.span.runLog.backtrace;m=l.length;for(q=0;q<m;q++){var s=l[q];c+=(h.span.runLog.stackGap&&s==h.span.runLog.stackGap[1]?"\x3cb\x3e"+soy.$$escapeHtml(s)+"\x3c/b\x3e":soy.$$escapeHtml(s))+"\x3cbr/\x3e"}c+="\x3c/div\x3e"}c+="\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e"}return c+="\x3c/tbody\x3e\x3c/table\x3e\x3c/div\x3e\x3c/div\x3e\x3chr/\x3e"};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.drag&&(templates.fourSq.drag={});"undefined"==typeof templates.fourSq.drag.helper&&(templates.fourSq.drag.helper={});"undefined"==typeof templates.fourSq.drag.helper.common&&(templates.fourSq.drag.helper.common={});"undefined"==typeof templates.fourSq.drag.helper.common.maps&&(templates.fourSq.drag.helper.common.maps={});
"undefined"==typeof templates.fourSq.drag.helper.common.maps.copy&&(templates.fourSq.drag.helper.common.maps.copy={});
templates.fourSq.drag.helper.common.maps.copy.checkinTooltip=function(a,b){return'\x3cdiv class\x3d"checkinTooltip"\x3e\x3cp class\x3d"basicInfo"\x3e'+helpers.user.fullNameWLink(a.checkin.user)+" @ "+helpers.venue.nameWithLink({venue:a.checkin.venue})+'\x3c/p\x3e\x3cp class\x3d"secondaryInfo"\x3e\x3ca href\x3d"'+soy.$$escapeHtml(a.checkin.canonicalPath)+'"\x3e'+helpers.util.smartDate({then:a.checkin.createdAt,ago:!1})+"\x3c/a\x3e\x3c/p\x3e\x3c/div\x3e"};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.facebook&&(templates.fourSq.facebook={});templates.fourSq.facebook.facepile=function(a,b){return'\x3ciframe src\x3d"https://www.facebook.com/plugins/facepile.php?app_id\x3d'+soy.$$escapeHtml(a.fbAppId)+"\x26amp;width\x3d"+soy.$$escapeHtml(a.width)+'\x26amp;max_rows\x3d1" scrolling\x3d"no" frameborder\x3d"0" style\x3d"border:none; overflow:hidden; width:'+soy.$$escapeHtml(a.width)+'px; height: 70px;" allowTransparency\x3d"true"\x3e\x3c/iframe\x3e'};"undefined"==typeof helpers.activity&&(helpers.activity={});
helpers.activity.targetUrl=function(a,b){var c="";switch(a.target?soy.$$escapeHtml(a.target.type):"none"){case "badge":c+=helpers.activity.urlHelper({object:a.target.object,type:"badge"});break;case "checkin":c+=helpers.activity.urlHelper(soy.$$augmentMap(a,{object:a.target.object,type:"checkin"}));break;case "list":c+="/list/"+soy.$$escapeHtml(a.target.object.id);break;case "user":c+="/user/"+soy.$$escapeHtml(a.target.object.id);break;case "venue":c+="/venue/"+soy.$$escapeHtml(a.target.object.id);
break;case "tip":c+="/item/"+soy.$$escapeHtml(a.target.object.id);break;case "todo":c+="/item/"+soy.$$escapeHtml(a.target.object.id);break;case "special":c+="/venue/"+soy.$$escapeHtml(a.target.object.venue.id);break;case "url":c+=soy.$$escapeHtml(a.target.object.url);break;case "facebookSettings":c+="/settings/sharing";break;case "pendingCheckin":c+="/settings/friendcheckins"+(null!=(null==a.target.object?null:a.target.object.id)?"?trigger\x3d"+soy.$$escapeHtml(a.target.object.id):"");break;case "navigation":c+=
"/tips/add"==a.target.object.target.url?"/v/"+soy.$$escapeHtml(a.target.object.target.params.venueId)+"#tipsContainer":"/tastes/add"==a.target.object.target.url&&(null==a.target.object.target.params?0:a.target.object.target.params.campaignParams)?soy.$$escapeHtml(a.target.object.target.url)+"#campaignParams\x3d"+soy.$$escapeUri(a.target.object.target.params.campaignParams):soy.$$escapeHtml(a.target.object.target.url);break;case "inbox":c+="venue"==(null==a.target?null:null==a.target.object?null:a.target.object.type)&&
null!=(null==a.target?null:null==a.target.object?null:null==a.target.object.venue?null:a.target.object.venue.id)?"/venue/"+soy.$$escapeHtml(a.target.object.venue.id):"tip"==(null==a.target?null:null==a.target.object?null:a.target.object.type)&&null!=(null==a.target?null:null==a.target.object?null:null==a.target.object.tip?null:a.target.object.tip.id)?"/item/"+soy.$$escapeHtml(a.target.object.tip.id):"#";break;default:c+="#"}return c};
helpers.activity.contentUrl=function(a,b){var c="";switch(a.content?soy.$$escapeHtml(a.content.type):"none"){case "activity":c+=helpers.activity.activityHref({activity:a.content,referralId:a.referralId});break;case "checkin":c+=helpers.util.appendReferralId({url:a.content.object.canonicalPath,referralId:a.referralId});break;case "user":c+=helpers.user.href(soy.$$augmentMap(a.content.object,{referralId:a.referralId}));break;case "venue":c+=helpers.venue.href(soy.$$augmentMap(a.content.object,{referralId:a.referralId}));
break;case "tip":c+=helpers.tip.href(soy.$$augmentMap(a.content.object,{referralId:a.referralId}));break;case "todo":c+=helpers.tip.href(soy.$$augmentMap(a.content.object,{referralId:a.referralId}));break;case "list":c+=helpers.list.href(soy.$$augmentMap(a.content.object,{referralId:a.referralId}));break;case "plugin":c+=helpers.apps.href(soy.$$augmentMap(a.content.object,{referralId:a.referralId}));break;case "special":c+=a.content.object.venue?helpers.venue.href(soy.$$augmentMap(a.content.object.venue,
{referralId:a.referralId})):a.content.object.canonicalPath?helpers.util.appendReferralId({url:a.content.object.canonicalPath,referralId:a.referralId}):"";break;case "badge":c+=helpers.activity.urlHelper({object:a.content.object,type:"badge",referralId:a.referralId});break;case "pageUpdate":c+=helpers.util.appendReferralId({url:a.content.object.canonicalPath,referralId:a.referralId});break;case "photo":c+=helpers.photo.href(soy.$$augmentMap(a.content.object,{referralId:a.referralId}));break;case "url":c+=
soy.$$escapeHtml(a.content.object.url);break;case "facebookSettings":c+="/settings/sharing";break;default:c+=a.content.object.canonicalPath?helpers.util.appendReferralId({url:a.content.object.canonicalPath,referralId:a.referralId}):"#"}return c};helpers.activity.activityHref=function(a,b){return a.activity.object.content&&a.activity.object.content.type?helpers.activity.contentUrl({content:a.activity.object.content,referralId:a.referralId}):"#"};
helpers.activity.href=function(a,b){return helpers.util.appendReferralId({referralId:a.referralId,url:"/activity/"+soy.$$escapeHtml(a.id)})};helpers.activity.urlHelper=function(a,b){return"/user/"+soy.$$escapeHtml(a.object.user.id)+"/"+soy.$$escapeHtml(a.type)+"/"+soy.$$escapeHtml(a.object.id)+(a.referralId?"?referralId\x3d"+soy.$$escapeHtml(a.referralId):"")};
helpers.activity.photos=function(a,b){var c="";if(a.photos.items&&0<a.photos.items.length)var d=Math.min(3,a.photos.items.length),c=c+('\x3cdiv class\x3d"photos"\x3e'+(1==d?helpers.activity.onePhoto({photos:a.photos.items,link:a.link}):2==d?helpers.activity.twoPhotos({photos:a.photos.items,link:a.link}):3==d?helpers.activity.threePhotos({photos:a.photos.items,link:a.link}):"")+"\x3c/div\x3e");return c};
helpers.activity.onePhoto=function(a,b){return'\x3cdiv class\x3d"photo photo-0 '+helpers.photo.orientationClass(a.photos[0])+'"\x3e\x3ca href\x3d"'+soy.$$escapeHtml(a.link)+'"\x3e'+helpers.activity.checkinPhoto(soy.$$augmentMap(a.photos[0],{width:532,height:266}))+"\x3c/a\x3e\x3c/div\x3e"};
helpers.activity.twoPhotos=function(a,b){return'\x3cdiv class\x3d"photo photo-0 '+helpers.photo.orientationClass(a.photos[0])+'"\x3e\x3ca href\x3d"'+soy.$$escapeHtml(a.link)+'"\x3e'+helpers.activity.checkinPhoto(soy.$$augmentMap(a.photos[0],{width:254,height:254}))+'\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"photo photo-1 '+helpers.photo.orientationClass(a.photos[1])+'"\x3e\x3ca href\x3d"'+soy.$$escapeHtml(a.link)+'"\x3e'+helpers.activity.checkinPhoto(soy.$$augmentMap(a.photos[1],{width:254,height:254}))+
"\x3c/a\x3e\x3c/div\x3e"};
helpers.activity.threePhotos=function(a,b){return'\x3cdiv class\x3d"photo photo-0 '+helpers.photo.orientationClass(a.photos[0])+'"\x3e\x3ca href\x3d"'+soy.$$escapeHtml(a.link)+'"\x3e'+helpers.activity.checkinPhoto(soy.$$augmentMap(a.photos[0],{width:532,height:266}))+'\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"photo photo-1 '+helpers.photo.orientationClass(a.photos[1])+'"\x3e\x3ca href\x3d"'+soy.$$escapeHtml(a.link)+'"\x3e'+helpers.activity.checkinPhoto(soy.$$augmentMap(a.photos[1],{width:254,height:254}))+
'\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"photo photo-2 '+helpers.photo.orientationClass(a.photos[2])+'"\x3e\x3ca href\x3d"'+soy.$$escapeHtml(a.link)+'"\x3e'+helpers.activity.checkinPhoto(soy.$$augmentMap(a.photos[2],{width:254,height:254}))+"\x3c/a\x3e\x3c/div\x3e"};
helpers.activity.photoAggregation=function(a,b){var c="",d=helpers.activity.photosCountClass(a),c=c+('\x3cdiv class\x3d"shoutPhotosContainer '+soy.$$escapeHtml(d)+'"\x3e');if(a.photos&&0<a.photos.length)var d=Math.min(3,a.photos.length),e=helpers.photo.href(soy.$$augmentMap(a.photos[0].object,{referralId:a.referralId})),c=c+('\x3cdiv class\x3d"photos"\x3e'+(1==d?helpers.activity.onePhoto({photos:[a.photos[0].object],link:e}):2==d?helpers.activity.twoPhotos({photos:[a.photos[0].object,a.photos[1].object],
link:e}):3==d?helpers.activity.threePhotos({photos:[a.photos[0].object,a.photos[1].object,a.photos[2].object],link:e}):"")+"\x3c/div\x3e");return c+"\x3c/div\x3e"};helpers.activity.photosCountClass=function(a,b){return a.photos&&0<a.photos.length?"photos"+soy.$$escapeHtml(Math.min(3,a.photos.length)):""};
helpers.activity.checkinPhoto=function(a,b){var c="",d=helpers.photo.nearestBigger(soy.$$augmentMap(a,{targetWidth:a.width,targetHeight:a.height}));return c+='\x3cimg src\x3d"'+soy.$$escapeHtml(d)+'" /\x3e'};helpers.activity.activityClass=function(a,b){return soy.$$escapeHtml(a.activity.type)+" "+helpers.activity.aggregationClass(a)+" "+(a.activity.content&&a.activity.content.type?helpers.activity.contentClass({content:a.activity.content}):"")};
helpers.activity.contentClass=function(a,b){return"aggregation"==a.content.type?"aggregation"+(a.content.object.groupContent?" "+helpers.activity.contentClass({content:a.content.object.groupContent}):"")+(a.content.object.items&&a.content.object.items[0]?" "+helpers.activity.contentClass({content:a.content.object.items[0]}):""):"activity"==a.content.type?(a.content.object.content&&a.content.object.content.type?" "+soy.$$escapeHtml(a.content.object.content.type):"")+(a.content.object.indirectContent&&
a.content.object.indirectContent.type?" "+soy.$$escapeHtml(a.content.object.indirectContent.type):""):" "+soy.$$escapeHtml(a.content.type)};helpers.activity.aggregationClass=function(a,b){return a.activity.content&&"aggregation"==a.activity.content.type?(1<a.activity.thumbnails.length?"manyToOne":1==a.activity.thumbnails.length?"oneToMany":"")+" "+(a.activity.content.object.groupContent?"hasGroup":"noGroup"):""};
helpers.activity.tipAddedMessage=function(a,b){return"\x3cspan\x3eOkay! You left a tip at "+soy.$$escapeHtml(a.venueName)+"!\x3c/span\x3e"};"undefined"==typeof helpers.apps&&(helpers.apps={});helpers.apps.image=function(a,b){return'\x3cimg src\x3d"'+soy.$$escapeHtml(a.photo)+'" alt\x3d"'+soy.$$escapeHtml(a.name)+'" class\x3d"avatar" title\x3d"'+soy.$$escapeHtml(a.name)+'" /\x3e'};helpers.apps.icon=function(a,b){return'\x3cimg src\x3d"'+soy.$$escapeHtml(a.icon)+'" alt\x3d"'+soy.$$escapeHtml(a.name)+'" class\x3d"tinyAvatar" title\x3d"'+soy.$$escapeHtml(a.name)+'" /\x3e'};
helpers.apps.banner=function(a,b){return a.banner?'\x3cimg src\x3d"'+soy.$$escapeHtml(a.banner)+'" alt\x3d"'+soy.$$escapeHtml(a.name)+'" class\x3d"appBanner" title\x3d"'+soy.$$escapeHtml(a.name)+'" /\x3e':""};helpers.apps.href=function(a,b){return helpers.util.appendReferralId(soy.$$augmentMap(a,{url:a.detailUrl}))};helpers.apps.imageWLink=function(a,b){return'\x3ca href\x3d"'+helpers.apps.href(a)+'"\x3e'+helpers.apps.image(a)+"\x3c/a\x3e"};
helpers.apps.nameWLink=function(a,b){return'\x3ca href\x3d"'+helpers.apps.href(a)+'"\x3e'+soy.$$escapeHtml(a.name)+"\x3c/a\x3e"};helpers.apps.readMoreLink=function(a,b){return'\x3ca href\x3d"'+soy.$$escapeHtml(a.url)+'" rel\x3d"nofollow" class\x3d"readMore" target\x3d"_blank"'+helpers.util.makeOutgoingLink(soy.$$augmentMap(a,{dataSource:"app-post"}))+"\x3eSee More\x3c/a\x3e"};
helpers.apps.connectButton=function(a,b){a=a||{};return a.authorized&&a.disallowDisconnect&&a.connectedUrl?'\x3ca href\x3d"'+soy.$$escapeHtml(a.connectedUrl)+'"\x3e'+helpers.apps.connectButtonContents_(a)+"\x3c/a\x3e":a.authorized&&!a.disallowDisconnect?'\x3cspan class\x3d"disconnectButton" '+(a.connectUrl?'data-connect-url\x3d"'+soy.$$escapeHtml(a.connectUrl)+'"':"")+"\x3e"+helpers.apps.connectButtonContents_(a)+"\x3c/span\x3e":!a.authorized&&a.connectUrl?'\x3ca href\x3d"'+soy.$$escapeHtml(a.connectUrl)+
'"\x3e'+helpers.apps.connectButtonContents_(a)+"\x3c/a\x3e":helpers.apps.connectButtonContents_(a)};helpers.apps.androidInstallButton=function(a,b){return'\x3ca href\x3d"'+helpers.apps.androidInstallUrl(a)+'"\x3e\x3cdiv class\x3d"button download androidInstall"\x3e'+helpers.apps.downloadButtonText(null)+"\x3c/div\x3e\x3c/a\x3e"};
helpers.apps.blackberryInstallButton=function(a,b){return'\x3ca href\x3d"'+helpers.apps.bbInstallUrl(a)+'"\x3e\x3cdiv class\x3d"button download blackberryInstall"\x3e'+helpers.apps.downloadButtonText(null)+"\x3c/div\x3e\x3c/a\x3e"};helpers.apps.iosInstallButton=function(a,b){return'\x3ca href\x3d"'+helpers.apps.iosInstallUrl(a)+'"\x3e\x3cdiv class\x3d"button download iosInstall"\x3e'+helpers.apps.downloadButtonText(null)+"\x3c/div\x3e\x3c/a\x3e"};
helpers.apps.connectButtonContents_=function(a,b){a=a||{};return'\x3cdiv class\x3d"button connectButton '+(a.authorized?"active":"inactive")+'"\x3e\x3cspan class\x3d"label"\x3e'+helpers.apps.connectButtonText(a)+"\x3c/span\x3e\x3c/div\x3e"};helpers.apps.deletedWarning=function(a,b){return"This app has been deleted by its owner!"};helpers.apps.connectButtonText=function(a,b){a=a||{};return a.authorized&&a.disallowDisconnect?"Connected":a.authorized?"Disconnect":"Connect app"};
helpers.apps.disconnectConfirmText=function(a,b){return"Are you sure you want to disconnect this app from your foursquare account?"};helpers.apps.downloadButtonText=function(a,b){return"Download app"};helpers.apps.nativeConnectExplanation=function(a,b){return"Download, then connect using "+soy.$$escapeHtml(a.name)};helpers.apps.unavailableText=function(a,b){return"Not available for "+soy.$$escapeHtml(a.platform)};helpers.apps.deleteConfirmationText=function(a,b){return"Are you sure you want to delete this app? This will also permanently delete all the existing user tokens associated with this app."};
helpers.apps.resetConfirmationText=function(a,b){return"Are you sure you want to reset all your secrets? This will also delete all the existing user tokens associated with this app, requiring all connected users to re-authenticate your app."};helpers.apps.pushConsoleEntry=function(a,b){a=a||{};return a.response?'\x3cdiv class\x3d"callOut"\x3ePush sent!\x3c/div\x3e\x3clabel\x3eResponse:\x3c/label\x3e\x3cdiv class\x3d"callResponse"\x3e'+soy.$$escapeHtml(a.response)+"\x3c/div\x3e":'\x3cdiv class\x3d"callOut"\x3ePush sending...\x3c/div\x3e'};
helpers.apps.uploadConsoleEntry=function(a,b){a=a||{};var c="";if(a.status){c+='\x3cdiv class\x3d"callResponse"\x3e'+soy.$$escapeHtml(a.status)+"\x3c/div\x3e";if(a.errors)for(var d=a.errors,e=d.length,f=0;f<e;f++)c+='\x3cdiv class\x3d"callResponse" style\x3d"color:red;"\x3e'+soy.$$escapeHtml(d[f])+"\x3c/div\x3e";c+=a.message?'\x3cdiv class\x3d"callResponse" style\x3d"color:green;"\x3e'+soy.$$escapeHtml(a.message)+"\x3c/div\x3e":""}else c+='\x3cdiv class\x3d"callOut"\x3eUploading...\x3c/div\x3e';return c};
helpers.apps.reactivateAppFailure=function(a,b){return"Uh-oh, something went wrong while we tried to reactivate your app. Please reload the page and try again!"};helpers.apps.reactivateAppLoading=function(a,b){return'\x3cdiv class\x3d"loading"\x3e\x3cimg src\x3d"'+soy.$$escapeHtml("https://ss1.4sqi.net/img/ajax_spinner_small_light-23e3947767aef347abf9160b5961e904.gif")+'" alt\x3d"loading..." /\x3e Reactivating...\x3c/div\x3e'};
helpers.apps.bbInstallUrl=function(a,b){return a.isMobile?"http://appworld.blackberry.com/webstore/clientlaunch/"+soy.$$escapeHtml(a.identifier):"http://appworld.blackberry.com/webstore/content/"+soy.$$escapeHtml(a.identifier)};helpers.apps.iosInstallUrl=function(a,b){return"http://itunes.apple.com/app/"+soy.$$escapeHtml(a.identifier)+"?mt\x3d8"};
helpers.apps.androidInstallUrl=function(a,b){return a.isMobile?"market://details?id\x3d"+soy.$$escapeHtml(a.identifier):"https://market.android.com/details?id\x3d"+soy.$$escapeHtml(a.identifier)};helpers.apps.basicInfo=function(a,b){return'\x3cdiv class\x3d"app"\x3e\x3ca href\x3d"'+soy.$$escapeHtml(a.app.url)+'"\x3e\x3cimg src\x3d"'+soy.$$escapeHtml(a.app.icon)+'" /\x3e\x3c/a\x3e'+(a.showAuth&&a.app.authorized?"(authorized)":"")+"\x3ch6\x3e"+soy.$$escapeHtml(a.app.name)+"\x3c/h6\x3e\x3c/div\x3e"};
helpers.apps.developerDetailsUrl=function(a,b){return"/developers/app/"+soy.$$escapeHtml(a.id)+(a.subpath?"/"+soy.$$escapeHtml(a.subpath):"")};helpers.apps.developerAppsUrl=function(a,b){return"/developers/apps"};helpers.apps.developerVerifyUrl=function(a,b){return"/developers/verify"};helpers.apps.developerSubscribeUrl=function(a,b){return"/developers/subscribe"};helpers.apps.developerExploreUrl=function(a,b){return"/developers/explore"};helpers.apps.developerBillingUrl=function(a,b){return"/developers/billing"};
helpers.apps.developerCreditsUrl=function(a,b){return"/developers/credits"};helpers.apps.developerDocsUrl=function(a,b){return"https://developer.foursquare.com/docs"};helpers.apps.developerDocsGettingStartedUrl=function(a,b){return"https://developer.foursquare.com/docs/api/getting-started"};helpers.apps.developerSalesUrl=function(a,b){return"https://enterprise.foursquare.com/upgrade-to-enterprise"};helpers.apps.developerContactUsUrl=function(a,b){return"https://developer.foursquare.com/contact-us"};
helpers.apps.developerTOSUrl=function(a,b){return"https://developer.foursquare.com/docs/terms-of-use/overview"};helpers.apps.platformTOSUrl=function(a,b){return"https://foursquare.com/legal/api/platformpolicy"};helpers.apps.startupAgreementUrl=function(a,b){return"https://foursquare.com/legal/api/startupagreement"};helpers.apps.licenseAgreementUrl=function(a,b){return"https://foursquare.com/legal/api/licenseagreement"};"undefined"==typeof helpers.stripe&&(helpers.stripe={});
helpers.stripe.brandLogo_=function(a,b){a=a||{};var c="";switch(a.credit_card_type){case "amex":c+='\x3cimg src\x3d"'+soy.$$escapeHtml(fourSq.retina.isRetina()?"https://ss1.4sqi.net/img/creditcards/amex@2x-eb243c5e8ba59cb6a87c2c36ebf614f5.png":"https://ss0.4sqi.net/img/creditcards/amex-388011d2086466c9352b49496825d7b5.png")+'" width\x3d"40" height\x3d"25" title\x3d"'+soy.$$escapeHtml(a.credit_card_brand)+'" class\x3d"cardIcon" /\x3e';break;case "american express":c+='\x3cimg src\x3d"'+soy.$$escapeHtml(fourSq.retina.isRetina()?
"https://ss1.4sqi.net/img/creditcards/amex@2x-eb243c5e8ba59cb6a87c2c36ebf614f5.png":"https://ss0.4sqi.net/img/creditcards/amex-388011d2086466c9352b49496825d7b5.png")+'" width\x3d"40" height\x3d"25" title\x3d"'+soy.$$escapeHtml(a.credit_card_brand)+'" class\x3d"cardIcon" /\x3e';break;case "dinersclub":c+='\x3cimg src\x3d"'+soy.$$escapeHtml(fourSq.retina.isRetina()?"https://ss1.4sqi.net/img/creditcards/dinersclub@2x-a6fed0392691c2ba621692f0da2b0323.png":"https://ss1.4sqi.net/img/creditcards/dinersclub-09685ff7ab125eea70fb1d36aa4e4cbc.png")+
'" width\x3d"40" height\x3d"25" title\x3d"'+soy.$$escapeHtml(a.credit_card_brand)+'" class\x3d"cardIcon" /\x3e';break;case "discover":c+='\x3cimg src\x3d"'+soy.$$escapeHtml(fourSq.retina.isRetina()?"https://ss0.4sqi.net/img/creditcards/discover@2x-8bb2350a133cae578236468f403e53e7.png":"https://ss0.4sqi.net/img/creditcards/discover-70bdbedcf6d797966beced449ed12fa6.png")+'" width\x3d"40" height\x3d"25" title\x3d"'+soy.$$escapeHtml(a.credit_card_brand)+'" class\x3d"cardIcon" /\x3e';break;case "jcb":c+=
'\x3cimg src\x3d"'+soy.$$escapeHtml(fourSq.retina.isRetina()?"https://ss1.4sqi.net/img/creditcards/jcb@2x-f0524c60821d73a08fe91d20df4d2fe3.png":"https://ss1.4sqi.net/img/creditcards/jcb-55e4879b16be670c0fcd7ec3f299c444.png")+'" width\x3d"40" height\x3d"25" title\x3d"'+soy.$$escapeHtml(a.credit_card_brand)+'" class\x3d"cardIcon" /\x3e';break;case "mastercard":c+='\x3cimg src\x3d"'+soy.$$escapeHtml(fourSq.retina.isRetina()?"https://ss1.4sqi.net/img/creditcards/mastercard@2x-ba638d97ff02b18eb7731a2174d12674.png":
"https://ss1.4sqi.net/img/creditcards/mastercard-00983b077654b86dbd007a4549f49df9.png")+'" width\x3d"40" height\x3d"25" title\x3d"'+soy.$$escapeHtml(a.credit_card_brand)+'" class\x3d"cardIcon" /\x3e';break;case "paypal":c+='\x3cimg src\x3d"'+soy.$$escapeHtml(fourSq.retina.isRetina()?"https://ss1.4sqi.net/img/creditcards/paypal@2x-70813fa34c3f7f744fa3f2c6233d01ae.png":"https://ss0.4sqi.net/img/creditcards/paypal-a32d68d0596693739619dfd59713dd66.png")+'" width\x3d"40" height\x3d"25" title\x3d"'+soy.$$escapeHtml(a.credit_card_brand)+
'" class\x3d"cardIcon" /\x3e';break;case "visa":c+='\x3cimg src\x3d"'+soy.$$escapeHtml(fourSq.retina.isRetina()?"https://ss1.4sqi.net/img/creditcards/visa@2x-827dff25385bab34de8d2cfdb4d3627c.png":"https://ss0.4sqi.net/img/creditcards/visa-3b67783cf07c3d4b7d487dd41cd4efb1.png")+'" width\x3d"40" height\x3d"25" title\x3d"'+soy.$$escapeHtml(a.credit_card_brand)+'" class\x3d"cardIcon" /\x3e';break;default:c+='\x3cimg src\x3d"'+soy.$$escapeHtml(fourSq.retina.isRetina()?"https://ss1.4sqi.net/img/creditcards/default@2x-8b29c994211113a4e8dd4d728b67492c.png":
"https://ss0.4sqi.net/img/creditcards/default-f7cad5a993aad0d2f9a628b2b975521a.png")+'" width\x3d"40" height\x3d"25" title\x3d"'+soy.$$escapeHtml(a.credit_card_brand)+'" class\x3d"cardIcon" /\x3e'}return c};
helpers.stripe.cardNumber_=function(a,b){a=a||{};var c='\x3cspan class\x3d"cardNumber notrans"\x3e\x3cspan class\x3d"hiddenNumbers"\x3e';switch(a.credit_card_type){case "american express":c+="\u2022\u2022\u2022\u2022 \u2022\u2022\u2022\u2022\u2022\u2022 \u2022";break;case "dinersclub":c+="\u2022\u2022\u2022\u2022 \u2022\u2022\u2022\u2022\u2022\u2022 ";break;default:c+="\u2022\u2022\u2022\u2022 \u2022\u2022\u2022\u2022 \u2022\u2022\u2022\u2022 "}return c+='\x3c/span\x3e\x3cspan class\x3d"last4"\x3e'+
soy.$$escapeHtml(a.last4)+"\x3c/span\x3e\x3c/span\x3e"};helpers.stripe.expiration_=function(a,b){return'\x3cspan class\x3d"expiration '+(a.isExpired?"expired":"")+'"\x3e'+(a.isExpired?"exp ":"")+soy.$$escapeHtml(a.expiration_month)+"/"+soy.$$escapeHtml(a.expiration_year)+"\x3c/span\x3e"};
helpers.stripe.paymentCardForm=function(a,b){return'\x3cdiv id\x3d"addCardForm"\x3e\x3cdiv class\x3d"fieldRow"\x3e\x3cdiv class\x3d"fieldContainer"\x3e\x3cinput type\x3d"text" class\x3d"formStyle cardNumber" placeholder\x3d"Card number" /\x3e\x3c/div\x3e\x3cdiv class\x3d"cvv"\x3e\x3cdiv class\x3d"cardIcon"\x3e\x3cdiv class\x3d"back side"\x3e\x3cimg class\x3d"default" src\x3d"'+soy.$$escapeHtml("https://ss1.4sqi.net/img/claim-flow-cvv-48d6aa261b4f28416e0a9ebc80448b31.png")+'" /\x3e\x3cimg class\x3d"amex" src\x3d"'+
soy.$$escapeHtml("https://ss1.4sqi.net/img/claim-flow-cvv-amex-a08f5b2c751ca52a403001ca8ab5fcaa.png")+'" /\x3e\x3c/div\x3e\x3cdiv class\x3d"front side"\x3e\x3cimg class\x3d"default visible" src\x3d"'+soy.$$escapeHtml("https://ss0.4sqi.net/img/creditcards/default-f7cad5a993aad0d2f9a628b2b975521a.png")+'" /\x3e\x3cimg class\x3d"amex" src\x3d"'+soy.$$escapeHtml("https://ss0.4sqi.net/img/creditcards/amex-388011d2086466c9352b49496825d7b5.png")+'" /\x3e\x3cimg class\x3d"dinersclub" src\x3d"'+soy.$$escapeHtml("https://ss1.4sqi.net/img/creditcards/dinersclub-09685ff7ab125eea70fb1d36aa4e4cbc.png")+
'" /\x3e\x3cimg class\x3d"discover" src\x3d"'+soy.$$escapeHtml("https://ss0.4sqi.net/img/creditcards/discover-70bdbedcf6d797966beced449ed12fa6.png")+'" /\x3e\x3cimg class\x3d"jcb" src\x3d"'+soy.$$escapeHtml("https://ss1.4sqi.net/img/creditcards/jcb-55e4879b16be670c0fcd7ec3f299c444.png")+'" /\x3e\x3cimg class\x3d"mastercard" src\x3d"'+soy.$$escapeHtml("https://ss1.4sqi.net/img/creditcards/mastercard-00983b077654b86dbd007a4549f49df9.png")+'" /\x3e\x3cimg class\x3d"visa" src\x3d"'+soy.$$escapeHtml("https://ss0.4sqi.net/img/creditcards/visa-3b67783cf07c3d4b7d487dd41cd4efb1.png")+
'" /\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"fieldRow"\x3e\x3cdiv class\x3d"fieldContainer"\x3e\x3cdiv class\x3d"expiration"\x3eExpires'+helpers.stripe.datePicker(null)+'\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"fieldContainer"\x3e\x3cinput type\x3d"text" class\x3d"formStyle securityCode" placeholder\x3d"Security code" /\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'};helpers.stripe.datePicker=function(a,b){return'\x3cselect class\x3d"month"\x3e\x3coption value\x3d"01"\x3e01\x3c/option\x3e\x3coption value\x3d"02"\x3e02\x3c/option\x3e\x3coption value\x3d"03"\x3e03\x3c/option\x3e\x3coption value\x3d"04"\x3e04\x3c/option\x3e\x3coption value\x3d"05"\x3e05\x3c/option\x3e\x3coption value\x3d"06"\x3e06\x3c/option\x3e\x3coption value\x3d"07"\x3e07\x3c/option\x3e\x3coption value\x3d"08"\x3e08\x3c/option\x3e\x3coption value\x3d"09"\x3e09\x3c/option\x3e\x3coption value\x3d"10"\x3e10\x3c/option\x3e\x3coption value\x3d"11"\x3e11\x3c/option\x3e\x3coption value\x3d"12"\x3e12\x3c/option\x3e\x3c/select\x3e\x3cselect class\x3d"year"\x3e\x3coption\x3e2018\x3c/option\x3e\x3coption\x3e2019\x3c/option\x3e\x3coption\x3e2020\x3c/option\x3e\x3coption\x3e2021\x3c/option\x3e\x3coption\x3e2022\x3c/option\x3e\x3coption\x3e2023\x3c/option\x3e\x3coption\x3e2024\x3c/option\x3e\x3coption\x3e2025\x3c/option\x3e\x3coption\x3e2026\x3c/option\x3e\x3coption\x3e2027\x3c/option\x3e\x3coption\x3e2028\x3c/option\x3e\x3coption\x3e2029\x3c/option\x3e\x3coption\x3e2030\x3c/option\x3e\x3c/select\x3e'};"undefined"==typeof helpers.category&&(helpers.category={});helpers.category.iconOrDefault=function(a,b){a=a||{};return'\x3cimg src\x3d"'+helpers.category.thumbnail(a)+'"'+(a.desiredSize?'data-retina-url\x3d"'+helpers.category.thumbnail(soy.$$augmentMap(a,{desiredSize:2*a.desiredSize}))+'" width\x3d"'+soy.$$escapeHtml(a.desiredSize)+'" height\x3d"'+soy.$$escapeHtml(a.desiredSize)+'"':"")+(a.name?'title\x3d"'+soy.$$escapeHtml(a.name)+'"':"")+"/\x3e"};
helpers.category.thumbnail=function(a,b){a=a||{};var c="";if(a.icon)var d=a.desiredSize?helpers.category.nearestBigger(a):"32",c=c+(a.transparent?soy.$$escapeHtml(a.icon.prefix)+soy.$$escapeHtml(d)+soy.$$escapeHtml(a.icon.suffix):soy.$$escapeHtml(a.icon.prefix)+"bg_"+soy.$$escapeHtml(d)+soy.$$escapeHtml(a.icon.suffix));else c+=helpers.category.defaultIcon(a);return c};
helpers.category.defaultIcon=function(a,b){a=a||{};var c="",d=a.desiredSize?helpers.category.nearestBigger(a):"32";return c+=a.transparent?"/img/categories_v2/none_"+soy.$$escapeHtml(d)+".png":"/img/categories_v2/none_bg_"+soy.$$escapeHtml(d)+".png"};helpers.category.nearestBigger=function(a,b){return function(){var b="",d=[32,44,64,88,100,120,512],e=_.filter(d,function(b){return b>=a.desiredSize});return b+=0<e.length?soy.$$escapeHtml(e[0]):soy.$$escapeHtml(d[d.length-1])}()};
helpers.category.categoryIconFromMapPrefix=function(a,b){return a.mapPrefix?soy.$$escapeHtml(a.mapPrefix)+soy.$$escapeHtml(a.suffix)+" ":""};"undefined"==typeof helpers.checkin&&(helpers.checkin={});helpers.checkin.count=function(a,b){return a.capitalize?1==a.count?"1 Check-in":fourSq.i18n.formatNumber(a.count,"decimal",void 0,"")+" Check-ins":1==a.count?"1 check-in":fourSq.i18n.formatNumber(a.count,"decimal",void 0,"")+" check-ins"};
helpers.checkin.lastSeenPlaceAndEvent=function(a,b){a=a||{};return a.event&&a.event.name?a["private"]?"Last seen "+helpers.checkin.lastSeenTimestamp(a)+" at: "+helpers.venue.nameWithLink(a)+" [not shared with friends] for "+soy.$$escapeHtml(a.event.name):"Last seen "+helpers.checkin.lastSeenTimestamp(a)+" at: "+helpers.venue.nameWithLink(a)+" for "+soy.$$escapeHtml(a.event.name):a["private"]?"Last seen "+helpers.checkin.lastSeenTimestamp(a)+" at: "+helpers.venue.nameWithLink(a)+" [not shared with friends]":
"Last seen "+helpers.checkin.lastSeenTimestamp(a)+" at: "+helpers.venue.nameWithLink(a)};helpers.checkin.lastSeenShout=function(a,b){return a.shout?"Last shouted "+helpers.checkin.lastSeenTimestamp(a)+": "+soy.$$escapeHtml(a.shout):"Last shouted "+helpers.checkin.lastSeenTimestamp(a)};helpers.checkin.lastSeenTimestamp=function(a,b){return'\x3cspan class\x3d"timestamp autoupdate" data-created-at\x3d"'+soy.$$escapeHtml(a.createdAt)+'"\x3e'+helpers.util.createdAtSmartDate(a)+"\x3c/span\x3e"};
helpers.checkin.lastSeenBlock=function(a,b){var c;c=a.checkin.user?a.checkin.user:a.checkinUser;var d=a.checkin.venue;return c=""+('\x3cdiv id\x3d"personDetail"\x3e\x3cdiv class\x3d"avatar"\x3e'+helpers.user.imageWLink(soy.$$augmentMap(c,{size:64}))+'\x3c/div\x3e\x3cdiv class\x3d"content"\x3e\x3ch4\x3eHi '+helpers.user.fullNameWLink(c)+"\x3c/h4\x3e\x3cp\x3e"+(d?helpers.checkin.lastSeenPlaceAndEvent(a.checkin):helpers.checkin.lastSeenShout(a.checkin))+"\x3c/p\x3e\x3cp\x3e"+helpers.checkin.lastSeenActivityIndicator_(soy.$$augmentMap(a.checkin,
{user:c}))+(a.checkin.venue?helpers.venue.addTipBlock({canAddTip:!0,tipPhotoUploadEnabled:!0,venue:d,venueInPlaceholder:!0}):"")+"\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e")};
helpers.checkin.swarmLastSeenBlock=function(a,b){var c;c=a.checkin.venue;var d=null!=a.checkin["private"]?a.checkin["private"]:!1;return c=""+('\x3cdiv id\x3d"personDetail" class\x3d"lastSeenBlock"\x3e\x3cdiv class\x3d"lastSeenBlock-avatar"\x3e'+helpers.user.image(soy.$$augmentMap(a.checkin.user?a.checkin.user:a.checkinUser,{size:64}))+"\x3c/div\x3e"+(a.checkin.sticker?helpers.user.stickerImg({sticker:a.checkin.sticker,size:35}):"")+'\x3cdiv class\x3d"content"\x3e'+(1==d?'\x3cdiv class\x3d"privateCheckin"\x3e\x3cimg class\x3d"lockIcon" width\x3d"12" height\x3d"14" src\x3d"'+
soy.$$escapeHtml(fourSq.retina.isRetina()?"https://ss1.4sqi.net/img/swarm/white-lock@2x-a318babec3e84d9317d341414e65e01b.png":"https://ss1.4sqi.net/img/swarm/white-lock-862399923ab1f1a4208987fa1e634095.png")+'" /\x3e\x3cspan class\x3d"lockText"\x3eOff the grid\x3c/span\x3e\x3c/div\x3e':"")+(c?'\x3cp class\x3d"content-venueName"\x3e'+helpers.venue.nameWithLinkWithDomain({venue:a.checkin.venue,canonicalPath:a.checkin.venue.canonicalUrl,target:"_blank"})+'\x3c/p\x3e\x3cdiv class\x3d"content-address"\x3e'+
soy.$$escapeHtml(c.location.contextLine)+"\x3c/div\x3e":"")+"\x3ca href\x3d"+soy.$$escapeHtml(a.checkin.canonicalPath)+' target\x3d"_blank" class\x3d"content-lastSeenTime"\x3e'+helpers.checkin.lastSeenTimestamp(a.checkin)+'\x3c/a\x3e\x3cdiv class\x3d"content-bottomActivityRow"\x3e'+helpers.checkin.checkinActivityRow({checkin:a.checkin,classPrefix:"lastSeenBlock"})+"\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e")};
helpers.checkin.lastSeenActivityIndicator_=function(a,b){var c;c=(a.comments.count?" comments":"")+(a.photos.count?" photos":"")+(a.likes.count?" likes":"")+(a.comments.count||a.photos.count||a.likes.count?"":" none");return c=""+(a.comments.count||a.photos.count||a.likes.count||!a.isPage?'\x3cdiv class\x3d"fullActivityIndicator'+soy.$$escapeHtml(c)+'"\x3e'+(a.venue?'\x3cspan class\x3d"leaveTip link"\x3e\x3cspan class\x3d"icon"\x3e\x3c/span\x3eLeave a tip\x3c/span\x3e':"")+'\x3ca href\x3d"'+soy.$$escapeHtml(a.canonicalPath)+
'" class\x3d"comments"\x3e'+(a.comments.count?soy.$$escapeHtml(a.comments.count):"+")+'\x3c/a\x3e\x3ca href\x3d"'+soy.$$escapeHtml(a.canonicalPath)+'" class\x3d"photos"\x3e'+(a.photos.count?soy.$$escapeHtml(a.photos.count):"\x26nbsp;")+'\x3c/a\x3e\x3ca href\x3d"'+soy.$$escapeHtml(a.canonicalPath)+'" class\x3d"likes"\x3e'+(a.likes.count?soy.$$escapeHtml(a.likes.count):"\x26nbsp;")+"\x3c/a\x3e\x3c/div\x3e":"")};
helpers.checkin.checkinActivityRow=function(a,b){return'\x3ca href\x3d"'+soy.$$escapeHtml(a.checkin.canonicalPath)+"\" target\x3d'_blank'\x3e\x3cdiv class\x3d\""+soy.$$escapeHtml(a.classPrefix)+'-coinCount linkContainer"\x3e'+(10<=(null==a.checkin.score?null:a.checkin.score.total)||"history activity"==a.classPrefix&&0<(null==a.checkin.score?null:a.checkin.score.total)?'\x3cdiv class\x3d"'+soy.$$escapeHtml(a.classPrefix)+'-coinImg coinImg"\x3e\x3c/div\x3e\x3cdiv class\x3d"'+soy.$$escapeHtml(a.classPrefix)+
'-coinSummary coinSummary"\x3e'+soy.$$escapeHtml(null==a.checkin.score?null:a.checkin.score.total)+"\x3c/div\x3e":"")+'\x3c/div\x3e\x3c/a\x3e\x3ca href\x3d"'+soy.$$escapeHtml(a.checkin.canonicalPath)+"\" target\x3d'_blank'\x3e\x3cdiv class\x3d\""+soy.$$escapeHtml(a.classPrefix)+'-likeCount linkContainer" '+(0==a.checkin.likes.count?'style\x3d"display:none;"':"")+'\x3e\x3cdiv class\x3d"'+soy.$$escapeHtml(a.classPrefix)+'-likeImg likeImg"\x3e\x3c/div\x3e\x3cdiv class\x3d"'+soy.$$escapeHtml(a.classPrefix)+
'-likeSummary likesTitle likeSummary"\x3e'+soy.$$escapeHtml(a.checkin.likes.count)+'\x3c/div\x3e\x3c/div\x3e\x3c/a\x3e\x3ca href\x3d"'+soy.$$escapeHtml(a.checkin.canonicalPath)+"\" target\x3d'_blank'\x3e\x3cdiv class\x3d\""+soy.$$escapeHtml(a.classPrefix)+'-commentCount linkContainer"\x3e'+(null!=(null==a.checkin.comments?null:a.checkin.comments.count)&&(null==a.checkin.comments?0:a.checkin.comments.count)?'\x3cdiv class\x3d"'+soy.$$escapeHtml(a.classPrefix)+'-commentImg commentImg"\x3e\x3c/div\x3e\x3cdiv class\x3d"'+
soy.$$escapeHtml(a.classPrefix)+'-commentSummary commentSummary"\x3e'+soy.$$escapeHtml(a.checkin.comments.count)+"\x3c/div\x3e":"")+"\x3c/div\x3e\x3c/a\x3e"};"undefined"==typeof helpers.download&&(helpers.download={});helpers.download.downloadPageTitle=function(a,b){return"Download Foursquare for your phone"};helpers.download.iphoneDownloadLink=function(a,b){return helpers.download.downloadLink(soy.$$augmentMap(a,{os:"iphone"}))};helpers.download.androidDownloadLink=function(a,b){return helpers.download.downloadLink(soy.$$augmentMap(a,{os:"android"}))};
helpers.download.blackberryDownloadLink=function(a,b){return helpers.download.downloadLink(soy.$$augmentMap(a,{os:"blackberry"}))};helpers.download.nokiaDownloadLink=function(a,b){return helpers.download.downloadLink(soy.$$augmentMap(a,{os:"nokia"}))};helpers.download.webOsDownloadLink=function(a,b){return helpers.download.downloadLink(soy.$$augmentMap(a,{os:"palm"}))};helpers.download.windowsPhoneDownloadLink=function(a,b){return helpers.download.downloadLink(soy.$$augmentMap(a,{os:"windowsphone"}))};
helpers.download.downloadLink=function(a,b){return'\x3ca  href\x3d"/get'+(a.trackingId?"/"+soy.$$escapeHtml(a.trackingId):"")+(a.os?"?os\x3d"+soy.$$escapeHtml(a.os):"")+'" rel\x3d"nofollow"'+(a.id?'id\x3d"'+soy.$$escapeHtml(a.id)+'"':"")+" "+(a.klass?'class\x3d"'+soy.$$escapeHtml(a.klass)+'"':"")+" "+(a.target?'target\x3d"'+soy.$$escapeHtml(a.target)+'"':"")+"\x3e"+soy.$$escapeHtml(a.contents)+"\x3c/a\x3e"};helpers.download.getTheAppSuccess=function(a,b){return"Sent! Check your phone for the download link."};
helpers.download.getTheAppError=function(a,b){return"Sorry, we couldn't send the download link to your phone."};helpers.download.getAppChrome=function(a,b){return'\x3cdiv id\x3d"getTheAppBar"\x3e\x3cdiv class\x3d"wrap"\x3e\x3cdiv class\x3d"close"\x3e\x26nbsp;\x3c/div\x3e\x3cdiv class\x3d"inner"\x3e\x3cimg class\x3d"logo" alt\x3d"" width\x3d"64" height\x3d"64" src\x3d"'+soy.$$escapeHtml("https://ss1.4sqi.net/img/metaIcons/touch-icon-72-cf2d6cd44afc49e9889ad54e33e69f31.png")+'"/\x3e\x3ca href\x3d"/download/?source\x3dgetAppBar" class\x3d"downloadApp greenButton"\x3eGet the app\x3c/a\x3e\x3ch2\x3eFind great places on the go.\x3c/h2\x3e\x3cp\x3eDiscover what\'s nearby, search for what you\'re craving, and get deals and tips along the way.\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'};
helpers.download.facebookSendToMobile=function(a,b){return'\x3cdiv class\x3d"facebookSendToMobileButton"\x3e\x3ciframe allowtransparency\x3d"true" frameborder\x3d"0" width\x3d"140px" height\x3d"28px" src\x3d"https://www.facebook.com/plugins/send_to_mobile.php?app_id\x3d'+soy.$$escapeHtml(a.fbId)+'\x26size\x3dlarge" \x3e\x3c/iframe\x3e\x3c/div\x3e'};"undefined"==typeof helpers.entities&&(helpers.entities={});helpers.entities.textWithEntities=function(a,b){return a.entities&&0!=a.entities.length?helpers.entities.renderEntitiesRecursive_(soy.$$augmentMap(a,{asLinks:!1,index:0})):soy.$$escapeHtml(a.text)};helpers.entities.textWithEntitiesLinks=function(a,b){return a.entities&&0!=a.entities.length?helpers.entities.renderEntitiesRecursive_(soy.$$augmentMap(a,{asLinks:!0,index:0})):soy.$$escapeHtml(a.text)};
helpers.entities.renderEntitiesRecursive_=function(a,b){var c;c=a.entities[a.index];var d=a.entities[a.index-1];return c=""+((0==a.index||c.indices[0]>=d.indices[1])&&0<=c.indices[0]&&0<=c.indices[1]?(0==a.index?soy.$$escapeHtml(fourSq.util.safeSubstring(a.text,0,c.indices[0])):soy.$$escapeHtml(fourSq.util.safeSubstring(a.text,d.indices[1],c.indices[0])))+helpers.entities.renderSingleEntity_({text:soy.$$filterNoAutoescape(fourSq.util.safeSubstring(a.text,c.indices[0],c.indices[1])),entity:c,asLink:a.asLinks,
dataSource:a.dataSource,referralId:a.referralId})+(a.index+1==a.entities.length?soy.$$escapeHtml(fourSq.util.safeSubstring(a.text,c.indices[1])):helpers.entities.renderEntitiesRecursive_(soy.$$augmentMap(a,{index:a.index+1}))):0==a.index?soy.$$escapeHtml(a.text):soy.$$escapeHtml(fourSq.util.safeSubstring(a.text,d.indices[1])))};
helpers.entities.renderSingleEntity_=function(a,b){return a.asLink&&"event"!=a.entity.type&&"search_match"!=a.entity.type&&"bold"!=a.entity.type&&"tip_taste_match"!=a.entity.type?"\x3ca "+helpers.entities.entityLinkAttributes_(a)+"\x3e"+(a.entity.object&&a.entity.object.text?soy.$$escapeHtml(a.entity.object.text):soy.$$escapeHtml(a.text))+"\x3c/a\x3e":'\x3cspan class\x3d"entity '+soy.$$escapeHtml(a.entity.type)+(a.entity.onUser?" onUser":"")+'"\x3e'+soy.$$escapeHtml(a.text)+"\x3c/span\x3e"};
helpers.entities.entityLinkAttributes_=function(a,b){return'class\x3d"entity '+soy.$$escapeHtml(a.entity.type)+(a.entity.onUser?" onUser":"")+'"'+(a.entity.url?("keyPhrase"!=a.entity.type?'rel\x3d"nofollow"':"")+'href\x3d"'+helpers.util.appendReferralId(soy.$$augmentMap(a.entity,{referralId:a.referralId}))+'"':"url"==a.entity.type&&a.entity.object&&a.entity.object.url?'rel\x3d"nofollow" href\x3d"'+soy.$$escapeHtml(a.entity.object.url)+'"'+(a.entity.object.urlSig?'target\x3d"_blank" '+helpers.util.makeOutgoingLink(soy.$$augmentMap(a.entity.object,
{dataSource:a.dataSource})):""):"user"==a.entity.type||"celebrity"==a.entity.type||"page"==a.entity.type||"chain"==a.entity.type||"venuePage"==a.entity.type?'href\x3d"'+helpers.util.appendReferralId({url:"/user/"+soy.$$escapeHtml(a.entity.id),referralId:a.referralId})+'"':"venue"==a.entity.type?'data-venue-id\x3d"'+soy.$$escapeHtml(a.entity.id)+'"'+(a.referralId?'data-referral-id\x3d"'+soy.$$escapeHtml(a.referralId)+'"':"")+'href\x3d"'+helpers.util.appendReferralId({url:"/v/"+soy.$$escapeHtml(a.entity.id),
referralId:a.referralId})+'"':"facebookUser"==a.entity.type?'href\x3d"http://facebook.com/profile.php?id\x3d'+soy.$$escapeHtml(a.entity.id)+'" target\x3d"_blank"':"")};helpers.entities.renderEntitiesViaTags=function(a,b){var c="",d=fourSq.soyhelpers.markEntities(a.input);return c+=helpers.entities.renderEntityTagsRecursive_({tags:d,text:a.input.text,listIndex:0,textIndex:0,asLinks:a.asLinks,dataSource:a.dataSource,referralId:a.referralId})};
helpers.entities.renderEntityTagsRecursive_=function(a,b){var c="";if(a.listIndex==a.tags.length)c+=soy.$$escapeHtml(fourSq.util.safeSubstring(a.text,a.textIndex));else var d=a.tags[a.listIndex],e=a.asLinks&&"event"!=d.entity.type&&"search_match"!=d.entity.type&&"bold"!=d.entity.type&&"tip_taste_match"!=d.entity.type,c=c+(soy.$$escapeHtml(fourSq.util.safeSubstring(a.text,a.textIndex,d.index))+(d.isOpen?e?"\x3ca"+helpers.entities.entityLinkAttributes_({entity:d.entity,dataSource:a.dataSource,referralId:a.referralId})+
"\x3e":'\x3cspan class\x3d"entity '+soy.$$escapeHtml(d.entity.type)+(d.entity.onUser?" onUser":"")+'"\x3e':e?"\x3c/a\x3e":"\x3c/span\x3e")+helpers.entities.renderEntityTagsRecursive_({tags:a.tags,text:a.text,listIndex:a.listIndex+1,textIndex:d.index,asLinks:a.asLinks,dataSource:a.dataSource,referralId:a.referralId}));return c};"undefined"==typeof helpers.event&&(helpers.event={});helpers.event.standard=function(a,b){return'\x3cdiv class\x3d"eventEntry" id\x3d"'+soy.$$escapeHtml(a.event.id)+'"\x3e'+soy.$$escapeHtml(a.event.name)+(a.canEdit?'\x3cspan class\x3d"link delete"\x3e\x3c/span\x3e':"")+'\x3cbr/\x3e\x3cspan class\x3d"eventDate"\x3e'+helpers.util.createdAtSmartDate({then:a.event.startAt})+"\x3c/span\x3e\x3c/div\x3e"};
helpers.event.mediumIcon=function(a,b){return'\x3cimg src\x3d"'+soy.$$escapeHtml("https://ss0.4sqi.net/img/eventsicon32-c0c1c358125874e78f6e778cbdb500bd.png")+'" class\x3d"eventsIcon" data-retina-url\x3d"'+soy.$$escapeHtml("https://ss1.4sqi.net/img/eventsicon64-8611d22028792b818ff16768968e0cf1.png")+'" alt\x3d"Event Icon" width\x3d"32" height\x3d"32" /\x3e'};
helpers.event.smallIcon=function(a,b){return'\x3cimg src\x3d"'+soy.$$escapeHtml("https://ss0.4sqi.net/img/eventsicon16-a3c2f71e8f9f7b554940211dd9510f57.png")+'" class\x3d"eventsIcon" data-retina-url\x3d"'+soy.$$escapeHtml("https://ss0.4sqi.net/img/eventsicon32-c0c1c358125874e78f6e778cbdb500bd.png")+'" alt\x3d"Event Icon" width\x3d"16" height\x3d"16" /\x3e'};
helpers.event.nameWithLink=function(a,b){return a.url?'\x3ca href\x3d"'+soy.$$escapeHtml(a.url)+'" rel\x3d"nofollow" '+(a.urlSig?helpers.util.makeOutgoingLink(a):"")+(a.target?'target\x3d"'+soy.$$escapeHtml(a.target)+'"':"")+"\x3e"+(a.linkContents?soy.$$escapeHtml(a.linkContents):soy.$$escapeHtml(a.name))+"\x3c/a\x3e":'\x3ca href\x3d"'+helpers.venue.href(a.venue)+'"'+(a.target?'target\x3d"'+soy.$$escapeHtml(a.target)+'"':"")+"\x3e"+(a.linkContents?soy.$$escapeHtml(a.linkContents):soy.$$escapeHtml(a.name))+
"\x3c/a\x3e"};helpers.event.maybeProviderAttribution=function(a,b){return(null==a.event.provider?0:a.event.provider.iconUrl)?'\x3cdiv class\x3d"eventProvider"\x3e'+helpers.event.providerAttribution(a.event)+"\x3c/div\x3e":""};
helpers.event.providerAttribution=function(a,b){return'Powered by \x3ca href\x3d"'+soy.$$escapeHtml(a.url)+'" target\x3d"_blank" rel\x3d"nofollow"'+(a.urlSig?helpers.util.makeOutgoingLink(a):"")+'\x3e\x3cimg src\x3d"'+helpers.image.nearestBigger(soy.$$augmentMap(a.provider.iconUrl,{desiredSize:20}))+'" alt\x3d"" /\x3e\x3c/a\x3e'};
helpers.event.eventTime=function(a,b){var c;c=null!=a.event.startAt?a.event.startAt:a.event.date;return c=""+(c?a.dateOnly||a.event.allDay?"\x3c!-- If it's a movie and it has a summary, use that for times --\x3e"+("4dfb90c6bd413dd705e8f897"==a.event.categories[0].id&&null!=a.event.summary?soy.$$escapeHtml(a.event.summary):helpers.util.dateAtTimeZone({when:c,tz:a.event.timeZone})):helpers.util.dateWithTimeAtTimeZone({createdAt:c,tz:a.event.timeZone}):"")};
helpers.event.nameWithOptionalLink=function(a,b){return a.url?helpers.event.nameWithLink(a):soy.$$escapeHtml(a.name)};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.ui&&(templates.fourSq.ui={});"undefined"==typeof templates.fourSq.ui.inputs&&(templates.fourSq.ui.inputs={});
templates.fourSq.ui.inputs.basicToggle=function(a,b){return'\x3cdiv class\x3d"toggleButton" '+(a.dataParam?soy.$$escapeHtml(a.dataParam)+" ":"")+(a.wrapperId?'id\x3d"'+soy.$$escapeHtml(a.wrapperId)+'"':"")+'\x3e\x3cinput type\x3d"checkbox" class\x3d"toggleCheckbox" style\x3d"display: none;" name\x3d"'+soy.$$escapeHtml(a.checkboxName)+'" value\x3d"true" /\x3e'+soy.$$escapeHtml(a.contents)+"\x3c/div\x3e"};
templates.fourSq.ui.inputs.iconButton=function(a,b){return'\x3cdiv class\x3d"iconButton '+(a.buttonClass?soy.$$escapeHtml(a.buttonClass):"")+'"\x3e\x3cdiv class\x3d"buttonLeft icon"\x3e\x3cimg src\x3d"'+soy.$$escapeHtml(a.iconUrl)+'" alt\x3d"'+soy.$$escapeHtml(a.contents)+'" '+(a.size?'width\x3d"'+soy.$$escapeHtml(a.size)+'" height\x3d"'+soy.$$escapeHtml(a.size)+'"':"")+' /\x3e\x3c/div\x3e\x3cdiv class\x3d"buttonRight label"\x3e'+soy.$$escapeHtml(a.contents)+"\x3c/div\x3e\x3c/div\x3e"};
templates.fourSq.ui.inputs.simpleIconButton=function(a,b){return'\x3cdiv class\x3d"simpleIconButton '+(a.buttonClass?soy.$$escapeHtml(a.buttonClass):"")+'"\x3e\x3cdiv class\x3d"simpleIcon"\x3e\x3cimg src\x3d"'+soy.$$escapeHtml(a.iconUrl)+'" alt\x3d"'+soy.$$escapeHtml(a.contents)+'" '+(a.size?'width\x3d"'+soy.$$escapeHtml(a.size)+'" height\x3d"'+soy.$$escapeHtml(a.size)+'"':"")+' /\x3e\x3c/div\x3e\x3cdiv class\x3d"simpleButtonText"\x3e'+soy.$$escapeHtml(a.contents)+"\x3c/div\x3e\x3c/div\x3e"};
templates.fourSq.ui.inputs.wrappedTextInput=function(a,b){return'\x3cdiv class\x3d"inputWrapper '+soy.$$escapeHtml(a.inputName)+'"\x3e'+templates.fourSq.ui.inputs.textInput(a)+'\x3cul class\x3d"errorDisplay" style\x3d"display:none"\x3e\x3c/ul\x3e\x3c/div\x3e'};templates.fourSq.ui.inputs.wrappedTextArea=function(a,b){return'\x3cdiv class\x3d"inputWrapper '+soy.$$escapeHtml(a.inputName)+'"\x3e'+templates.fourSq.ui.inputs.textArea(a)+'\x3cul class\x3d"errorDisplay" style\x3d"display:none"\x3e\x3c/ul\x3e\x3c/div\x3e'};
templates.fourSq.ui.inputs.textArea=function(a,b){return'\x3ctextarea class\x3d"formStyle '+(a.classes?soy.$$escapeHtml(a.classes):"")+'" name\x3d"'+soy.$$escapeHtml(a.inputName)+'" id\x3d"'+(a.inputId?soy.$$escapeHtml(a.inputId):soy.$$escapeHtml(a.inputName))+'"'+(a.tabindex?' tabindex\x3d"'+soy.$$escapeHtml(a.tabindex)+'"':"")+(a.placeholder?' placeholder\x3d"'+soy.$$escapeHtml(a.placeholder)+'"':"")+(a.additionalProperties?" "+soy.$$escapeHtml(a.additionalProperties):"")+"\x3e"+(a.value?soy.$$escapeHtml(a.value):
"")+"\x3c/textarea\x3e"};
templates.fourSq.ui.inputs.textInput=function(a,b){return'\x3cinput type\x3d"text" class\x3d"formStyle'+(a.classes?" "+soy.$$escapeHtml(a.classes):"")+'" name\x3d"'+soy.$$escapeHtml(a.inputName)+'" id\x3d"'+(a.inputId?soy.$$escapeHtml(a.inputId):soy.$$escapeHtml(a.inputName))+'"'+(a.tabindex?' tabindex\x3d"'+soy.$$escapeHtml(a.tabindex)+'"':"")+(a.placeholder?' placeholder\x3d"'+soy.$$escapeHtml(a.placeholder)+'"':"")+(a.value?' value\x3d"'+soy.$$escapeHtml(a.value)+'"':"")+(a.additionalProperties?
" "+soy.$$escapeHtml(a.additionalProperties):"")+" /\x3e"};templates.fourSq.ui.inputs.timeInput=function(a,b){return'\x3cdiv class\x3d"timeInputContainer"\x3e'+templates.fourSq.ui.inputs.textInput(soy.$$augmentMap(a,{classes:"timeInput",additionalProperties:'autocomplete\x3d"off"'}))+'\x3cdiv class\x3d"completions" id\x3d"completions_'+soy.$$escapeHtml(a.inputName)+'"\x3e\x3c/div\x3e\x3c/div\x3e'};templates.fourSq.ui.inputs.timeRangeSlider=function(a,b){return'\x3cdiv class\x3d"timeRangeSlider"\x3e\x3cdiv class\x3d"sliderHeader"\x3eHours:\x3cspan class\x3d"sliderClosed"\x3eNone\x3c/span\x3e\x3cspan class\x3d"sliderOpen"\x3e\x3cspan class\x3d"sliderBound sliderStart" /\x3e - \x3cspan class\x3d"sliderBound sliderEnd" /\x3e (\x3ca href\x3d"" class\x3d"sliderRemove"\x3eRemove\x3c/a\x3e)\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"sliderBar" /\x3e\x3cdiv class\x3d"sliderScale" /\x3e\x3c/div\x3e'};
templates.fourSq.ui.inputs.noon=function(a,b){return"noon"};templates.fourSq.ui.inputs.midnight=function(a,b){return"midnight"};
templates.fourSq.ui.inputs.userInputResult=function(a,b){return'\x3cdiv id\x3d"'+soy.$$escapeHtml(a.rowId)+'" class\x3d"userInputResultRow"\x3e\x3cdiv class\x3d"image"\x3e\x3cimg src\x3d'+soy.$$escapeHtml(a.pic)+' /\x3e\x3c/div\x3e\x3cdiv class\x3d"desc"\x3e\x3cdiv class\x3d"name"\x3e\x3ca href\x3d'+soy.$$escapeHtml(a.uri)+"\x3e"+soy.$$escapeHtml(a.fullName)+'\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"loc"\x3e'+soy.$$escapeHtml(a.location)+'\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"remove"\x3e\x3cspan class\x3d"removeUser"\x3eX\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"custom"\x3e\x3c/div\x3e\x3cdiv class\x3d"separator"\x3e\x3c/div\x3e\x3c/div\x3e'};
templates.fourSq.ui.inputs.userInputNotFound=function(a,b){return"\x3cdiv\x3e"+("badquery"==a.errtype?soy.$$escapeHtml(a.errarg)+" is not a user id, a twitter handle, or a url":"nonefound"==a.errtype?"No users were found for "+soy.$$escapeHtml(a.errarg):"badtype"==a.errtype?soy.$$escapeHtml(a.errarg)+" is not the expected user type":"searchfailed"==a.errtype?"User search failed for "+soy.$$escapeHtml(a.errarg):"Unexpected failure")+"\x3c/div\x3e"};
templates.fourSq.ui.inputs.userInputContainer=function(a,b){return'\x3cdiv class\x3d"userInputForm"\x3e\x3cdiv class\x3d"input"\x3e\x3cinput type\x3d"text" class\x3d"userFinderInput textInput"/\x3e\x3c/div\x3e\x3cdiv class\x3d"result"\x3e\x3cdiv class\x3d"userFinderAlert"\x3e\x3c/div\x3e\x3cdiv class\x3d"userFinderList"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'};"undefined"==typeof helpers.venue&&(helpers.venue={});"undefined"==typeof helpers.venue.hours&&(helpers.venue.hours={});
helpers.venue.hours.compactHoursList=function(a,b){var c="";if(a.hours&&a.hours.timeframes){for(var c=c+('\x3cul class\x3d"timeframes"\x3e'+(a.hours.seasonalRange&&a.hours.seasonalRange.displayDateRange?'\x3cli class\x3d"timeframe"\x3e\x3cspan class\x3d"timeframeSeasonalRange"\x3e'+soy.$$escapeHtml(a.hours.seasonalRange.displayDateRange)+"\x3c/span\x3e\x3c/li\x3e":"")),d=a.hours.timeframes,e=d.length,f=0;f<e;f++){for(var g=d[f],c=c+('\x3cli class\x3d"timeframe"\x3e\x3cspan class\x3d"timeframeDays"\x3e'+
soy.$$escapeHtml(g.days)+'\x3c/span\x3e\x3cspan class\x3d"timeframeHours"\x3e\x3cul\x3e'),g=g.open,h=g.length,l=0;l<h;l++)c+="\x3cli\x3e"+soy.$$escapeHtml(g[l].renderedTime)+"\x3c/li\x3e";c+="\x3c/ul\x3e\x3c/span\x3e\x3c/li\x3e"}c+="\x3c/ul\x3e"}return c};
helpers.venue.hours.compactSeasonalHoursList=function(a,b){var c="";if(a.seasonalHours.length)for(var c=c+'\x3cdiv class\x3d"seasonalHours"\x3eSeasonal Hours\x3c/div\x3e',d=a.seasonalHours,e=d.length,f=0;f<e;f++)var g=d[f],c=c+('\x3cdiv class\x3d"range"\x3e'+soy.$$escapeHtml(g.seasonalRange)+"\x3c/div\x3e"+helpers.venue.hours.compactHoursList({hours:g}));return c};
helpers.venue.hours.combinedHoursDisplay=function(a,b){return helpers.venue.hours.hoursDisplay({hoursJson:a.hours.hours,popularHoursJson:a.hours.popular,withCurrentStatus:a.withCurrentStatus,withExpandable:a.withExpandable,hasEditor:a.hasEditor})};
helpers.venue.hours.hoursDisplay=function(a,b){return(a.hoursJson.timeframes?helpers.venue.hours.actualHours_(a):"")+((null==a.popularHoursJson?0:a.popularHoursJson.timeframes)?helpers.venue.hours.popularHours_(soy.$$augmentMap(a,{withExpandable:a.withExpandable&&a.hoursJson.timeframes})):"")+(!a.hasEditor||a.hoursJson.timeframes||(null==a.popularHoursJson?0:a.popularHoursJson.timeframes)?"":"\x3ch5\x3eHours\x3c/h5\x3e\x3cp\x3eWe don't have any hours for this location.\x3c/p\x3e")};
helpers.venue.hours.actualHours_=function(a,b){for(var c='\x3ch5 class\x3d"hoursDisplayHeader"\x3eHours\x3c/h5\x3e'+(a.withCurrentStatus&&null!=a.hoursJson.status?'\x3cdiv class\x3d"status '+(a.hoursJson.isOpen?"open":"closed")+'"\x3e'+soy.$$escapeHtml(a.hoursJson.status)+"\x3c/div\x3e":"")+'\x3cdiv class\x3d"hours '+((null==a.popularHoursJson?0:a.popularHoursJson.timeframes)?"actualPanelWithPopular":"")+'"\x3e',d=a.hoursJson.timeframes,e=d.length,f=0;f<e;f++)c+=helpers.venue.hours.hoursItem({timeframe:d[f],
editable:!1,blurred:!1});return c+"\x3c/div\x3e"};
helpers.venue.hours.popularHours_=function(a,b){for(var c='\x3cdiv id\x3d"popularHours" class\x3d"notrans '+(a.withExpandable||a.hoursJson.timeframes?"popularPanelWithActual":"")+'"\x3e\x3cdiv class\x3d"popularHoursHeader"\x3e\x3ch5\x3ePopular Hours \x3cspan id\x3d"popularHoursTooltip" title\x3d"Popular hours are estimated based on check-in activity"\x3e?\x3c/span\x3e\x3c/h5\x3e'+(a.withCurrentStatus&&!a.hoursJson.timeframes&&a.popularHoursJson.status&&a.popularHoursJson.isOpen?'\x3cdiv class\x3d"status statusOpen"\x3e'+
soy.$$escapeHtml(a.popularHoursJson.status)+"\x3c/div\x3e":"")+"\x3c/div\x3e",c=c+'\x3cdiv class\x3d"hours"\x3e',d=a.popularHoursJson.timeframes,e=d.length,f=0;f<e;f++)var g=f,c=c+((a.withExpandable&&1==g?'\x3cspan id\x3d"showPopularLink" class\x3d"boxLink link"\x3eSee all popular hours\x3c/span\x3e\x3cdiv id\x3d"allPopular" class\x3d"showMore"\x3e':"")+helpers.venue.hours.hoursItem({timeframe:d[f],editable:!1,blurred:a.withExpandable&&(a.hoursJson.timeframes&&2==f+1&&2<a.popularHoursJson.timeframes.length||
!a.hoursJson.timeframes&&3==f+1&&3<a.popularHoursJson.timeframes.length)})+(a.withExpandable&&f==e-1&&1<a.popularHoursJson.timeframes.length?"\x3c/div\x3e":""));return c+"\x3c/div\x3e\x3c/div\x3e"};helpers.venue.hours.editableHours=function(a,b){for(var c='\x3cdiv class\x3d"hoursItem"\x3e',d=a.hoursJson.hours.timeframes,e=d.length,f=0;f<e;f++)c+=helpers.venue.hours.hoursItem({timeframe:d[f],editable:!0,hoursString:a.hoursString,blurred:!1});return c+"\x3c/div\x3e"};
helpers.venue.hours.hoursModal=function(a,b){a=a||{};var c,d=null!=a.startingTabIndex?a.startingTabIndex:100;c=""+('\x3cdiv id\x3d"hoursModal" class\x3d"modal" style\x3d"display: none;"\x3e\x3cdiv class\x3d"modalBg"\x3e\x3c/div\x3e\x3cdiv class\x3d"modalWrapper"\x3e\x3cdiv class\x3d"modalContents"\x3e\x3cdiv id\x3d"hoursInputs"\x3e\x3ch3\x3e1. When are you open?\x3c/h3\x3e\x3cdiv class\x3d"times"\x3e'+helpers.venue.hours.fromTimeInput_({containerId:"fromTimeContainer",inputName:"fromTime",tabindex:d,
placeholder:"9:00 am"})+helpers.venue.hours.toTimeInput_({containerId:"toTimeContainer",inputName:"toTime",tabindex:d+1,placeholder:"5:00 pm"})+'\x3cdiv class\x3d"allDay"\x3eOr: \x3cinput type\x3d"checkbox" id\x3d"allDayCheck" tabindex\x3d"'+soy.$$escapeHtml(d+2)+'" /\x3e all day\x3c/div\x3e\x3c/div\x3e\x3ch3\x3e2. On which days?\x3c/h3\x3e\x3cdiv id\x3d"dayToggles" class\x3d"days"\x3e'+helpers.venue.hours.dayToggles(null)+'\x3c/div\x3e\x3ch3 class\x3d"noBottomPadding"\x3e3. Do you have any named ranges those days? (optional)\x3c/h3\x3e\x3cdiv class\x3d"ranges"\x3e\x3cp\x3e\x3csmall\x3eFor example: Brunch, happy hour, members only\x3c/small\x3e\x3c/p\x3e\x3cdiv id\x3d"namedRanges"\x3e');
for(var e=1;4>e;e++)c+=helpers.venue.hours.namedRange({rangeNumber:e,startingTabIndex:d+1+3*e});return c+='\x3c/div\x3e\x3ca id\x3d"addRangeButton" tabindex\x3d"($tabIndex + 3)"\x3e+ add time range\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"bottomButtons"\x3e\x3cdiv id\x3d"validationError" class\x3d"errorDisplay"\x3e\x3c/div\x3e\x3ca id\x3d"cancelModalButton"\x3eCancel\x3c/a\x3e\x3ca id\x3d"submitModalButton" class\x3d"greenButton" tabindex\x3d"'+soy.$$escapeHtml(d+11)+'"\x3eAdd\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cp class\x3d"mergeNote" style\x3d"display: hidden;"\x3e\x3csmall\x3eThese hours will be intelligently merged after saving.\x3c/small\x3e\x3c/p\x3e'};
helpers.venue.hours.dayToggles=function(a,b){return templates.fourSq.ui.inputs.basicToggle({wrapperId:"day1",checkboxName:1,contents:"Mon"})+templates.fourSq.ui.inputs.basicToggle({wrapperId:"day2",checkboxName:2,contents:"Tue"})+templates.fourSq.ui.inputs.basicToggle({wrapperId:"day3",checkboxName:3,contents:"Wed"})+templates.fourSq.ui.inputs.basicToggle({wrapperId:"day4",checkboxName:4,contents:"Thu"})+templates.fourSq.ui.inputs.basicToggle({wrapperId:"day5",checkboxName:5,contents:"Fri"})+templates.fourSq.ui.inputs.basicToggle({wrapperId:"day6",
checkboxName:6,contents:"Sat"})+templates.fourSq.ui.inputs.basicToggle({wrapperId:"day7",checkboxName:7,contents:"Sun"})};
helpers.venue.hours.namedRange=function(a,b){return'\x3cdiv id\x3d"namedRange'+soy.$$escapeHtml(a.rangeNumber)+'" class\x3d"range" style\x3d"display: none;"\x3e\x3cdiv class\x3d"nameContainer"\x3e\x3cinput class\x3d"rangeName" type\x3d"text" name\x3d"rangeName" tabindex\x3d"'+soy.$$escapeHtml(a.startingTabIndex)+'" placeholder\x3d"Name" /\x3e\x3cdiv class\x3d"completions"\x3e\x3c/div\x3e\x3c/div\x3e'+helpers.venue.hours.fromTimeInput_({inputName:"namedRangeFrom"+soy.$$escapeHtml(a.rangeNumber),tabindex:a.startingTabIndex+
1,placeholder:"1:00 pm"})+helpers.venue.hours.toTimeInput_({inputName:"namedRangeTo"+soy.$$escapeHtml(a.rangeNumber),tabindex:a.startingTabIndex+2,placeholder:"2:00 pm"})+'\x3ca class\x3d"deleteRange"\x3e\x3cimg src\x3d"'+soy.$$escapeHtml("https://ss1.4sqi.net/img/icon-delete-5e654699e212267863ac7e65fe087a77.png")+'" alt\x3d"Delete Range"/\x3e\x3c/a\x3e\x3c/div\x3e'};
helpers.venue.hours.fromTimeInput_=function(a,b){return'\x3cdiv class\x3d"fromTime" '+(a.containerId?'id\x3d"'+soy.$$escapeHtml(a.containerId)+'"':"")+"\x3e\x3cstrong\x3eFrom\x3c/strong\x3e"+templates.fourSq.ui.inputs.timeInput(a)+"\x3c/div\x3e"};helpers.venue.hours.toTimeInput_=function(a,b){return'\x3cdiv class\x3d"toTime" '+(a.containerId?'id\x3d"'+soy.$$escapeHtml(a.containerId)+'"':"")+"\x3e\x3cstrong\x3eTo\x3c/strong\x3e"+templates.fourSq.ui.inputs.timeInput(a)+"\x3c/div\x3e"};
helpers.venue.hours.hoursItem=function(a,b){for(var c='\x3cdiv class\x3d"timespan"\x3e'+(a.editable?'\x3ca class\x3d"deleteHours"\x3e\x3cimg src\x3d"'+soy.$$escapeHtml("https://ss1.4sqi.net/img/icon-delete-5e654699e212267863ac7e65fe087a77.png")+'" alt\x3d"Delete Hours" /\x3e\x3c/a\x3e'+(a.hoursString?'\x3cinput type\x3d"hidden" name\x3d"machineHours" class\x3d"machineHours" value\x3d"'+soy.$$escapeHtml(a.hoursString)+'"/\x3e':""):"")+'\x3cdiv class\x3d"openTime '+(a.blurred?" blurred ":"")+'"\x3e\x3cdiv class\x3d"days"\x3e'+
soy.$$escapeHtml(a.timeframe.days)+"\x3c/div\x3e",d=a.timeframe.open,e=d.length,f=0;f<e;f++)c+='\x3cspan class\x3d"hours"\x3e '+soy.$$escapeHtml(d[f].renderedTime)+"\x3c/span\x3e";c+="\x3c/div\x3e";d=a.timeframe.segments;e=d.length;for(f=0;f<e;f++)var g=d[f],c=c+('\x3cdiv class\x3d"range"\x3e\x3cdiv class\x3d"name"\x3e'+soy.$$escapeHtml(g.label)+'\x3c/div\x3e\x3cdiv class\x3d"hours"\x3e'+soy.$$escapeHtml(g.renderedTime)+"\x3c/div\x3e\x3c/div\x3e");return c+"\x3c/div\x3e"};
helpers.venue.hours.openingError=function(a,b){return"Opening time isn't valid"};helpers.venue.hours.openingHint=function(a,b){return"Enter an opening time"};helpers.venue.hours.closingError=function(a,b){return"Closing time isn't valid"};helpers.venue.hours.closingHint=function(a,b){return"Enter a closing time"};
helpers.venue.hours.orderingError=function(a,b){return 36<=a.maxOpenHour?"Closing time must be after opening and before "+soy.$$escapeHtml(a.maxOpenHour-24)+"pm":"Closing time must be after opening and before "+soy.$$escapeHtml(a.maxOpenHour-24)+"am"};helpers.venue.hours.noDaysError=function(a,b){return"You haven't selected any days"};helpers.venue.hours.noDaysHint=function(a,b){return"Select one or more days"};helpers.venue.hours.fatalError=function(a,b){return"Uh oh! Something terrible happened, refresh and try again"};
helpers.venue.hours.rangeNameTooLong=function(a,b){return"Range names must be less than 100 characters"};helpers.venue.hours.rangeOutsideHours=function(a,b){return"This range is outside of the hours you're open"};helpers.venue.hours.rangeOpeningError=function(a,b){return"Your range's opening time isn't valid"};helpers.venue.hours.rangeClosingError=function(a,b){return"Your range's closing time isn't valid"};"undefined"==typeof helpers.image&&(helpers.image={});helpers.image.imagePath=function(a,b){return a.image.fullPath?soy.$$escapeHtml(a.image.fullPath):helpers.image.nearestBigger(soy.$$augmentMap(a.image,{desiredSize:32}))};
helpers.image.nearestBigger=function(a,b){return function(){var b="";if(null!=a.sizes&&null!=a.name)var d=_.sortBy(a.sizes,function(a){return a}),e=_.filter(d,function(b){return b>=a.desiredSize}),b=b+(0<e.length?soy.$$escapeHtml(a.prefix)+soy.$$escapeHtml(e[0])+soy.$$escapeHtml(a.name):soy.$$escapeHtml(a.prefix)+soy.$$escapeHtml(d[d.length-1])+soy.$$escapeHtml(a.name));else b+=soy.$$escapeHtml(a.prefix)+soy.$$escapeHtml(a.desiredSize)+soy.$$escapeHtml(a.suffix);return b}()};"undefined"==typeof helpers.impressions&&(helpers.impressions={});
helpers.impressions.addContentBlockId=function(a,b){var c="";if(a.logView)switch(a.contentType){case "pageUpdate":case "tip":case "list":case "checkin":c+='\x3cdiv class\x3d"contentBlock" data-contentid\x3d"'+soy.$$escapeHtml(a.contentId)+'" data-contenttype\x3d"'+soy.$$escapeHtml(a.contentType)+'"\x3e'+soy.$$escapeHtml(a.contentHtml)+"\x3c/div\x3e";break;default:c+=soy.$$escapeHtml(a.contentHtml)}else c+=soy.$$escapeHtml(a.contentHtml);return c};"undefined"==typeof helpers.list&&(helpers.list={});helpers.list.href=function(a,b){return a.referralId&&a.geoId?soy.$$escapeHtml(fourSq.util.appendParams(a.canonicalPath,[["referralId",a.referralId],["geoId",a.geoId]])):a.geoId?soy.$$escapeHtml(fourSq.util.appendParams(a.canonicalPath,[["geoId",a.geoId]])):a.referralId?soy.$$escapeHtml(fourSq.util.appendParams(a.canonicalPath,[["referralId",a.referralId]])):soy.$$escapeHtml(a.canonicalPath)};
helpers.list.nameWithLink=function(a,b){return'\x3ca href\x3d"'+helpers.list.href(soy.$$augmentMap(a.list,{referralId:a.referralId,geoId:a.geoId}))+'"'+(a.target?' target\x3d"'+soy.$$escapeHtml(a.target)+'"':"")+(a.title?' title\x3d"'+soy.$$escapeHtml(a.list.name)+'"':"")+"\x3e"+soy.$$escapeHtml(a.list.name)+"\x3c/a\x3e"};helpers.list.followingCopy=function(a,b){return"Following"};helpers.list.notFollowingCopy=function(a,b){return"Follow"};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.ui&&(templates.fourSq.ui={});"undefined"==typeof templates.fourSq.ui.locationinput&&(templates.fourSq.ui.locationinput={});
templates.fourSq.ui.locationinput.input=function(a,b){return'\x3cdiv class\x3d"locationInputContainer"\x3e'+(a.showLocationReset?'\x3cspan class\x3d"locationReset" title\x3d"Use your current location"\x3e\x3c/span\x3e':"")+'\x3cinput id\x3d"locationInput" type\x3d"text" class\x3d"location" '+(a.showPlaceholder?'placeholder\x3d"Location"':"")+"/\x3e\x3c/div\x3e"};templates.fourSq.ui.locationinput.onCurrentLocationText=function(a,b){return"Current Location"};
templates.fourSq.ui.locationinput.currentMapBoundsText=function(a,b){return"Current Map View"};templates.fourSq.ui.locationinput.unknownLocationText=function(a,b){return"Unknown Location"};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.ui&&(templates.fourSq.ui={});"undefined"==typeof templates.fourSq.ui.languageinput&&(templates.fourSq.ui.languageinput={});templates.fourSq.ui.languageinput.input=function(a,b){return'\x3cdiv class\x3d"languageInputContainer"\x3e\x3cselect id\x3d"languageInput" class\x3d"language" '+(a.showPlaceholder?'placeholder\x3d"Language"':"")+"\x3e\x3c/select\x3e\x3c/div\x3e"};"undefined"==typeof helpers.map&&(helpers.map={});helpers.map.attribution=function(a,b){return'\x3ca class\x3d"footerLink terms" href\x3d"https://www.mapbox.com/about/maps/" target\x3d"_blank"\x3e\u00a9 Mapbox \u00a9 OpenStreetMap\x3c/a\x3e\x3c!--\x3ca class\x3d"footerLink aboutOurMaps" href\x3d"https://foursquare.com/about/osm" target\x3d"_blank"\x3eAbout our maps\x3c/a\x3e--\x3e'};
helpers.map.attributionWithTermsAndPrivacy=function(a,b){return'\x3ca class\x3d"footerLink" href\x3d"/legal/privacy" target\x3d"_blank"\x3ePrivacy\x3c/a\x3e\x3ca class\x3d"footerLink" href\x3d"/legal/terms" target\x3d"_blank"\x3eTerms\x3c/a\x3e'+helpers.map.attribution(null)+' \x3ca class\x3d"footerLink mapbox-improve-map" href\x3d"" target\x3d"_blank"\x3eImprove this map\x3c/a\x3e'};
helpers.map.staticVenueMapImg=function(a,b){var c="",d=a.isFuzzed?13:15,e=a.isFuzzed?"":helpers.map.pinInfo(soy.$$augmentMap(a,{pinSize:"m",pinColor:"2398C9",pinIcon:"star"}));return c+='\x3cimg width\x3d"'+soy.$$escapeHtml(a.width)+'" height\x3d"'+soy.$$escapeHtml(a.height)+'" src\x3d"'+helpers.map.staticMapUrl(soy.$$augmentMap(a,{zoom:d,pinInfo:e}))+'" alt\x3d"Map of this venue\'s location" /\x3e'};
helpers.map.staticSimplifiedVenueMapImg=function(a,b){return helpers.map.staticVenueMapImg(soy.$$augmentMap(a,{mapId:"foursquare.map-3ntucprk"}))};helpers.map.staticCheckinTouchMapImg=function(a,b){var c;c=a.isFuzzed?13:15;return c=""+('\x3cdiv class\x3d"checkinMapContainer"\x3e\x3cimg class\x3d"checkinMap" width\x3d"'+soy.$$escapeHtml(a.width)+'" height\x3d"'+soy.$$escapeHtml(a.height)+'" src\x3d"'+helpers.map.staticMapUrl(soy.$$augmentMap(a,{zoom:c}))+'" alt\x3d"Map of this checkin\'s location" /\x3e\x3c/div\x3e')};
helpers.map.staticMapUrl=function(a,b){var c="",d=Math.round(1E5*a.lat)/1E5,e=Math.round(1E5*a.lng)/1E5,f=a.mapId?soy.$$escapeHtml(a.mapId):"foursquare.11ne79d5";return c+=helpers.map.baseUrl(null)+soy.$$escapeHtml(f)+(a.pinInfo?"/"+soy.$$escapeHtml(a.pinInfo):"")+"/"+soy.$$escapeHtml(e)+","+soy.$$escapeHtml(d)+","+soy.$$escapeHtml(a.zoom)+"/"+soy.$$escapeHtml(a.width)+"x"+soy.$$escapeHtml(a.height)+".png"};
helpers.map.pinInfo=function(a,b){var c="",d=Math.round(1E5*a.lat)/1E5,e=Math.round(1E5*a.lng)/1E5;return c+=a.customIcon?"url-"+soy.$$escapeUri(a.customIcon)+"("+soy.$$escapeHtml(e)+","+soy.$$escapeHtml(d)+")":"pin-"+soy.$$escapeHtml(a.pinSize)+(a.pinIcon?"-"+soy.$$escapeHtml(a.pinIcon):"")+"+"+soy.$$escapeHtml(a.pinColor)+"("+soy.$$escapeHtml(e)+","+soy.$$escapeHtml(d)+")"};helpers.map.baseUrl=function(a,b){return"https://a.tiles.mapbox.com/v3/"};helpers.map.mapViewLabel=function(a,b){return"Map"};
helpers.map.satelliteViewLabel=function(a,b){return"Satellite"};"undefined"==typeof helpers.photo&&(helpers.photo={});helpers.photo.orientationClass=function(a,b){return a.width==a.height?"square":a.width>a.height?"landscape":"portrait"};helpers.photo.img35x35=function(a,b){return helpers.photo.squareImage(soy.$$augmentMap(a,{size:35}))};helpers.photo.img50x50=function(a,b){return helpers.photo.squareImage(soy.$$augmentMap(a,{size:50}))};helpers.photo.img100x100=function(a,b){return helpers.photo.squareImage(soy.$$augmentMap(a,{size:100}))};
helpers.photo.img128x128=function(a,b){return helpers.photo.squareImage(soy.$$augmentMap(a,{size:128}))};helpers.photo.img300x300=function(a,b){return helpers.photo.squareImage(soy.$$augmentMap(a,{size:300}))};helpers.photo.img500x500=function(a,b){return helpers.photo.squareImage(soy.$$augmentMap(a,{size:500}))};helpers.photo.squareImage=function(a,b){return helpers.photo.rectangleImage(soy.$$augmentMap(a,{width:a.size,height:a.size}))};
helpers.photo.rectangleImage=function(a,b){var c="",d=helpers.photo.nearestBigger(soy.$$augmentMap(a,{targetWidth:a.width,targetHeight:a.height})),e=helpers.photo.nearestBigger(soy.$$augmentMap(a,{targetWidth:2*a.width,targetHeight:2*a.height}));return c+="\x3cimg "+(a.extraImgClass?'class\x3d"'+soy.$$escapeHtml(a.extraImgClass)+'"':"")+'src\x3d"'+soy.$$escapeHtml(d)+'" photo-id\x3d"'+soy.$$escapeHtml(a.id)+'" width\x3d"'+soy.$$escapeHtml(a.width)+'" height\x3d"'+soy.$$escapeHtml(a.height)+'" alt\x3d"'+
soy.$$escapeHtml(null!=a.altText?a.altText:"")+'" data-retina-url\x3d"'+soy.$$escapeHtml(e)+'" /\x3e'};helpers.photo.cappedImage=function(a,b){var c="",d=helpers.photo.nearestBigger(soy.$$augmentMap(a,{targetWidth:a.size,maintainRatio:!0}));return c+="\x3cimg "+(a.extraImgClass?'class\x3d"'+soy.$$escapeHtml(a.extraImgClass)+'" ':"")+'src\x3d"'+soy.$$escapeHtml(d)+'" photo-id\x3d"'+soy.$$escapeHtml(a.id)+'" alt\x3d"" /\x3e'};
helpers.photo.nearestBigger=function(a,b){return function(){var b="";if(a.prefix)if(a.maintainRatio)var d="width"==a.capDimension||"height"==a.capDimension?soy.$$escapeHtml(a.capDimension):"cap",b=b+(soy.$$escapeHtml(a.prefix)+soy.$$escapeHtml(d)+soy.$$escapeHtml(a.targetHeight?a.targetHeight:a.targetWidth)+(a.blur?"/blur"+soy.$$escapeHtml(a.blur):"")+soy.$$escapeHtml(a.suffix));else b+=soy.$$escapeHtml(a.prefix)+soy.$$escapeHtml(a.targetWidth)+"x"+soy.$$escapeHtml(a.targetHeight?a.targetHeight:a.targetWidth)+
(a.blur?"/blur"+soy.$$escapeHtml(a.blur):"")+soy.$$escapeHtml(a.suffix);else if(a.sizes&&a.sizes.items&&0<a.sizes.items.length)var d=_.sortBy(a.sizes.items,function(a){return a.width}),e=_.filter(d,function(b){return b.width>=a.targetWidth}),b=b+(0<e.length?soy.$$escapeHtml(e[0].url):soy.$$escapeHtml(d[d.length-1].url));else b+=soy.$$escapeHtml(null!=a.url?a.url:"");return b}()};
helpers.photo.nearestBiggerImage=function(a,b){var c="",d=helpers.photo.nearestBigger(a),e=helpers.photo.nearestBigger(soy.$$augmentMap(a,{blur:a.blur?2*a.blur:0,targetWidth:2*a.targetWidth,targetHeight:2*a.targetHeight}));return c+=d?'\x3cimg alt\x3d"'+soy.$$escapeHtml(null!=a.altText?a.altText:"")+'" '+(a.className?'class\x3d"photo"':"")+' src\x3d"'+soy.$$escapeHtml(d)+'" '+(e?'data-retina-url\x3d"'+soy.$$escapeHtml(e)+'"':"")+" /\x3e":""};
helpers.photo.nearestBiggerPhoto=function(a,b){return helpers.photo.nearestBigger(soy.$$augmentMap(a.photo,{targetWidth:a.targetWidth,targetHeight:a.targetHeight,capDimension:a.capDimension,maintainRatio:a.maintainRatio}))};helpers.photo.fullSizeHref=function(a,b){a=a||{};return a.prefix&&a.suffix?soy.$$escapeHtml(a.prefix)+"original"+soy.$$escapeHtml(a.suffix):soy.$$escapeHtml(null!=a.url?a.url:"")};
helpers.photo.href=function(a,b){a=a||{};return a.checkin?helpers.util.appendReferralId({url:a.checkin.canonicalPath,referralId:a.referralId}):a.tip?helpers.tip.href({id:a.tip.id,referralId:a.referralId}):"#"};helpers.photo.count=function(a,b){return 1==a.count?"1 photo":fourSq.i18n.formatNumber(a.count,"decimal",void 0,"")+" photos"};"undefined"==typeof helpers.pin&&(helpers.pin={});
helpers.pin.categoryPin=function(a,b){var c='\x3cdiv class\x3d"categoryPin"\x3e',d=(null==a.venue?0:null==a.venue.categories?0:a.venue.categories[0])?helpers.category.thumbnail(soy.$$augmentMap(a.venue.categories[0],{transparent:!0,desiredSize:32})):helpers.category.defaultIcon({transparent:!0,desiredSize:32}),e=(null==a.venue?0:null==a.venue.categories?0:a.venue.categories[0])?soy.$$escapeHtml(null==a.venue?null:null==a.venue.categories?null:a.venue.categories[0].name)+" icon":"Uncategorized icon",
f=a.orange?soy.$$escapeHtml("https://ss1.4sqi.net/img/pin-squircle-orange-c8dec82c2640f42b06c7008c5c8dfc3d.png"):soy.$$escapeHtml("https://ss1.4sqi.net/img/pin-squircle-blue-bd58a9a123ca8fb3a84f4ee889b6b781.png");return c+='\x3cimg alt\x3d"" class\x3d"pinBackground" src\x3d"'+soy.$$escapeHtml(f)+'" height\x3d"55" width\x3d"44" /\x3e\x3cimg alt\x3d"'+soy.$$escapeHtml(e)+'" class\x3d"categoryIcon" src\x3d"'+soy.$$escapeHtml(d)+'" height\x3d"32" width\x3d"32" /\x3e\x3c/div\x3e'};
helpers.pin.pinWhiteTransparent=function(a,b){return soy.$$escapeHtml("https://ss0.4sqi.net/img/pin-white-transparent-212f0e4d45954fd42b85ca619365e0a8.png")};
helpers.pin.pinBigCategory=function(a,b){var c='\x3cdiv class\x3d"'+(a.venue.specials&&0<a.venue.specials.count?"bigOrangeMapPin":"bigBlueMapPin")+'"\x3e';if(a.venue.categories&&a.venue.categories[0])var d=helpers.category.thumbnail(soy.$$augmentMap(a.venue.categories[0],{transparent:!0,desiredSize:44})),c=c+('\x3cimg alt\x3d"'+soy.$$escapeHtml(a.venue.categories[0].name)+'" src\x3d"'+soy.$$escapeHtml(d)+'"/\x3e');return c+"\x3c/div\x3e"};"undefined"==typeof helpers.photoupload&&(helpers.photoupload={});helpers.photoupload.photoUploadControl=function(a,b){return helpers.photoupload.genericPhotoUploadControl_(a)};
helpers.photoupload.genericPhotoUploadControl_=function(a,b){return'\x3cform class\x3d"photoUploadForm" action\x3d"'+soy.$$escapeHtml(a.action)+'" method\x3d"POST" encoding\x3d"multipart/form-data" enctype\x3d"multipart/form-data"\x3e\x3cdiv'+(a.addButtonHolderClass?' class\x3d"'+soy.$$escapeHtml(a.addButtonHolderClass)+'"':"")+' title\x3d\'Add a photo\'\x3e\x3cdiv class\x3d"icon"\x3e\x3c/div\x3e\x3cinput type\x3d"file" name\x3d"'+soy.$$escapeHtml(a.inputName)+'" accept\x3d"image/jpeg,image/gif,image/png" /\x3e'+
(a.text?'\x3cspan class\x3d"text"\x3e'+soy.$$escapeHtml(a.text)+"\x3c/span\x3e":"")+(a.additionalHiddenInputName&&a.additionalHiddenInputValue?'\x3cinput type\x3d"hidden" name\x3d"'+soy.$$escapeHtml(a.additionalHiddenInputName)+'" value\x3d"'+soy.$$escapeHtml(a.additionalHiddenInputValue)+'" /\x3e':"")+"\x3c/div\x3e\x3c/form\x3e"};
helpers.photoupload.photoMultiUploadControl=function(a,b){for(var c='\x3cform class\x3d"photoUploadForm" action\x3d"'+soy.$$escapeHtml(a.action)+'" method\x3d"POST" encoding\x3d"multipart/form-data" enctype\x3d"multipart/form-data"\x3e\x3cdiv class\x3d"'+soy.$$escapeHtml(a.addButtonHolderClass)+'" title\x3d\'Add a photo\'\x3e\x3cdiv class\x3d"icon"\x3e\x3c/div\x3e',d=a.count,e=0;e<d;e++)c+='\x3cspan\x3e\x3cinput type\x3d"file" name\x3d"'+soy.$$escapeHtml(a.inputName)+"["+soy.$$escapeHtml(e)+']"'+
(0!=e?' disabled\x3d"disabled" style\x3d"display: none;"':"")+"/\x3e\x3c/span\x3e";return c+=(a.text?'\x3cspan class\x3d"text"\x3e'+soy.$$escapeHtml(a.text)+"\x3c/span\x3e":"")+"\x3c/div\x3e\x3c/form\x3e"};helpers.photoupload.uploadPhotoFailed=function(a,b){return"There was a problem uploading the photo. Please try again later."};helpers.photoupload.attachedPhotoPlaceholder=function(a,b){return'\x3cdiv class\x3d"attachmentRow"\x3e\x3cdiv class\x3d"photoPlaceholder"\x3ePhoto loaded\x3c/div\x3e\x3c/div\x3e'};
helpers.photoupload.attachedPhoto=function(a,b){return'\x3cdiv class\x3d"attachmentRow"\x3e\x3cdiv class\x3d"photoAttachmentContainer"\x3e\x3cdiv class\x3d"photoAttachmentClip"\x3e\x3cimg class\x3d"photoAttachmentPreview" /\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'};helpers.photoupload.removeAttachmentButton=function(a,b){return'\x3ca href\x3d"#" class\x3d"removeAttachment delete"\x3eRemove\x3c/a\x3e'};helpers.photoupload.defaultUploadButtonLabel=function(a,b){return"Attach a photo"};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.helpers&&(templates.fourSq.helpers={});"undefined"==typeof templates.fourSq.helpers.share&&(templates.fourSq.helpers.share={});templates.fourSq.helpers.share.initTwitterShareButton=function(a,b){return'\n    \x3cscript\x3e\n      !function(d,s,id){\n        var js,fjs\x3dd.getElementsByTagName(s)[0];\n        if (!d.getElementById(id)) {\n          js\x3dd.createElement(s);\n          js.id\x3did;\n          js.src\x3d"//platform.twitter.com/widgets.js";\n          fjs.parentNode.insertBefore(js,fjs);\n        }\n      }(document,"script","twitter-wjs");\n    \x3c/script\x3e\n  '};
templates.fourSq.helpers.share.initFBLikeButton=function(a,b){return'\x3cdiv id\x3d"fb-root"\x3e\x3c/div\x3e\x3cscript\x3efourSq.facebook.getFacebookApi(fourSq.emptyFunction);\x3c/script\x3e'};templates.fourSq.helpers.share.tweetButton=function(a,b){return'\x3ca href\x3d"https://twitter.com/share" class\x3d"twitter-share-button" data-url\x3d"'+soy.$$escapeHtml(a.url)+'" data-text\x3d"'+soy.$$escapeHtml(a.text)+'" data-counturl\x3d"'+soy.$$escapeHtml(null!=a.counturl?a.counturl:a.url)+'"\x3eTweet\x3c/a\x3e'};
templates.fourSq.helpers.share.fbLikeButton=function(a,b){return'\x3cdiv class\x3d"fb-like" data-href\x3d"'+soy.$$escapeHtml(a.url)+'" data-send\x3d"false" data-layout\x3d"button_count" data-width\x3d"'+soy.$$escapeHtml(null!=a.width?a.width:450)+'" data-show-faces\x3d"true"\x3e\x3c/div\x3e'};
templates.fourSq.helpers.share.doubleShareButton=function(a,b){return'\x3cdiv class\x3d"doubleShareButton" title\x3d"Share this place with friends!"\x3e\x3cspan class\x3d"buttonLeft"\x3e\x3cimg src\x3d"'+soy.$$escapeHtml(fourSq.retina.isRetina()?"https://ss1.4sqi.net/img/lists/button_icon_saveribbon@2x-d809e5af932a66d1725c40dfddcc2855.png":"https://ss0.4sqi.net/img/lists/button_icon_saveribbon-9c5999c47028ca670954422ee53e7d96.png")+'" height\x3d"16" width\x3d"16" data-retina-url\x3d"'+soy.$$escapeHtml("https://ss1.4sqi.net/img/lists/button_icon_saveribbon@2x-d809e5af932a66d1725c40dfddcc2855.png")+
'" /\x3e\x3c/span\x3e\x3cspan class\x3d"buttonRight"\x3e\x3cspan class\x3d"label"\x3eShare\x3c/span\x3e\x3c/span\x3e\x3c/div\x3e'};"undefined"==typeof helpers.special&&(helpers.special={});helpers.special.nameWithLink=function(a,b){return a.special.canonicalPath?'\x3ca href\x3d"'+soy.$$escapeHtml(a.special.canonicalPath)+'"\x3e'+soy.$$escapeHtml(a.special.title)+"\x3c/a\x3e":'\x3ca href\x3d"/special/'+soy.$$escapeHtml(a.special.id)+'"\x3e'+soy.$$escapeHtml(a.special.title)+"\x3c/a\x3e"};
helpers.special.details=function(a,b){return a.special.text&&"load-to-card"!=a.special.redemption?soy.$$escapeHtml(a.special.text):a.special.message?soy.$$escapeHtml(a.special.message):""};
helpers.special.iconUrl=function(a,b){var c="";switch(a.icon){case "default":c+=soy.$$escapeHtml("https://ss0.4sqi.net/img/specials/default-3a21958f7b88f32bc48378b3534c9a0b.png");break;case "newbie":c+=soy.$$escapeHtml("https://ss0.4sqi.net/img/specials/newbie-6a48af8e03d46ad488b795237af2f344.png");break;case "check-in":c+=soy.$$escapeHtml("https://ss1.4sqi.net/img/specials/check-in-f870bc36c0cc2a842fac06c35a6dccdf.png");break;case "frequency":c+=soy.$$escapeHtml("https://ss1.4sqi.net/img/specials/frequency-35f4e372d6f61449d3c4b8d1ca6b8abd.png");
break;case "friends":c+=soy.$$escapeHtml("https://ss0.4sqi.net/img/specials/friends-3ccf29d65f7fd9736b1ab26a6c1f9b4a.png");break;case "swarm":c+=soy.$$escapeHtml("https://ss1.4sqi.net/img/specials/swarm-41bd784f5c959d2dba307abcc9146ecb.png");break;case "flash":c+=soy.$$escapeHtml("https://ss0.4sqi.net/img/specials/flash-b594489f778e71c1d062b2f7b44e6edc.png");break;case "card":c+=soy.$$escapeHtml("https://ss0.4sqi.net/img/specials/card-a2acaceba91b89cae3c5e0ec2be72e06.png")}return c};"undefined"==typeof helpers.tip&&(helpers.tip={});helpers.tip.textWithReadMoreLink=function(a,b){return helpers.entities.renderEntitiesViaTags({input:a.tip,dataSource:"tip-text",asLinks:!0})+(a.tip.url?" "+helpers.tip.readMoreLink(a.tip):"")};
helpers.tip.tipAuthorInteraction=function(a,b){var c="",d="";switch(a.tipAuthorInteraction){case "liked":d+=helpers.tip.miniLikeUrl(null);break;case "meh":d+=helpers.tip.miniMehUrl(null);break;case "disliked":d+=helpers.tip.miniDislikeUrl(null)}return c+='\x3cimg src\x3d"'+soy.$$escapeHtml(d)+'" class\x3d"tipAuthorInteractionIcon"/\x3e'};helpers.tip.miniLikeUrl=function(a,b){return soy.$$escapeHtml("https://ss0.4sqi.net/img/tip_like-15304d96d5c973561bbdb225059e89f0.png")};
helpers.tip.miniMehUrl=function(a,b){return soy.$$escapeHtml("https://ss0.4sqi.net/img/tip_itsokay-ea5aeee1c3b25eb18518689f5ff25978.png")};helpers.tip.miniDislikeUrl=function(a,b){return soy.$$escapeHtml("https://ss1.4sqi.net/img/tip_dislike-a2d41f2e532acd98baf168107511a4da.png")};helpers.tip.tipAuthorJustification=function(a,b){var c="";if(a.tip.justification)switch(a.tip.justification.justificationType){case "visits":c+=soy.$$escapeHtml(a.tip.justification.message)}return c};
helpers.tip.href=function(a,b){return helpers.util.appendReferralId({referralId:a.referralId,url:"/item/"+soy.$$escapeHtml(a.id)})};helpers.tip.likes=function(a,b){return 0<a.count?'\x3cspan class\x3d"likesContainer"\x3e\x3cdiv class\x3d"icon"\x3e\x3c/div\x3e\x3cspan class\x3d"count"\x3e'+(1==a.count?"1 Like":soy.$$escapeHtml(a.count)+" Likes")+"\x3c/span\x3e\x3c/span\x3e":""};
helpers.tip.count=function(a,b){return a.capitalize?0==a.count?"No tips yet \u2013 be the first to leave one!":1==a.count?"1 Tip":fourSq.i18n.formatNumber(a.count,"decimal",void 0,"")+" Tips":0==a.count?"No tips yet \u2013 be the first to leave one!":1==a.count?"1 tip":fourSq.i18n.formatNumber(a.count,"decimal",void 0,"")+" tips and reviews"};
helpers.tip.readMoreLink=function(a,b){a=a||{};return a.url?'\x3ca href\x3d"'+soy.$$escapeHtml(a.url)+'" rel\x3d"nofollow" target\x3d"_blank"'+helpers.util.makeOutgoingLink({urlSig:a.urlSig,dataSource:"tip-read-more"})+"\x3eRead more\x3c/a\x3e":""};
helpers.tip.nonBreakingReadMoreLink=function(a,b){a=a||{};return a.url?'\x3ca href\x3d"'+soy.$$escapeHtml(a.url)+'" rel\x3d"nofollow" target\x3d"_blank"'+helpers.util.makeOutgoingLink({urlSig:a.urlSig,dataSource:"tip-read-more"})+"\x3eRead\x26nbsp;more\x3c/a\x3e":""};helpers.tip.imageUploadFailedMessage=function(a,b){return"Tip created, but could not add your photo."};helpers.tip.deleteConfirmMsg=function(a,b){return"This will delete this tip forever... from your lists and everyone else's lists! Are you sure?"};
helpers.tip.tipCreationSuccess=function(a,b){return"Thanks for the tip!"};helpers.tip.tipCreationFailure=function(a,b){return"Whoops, something went wrong. Please try again!"};"undefined"==typeof helpers.user&&(helpers.user={});helpers.user.fullName=function(a,b){return soy.$$escapeHtml(a.firstName)+(a.lastName?" "+soy.$$escapeHtml(a.lastName):"")};
helpers.user.fullNameWithPrivacy=function(a,b){return soy.$$escapeHtml(a.user.firstName)+(a.relationship&&"self"==a.relationship&&a.user.lastName?" "+soy.$$escapeHtml(a.user.lastName):a.relationship&&"friend"==a.relationship&&a.user.lastName?" "+soy.$$escapeHtml(a.user.lastName):a.user.lastName?" "+soy.$$truncate(soy.$$escapeHtml(a.user.lastName),1,!1)+".":"")};
helpers.user.fullNameLinkWithPrivacy=function(a,b){return'\x3ca href\x3d"'+helpers.user.href(soy.$$augmentMap(a.user,{referralId:a.referralId}))+'"'+(a.target?' target\x3d"'+soy.$$escapeHtml(a.target)+'"':"")+"\x3e"+helpers.user.fullNameWithPrivacy(a)+"\x3c/a\x3e"};helpers.user.fullNameWLink=function(a,b){return'\x3ca href\x3d"'+helpers.user.href(a)+'" '+(a.target?'target\x3d"'+soy.$$escapeHtml(a.target)+'"':"")+"\x3e"+helpers.user.fullName(a)+"\x3c/a\x3e"};
helpers.user.shortName=function(a,b){a=a||{};return a.firstName?soy.$$escapeHtml(a.firstName)+(a.lastName?" "+soy.$$truncate(soy.$$escapeHtml(a.lastName),1,!1)+".":""):""};helpers.user.shortNameWLink=function(a,b){return'\x3ca href\x3d"'+helpers.user.href(a)+'"'+(a.target?' target\x3d"'+soy.$$escapeHtml(a.target)+'"':"")+"\x3e"+helpers.user.shortName(a)+"\x3c/a\x3e"};
helpers.user.firstNameWLink=function(a,b){return a.firstName?'\x3ca href\x3d"'+helpers.user.href(a)+'"\x3e'+soy.$$escapeHtml(a.firstName)+"\x3c/a\x3e":""};helpers.user.twitterUrl=function(a,b){return"http://twitter.com/"+soy.$$escapeHtml(a.twitter)};helpers.user.facebookUrl=function(a,b){return a.facebookLink?soy.$$escapeHtml(a.facebookLink):"http://www.facebook.com/profile.php?id\x3d"+soy.$$escapeHtml(a.facebook)};
helpers.user.badgesUrl=function(a,b){return helpers.util.appendReferralId({url:"/user/"+soy.$$escapeHtml(a.id)+"/badges",referralId:a.referralId})};helpers.user.imageWLink=function(a,b){return"\x3ca "+(a.isAnonymous?"":' href\x3d"'+helpers.user.href(a)+'" ')+" "+(a.linkClass?'class\x3d"'+soy.$$escapeHtml(a.linkClass)+'"':"")+(a.target?'target\x3d"'+soy.$$escapeHtml(a.target)+'"':"")+"\x3e"+helpers.user.image(a)+"\x3c/a\x3e"};
helpers.user.xlargeImageWLink=function(a,b){a=a||{};return helpers.user.imageWLink(soy.$$augmentMap(a,{size:128,target:a.target}))};helpers.user.largeImageWLink=function(a,b){a=a||{};return helpers.user.imageWLink(soy.$$augmentMap(a,{size:96,target:a.target}))};helpers.user.mediumImageWLink=function(a,b){a=a||{};return helpers.user.imageWLink(soy.$$augmentMap(a,{size:64,target:a.target}))};
helpers.user.smallImageWLink=function(a,b){a=a||{};return helpers.user.imageWLink(soy.$$augmentMap(a,{size:48,target:a.target}))};helpers.user.xsmallImageWLink=function(a,b){a=a||{};return helpers.user.imageWLink(soy.$$augmentMap(a,{size:32,target:a.target}))};helpers.user.microImageWLink=function(a,b){a=a||{};return helpers.user.imageWLink(soy.$$augmentMap(a,{size:16,target:a.target}))};
helpers.user.microFacepileImageWLink=function(a,b){a=a||{};return helpers.user.imageWLink(soy.$$augmentMap(a,{size:15,target:a.target}))};helpers.user.imageHref=function(a,b){return a.photo?a.photo.prefix?soy.$$escapeHtml(a.photo.prefix)+(a.size?soy.$$escapeHtml(a.size)+"x"+soy.$$escapeHtml(a.size):"original")+soy.$$escapeHtml(a.photo.suffix):soy.$$escapeHtml(a.photo):"female"==a.gender?helpers.user.blankGirlUrl(null):helpers.user.blankBoyUrl(null)};
helpers.user.image=function(a,b){var c="",d=helpers.user.imageHref(a),e=a.size?helpers.user.imageHref(soy.$$augmentMap(a,{size:2*a.size})):"",f=a.title?soy.$$escapeHtml(a.title):a.alt?soy.$$escapeHtml(a.alt):"",g=-1!=d.indexOf("blank_boy")||-1!=d.indexOf("blank_girl");return c+=g&&a.useColoredSquircleIfBlank?'\x3cdiv class\x3d"avatar blankAvatar '+helpers.user.squircleBackgroundColor_({key:a.id})+'"\x3e'+soy.$$escapeHtml(fourSq.util.safeSubstring(a.firstName,0,1))+"\x3c/div\x3e":'\x3cimg src\x3d"'+
soy.$$escapeHtml(d)+'" alt\x3d"'+(a.alt?soy.$$escapeHtml(a.alt):helpers.user.shortName(a))+'" class\x3d"avatar '+(g?"blankAvatar ":"")+(a.extraImgClass?soy.$$escapeHtml(a.extraImgClass):"")+'"'+(a.size?'width\x3d"'+soy.$$escapeHtml(a.size)+'" height\x3d"'+soy.$$escapeHtml(a.size)+'"':"")+'title\x3d"'+(f?soy.$$escapeHtml(f):helpers.user.shortName(a))+'"'+(a.size?'data-retina-url\x3d"'+soy.$$escapeHtml(e)+'"':"")+" /\x3e"};
helpers.user.xlargeImage=function(a,b){return helpers.user.image(soy.$$augmentMap(a,{size:128}))};helpers.user.largeImage=function(a,b){return helpers.user.image(soy.$$augmentMap(a,{size:96}))};helpers.user.mediumImage=function(a,b){return helpers.user.image(soy.$$augmentMap(a,{size:64}))};helpers.user.smallImage=function(a,b){return helpers.user.image(soy.$$augmentMap(a,{size:48}))};helpers.user.xsmallImage=function(a,b){return helpers.user.image(soy.$$augmentMap(a,{size:32}))};
helpers.user.listOfListsUrl=function(a,b){a=a||{};return helpers.user.href({canonicalPath:a.canonicalPath,id:a.id,referralId:a.referralId,appendedPath:"/lists"})};helpers.user.todoListUrl=function(a,b){a=a||{};return helpers.user.href({canonicalPath:a.canonicalPath,id:a.id,referralId:a.referralId,appendedPath:"/list/todos"})};helpers.user.listUrl=function(a,b){return helpers.user.href({canonicalPath:a.canonicalPath,id:a.id,referralId:a.referralId,appendedPath:"/list/"+soy.$$escapeHtml(a.listId)})};
helpers.user.tipsUrl=function(a,b){a=a||{};return helpers.user.href({canonicalPath:a.canonicalPath,id:a.id,appendedPath:"/list/tips"})};helpers.user.href=function(a,b){a=a||{};return a.canonicalPath||a.id?helpers.util.appendReferralId({referralId:a.referralId,url:(a.canonicalPath?soy.$$escapeHtml(a.canonicalPath):"/user/"+soy.$$escapeHtml(a.id))+(a.appendedPath?soy.$$escapeHtml(a.appendedPath):"")}):"#"};helpers.user.blankBoyUrl=function(a,b){return soy.$$escapeHtml("https://ss0.4sqi.net/img/blank_boy-82b50670208ac7994bba547c50a6ad80.png")};
helpers.user.blankGirlUrl=function(a,b){return soy.$$escapeHtml("https://ss1.4sqi.net/img/blank_girl-c6391179bc30cb15f727f5b8396e89c7.png")};
helpers.user.superuser=function(a,b){a=a||{};return null!=a.superuser&&0<a.superuser?(a.dontShowSupportLink?"":'\x3cspan class\x3d"suLevelIcon"\x3e\x3ca href\x3d"http://support.foursquare.com/entries/422534-what-is-a-superuser-how-do-i-become-a-superuser" title\x3d"What is a Superuser?"\x3e?\x3c/a\x3e')+"Superuser Level "+soy.$$escapeHtml(a.superuser)+"\x3c/span\x3e":""};
helpers.user.translator=function(a,b){a=a||{};return a.translator?'\x3cspan class\x3d"translator1"\x3e\x3ca href\x3d"http://translate.foursquare.com" title\x3d"Want to help improve foursquare in your language?"\x3e?\x3c/a\x3e\x3cstrong\x3eTranslator\x3c/strong\x3e\x3c/span\x3e':""};
helpers.user.campusAmbassador=function(a,b){a=a||{};return a.campusAmbassador?'\x3cspan class\x3d"ambassador1"\x3e\x3ca href\x3d"http://www.foursquare.com/universities" title\x3d"What is a campus ambassador?"\x3e?\x3c/a\x3e\x3cstrong\x3eCampus Ambassador\x3c/strong\x3e\x3c/span\x3e':""};helpers.user.friendAcceptedMessage=function(a,b){a=a||{};return a.firstName?"Great! "+soy.$$escapeHtml(a.firstName)+" is now your friend.":"Friend request accepted!"};
helpers.user.friendRequestedMessage=function(a,b){return"Your friend request is on its way."};helpers.user.friendRequestedTitle=function(a,b){return"Friend request sent"};helpers.user.addFriendButton=function(a,b){return'\x3cdiv class\x3d"buttonContainer"\x3e\x3cdiv class\x3d"greenButton addButton"\x3eAdd\x3c/div\x3e\x3cdiv class\x3d"greyButton invitedButton"\x3eAsked\x3c/div\x3e\x3cdiv class\x3d"orangeButton unfriendButton"\x3eCancel\x3c/div\x3e\x3c/div\x3e'};
helpers.user.touchAddFriendButton=function(a,b){return'\x3cdiv class\x3d"buttonContainer"\x3e\x3cdiv class\x3d"greenButton addButton"\x3eAdd as friend\x3c/div\x3e\x3cdiv class\x3d"orangeButton unfriendButton"\x3eCancel friend request\x3c/div\x3e\x3c/div\x3e'};helpers.user.followers=function(a,b){return a.user.followers?0==a.user.followers.count?"No followers":1==a.user.followers.count?"1 follower":soy.$$escapeHtml(a.user.followers.count)+" followers":""};
helpers.user.smallHexatar=function(a,b){var c="",d=soy.$$escapeHtml(null!=a.extraHexClass?a.extraHexClass:"")+" small";return c+=helpers.user.hexatar(soy.$$augmentMap(a,{size:48,badgeSize:0,userPhoto:a.photo,extraHexClass:d}))};helpers.user.mediumHexatar=function(a,b){var c="",d=soy.$$escapeHtml(null!=a.extraHexClass?a.extraHexClass:"")+" medium";return c+=helpers.user.hexatar(soy.$$augmentMap(a,{size:64,badgeSize:30,userPhoto:a.photo,extraHexClass:d}))};
helpers.user.largeHexatar=function(a,b){var c="",d=soy.$$escapeHtml(null!=a.extraHexClass?a.extraHexClass:"")+" large";return c+=helpers.user.hexatar(soy.$$augmentMap(a,{size:128,badgeSize:60,userPhoto:a.photo,extraHexClass:d}))};
helpers.user.hexatar=function(a,b){for(var c='\x3cdiv class\x3d"hexatar'+(a.extraHexClass?" "+soy.$$escapeHtml(a.extraHexClass):"")+'"\x3e\x3cdiv class\x3d"face"\x3e\x3cdiv class\x3d"faceImage"\x3e'+helpers.user.image(soy.$$augmentMap(a,{photo:a.userPhoto}))+"\x3c/div\x3e",d=null!=(null==a.sticker?null:a.sticker.effects)?null==a.sticker?null:a.sticker.effects:[],e=d.length,f=0;f<e;f++){var g=d[f];"supersize"==g.type&&(c+='\x3cdiv class\x3d"superSticker"\x3e',g=helpers.image.nearestBigger(soy.$$augmentMap(g.detail,
{desiredSize:a.size})),c+='\x3cimg src\x3d"'+soy.$$escapeHtml(g)+'" height\x3d"'+soy.$$escapeHtml(a.size)+'" width\x3d"'+soy.$$escapeHtml(a.size)+'" /\x3e\x3c/div\x3e')}return c+='\x3c/div\x3e\x3cdiv class\x3d"mask"\x3e'+helpers.user.hexatarCoverImg(a)+"\x3c/div\x3e"+(0<a.badgeSize&&(null==a.sticker?0:a.sticker.image)?helpers.user.stickerImg({sticker:a.sticker,size:a.badgeSize}):"")+"\x3c/div\x3e"};
helpers.user.stickerImg=function(a,b){var c='\x3cdiv class\x3d"sticker'+(a.additionalStickerClass?" "+soy.$$escapeHtml(a.additionalStickerClass):"")+'"\x3e',d=helpers.image.nearestBigger(soy.$$augmentMap(a.sticker.image,{desiredSize:a.size})),e=helpers.image.nearestBigger(soy.$$augmentMap(a.sticker.image,{desiredSize:2*a.size}));return c+='\x3cimg src\x3d"'+soy.$$escapeHtml(d)+'" data-retina-url\x3d"'+soy.$$escapeHtml(e)+'" height\x3d"'+soy.$$escapeHtml(a.size)+'" width\x3d"'+soy.$$escapeHtml(a.size)+
'"'+(a.sticker.name?'alt\x3d"'+soy.$$escapeHtml(a.sticker.name)+'"':"")+"/\x3e\x3c/div\x3e"};helpers.user.hexatarCoverImg=function(a,b){var c;return c=""+('\x3cimg src\x3d"'+soy.$$escapeHtml(a.orange?"https://ss0.4sqi.net/img/swarm/hexatar-cutout-orange-28bec99ab768098a6fde987f4985df36.png":"https://ss1.4sqi.net/img/swarm/hexatar-cutout-6ba9b4e760d2e1f5c013ba75716662f8.png")+'" height\x3d"'+soy.$$escapeHtml(a.size)+'" width\x3d"'+soy.$$escapeHtml(a.size)+'" /\x3e')};
helpers.user.squircleBackgroundColor_=function(a,b){var c="";switch(fourSq.util.safeSubstring(a.key,fourSq.util.size(a.key)-1,fourSq.util.size(a.key))){case "0":case "6":c+="fsBatmanTeal";break;case "1":case "7":c+="fsBatmanGreen";break;case "2":case "8":c+="fsBatmanYellow";break;case "3":case "9":c+="fsBatmanOrange";break;case "4":c+="fsBatmanRed";break;case "5":c+="fsBatmanViolet";break;default:c+="fsBatmanRed"}return c};
helpers.user.userProfileMoreInfo=function(a,b){return'\x3cdiv class\x3d"userProfileMoreInfoContainer"\x3e'+helpers.user.userFlaggingInfo(a)+helpers.user.userStats(a)+"\x3c/div\x3e"};
helpers.user.userFlaggingInfo=function(a,b){var c;c=a.user.flaggingMetadata.isPartner;var d=a.user.flaggingMetadata.isEmployee,e=a.user.flaggingMetadata.isPrivilegedAccount,f=a.user.flaggingMetadata.venuesManaged&&0<a.user.flaggingMetadata.venuesManaged;return c=""+((a.user.flaggingMetadata.joined?'\x3cp class\x3d"userContactArea"\x3e\x3cspan class\x3d"userTitle"\x3eJoined '+soy.$$escapeHtml(a.user.flaggingMetadata.joined)+"\x3c/span\x3e\x3c/p\x3e":"")+(c||f||d||e?'\x3cp class\x3d"specialUser"\x3e'+
(c?"Foursquare Partner":"")+(d?(c?" \x26middot; ":"")+"Foursquare Employee":"")+(e?(c||d?" \x26middot; ":"")+"Privileged Account":"")+(f?(c||d||e?" \x26middot; ":"")+"Venue Manager":"")+"\x3c/p\x3e":"")+helpers.user.userBans(a))};
helpers.user.userBans=function(a,b){var c='\x3cp class\x3d"userBans"\x3e';if(a.user.flaggingMetadata.disabledFromLogin)c+="Login Disabled";else if(a.user.flaggingMetadata.bannedOrDemotedFrom&&0<fourSq.util.size(a.user.flaggingMetadata.bannedOrDemotedFrom))for(var c=c+"Banned from ",d=a.user.flaggingMetadata.bannedOrDemotedFrom,e=d.length,f=0;f<e;f++)c+=helpers.user.textForBannedCapability({capability:d[f]})+(f!=e-1?", ":"");return c+"\x3c/p\x3e"};
helpers.user.textForBannedCapability=function(a,b){var c="";switch(a.capability){case "tips":c+="tips";break;case "venues":c+="venue edits";break;case "photos":c+="photos";break;case "tipLists":c+="lists";break;case "comments":c+="comments";break;case "friends":c+="friend requests";break;case "likes":c+="likes";break;case "subjective votes":c+="ratings";break;case "checkins":c+="check-ins";break;case "tags":c+="venue tags";break;case "earning badges":c+="stickers";break;case "specials":c+="specials"}return c};
helpers.user.userStats=function(a,b){return'\x3cdiv class\x3d"statsContainer"\x3e\x3cdiv class\x3d"statsBlock"\x3e\x3cdiv class\x3d"stat" title\x3d"Number of check-ins by this user"\x3e\x3cdiv\x3eCheck-ins\x3c/div\x3e\x3cdiv class\x3d"userStat"\x3e'+fourSq.i18n.formatNumber(a.user.flaggingMetadata.checkins,"decimal",void 0,"")+'\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"stat" title\x3d"Number of friends this user has"\x3e\x3cdiv\x3eFriends\x3c/div\x3e\x3cdiv class\x3d"userStat"\x3e'+fourSq.i18n.formatNumber(a.user.flaggingMetadata.friends,
"decimal",void 0,"")+'\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"stat" title\x3d"Number of friend requests this user has made to strangers that have been ignored"\x3e\x3cdiv\x3eIgnored Requests\x3c/div\x3e\x3cdiv class\x3d"userStat"\x3e'+fourSq.i18n.formatNumber(a.user.flaggingMetadata.ignoredFriendRequestsSentToStrangers,"decimal",void 0,"")+'\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"statsBlock"\x3e\x3cdiv class\x3d"stat" title\x3d"Number of followers this user has"\x3e\x3cdiv\x3eFollowers\x3c/div\x3e\x3cdiv class\x3d"userStat"\x3e'+
fourSq.i18n.formatNumber(a.user.flaggingMetadata.followers,"decimal",void 0,"")+'\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"stat" title\x3d"Number of tips by this user"\x3e\x3cdiv\x3eTips\x3c/div\x3e\x3cdiv class\x3d"userStat"\x3e'+fourSq.i18n.formatNumber(a.user.flaggingMetadata.tips,"decimal",void 0,"")+'\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"stat" title\x3d"Number of tips by this user that have been flagged by others"\x3e\x3cdiv\x3eFlagged Tips\x3c/div\x3e\x3cdiv class\x3d"userStat"\x3e'+fourSq.i18n.formatNumber(a.user.flaggingMetadata.tipsFlagged,
"decimal",void 0,"")+'\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"statsBlock"\x3e\x3cdiv class\x3d"stat" title\x3d"Number of lists created by this user"\x3e\x3cdiv\x3eLists Created\x3c/div\x3e\x3cdiv class\x3d"userStat"\x3e'+fourSq.i18n.formatNumber(a.user.flaggingMetadata.listsCreated,"decimal",void 0,"")+'\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"stat" title\x3d"Number of photos by this user"\x3e\x3cdiv\x3ePhotos\x3c/div\x3e\x3cdiv class\x3d"userStat"\x3e'+fourSq.i18n.formatNumber(a.user.flaggingMetadata.photos,
"decimal",void 0,"")+'\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"stat" title\x3d"Number of photos by this user that have been flagged by others"\x3e\x3cdiv\x3eFlagged Photos\x3c/div\x3e\x3cdiv class\x3d"userStat"\x3e'+fourSq.i18n.formatNumber(a.user.flaggingMetadata.photosFlagged,"decimal",void 0,"")+'\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"statsBlock"\x3e\x3cdiv class\x3d"stat" title\x3d"Number of photos by this user that have been banned by Foursquare administrators"\x3e\x3cdiv\x3eBanned Photos\x3c/div\x3e\x3cdiv class\x3d"userStat"\x3e'+
fourSq.i18n.formatNumber(a.user.flaggingMetadata.photosBanned,"decimal",void 0,"")+'\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"stat" title\x3d"Number of venue edits by this user"\x3e\x3cdiv\x3eEdits\x3c/div\x3e\x3cdiv class\x3d"userStat"\x3e'+fourSq.i18n.formatNumber(a.user.flaggingMetadata.edits,"decimal",void 0,"")+'\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"stat" title\x3d"Number of venue edits suggested or approved by this user that have been rejected by others"\x3e\x3cdiv\x3eRejected Edits\x3c/div\x3e\x3cdiv class\x3d"userStat"\x3e'+
fourSq.i18n.formatNumber(a.user.flaggingMetadata.incorrectEdits,"decimal",void 0,"")+'\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"statsBlock"\x3e\x3cdiv class\x3d"stat" title\x3d"Number of venue edits suggested or approved by this user that have been rolled back after being accepted"\x3e\x3cdiv\x3eRolled Back Edits\x3c/div\x3e\x3cdiv class\x3d"userStat"\x3e'+fourSq.i18n.formatNumber(a.user.flaggingMetadata.rolledBackEdits,"decimal",void 0,"")+'\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"stat" title\x3d"Number of venues rated by this user"\x3e\x3cdiv\x3eVenues Rated\x3c/div\x3e\x3cdiv class\x3d"userStat"\x3e'+
fourSq.i18n.formatNumber(a.user.flaggingMetadata.venuesRated,"decimal",void 0,"")+'\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"stat" title\x3d"Number of venues managed by this user"\x3e\x3cdiv\x3eVenues Managed\x3c/div\x3e\x3cdiv class\x3d"userStat"\x3e'+fourSq.i18n.formatNumber(a.user.flaggingMetadata.venuesManaged,"decimal",void 0,"")+"\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e"};"undefined"==typeof helpers.util&&(helpers.util={});helpers.util.pinSpinner=function(a,b){return'\x3cdiv class\x3d"pinSpinner"\x3e\x3cdiv class\x3d"bg"\x3e\x26nbsp;\x3c/div\x3e\x3cdiv class\x3d"bg"\x3e\x26nbsp;\x3c/div\x3e\x3cdiv class\x3d"bg"\x3e\x26nbsp;\x3c/div\x3e\x3cdiv class\x3d"bg"\x3e\x26nbsp;\x3c/div\x3e\x3cdiv class\x3d"bg"\x3e\x26nbsp;\x3c/div\x3e\x3cdiv class\x3d"bg"\x3e\x26nbsp;\x3c/div\x3e\x3cdiv class\x3d"bg"\x3e\x26nbsp;\x3c/div\x3e\x3cdiv class\x3d"bg"\x3e\x26nbsp;\x3c/div\x3e\x3cdiv class\x3d"pin fill"\x3e\x26nbsp;\x3c/div\x3e\x3cdiv class\x3d"pin"\x3e\x26nbsp;\x3c/div\x3e\x3c/div\x3e'};
helpers.util.checkboxState=function(a,b){return a.enabled?'\x3cimg src\x3d"'+soy.$$escapeHtml("https://ss0.4sqi.net/img/checkbox-on-8bd3ac7f405be4e9df5e13c845fed696.png")+'" class\x3d"checkboxImage enabled" alt\x3d"Enabled"/\x3e':'\x3cimg src\x3d"'+soy.$$escapeHtml("https://ss1.4sqi.net/img/checkbox-disabled-919ad6cd9a5d9671d5a745e8781abe1d.png")+'" class\x3d"checkboxImage disabled" alt\x3d"Disabled"/\x3e'};
helpers.util.tidyLink=function(a,b){return'\x3ca href\x3d"'+soy.$$escapeHtml(a.url)+'"\x3e'+helpers.util.tidyUrl(soy.$$augmentMap(a,{truncate:!0}))+"\x3c/a\x3e"};
helpers.util.tidyUrl=function(a,b){var c="",d="http://www."==fourSq.util.safeSubstring(a.url,0,11)?soy.$$escapeHtml(fourSq.util.safeSubstring(a.url,11)):"https://www."==fourSq.util.safeSubstring(a.url,0,12)?soy.$$escapeHtml(fourSq.util.safeSubstring(a.url,12)):"http://"==fourSq.util.safeSubstring(a.url,0,7)?soy.$$escapeHtml(fourSq.util.safeSubstring(a.url,7)):"https://"==fourSq.util.safeSubstring(a.url,0,8)?soy.$$escapeHtml(fourSq.util.safeSubstring(a.url,8)):soy.$$escapeHtml(a.url);return c+=a.truncate?
soy.$$truncate(soy.$$filterNoAutoescape(d),40,!0):soy.$$filterNoAutoescape(d)};helpers.util.dateString=function(a,b){return a.year?helpers.util.month(a)+" "+soy.$$escapeHtml(a.date)+", "+soy.$$escapeHtml(a.year):helpers.util.month(a)+" "+soy.$$escapeHtml(a.date)};helpers.util.monthYearString=function(a,b){return helpers.util.month(a)+" "+soy.$$escapeHtml(a.year)};
helpers.util.month=function(a,b){var c="";switch(a.month){case 0:c+="January";break;case 1:c+="February";break;case 2:c+="March";break;case 3:c+="April";break;case 4:c+="May";break;case 5:c+="June";break;case 6:c+="July";break;case 7:c+="August";break;case 8:c+="September";break;case 9:c+="October";break;case 10:c+="November";break;case 11:c+="December"}return c};
helpers.util.monthAbbreviated=function(a,b){var c="";switch(a.month){case 0:c+="Jan";break;case 1:c+="Feb";break;case 2:c+="Mar";break;case 3:c+="Apr";break;case 4:c+="May";break;case 5:c+="Jun";break;case 6:c+="Jul";break;case 7:c+="Aug";break;case 8:c+="Sep";break;case 9:c+="Oct";break;case 10:c+="Nov";break;case 11:c+="Dec"}return c};
helpers.util.monthInitial=function(a,b){var c="";switch(a.month){case 0:c+="J";break;case 1:c+="F";break;case 2:c+="M";break;case 3:c+="A";break;case 4:c+="M";break;case 5:c+="J";break;case 6:c+="J";break;case 7:c+="A";break;case 8:c+="S";break;case 9:c+="O";break;case 10:c+="N";break;case 11:c+="D"}return c};
helpers.util.dayOfWeek=function(a,b){var c="";switch(a.day){case 0:c+="Sunday";break;case 1:c+="Monday";break;case 2:c+="Tuesday";break;case 3:c+="Wednesday";break;case 4:c+="Thursday";break;case 5:c+="Friday";break;case 6:c+="Saturday"}return c};helpers.util.dayOfWeekAbbreviated=function(a,b){var c="";switch(a.day){case 0:c+="Sun";break;case 1:c+="Mon";break;case 2:c+="Tue";break;case 3:c+="Wed";break;case 4:c+="Thu";break;case 5:c+="Fri";break;case 6:c+="Sat"}return c};
helpers.util.dayOfWeekInitial=function(a,b){var c="";switch(a.day){case 0:c+="S";break;case 1:c+="M";break;case 2:c+="T";break;case 3:c+="W";break;case 4:c+="T";break;case 5:c+="F";break;case 6:c+="S"}return c};
helpers.util.periodAgo=function(a,b){return 1>a.minutes?0==a.seconds?"0 seconds ago":1==a.seconds?"1 second ago":soy.$$escapeHtml(a.seconds)+" seconds ago":1>a.hours?0==a.minutes?"0 minutes ago":1==a.minutes?"1 minute ago":soy.$$escapeHtml(a.minutes)+" minutes ago":1>a.days?0==a.hours?"0 hours ago":1==a.hours?"1 hour ago":soy.$$escapeHtml(a.hours)+" hours ago":1>a.weeks?0==a.days?"0 days ago":1==a.days?"1 day ago":soy.$$escapeHtml(a.days)+" days ago":0==a.weeks?"0 weeks ago":1==a.weeks?"1 week ago":
soy.$$escapeHtml(a.weeks)+" weeks ago"};
helpers.util.period=function(a,b){return 1>a.minutes?a.shortUnits?0==a.seconds?"0 secs":1==a.seconds?"1 sec":soy.$$escapeHtml(a.seconds)+" secs":0==a.seconds?"0 seconds":1==a.seconds?"1 second":soy.$$escapeHtml(a.seconds)+" seconds":1>a.hours?a.shortUnits?0==a.minutes?"0 mins":1==a.minutes?"1 min":soy.$$escapeHtml(a.minutes)+" mins":0==a.minutes?"0 minutes":1==a.minutes?"1 minute":soy.$$escapeHtml(a.minutes)+" minutes":1>a.days?a.shortUnits?0==a.hours?"0 hrs":1==a.hours?"1 hr":soy.$$escapeHtml(a.hours)+
" hrs":0==a.hours?"0 hours":1==a.hours?"1 hour":soy.$$escapeHtml(a.hours)+" hours":1>a.weeks?0==a.days?"0 days":1==a.days?"1 day":soy.$$escapeHtml(a.days)+" days":a.shortUnits?0==a.weeks?"0 wks":1==a.weeks?"1 wk":soy.$$escapeHtml(a.weeks)+" wks":0==a.weeks?"0 weeks":1==a.weeks?"1 week":soy.$$escapeHtml(a.weeks)+" weeks"};
helpers.util.smartDateWithDiffs=function(a,b){return 0>a.diff.seconds?helpers.util.dateString({month:a.thenParts.month,date:a.thenParts.date,year:a.thenParts.year}):1>=a.diff.seconds?a.ago?"just now":"1 second":4>a.diff.weeks?a.ago?helpers.util.periodAgo(a.diff):helpers.util.period(soy.$$augmentMap(a.diff,{shortUnits:a.shortUnits})):a.thenParts.year==a.nowParts.year?helpers.util.dateString({month:a.thenParts.month,date:a.thenParts.date}):helpers.util.dateString({month:a.thenParts.month,date:a.thenParts.date,
year:a.thenParts.year})};helpers.util.smartDate=function(a,b){return a.then?helpers.util.smartDateWithDiffs({then:a.then,thenParts:fourSq.util.dateParts(a.then,a.tz),now:a.now,shortUnits:a.shortUnits,nowParts:fourSq.util.dateParts(a.now,a.tz),diff:fourSq.util.timeDiff(a.then,a.now),ago:null!=a.ago?a.ago:!0}):""};helpers.util.currentYear=function(a,b){var c="",d=fourSq.util.dateParts(void 0,void 0);return c+=soy.$$escapeHtml(d.year)};
helpers.util.createdAtSmartDate=function(a,b){a=a||{};return helpers.util.smartDate({then:a.createdAt,tz:a.timeZoneOffset})};helpers.util.dateWithTimeHelper=function(a,b){var c;c=12>a.date.hour?"AM":"PM";return c=""+(soy.$$escapeHtml(13>a.date.hour?a.date.hour:a.date.hour-12)+":"+(10>a.date.minute?"0":"")+soy.$$escapeHtml(a.date.minute)+" "+soy.$$escapeHtml(c)+" on "+helpers.util.month(a.date)+" "+soy.$$escapeHtml(a.date.date)+", "+soy.$$escapeHtml(a.date.year))};
helpers.util.dateWithTime=function(a,b){a=a||{};var c="",d=fourSq.util.dateParts(a.createdAt,a.timeZoneOffset);return c+=helpers.util.dateWithTimeHelper({date:d})};helpers.util.dateWithTimeAtTimeZone=function(a,b){var c="",d=fourSq.util.dateParts(a.createdAt,a.tz);return c+=helpers.util.dateWithTimeHelper({date:d})};helpers.util.dateAtTimeZone=function(a,b){var c="",d=fourSq.util.dateParts(a.when,a.tz);return c+=helpers.util.month(d)+" "+soy.$$escapeHtml(d.date)+(a.excludeYear?"":", "+soy.$$escapeHtml(d.year))};
helpers.util.dayOfDateAtTimeZone=function(a,b){var c="",d=fourSq.util.dateParts(a.when,a.tz);return c+=soy.$$escapeHtml(d.date)};helpers.util.monthOfDateAtTimeZone=function(a,b){var c="",d=fourSq.util.dateParts(a.when,a.tz);return c+=helpers.util.month(d)};
helpers.util.usTime=function(a,b){a=a||{};var c="",d=fourSq.util.dateParts(a.createdAt,a.timeZoneOffset),e=0==d.hour?"12":13>d.hour?soy.$$escapeHtml(d.hour):soy.$$escapeHtml(d.hour-12),f=12>d.hour?"am":"pm",d=soy.$$escapeHtml(d.minute);return c+=soy.$$escapeHtml(e)+":"+soy.$$escapeHtml(fourSq.util.padString(d,2,"0"))+" "+soy.$$escapeHtml(f)};
helpers.util.shortDate=function(a,b){var c="",d=fourSq.util.dateParts(a.when,a.timeZoneOffset);return c+=soy.$$escapeHtml(d.month+1)+"/"+soy.$$escapeHtml(d.date)+"/"+soy.$$escapeHtml(d.year)};helpers.util.makeOutgoingLink=function(a,b){return a.urlSig?'data-sig\x3d"'+soy.$$escapeHtml(a.urlSig)+'" onmousedown\x3d"fourSq.ui.OutgoingLink.mousedown($(this), event)" '+(a.dataSource?'data-source\x3d"'+soy.$$escapeHtml(a.dataSource)+'"':"")+(a.venueId?'venueid\x3d"'+soy.$$escapeHtml(a.venueId)+'"':""):""};
helpers.util.appendReferralId=function(a,b){return helpers.util.appendIds(a)};helpers.util.appendIds=function(a,b){return a.promotedTipId&&a.referralId?soy.$$escapeHtml(fourSq.util.appendParams(a.url,[["promotedTipId",a.promotedTipId],["referralId",a.referralId]])):a.promotedTipId?soy.$$escapeHtml(fourSq.util.appendParams(a.url,[["promotedTipId",a.promotedTipId]])):a.referralId?soy.$$escapeHtml(fourSq.util.appendParams(a.url,[["referralId",a.referralId]])):soy.$$escapeHtml(a.url)};
helpers.util.cappedApproximateNumber=function(a,b){var c="";if(1E3>a.num&&a.num<a.cap)c+=soy.$$escapeHtml(a.num);else var d=Math.min(a.num,a.cap),c=c+(soy.$$escapeHtml(Math.floor(d/100)/10)+"k"+(a.num>a.cap?"\x3csmall\x3e+\x3c/small\x3e":""));return c};helpers.util.showMoreText=function(a,b){a=a||{};return a.capitalized?"Show more":"show more"};helpers.util.showLessText=function(a,b){return"Show less"};
helpers.util.paginationButton=function(a,b){a=a||{};var c;return c=""+('\x3cspan class\x3d"pageButton '+soy.$$escapeHtml(a.number?a.selected?"selected":"link":"")+'" '+(a.number?'data-page\x3d"'+soy.$$escapeHtml(a.number)+'"':"")+"\x3e"+(a.number?soy.$$escapeHtml(a.number):"...")+"\x3c/span\x3e")};
helpers.util.paginationButtons=function(a,b){var c="";if(0<a.numberOfButtons&&a.start<=a.end){for(var d=a.end-a.start<a.numberOfButtons,e=a.start+a.numberOfButtons-2,f=a.end,g=a.start;g<f;g++)c+=g<e||d?helpers.util.paginationButton({number:g}):g==e?helpers.util.paginationButton(null):"";c+=helpers.util.paginationButton({number:a.end})}return c};
helpers.util.pagination=function(a,b){var c="";if(1<a.pageCount)var d=(a.numberOfButtons?a.numberOfButtons:8)/2,e=a.pageNumber-1,f=a.pageCount-a.pageNumber,g=e<d?e:d,h=f<d?f:d,f=h==d?g:g+(d-h),d=g==d?h:h+(d-g),c=c+((1!=a.pageNumber?'\x3cspan class\x3d"pageButton link previous" data-page\x3d"'+soy.$$escapeHtml(a.pageNumber-1)+'"\x3e\x26laquo; prev\x3c/span\x3e':"")+helpers.util.paginationButtons({start:1,end:e,numberOfButtons:f})+helpers.util.paginationButton({number:a.pageNumber,selected:!0})+helpers.util.paginationButtons({start:a.pageNumber+
1,end:a.pageCount,numberOfButtons:d})+(a.pageNumber!=a.pageCount?'\x3cspan class\x3d"pageButton link next" data-page\x3d"'+soy.$$escapeHtml(a.pageNumber+1)+'"\x3enext \x26raquo;\x3c/span\x3e':""));return c};helpers.util.apiResponseError=function(a,b){return"Oops, something went wrong"};helpers.util.apiResponseErrorWithMessage=function(a,b){return'Oops, something went wrong: "'+soy.$$escapeHtml(a.message)+'"'};
helpers.util.dateAtTime=function(a,b){var c="",d=fourSq.util.dateParts(a.when,void 0);return c+=helpers.util.month(d)+" "+soy.$$escapeHtml(d.date)+", "+soy.$$escapeHtml(d.year)};helpers.util.dateAtTimeWithMonthAbbreviated=function(a,b){var c="",d=fourSq.util.dateParts(a.when,void 0);return c+=helpers.util.monthAbbreviated(d)+" "+soy.$$escapeHtml(d.date)+", "+soy.$$escapeHtml(d.year)};"undefined"==typeof helpers.venue&&(helpers.venue={});
helpers.venue.pageTitle=function(a,b){a=a||{};return a.tip?a.tip.user&&a.tip.venue?a.tip.user.gender&&a.tip.user.gender?soy.$$escapeHtml(a.tip.user.firstName)+"'s tip at "+soy.$$escapeHtml(a.tip.venue.name):a.tip.user.gender&&a.tip.user.gender?soy.$$escapeHtml(a.tip.user.firstName)+"'s tip at "+soy.$$escapeHtml(a.tip.venue.name):"A tip at "+soy.$$escapeHtml(a.tip.venue.name):"A tip":a.title?soy.$$escapeHtml(a.title):soy.$$escapeHtml(a.venue.name)+(a.venue.closed?" (Now Closed)":"")+(a.neighborhood?
" - "+soy.$$escapeHtml(a.neighborhood):"")+((null==a.venue?0:null==a.venue.location?0:a.venue.location.city)||(null==a.venue?0:null==a.venue.location?0:a.venue.location.state)?" - "+(a.venue.location.city&&a.venue.location.city==a.venue.location.state?soy.$$escapeHtml(a.venue.location.city):helpers.venue.cityState(a.venue)):"")};
helpers.venue.mobileFooter=function(a,b){var c='\x3cdiv id\x3d"venueFooter"\x3e\x3cdiv class\x3d"section wrap"\x3e\x3cdiv class\x3d"venueIcon"\x3e'+helpers.venue.primaryCategoryIcon(a.venue)+"\x3c/div\x3e"+(a.withSaveButton?'\x3cdiv class\x3d"saveBlock"\x3e'+templates.fourSq.ui.save.microSaveButton(a.venue)+"\x3c/div\x3e":"")+'\x3cdiv class\x3d"details"\x3e\x3ch1 class\x3d"venueName"\x3e'+helpers.venue.nameWithLink(a)+'\x3c/h1\x3e\x3cdiv class\x3d"categories"\x3e'+(a.venue.rating?'\x3cdiv class\x3d"venueScore"\x3e'+
helpers.venue.compactRating(soy.$$augmentMap(a.venue,{hideDenom:!0}))+"\x3c/div\x3e":"");if(null!=a.venue.categories&&0<a.venue.categories.length)if(a.venue.rating)c+="\x3cdiv\x3e\x3cspan\x3e"+soy.$$escapeHtml(a.venue.categories[0].name)+"\x3c/span\x3e\x3c/div\x3e";else for(var d=a.venue.categories,e=d.length,f=0;f<e;f++)c+=soy.$$escapeHtml(d[f].shortName)+(f!=e-1?", ":"");return c+="\x3c/div\x3e\x3cdiv\x3e"+(null!=(null==a.venue.hours?null:a.venue.hours.status)?'\x3cdiv class\x3d"venueHours '+(a.venue.hours.isOpen?
"open":"closed")+'"\x3e'+soy.$$escapeHtml(a.venue.hours.status)+"\x3c/div\x3e":"")+(a.venue.location&&a.venue.location.address?'\x3cdiv class\x3d"address"\x3e'+helpers.venue.globalLocalAddress(a.venue)+"\x3c/div\x3e":"")+"\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e"};
helpers.venue.venueUrl=function(a,b){return'\x3ca href\x3d"'+soy.$$escapeHtml(a.url)+'" class\x3d"url" itemprop\x3d"url" rel\x3d"nofollow" '+helpers.util.makeOutgoingLink(a)+(a.target?'target\x3d"'+soy.$$escapeHtml(a.target)+'"':"")+"\x3e"+(a.linkName?soy.$$escapeHtml(a.linkName):helpers.util.tidyUrl(a))+"\x3c/a\x3e"};
helpers.venue.venueImageWLink=function(a,b){return'\x3ca href\x3d"/v/'+soy.$$escapeHtml(a.venueId)+"/photos?openPhotoId\x3d"+soy.$$escapeHtml(a.image.id)+'"\x3e'+helpers.photo.img100x100(a.image)+"\x3c/a\x3e"};
helpers.venue.venueCard=function(a,b){return'\x3cdiv class\x3d"venueName venueCard"\x3e\x3ch5\x3e'+helpers.venue.nameWithLink(a)+"\x3c/h5\x3e\x3cp\x3e"+(a.displayFullAddress?helpers.venue.addressCityState(a.venue):helpers.venue.cityState(a.venue))+'\x3c/p\x3e\x3cdiv class\x3d"hiddenAddress"\x3e'+helpers.venue.addressBlock(a.venue)+"\x3c/div\x3e\x3c/div\x3e"};
helpers.venue.globalLocalAddress=function(a,b){var c;return c=""+((a.location.distance||0==a.location.distance)&&4E4>a.location.distance?'\x3cspan class\x3d"local"\x3e'+helpers.venue.addressCityState(a)+"\x3c/span\x3e":'\x3cspan class\x3d"global"\x3e'+helpers.venue.cityState(a)+"\x3c/span\x3e")};
helpers.venue.swarmGlobalLocalAddress=function(a,b){var c;return c=""+((a.location.distance||0==a.location.distance)&&4E4>a.location.distance?'\x3cspan class\x3d"local"\x3e'+helpers.venue.addressCityState(a)+"\x3c/span\x3e":'\x3cspan class\x3d"global"\x3e'+soy.$$escapeHtml(a.location.contextLine)+"\x3c/span\x3e")};
helpers.venue.nameWithLink=function(a,b){return helpers.venue.nameWithLinkWithDomain({venue:a.venue,referralId:a.referralId,target:a.target,indicateIfClosed:a.indicateIfClosed,extraClass:a.extraClass,venueIdAsData:a.venueIdAsData,promotedTipId:a.promotedTipId,canonicalPath:a.venue.canonicalPath})};
helpers.venue.nameWithLinkWithDomain=function(a,b){var c="",d=helpers.venue.hrefInternal_(soy.$$augmentMap(a.venue,{referralId:a.referralId,promotedTipId:a.promotedTipId,withBaseDomain:a.withBaseDomain,canonicalPath:a.canonicalPath}));return c+='\x3ca href\x3d"'+soy.$$escapeHtml(d&&d.contentKind&&d.contentKind==goog.soy.data.SanitizedContentKind.HTML?d:soydata.VERY_UNSAFE.ordainSanitizedHtml(d))+'"'+(a.target?' target\x3d"'+soy.$$escapeHtml(a.target)+'"':"")+(a.extraClass?' class\x3d"'+soy.$$escapeHtml(a.extraClass)+
'"':"")+(a.venueIdAsData?' data-venueid\x3d"'+soy.$$escapeHtml(a.venue.id)+'"':"")+"\x3e"+soy.$$escapeHtml(a.venue.name)+(a.indicateIfClosed&&a.venue.closed?" (Closed)":"")+"\x3c/a\x3e"};helpers.venue.href=function(a,b){return helpers.venue.hrefInternal_(a)};
helpers.venue.hrefInternal_=function(a,b){a=a||{};return a.canonicalPath||a.id?soy.$$escapeHtml(null!=a.withBaseDomain?a.withBaseDomain:"")+helpers.util.appendIds({promotedTipId:a.promotedTipId,referralId:a.referralId,url:a.canonicalPath?soy.$$escapeHtml(a.canonicalPath):"/v/"+soy.$$escapeHtml(a.id)}):"#"};helpers.venue.searchLink=function(a,b){return'\x3ca class\x3d"searchLink" href\x3d"http://bing.com?q\x3d'+soy.$$escapeUri(a.name)+(a.context?" "+soy.$$escapeUri(a.context):"")+'" target\x3d"_blank"\x3e(search the web)\x3c/a\x3e'};
helpers.venue.cityStateAndZip=function(a,b){return(a.location.city?(a.location.city==a.location.state?soy.$$escapeHtml(a.location.city):a.location.state?soy.$$escapeHtml(a.location.city)+", "+soy.$$escapeHtml(a.location.state):"")+(a.location.postalCode?", ":""):a.location.state?soy.$$escapeHtml(a.location.state)+(a.location.postalCode?", ":""):"")+(a.location.postalCode?soy.$$escapeHtml(a.location.postalCode):"")};
helpers.venue.addressBlock=function(a,b){return'\x3cspan class\x3d"adr" '+(a.includeMicrodata?'itemprop\x3d"address" itemscope itemtype\x3d"http://schema.org/PostalAddress"':"")+"\x3e"+(a.location.address?'\x3cspan class\x3d"street-address" '+(a.includeMicrodata?'itemprop\x3d"streetAddress"':"")+"\x3e"+soy.$$escapeHtml(a.location.address)+"\x3c/span\x3e\x3cbr\x3e":"")+(a.location.crossStreet?soy.$$escapeHtml(a.location.crossStreet)+"\x3cbr\x3e":"")+(a.location.city?(a.location.city==a.location.state?
'\x3cspan class\x3d"region" '+(a.includeMicrodata?'itemprop\x3d"addressRegion"':"")+"\x3e"+soy.$$escapeHtml(a.location.city)+"\x3c/span\x3e":'\x3cspan class\x3d"locality" '+(a.includeMicrodata?'itemprop\x3d"addressLocality"':"")+"\x3e"+soy.$$escapeHtml(a.location.city)+"\x3c/span\x3e"+(a.location.state&&""!=a.location.state?', \x3cspan class\x3d"region" '+(a.includeMicrodata?'itemprop\x3d"addressRegion"':"")+"\x3e"+soy.$$escapeHtml(a.location.state)+"\x3c/span\x3e":""))+(a.location.postalCode?' \x3cspan class\x3d"postal-code" '+
(a.includeMicrodata?'itemprop\x3d"postalCode"':"")+"\x3e"+soy.$$escapeHtml(a.location.postalCode)+"\x3c/span\x3e":"")+"\x3cbr\x3e":"")+(a.contact?(a.contact.formattedPhone?'\x3cspan class\x3d"tel" '+(a.includeMicrodata?'itemprop\x3d"telephone"':"")+"\x3e"+soy.$$escapeHtml(a.contact.formattedPhone)+"\x3c/span\x3e\x3cbr\x3e":"")+(a.contact.twitter?'On Twitter: @\x3ca href\x3d"http://twitter.com/'+soy.$$escapeHtml(a.contact.twitter)+'"\x3e'+soy.$$escapeHtml(a.contact.twitter)+"\x3c/a\x3e\x3cbr\x3e":
""):"")+"\x3c/span\x3e"};
helpers.venue.compactVenueBlock=function(a,b){return'\x3cdiv class\x3d"details compactVenue"\x3e\x3cdiv class\x3d"icon"\x3e'+helpers.venue.primaryCategoryIcon(soy.$$augmentMap(a.venue,{size:64}))+'\x3c/div\x3e\x3cdiv class\x3d"venueCard meta"\x3e\x3ch1\x3e'+helpers.venue.nameWithLink(a)+'\x3c/h1\x3e\x3cdiv class\x3d"moreInfo '+(a.venue.rating?"hasRating":"")+'"\x3e'+(a.venue.rating?helpers.venue.compactRating(soy.$$augmentMap(a.venue,{includeMicrodata:!1})):"")+helpers.venue.postalAddress(a.venue)+(a.categories?
'\x3cdiv class\x3d"categories"\x3e'+templates.fourSq.venue.helpers.categoryList(a)+"\x3c/div\x3e":"")+"\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e"};
helpers.venue.postalAddress=function(a,b){return function(){return a.location.formattedAddress?'\x3cdiv class\x3d"adr"'+(a.includeMicrodata?' itemprop\x3d"address" itemscope itemtype\x3d"http://schema.org/PostalAddress"':"")+"\x3e"+(a.multiLine?soy.$$escapeHtml(function(a){return a&&a.contentKind&&a.contentKind==goog.soy.data.SanitizedContentKind.HTML?a:soydata.VERY_UNSAFE.ordainSanitizedHtml(a)}(_(a.location.formattedAddress).filter(function(a){return fourSq.isDefinedAndNotNull(a)&&""!=a}).join("\x3cbr\x3e"))):
soy.$$escapeHtml(function(a){return a&&a.contentKind&&a.contentKind==goog.soy.data.SanitizedContentKind.HTML?a:soydata.VERY_UNSAFE.ordainSanitizedHtml(a)}(_(a.location.formattedAddress).filter(function(a){return fourSq.isDefinedAndNotNull(a)&&""!=a}).join(", "))))+"\x3c/div\x3e":'\x3cdiv class\x3d"adr '+(a.location.formattedAddress?"hidden":"")+'"'+(a.includeMicrodata?' itemprop\x3d"address" itemscope itemtype\x3d"http://schema.org/PostalAddress"':"")+"\x3e"+(a.location.address||a.location.crossStreet?
helpers.venue.addressLineOne_(a)+", ":"")+helpers.venue.addressLineTwo_(a)+"\x3c/div\x3e"}()};helpers.venue.shouldShowDirections=function(a,b){return"mars"!=a.location.planet&&!a.location.isFuzzed&&a.location.lat&&a.location.lng?"true":""};
helpers.venue.addressLineOne_=function(a,b){return(a.location.address?'\x3cspan class\x3d"street-address"'+(a.includeMicrodata?' itemprop\x3d"streetAddress"':"")+"\x3e"+soy.$$escapeHtml(a.location.address)+"\x3c/span\x3e":"")+(a.location.crossStreet?' \x3cspan class\x3d"cross"\x3e('+soy.$$escapeHtml(a.location.crossStreet)+")\x3c/span\x3e":"")};
helpers.venue.addressLineTwo_=function(a,b){return(a.location.city?'\x3cspan class\x3d"locality"'+(a.includeMicrodata?' itemprop\x3d"addressLocality"':"")+"\x3e"+soy.$$escapeHtml(a.location.city)+"\x3c/span\x3e, ":"")+(a.location.state?'\x3cspan class\x3d"region"'+(a.includeMicrodata?' itemprop\x3d"addressRegion"':"")+"\x3e"+soy.$$escapeHtml(a.location.state)+"\x3c/span\x3e ":"")+(a.location.postalCode?'\x3cspan class\x3d"postal-code"'+(a.includeMicrodata?' itemprop\x3d"postalCode"':"")+"\x3e"+soy.$$escapeHtml(a.location.postalCode)+
"\x3c/span\x3e":"")};helpers.venue.venueCategory=function(a,b){return'\x3cdiv class\x3d"category"\x3e'+helpers.venue.primaryCategory(a)+"\x3c/div\x3e"};
helpers.venue.primaryCategoryIcon=function(a,b){var c="",d=helpers.venue.primaryCategoryIconUrl(a),e=helpers.venue.primaryCategoryIconUrl({categories:a.categories,size:a.size?2*a.size:null,transparent:a.transparent});return c+="\x3cimg src\x3d'"+soy.$$escapeHtml(d)+"'"+(a.size?"data-retina-url\x3d'"+soy.$$escapeHtml(e)+"' width\x3d\""+soy.$$escapeHtml(a.size)+'" height\x3d"'+soy.$$escapeHtml(a.size)+'"':"")+"/\x3e"};
helpers.venue.primaryCategoryIconUrl=function(a,b){return a.categories&&0<a.categories.length?helpers.category.thumbnail(soy.$$augmentMap(a.categories[0],{transparent:a.transparent,desiredSize:a.size})):helpers.category.defaultIcon({transparent:a.transparent,desiredSize:a.size})};
helpers.venue.pageOrCategoryIcon=function(a,b){return(null==a.page?0:a.page.user)&&"venuePage"==a.page.user.type&&"/blank_boy.png"!=(null==a.page.user.photo?null:a.page.user.photo.suffix)?helpers.user.image(soy.$$augmentMap(a.page.user,{size:a.size})):(null==a.page?0:a.page.user)&&"/blank_boy.png"!=(null==a.page.user.photo?null:a.page.user.photo.suffix)?helpers.user.imageWLink(soy.$$augmentMap(a.page.user,{size:a.size})):helpers.venue.primaryCategoryIcon(a)};
helpers.venue.primaryCategory=function(a,b){return a.venue.categories[0]?a.longName?soy.$$escapeHtml(a.venue.categories[0].name):soy.$$escapeHtml(a.venue.categories[0].shortName):"Uncategorized"};helpers.venue.categories=function(a,b){a=a||{};var c="";if(a.categories&&0<a.categories.length)for(var d=a.categories,e=d.length,f=0;f<e;f++)var g=d[f],c=c+(0==f?soy.$$escapeHtml(g.name):", "+soy.$$escapeHtml(g.name));return c};
helpers.venue.price=function(a,b){a=a||{};var c="",d=a.currency?soy.$$escapeHtml(a.currency):"$";return c+=a.tier&&0<a.tier?'\x3cspan class\x3d"price" '+(a.message?'title\x3d"'+soy.$$escapeHtml(a.message)+'"':"")+"\x3e"+(1==a.tier?'\x3cspan class\x3d"darken" itemprop\x3d"priceRange"\x3e'+soy.$$escapeHtml(d)+"\x3c/span\x3e"+soy.$$escapeHtml(d)+soy.$$escapeHtml(d)+soy.$$escapeHtml(d):2==a.tier?'\x3cspan class\x3d"darken" itemprop\x3d"priceRange"\x3e'+soy.$$escapeHtml(d)+soy.$$escapeHtml(d)+"\x3c/span\x3e"+
soy.$$escapeHtml(d)+soy.$$escapeHtml(d):3==a.tier?'\x3cspan class\x3d"darken" itemprop\x3d"priceRange"\x3e'+soy.$$escapeHtml(d)+soy.$$escapeHtml(d)+soy.$$escapeHtml(d)+"\x3c/span\x3e"+soy.$$escapeHtml(d):'\x3cspan class\x3d"darken" itemprop\x3d"priceRange"\x3e'+soy.$$escapeHtml(d)+soy.$$escapeHtml(d)+soy.$$escapeHtml(d)+soy.$$escapeHtml(d)+"\x3c/span\x3e")+"\x3c/span\x3e":""};
helpers.venue.simplePrice=function(a,b){var c="",d=a.currency?soy.$$escapeHtml(a.currency):"$";if(a.tier&&0<a.tier){for(var c=c+'\x3cspan class\x3d"price"\x3e',e=a.tier,f=0;f<e;f++)c+=soy.$$escapeHtml(d);c+="\x3c/span\x3e"}return c};helpers.venue.compactAttributes=function(a,b){for(var c="",d=fourSq.util.soyFlattenHelper(a.attributeGroups,"summary"),e=d.length,f=0;f<e;f++)var g=d[f],c=c+(g.summary?soy.$$escapeHtml(g.summary)+(f!=e-1?" \x26middot; ":""):"");return c};
helpers.venue.compactAttributesWithoutPrice=function(a,b){for(var c="",d=fourSq.util.soyFlattenHelper(a.attributeGroups,"summary"),e=d.length,f=0;f<e;f++)var g=d[f],c=c+(g.summary?"price"!=g.type?soy.$$escapeHtml(g.summary)+(f!=e-1?" \x26middot; ":""):"":"");return c};
helpers.venue.detailAttributes=function(a,b){for(var c="",d=a.attributeGroups,e=d.length,f=0;f<e;f++){var g=d[f];if(g.items&&0<g.items.length){for(var c=c+("\x3cdiv\x3e\x3cstrong\x3e"+soy.$$escapeHtml(g.name)+"\x3c/strong\x3e: "),g=g.items,h=g.length,l=0;l<h;l++)var m=g[l],c=c+(m.displayValue?(0!=l?", ":"")+soy.$$escapeHtml(m.displayValue):"");c+="\x3c/div\x3e"}}return c};
helpers.venue.menuLink=function(a,b){var c="",d=a.anchor?soy.$$escapeHtml(a.anchor):"View Menu",e=a.url==a.externalUrl;return c+=a.spanLink?'\x3cspan class\x3d"menuLink link"\x3e'+soy.$$escapeHtml(d&&d.contentKind&&d.contentKind==goog.soy.data.SanitizedContentKind.HTML?d:soydata.VERY_UNSAFE.ordainSanitizedHtml(d))+"\x3c/span\x3e":'\x3ca class\x3d"menuLink" href\x3d"'+soy.$$escapeHtml(a.url)+'"'+(e?' rel\x3d"nofollow"':"")+(a.target?' target\x3d"'+soy.$$escapeHtml(a.target)+'"':"")+"\x3e"+soy.$$escapeHtml(d&&
d.contentKind&&d.contentKind==goog.soy.data.SanitizedContentKind.HTML?d:soydata.VERY_UNSAFE.ordainSanitizedHtml(d))+"\x3c/a\x3e"};helpers.venue.ratingItemtype=function(a,b){return'itemprop\x3d"aggregateRating" itemscope\x3d"" itemtype\x3d"http://schema.org/AggregateRating"'};
helpers.venue.ratingCountDesc=function(a,b){a=a||{};return 1==a.ratingCount?'Based on \x3cspan itemprop\x3d"ratingCount"\x3e1 vote':'Based on \x3cspan itemprop\x3d"ratingCount"\x3e'+fourSq.i18n.formatNumber(a.ratingCount,"decimal",void 0,"")+"\x3c/span\x3e votes"};
helpers.venue.compactRating=function(a,b){return'\x3cspan class\x3d"venueScore '+helpers.venue.ratingClass(a)+'" title\x3d"'+helpers.venue.ratingTitle(a)+'"'+(a.ratingColor?' style\x3d"background-color: #'+soy.$$escapeHtml(a.ratingColor)+';" ':"")+"\x3e\x3cspan "+(a.includeMicrodata?'itemprop\x3d"ratingValue"':"")+"\x3e"+helpers.venue.ratingRounded(a)+"\x3c/span\x3e"+(a.hideDenom?"":"\x3csup\x3e/\x3cspan "+(a.includeMicrodata?'itemprop\x3d"bestRating"':"")+"\x3e10\x3c/span\x3e\x3c/sup\x3e")+"\x3c/span\x3e"};
helpers.venue.ratingTitle=function(a,b){return helpers.venue.ratingRounded(a)+"/10 - "+helpers.venue.ratingDescription(a)};helpers.venue.ratingClass=function(a,b){return 5>=a.rating?"negative":7>=a.rating?"neutral":"positive"};helpers.venue.ratingRounded=function(a,b){var c="",d=Math.round(10*a.rating)/10;return c+=10>d?soy.$$escapeHtml(d.toFixed(1)):soy.$$escapeHtml(d)};
helpers.venue.ratingDescription=function(a,b){return 7<=a.rating?"People like this place":5<=a.rating?"People have mixed feelings about this place":"People don't really like this place"};
helpers.venue.addTipBlock=function(a,b){var c='\x3cdiv id\x3d"addTipBlock" class\x3d"notrans"\x3e';if(a.canAddTip)var c=c+((a.currentUser?'\x3cdiv id\x3d"addTipImage"\x3e'+helpers.user.imageWLink(soy.$$augmentMap(a.currentUser,{size:60}))+"\x3c/div\x3e":"")+'\x3cdiv id\x3d"addTipForm"\x3e'+(a.currentUser?a.venue&&a.venue.name?"\x3ch4\x3e\x3cstrong\x3eHey "+soy.$$escapeHtml(a.currentUser.firstName)+"\x3c/strong\x3e, leave a tip at "+soy.$$escapeHtml(a.venue.name)+":\x3c/h4\x3e":"\x3ch4\x3e\x3cstrong\x3eHey "+
soy.$$escapeHtml(a.currentUser.firstName)+"\x3c/strong\x3e, leave a tip:\x3c/h4\x3e":"")+'\x3cdiv id\x3d"charCount"\x3e\x3c/div\x3e\x3cdiv id\x3d"addTip"\x3e'),d=a.venueInPlaceholder&&a.venue&&a.venue.name?"Add a tip at "+soy.$$escapeHtml(a.venue.name)+"...":"Add a tip...",c=c+('\x3ctextarea id\x3d"tipText" class\x3d"formStyle" placeholder\x3d\''+soy.$$filterNoAutoescape(d)+'\' cols\x3d"55" tabindex\x3d"1" rows\x3d"4"\x3e\x3c/textarea\x3e\x3c/div\x3e\x3cdiv id\x3d"tipInputError"\x3e\x3c/div\x3e\x3cdiv class\x3d"photoPreview"\x3e\x3c/div\x3e\x3cdiv id\x3d"addTipOptions"\x3e\x3cbutton class\x3d"greenButton"\x3eShare\x3c/button\x3e'+
(a.tipPhotoUploadEnabled&&a.venue&&!a.venue.restricted?helpers.photoupload.photoUploadControl({inputName:"tipPhoto",action:"/__uploadtipphoto",addButtonHolderClass:"photoAddButtonHolder"}):"")+'\x3cspan title\x3d\'Add a link\' class\x3d"link addLink"\x3e\x3cimg src\x3d"'+soy.$$escapeHtml("https://ss0.4sqi.net/img/icon-grey-link-578061970634420cbe2544e90723a127.png")+'" /\x3e\x3c/span\x3e\x3cspan id\x3d"tipLink"\x3e\x3cinput class\x3d"formStyle" type\x3d"text" maxlength\x3d"255" /\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"loading"\x3e\x3c/div\x3e\x3c/div\x3e');
else c=a.isLoggedIn?c+"You can't leave tips at this venue.":c+'\x3ca href\x3d"/login"\x3eLog in\x3c/a\x3e to leave tips at this venue!';return c+"\x3c/div\x3e"};helpers.venue.reservationLink=function(a,b){return'\x3ca href\x3d"'+soy.$$escapeHtml(a.reservations.url)+'" '+(a.target?'target\x3d"'+soy.$$escapeHtml(a.target)+'"':"")+"\x3eMake Reservation\x3c/a\x3e"};
helpers.venue.deliveryLink=function(a,b){var c='\x3ca href\x3d"'+soy.$$escapeHtml(a.delivery.url)+'" '+(a.target?'target\x3d"'+soy.$$escapeHtml(a.target)+'"':"")+"\x3e";if(null==a.delivery.provider?0:a.delivery.provider.name){var d="";switch(null==a.delivery.provider?null:a.delivery.provider.name){case "seamless":d+="Seamless";break;case "grubhub":d+="Grubhub";break;case "deliverydotcom":d+="delivery.com";break;default:d+=soy.$$escapeHtml(null==a.delivery.provider?null:a.delivery.provider.name)}c+=
"Order from "+soy.$$escapeHtml(d)}else c+="Order Delivery";return c+"\x3c/a\x3e"};
helpers.venue.phoneNumber=function(a,b){var c="";if((null==a.venue.contact?0:a.venue.contact.phone)&&(null==a.venue.contact?0:a.venue.contact.formattedPhone))var d='\x3cspan class\x3d"tel" itemprop\x3d"telephone"\x3e'+soy.$$escapeHtml(a.venue.contact.formattedPhone)+"\x3c/span\x3e",c=c+(a.asLink?'\x3ca href\x3d"tel:'+soy.$$escapeHtml(a.venue.contact.phone)+'"\x3e'+soy.$$escapeHtml(d&&d.contentKind&&d.contentKind==goog.soy.data.SanitizedContentKind.HTML?d:soydata.VERY_UNSAFE.ordainSanitizedHtml(d))+
"\x3c/a\x3e":soy.$$escapeHtml(d&&d.contentKind&&d.contentKind==goog.soy.data.SanitizedContentKind.HTML?d:soydata.VERY_UNSAFE.ordainSanitizedHtml(d)));return c};helpers.venue.directionsHref=function(a,b){return"http://maps.google.com/maps?daddr\x3d"+helpers.venue.routingLatLng(a)};
helpers.venue.routingLatLng=function(a,b){return function(){var b="";if(a.setLabeledLatLngByDefault&&a.location.labeledLatLngs&&0<a.location.labeledLatLngs.length)var d=_.filter(a.location.labeledLatLngs,function(a){return"routing"===a.label}),b=b+(0<d.length?soy.$$escapeHtml(d[0].lat)+","+soy.$$escapeHtml(d[0].lng):soy.$$escapeHtml(a.location.lat)+","+soy.$$escapeHtml(a.location.lng));else b+=soy.$$escapeHtml(a.location.lat)+","+soy.$$escapeHtml(a.location.lng);return b}()};
helpers.venue.cityState=function(a,b){return helpers.venue.concreteCityState_(a)};helpers.venue.addressWithCross=function(a,b){return helpers.venue.concreteAddressWithCross_(a)};
helpers.venue.addressCityState=function(a,b){return function(){var b="",d=helpers.venue.concreteAddressWithCross_(a),e=helpers.venue.concreteCityState_(a);return b+=soy.$$escapeHtml(function(a){return a&&a.contentKind&&a.contentKind==goog.soy.data.SanitizedContentKind.HTML?a:soydata.VERY_UNSAFE.ordainSanitizedHtml(a)}(_([d,e]).filter(function(a){return fourSq.isDefinedAndNotNull(a)&&""!=a}).join(", ")))}()};
helpers.venue.addressCityStateNoCross=function(a,b){return function(){var b="",d=helpers.venue.concreteCityState_(a),e=soy.$$escapeHtml(null!=a.location.address?a.location.address:"");return b+=soy.$$escapeHtml(function(a){return a&&a.contentKind&&a.contentKind==goog.soy.data.SanitizedContentKind.HTML?a:soydata.VERY_UNSAFE.ordainSanitizedHtml(a)}(_([e,d]).filter(function(a){return fourSq.isDefinedAndNotNull(a)&&""!=a}).join(", ")))}()};
helpers.venue.sips=function(a,b){for(var c="",d=a.phrases,e=d.length,f=0;f<e;f++)var g=d[f],c=c+('\x3cdiv class\x3d"example"\x3e'+soy.$$escapeHtml(g.exampleBefore)+' \x3cspan class\x3d"phrase"\x3e'+soy.$$escapeHtml(g.phrase)+"\x3c/span\x3e "+soy.$$escapeHtml(g.exampleAfter)+"\x3c/div\x3e");return c};helpers.venue.concreteCityState_=function(a,b){return function(){return soy.$$escapeHtml(_([a.location.city,a.location.state]).filter(function(a){return fourSq.isDefinedAndNotNull(a)&&""!=a}).join(", "))}()};
helpers.venue.concreteAddressWithCross_=function(a,b){return function(){var b="",d=helpers.venue.concreteParenedCrossStreet_(a),e=soy.$$escapeHtml(null!=a.location.address?a.location.address:"");return b+=soy.$$escapeHtml(function(a){return a&&a.contentKind&&a.contentKind==goog.soy.data.SanitizedContentKind.HTML?a:soydata.VERY_UNSAFE.ordainSanitizedHtml(a)}(_([e,d]).filter(function(a){return fourSq.isDefinedAndNotNull(a)&&""!=a}).join(" ")))}()};
helpers.venue.concreteParenedCrossStreet_=function(a,b){return a.location.crossStreet?"("+soy.$$escapeHtml(a.location.crossStreet)+")":""};helpers.venue.venueCanonicalNameInParens=function(a,b){return a.venue.canonicalName?'\x3cdiv\x3e\x3cspan class\x3d"venueCanonicalName"\x3e('+soy.$$escapeHtml(a.venue.canonicalName)+")\x3c/span\x3e\x3c/div\x3e":""};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.venue&&(templates.fourSq.venue={});"undefined"==typeof templates.fourSq.venue.helpers&&(templates.fourSq.venue.helpers={});
templates.fourSq.venue.helpers.compact=function(a,b){return'\x3cdiv class\x3d"venueCompact box"\x3e\x3cdiv class\x3d"venueIcon"\x3e'+helpers.venue.primaryCategoryIcon({categories:a.venue.categories})+(a.venue.specials&&a.useNewListStyle?a.venue.specials.items&&0<a.venue.specials.items.length?'\x3cimg src\x3d"'+helpers.special.iconUrl(a.venue.specials.items[0])+'" class\x3d"specialImage" title\x3d"'+soy.$$escapeHtml(a.venue.specials.items[0].title)+'" /\x3e':"":a.venue.specials&&0<a.venue.specials.length?
'\x3cimg src\x3d"'+helpers.special.iconUrl(a.venue.specials[0])+'" class\x3d"specialImage" title\x3d"'+soy.$$escapeHtml(a.venue.specials[0].title)+'" /\x3e':"")+"\x3c/div\x3e"+helpers.venue.venueCard(soy.$$augmentMap(a,{displayFullAddress:!1}))+(a.showOldListControl?'\x3cdiv id\x3d"listControlHolder" class\x3d"listControlHolder"\x3e\x3c/div\x3e':"")+templates.fourSq.venue.helpers.map({venueId:a.venue.id})+(a.showBeenHereControl||a.showSaveControl?'\x3cdiv class\x3d"venueButtons"\x3e'+(a.showBeenHereControl?
templates.fourSq.ui.beenhere.beenHereButton({been:a.beenHere}):"")+(a.showSaveControl?templates.fourSq.ui.save.saveButton(a):"")+"\x3c/div\x3e":"")+(a.venue.location&&a.venue.location.isFuzzed?'\x3cdiv class\x3d"homeVenue"\x3eSince this is a home, the exact location is not shared here. This map is of the approximate area.\x3c/div\x3e':"")+"\x3c/div\x3e"};templates.fourSq.venue.helpers.map=function(a,b){return'\x3cdiv class\x3d"vmap" id\x3d"vmap-'+soy.$$escapeHtml(a.venueId)+'"\x3e\x3c/div\x3e'};
templates.fourSq.venue.helpers.categoryList=function(a,b){var c="";if(a.categories&&0==a.categories.length)c+="Uncategorized";else if(a.categories){var d=templates.fourSq.venue.helpers.venueToNear(a);d=d&&d.contentKind&&d.contentKind==goog.soy.data.SanitizedContentKind.HTML?d:soydata.VERY_UNSAFE.ordainSanitizedHtml(d);if(a.withConjunction)c+=templates.fourSq.venue.helpers.categoryListWithConjunction({categories:a.categories,near:d,noLink:a.noLink});else for(var e=a.categories,f=e.length,g=0;g<f;g++)c+=
(0!=g?", ":"")+templates.fourSq.venue.helpers.categoryLink({category:e[g],near:d,noLink:a.noLink})}return c};
templates.fourSq.venue.helpers.categoryListWithConjunction=function(a,b){var c="";switch(a.categories.length){case 1:c+=templates.fourSq.venue.helpers.categoryLink({category:a.categories[0],near:a.near,noLink:a.noLink});break;case 2:c+=templates.fourSq.venue.helpers.categoryLink({category:a.categories[0],near:a.near,noLink:a.noLink})+" and "+templates.fourSq.venue.helpers.categoryLink({category:a.categories[1],near:a.near,noLink:a.noLink});break;case 3:c+=templates.fourSq.venue.helpers.categoryLink({category:a.categories[0],
near:a.near,noLink:a.noLink})+", "+templates.fourSq.venue.helpers.categoryLink({category:a.categories[1],near:a.near,noLink:a.noLink})+", and "+templates.fourSq.venue.helpers.categoryLink({category:a.categories[2],near:a.near,noLink:a.noLink});break;default:for(var d=a.categories,e=d.length,f=0;f<e;f++)c+=(0!=f?", "+(f==e-1?"and ":""):"")+templates.fourSq.venue.helpers.categoryLink({category:d[f],near:a.near,noLink:a.noLink})}return c};
templates.fourSq.venue.helpers.categoryLink=function(a,b){var c;c=a.shortName?a.category.shortName:a.category.name;return c=""+("4bf58dd8d48988d103941735"==a.category.id||a.noLink?'\x3cspan class\x3d"unlinkedCategory"\x3e'+soy.$$escapeHtml(c)+"\x3c/span\x3e":'\x3ca class\x3d"categoryLink" href\x3d"'+templates.fourSq.venue.helpers.categoryHref(a)+'"\x3e'+soy.$$escapeHtml(c)+"\x3c/a\x3e")};
templates.fourSq.venue.helpers.categoryHref=function(a,b){return"4bf58dd8d48988d103941735"!=a.category.id?"/explore?q\x3d"+soy.$$escapeHtml(a.category.name)+"\x26near\x3d"+soy.$$escapeHtml(a.near):""};templates.fourSq.venue.helpers.venueToNear=function(a,b){return((null==a.venue?0:a.venue.location.neighborhood)?soy.$$escapeHtml(a.venue.location.neighborhood)+" ":"")+helpers.venue.cityState(a.venue)};
templates.fourSq.venue.helpers.neighborhood=function(a,b){return' \x26middot; \x3cspan class\x3d"neighborhood"\x3e'+soy.$$escapeHtml(a.venue.location.neighborhood)+"\x3c/span\x3e"};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.likesDialog&&(templates.fourSq.likesDialog={});templates.fourSq.likesDialog.title=function(a,b){return"Likes"};
templates.fourSq.likesDialog.row=function(a,b){return'\x3ca href\x3d"'+helpers.user.href(a.liker)+'" class\x3d"like"'+(a.openLinksInNewWindow?' target\x3d"_blank"':"")+"\x3e"+helpers.user.xsmallImage(a.liker)+'\x3cspan class\x3d"details"\x3e\x3cspan class\x3d"name"\x3e'+helpers.user.shortName(a.liker)+'\x3c/span\x3e \x3cbr/\x3e\x3cspan class\x3d"homeCity"\x3e'+(a.liker.homeCity?soy.$$escapeHtml(a.liker.homeCity):"\x26nbsp;")+'\x3c/span\x3e\x3c/span\x3e\x3cspan class\x3d"viewProfile greyButton"\x3eView Profile\x3c/span\x3e\x3c/a\x3e'};
templates.fourSq.likesDialog.loadFailed=function(a,b){return'\x3cp class\x3d"errorMessage"\x3eThere was a problem finding the people that like this. Please try again later.\x3c/p\x3e'};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.map&&(templates.fourSq.map={});"undefined"==typeof templates.fourSq.map.tooltip&&(templates.fourSq.map.tooltip={});
templates.fourSq.map.tooltip.venue=function(a,b){return'\x3cdiv class\x3d"mapTooltip '+(a.orange?"orange":"blue")+' mapVenueTooltip"\x3e'+(a.showCarat?'\x3cspan class\x3d"tooltipCarat"\x3e\x3c/span\x3e':"")+'\x3cp class\x3d"name"\x3e'+helpers.venue.nameWithLink(a)+'\x3c/p\x3e\x3cp class\x3d"address"\x3e'+helpers.venue.addressWithCross(a.venue)+"\x3c/p\x3e\x3c/div\x3e"};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.ui&&(templates.fourSq.ui={});"undefined"==typeof templates.fourSq.ui.facepiles&&(templates.fourSq.ui.facepiles={});templates.fourSq.ui.facepiles.likesPlaceholder=function(a,b){return'\x3cdiv class\x3d"likesFacepileSection"\x3e\x3cdiv class\x3d"likesTitle"\x3e\x3c/div\x3e\x3cdiv class\x3d"likesFacepile"\x3e\x3cdiv class\x3d"facepileContainer"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'};
templates.fourSq.ui.facepiles.likesTitle=function(a,b){return(a.like?0<a.likesCount?1==a.likesCount?"\x3cstrong\x3eYou\x3c/strong\x3e and \x3cstrong\x3e"+soy.$$escapeHtml(a.likesCount)+" person\x3c/strong\x3e like this":"\x3cstrong\x3eYou\x3c/strong\x3e and \x3cstrong\x3e"+soy.$$escapeHtml(a.likesCount)+" people\x3c/strong\x3e like this":"\x3cstrong\x3eYou\x3c/strong\x3e like this":1==a.likesCount?"\x3cstrong\x3e"+soy.$$escapeHtml(a.likesCount)+" person\x3c/strong\x3e likes this":"\x3cstrong\x3e"+
soy.$$escapeHtml(a.likesCount)+" people\x3c/strong\x3e like this")+" "+(0<a.friendLikesCount?"("+(1==a.friendLikesCount?soy.$$escapeHtml(a.friendLikesCount)+" friend":soy.$$escapeHtml(a.friendLikesCount)+" friends")+")":"")};
templates.fourSq.ui.facepiles.likes=function(a,b){for(var c="",d=a.likers,e=d.length,f=0;f<e;f++)c+=helpers.user.xsmallImageWLink(soy.$$augmentMap(d[f],{linkClass:"facepileLink",extraImgClass:"facepileFace"}));return c+=a.additionalLikes&&0<a.additionalLikes?'\x3cspan class\x3d"additionalLikes"\x3e+'+soy.$$escapeHtml(a.additionalLikes)+"\x3c/span\x3e":""};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.ui&&(templates.fourSq.ui={});"undefined"==typeof templates.fourSq.ui.ellipsis&&(templates.fourSq.ui.ellipsis={});templates.fourSq.ui.ellipsis.textWithEllipsis=function(a,b){return soy.$$escapeHtml(a.text)+'\x3cspan class\x3d"ellipsis"\x3e...\x3c/span\x3e'};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.venue&&(templates.fourSq.venue={});"undefined"==typeof templates.fourSq.venue.facepile&&(templates.fourSq.venue.facepile={});
templates.fourSq.venue.facepile.maybeRenderFacepile=function(a,b){return 0<(null!=(null==a.friendVisits?null:a.friendVisits.items)?null==a.friendVisits?null:a.friendVisits.items:[]).length&&(1!=(null!=(null==a.friendVisits?null:a.friendVisits.items)?null==a.friendVisits?null:a.friendVisits.items:[]).length||(null==a.friendVisits?null:null==a.friendVisits.items?null:a.friendVisits.items[0].user.id)!=a.currentUserId)?'\x3cdiv class\x3d"facepile"\x3e'+templates.fourSq.venue.facepile.renderFaceRecursive_({index:0,
numRendered:0,currentUserId:a.currentUserId,friendVisits:a.friendVisits,maxFaces:a.maxFaces,includeSummaryText:a.includeSummaryText})+"\x3c/div\x3e":""};
templates.fourSq.venue.facepile.renderSingleFace_=function(a,b){var c="",d=a.friendVisits.items[a.index],e=templates.fourSq.venue.facepile.facepileFaceTooltipText({item:d});return c+='\x3cdiv class\x3d"face"\x3e\x3ca href\x3d"'+helpers.user.href(d.user)+'"'+(e&&" "!=e?'title\x3d"'+soy.$$escapeHtml(e&&e.contentKind&&e.contentKind==goog.soy.data.SanitizedContentKind.HTML?e:soydata.VERY_UNSAFE.ordainSanitizedHtml(e))+'" class\x3d"tooltip"':"")+'target\x3d"_blank"\x3e'+helpers.user.mediumImage(d.user)+
templates.fourSq.venue.facepile.facepileFaceBadges({item:d})+"\x3c/a\x3e\x3c/div\x3e"};
templates.fourSq.venue.facepile.renderFaceRecursive_=function(a,b){var c="";if(a.index<=a.friendVisits.items.length-1&&a.numRendered<a.maxFaces)c+=a.currentUserId!=a.friendVisits.items[a.index].user.id?templates.fourSq.venue.facepile.renderSingleFace_(a)+templates.fourSq.venue.facepile.renderFaceRecursive_({currentUserId:a.currentUserId,friendVisits:a.friendVisits,index:a.index+1,numRendered:a.numRendered+1,maxFaces:a.maxFaces,includeSummaryText:a.includeSummaryText}):templates.fourSq.venue.facepile.renderFaceRecursive_({currentUserId:a.currentUserId,
friendVisits:a.friendVisits,index:a.index+1,numRendered:a.numRendered,maxFaces:a.maxFaces,includeSummaryText:a.includeSummaryText});else var d=a.friendVisits.count-a.index,c=c+(1==d&&a.index<a.friendVisits.items.length?templates.fourSq.venue.facepile.renderSingleFace_(a):1<=d?'\x3cdiv class\x3d"remainder" title\x3d"'+(0==d?"No other friends have been here":1==d?"1 other friend has been here":soy.$$escapeHtml(d)+" other friends have been here")+'"\x3e+'+soy.$$escapeHtml(d)+"\x3c/div\x3e":a.includeSummaryText?
'\x3cdiv class\x3d"summary"\x3e'+(1==a.numRendered?templates.fourSq.venue.facepile.facepileFaceTooltipText({item:null==a.friendVisits?null:null==a.friendVisits.items?null:a.friendVisits.items[a.index-1]}):"have been here")+"\x3c/div\x3e":"");return c};
templates.fourSq.venue.facepile.facepileFaceTooltipText=function(a,b){return(a.item.user&&"facebook"==a.item.user.relationship?a.item.liked?templates.fourSq.venue.facepile.facepileFaceTooltipFBLiked(a):a.item.disliked?templates.fourSq.venue.facepile.facepileFaceTooltipFBDisliked(a):a.item.tips&&0<a.item.tips?templates.fourSq.venue.facepile.facepileFaceTooltipFBTip(a):a.item.visitedCount&&0<a.item.visitedCount?templates.fourSq.venue.facepile.facepileFaceTooltipFBCheckin(a):a.item.photos&&0<a.item.photos?
templates.fourSq.venue.facepile.facepileFaceTooltipFBPhotos(a):"":a.item.liked?templates.fourSq.venue.facepile.facepileFaceTooltipLiked(a):a.item.disliked?templates.fourSq.venue.facepile.facepileFaceTooltipDisliked(a):a.item.tips&&0<a.item.tips?templates.fourSq.venue.facepile.facepileFaceTooltipTip(a):a.item.visitedCount&&0<a.item.visitedCount?templates.fourSq.venue.facepile.facepileFaceTooltipCheckin(a):a.item.photos&&0<a.item.photos?templates.fourSq.venue.facepile.facepileFaceTooltipPhotos(a):"")+
(a.item.liked||a.item.disliked?" "+templates.fourSq.venue.facepile.facepileFaceTooltipStats({item:a.item,minToShow:0}):" "+templates.fourSq.venue.facepile.facepileFaceTooltipStats({item:a.item,minToShow:1}))};
templates.fourSq.venue.facepile.facepileFaceTooltipStats=function(a,b){return a.item.tips&&a.item.tips>a.minToShow&&a.item.visitedCount&&a.item.visitedCount>a.minToShow?"("+templates.fourSq.venue.facepile.facepileFaceTooltipCheckinCount(a)+", "+templates.fourSq.venue.facepile.facepileFaceTooltipTipCount(a)+")":a.item.tips&&a.item.tips>a.minToShow?"("+templates.fourSq.venue.facepile.facepileFaceTooltipTipCount(a)+")":a.item.visitedCount&&a.item.visitedCount>a.minToShow?"("+templates.fourSq.venue.facepile.facepileFaceTooltipCheckinCount(a)+
")":""};templates.fourSq.venue.facepile.facepileFaceTooltipCheckinCount=function(a,b){return 0==a.item.visitedCount?"0 check-ins":1==a.item.visitedCount?"1 check-in":soy.$$escapeHtml(a.item.visitedCount)+" check-ins"};templates.fourSq.venue.facepile.facepileFaceTooltipTipCount=function(a,b){return 0==a.item.tips?"0 tips":1==a.item.tips?"1 tip":soy.$$escapeHtml(a.item.tips)+" tips"};
templates.fourSq.venue.facepile.facepileFaceTooltipFBLiked=function(a,b){return"Your Facebook friend "+helpers.user.shortName(a.item.user)+" likes this place."};templates.fourSq.venue.facepile.facepileFaceTooltipFBDisliked=function(a,b){return"Your Facebook friend "+helpers.user.shortName(a.item.user)+" dislikes this place."};
templates.fourSq.venue.facepile.facepileFaceTooltipFBTip=function(a,b){return 0==a.item.tips?"Your Facebook friend "+helpers.user.shortName(a.item.user)+" hasn't left a tip here.":1==a.item.tips?"Your Facebook friend "+helpers.user.shortName(a.item.user)+" left a tip here.":"Your Facebook friend "+helpers.user.shortName(a.item.user)+" left tips here."};
templates.fourSq.venue.facepile.facepileFaceTooltipFBCheckin=function(a,b){return 0==a.item.visitedCount?"Your Facebook friend "+helpers.user.shortName(a.item.user)+" has never been here.":"Your Facebook friend "+helpers.user.shortName(a.item.user)+" has been here."};
templates.fourSq.venue.facepile.facepileFaceTooltipFBPhotos=function(a,b){return 0==a.item.photos?"Your Facebook friend "+helpers.user.shortName(a.item.user)+" added no photos here.":1==a.item.photos?"Your Facebook friend "+helpers.user.shortName(a.item.user)+" added a photo here.":"Your Facebook friend "+helpers.user.shortName(a.item.user)+" added photos here."};templates.fourSq.venue.facepile.facepileFaceTooltipLiked=function(a,b){return helpers.user.shortName(a.item.user)+" likes this place."};
templates.fourSq.venue.facepile.facepileFaceTooltipDisliked=function(a,b){return helpers.user.shortName(a.item.user)+" dislikes this place."};templates.fourSq.venue.facepile.facepileFaceTooltipTip=function(a,b){return 0==a.item.tips?helpers.user.shortName(a.item.user)+" hasn't left a tip here.":1==a.item.tips?helpers.user.shortName(a.item.user)+" left a tip here.":helpers.user.shortName(a.item.user)+" left tips here."};
templates.fourSq.venue.facepile.facepileFaceTooltipCheckin=function(a,b){return 0==a.item.visitedCount?helpers.user.shortName(a.item.user)+" has never been here.":helpers.user.shortName(a.item.user)+" has been here."};templates.fourSq.venue.facepile.facepileFaceTooltipPhotos=function(a,b){return 0==a.item.visitedCount?helpers.user.shortName(a.item.user)+" added no photos here.":1==a.item.visitedCount?helpers.user.shortName(a.item.user)+" added a photo here.":helpers.user.shortName(a.item.user)+" added photos here."};
templates.fourSq.venue.facepile.facepileFaceBadges=function(a,b){return(a.item.liked?'\x3cimg class\x3d"like" src\x3d"'+soy.$$escapeHtml("https://ss1.4sqi.net/img/icon-mini-like-1068a0fee5001064ad830e41a4f42df2.png")+'" /\x3e':"")+(a.item.disliked?'\x3cimg class\x3d"like" src\x3d"'+soy.$$escapeHtml("https://ss1.4sqi.net/img/icon-mini-dislike-74f4b7c56a4ee8cd68b3ca3a0dae52ad.png")+'" /\x3e':"")};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.lists&&(templates.fourSq.lists={});templates.fourSq.lists.tipEditorControl=function(a,b){return'\x3cdiv class\x3d"super-tip-edit-menu hidden"\x3e\x3cdiv class\x3d"tip-top"\x3e\x3cdiv class\x3d"arr"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"tips-bottom"\x3e\x3cdiv class\x3d"no-results"\x3e\x3cdiv class\x3d"heady"\x3eThere aren\'t any tips at this venue yet.\x3c/div\x3e\x3cdiv class\x3d"do-it"\x3eAdd your own!\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"results-container listpagepopupscrollbar"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'};
templates.fourSq.lists.tipEditorResults=function(a,b){var c='\x3cdiv class\x3d"results"\x3e';if(0<a.userTips.length){for(var c=c+'\x3cdiv class\x3d"tip-section-header"\x3eYour Tips\x3c/div\x3e\x3cdiv class\x3d"tips-section"\x3e',d=a.userTips,e=d.length,f=0;f<e;f++)var g=d[f],c=c+templates.fourSq.lists.tipEditorResultItem({tip:g.tip,user:g.user});c+="\x3c/div\x3e"}if(a.otherTips.length){c+='\x3cdiv class\x3d"tip-section-header"\x3eTips from the foursquare community\x3c/div\x3e\x3cdiv class\x3d"tips-section"\x3e';
d=a.otherTips;e=d.length;for(f=0;f<e;f++)g=d[f],c+=templates.fourSq.lists.tipEditorResultItem({tip:g.tip,user:g.user});c+="\x3c/div\x3e"}return c+"\x3c/div\x3e"};
templates.fourSq.lists.tipEditorResultItem=function(a,b){return'\x3cdiv class\x3d"result" tip-id\x3d"'+soy.$$escapeHtml(a.tip.id)+'"\x3e\x3cdiv class\x3d"s-tip"\x3e\x3cdiv class\x3d"tip-text"\x3e'+soy.$$escapeHtml(a.tip.text)+'\x3c/div\x3e\x3cdiv class\x3d"tip-attribution"\x3e'+helpers.user.image(soy.$$augmentMap(a.user,{size:20}))+'\x3cspan class\x3d"user"\x3e'+helpers.user.fullName(a.user)+"\x3c/span\x3e"+(a.tip.done&&1<a.tip.done.count?'\x3cspan class\x3d"pipe"\x3e\x26middot;\x3c/span\x3e\x3cspan\x3eDone by '+
soy.$$escapeHtml(a.tip.done.count)+" people\x3c/span\x3e.":"")+(a.tip.likes&&1<a.tip.likes.count?'\x3cspan class\x3d"pipe"\x3e\x26middot;\x3c/span\x3e\x3cspan\x3eLiked by '+soy.$$escapeHtml(a.tip.likes.count)+" people\x3c/span\x3e.":"")+"\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e"};
templates.fourSq.lists.venueInRelatedList=function(a,b){return'\x3cdiv venue-id\x3d"'+soy.$$escapeHtml(a.id)+'" class\x3d"venue" title\x3d"'+soy.$$escapeHtml(a.address)+'"\x3e\x3cspan class\x3d"name"\x3e'+soy.$$escapeHtml(a.name)+"\x3c/span\x3e\x3c/div\x3e"};templates.fourSq.lists.listEditedWarning=function(a,b){return'\x3cdiv id\x3d"list-invalidated-error"\x3eThe list has changed a little bit. \x3ca href\x3d"'+soy.$$escapeHtml(a.url)+'"\x3eRefresh to see the latest\x3c/a\x3e and keep editing.\x3c/div\x3e'};
templates.fourSq.lists.itemPhoto=function(a,b){a=a||{};return a.photo?helpers.photo.img300x300(soy.$$augmentMap(a.photo,{extraImgClass:"list-page-image"})):""};
templates.fourSq.lists.venueInEditorList=function(a,b){return'\x3cdiv item-id\x3d"'+soy.$$escapeHtml(a.itemId)+'" class\x3d"s-list-item editor-hidden'+(a.tip?" has-tip":"")+(a.photo?" has-photo":"")+(a.canEdit?" can-edit":"")+(a.canDelete?" can-delete":"")+'"\x3e\x3cdiv class\x3d"loading"\x3e\x3c/div\x3e\x3cdiv class\x3d"dragger"\x3e\x3c/div\x3e\x3cdiv class\x3d"photo-section"\x3e\x3cdiv class\x3d"super-photo-edit photo-picker small'+(a.photo?"":" no-photo")+'"\x3e\x3cdiv class\x3d"current-photo"\x3e'+
templates.fourSq.lists.itemPhoto(a)+'\x3c/div\x3e\x3cdiv class\x3d"selector-button flatButton"\x3e'+(a.photo?"Change photo":"Add a photo")+' \x26#x25BE;\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3ch2\x3e\x3cspan class\x3d"number-rail"\x3e\x3cdiv class\x3d"number dig-'+soy.$$escapeHtml(a.itemNumberDigits)+'"\x3e\x3cspan class\x3d"digits"\x3e'+soy.$$escapeHtml(a.itemNumber)+"\x3c/span\x3e\x3c/div\x3e. \x3c/span\x3e"+helpers.venue.nameWithLink(a)+(a.categoryName?'\x3cspan class\x3d"category"\x3e'+soy.$$escapeHtml(a.categoryName)+
"\x3c/span\x3e":"")+'\x3c/h2\x3e\x3cdiv class\x3d"address"\x3e'+soy.$$escapeHtml(a.venueDisplayAddress)+'\x3c/div\x3e\x3cdiv class\x3d"tip-area'+(a.tip?" tip-view":" tip-edit")+'"\x3e\x3cdiv class\x3d"tip-edit"\x3e\x3cdiv class\x3d"super-tip-edit minimized"\x3e\x3ctextarea class\x3d"personal-tip" tabindex\x3d"-1"\x3eAdd a tip for this place\x3c/textarea\x3e\x3cdiv class\x3d"or-and-selector"\x3e\x3cspan class\x3d"or"\x3eOR\x3c/span\x3e\x3cdiv class\x3d"selector-button greyButton"\x3eSelect a tip \x26#x25BE;\x3cspan class\x3d"arr"\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"tip-actions"\x3e\x3cdiv class\x3d"error-info"\x3e\x3c/div\x3e\x3cdiv class\x3d"disclaimer"\x3eEveryone will be able to see this tip. Make it helpful!\x3c/div\x3e\x3cspan class\x3d"tip-char-count text-char-count"\x3e\x3c/span\x3e\x3cdiv class\x3d"buttons"\x3e'+
(a.canUploadTipPhoto&&!a.venue.restricted?helpers.photoupload.photoUploadControl({inputName:"tipPhoto",action:"/__uploadtipphoto",addButtonHolderClass:"photoButton"}):"")+'\x3cdiv class\x3d"link-add-container"\x3e\x3cspan class\x3d"link-button" title\x3d"Add a link"\x3e\x3c/span\x3e\x3cinput type\x3d"text" class\x3d"link-text-input" /\x3e\x3c/div\x3e\x3cbutton class\x3d"disabledButton editButton tip-save-button greenButton"\x3eSave Tip\x3c/button\x3e\x3cspan class\x3d"editButton cancel-button"\x3eCancel\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"tip-view"\x3e'+
(a.tip?'\x3cdiv class\x3d"s-tip"\x3e\x3cp\x3e'+helpers.entities.textWithEntitiesLinks({text:a.tip.text,entities:a.tip.entities,dataSource:"tip-text"})+(a.tip.url?'\x3cspan class\x3d"tip-url"\x3e'+helpers.tip.readMoreLink(a.tip)+".\x3c/span\x3e":"")+'\x3c/p\x3e\x3cp class\x3d"tip-attribution"\x3e'+helpers.user.fullNameWLink(a.tipUser)+" \x26middot; \x3cspan\x3e"+helpers.util.createdAtSmartDate(a.tip)+'\x3c/span\x3e\x3cspan class\x3d"tip-delete-holder"\x3e\x26emsp;\x26emsp;\x3cspan class\x3d"tip-delete-link link"\x3eRemove Tip\x3c/span\x3e\x3c/span\x3e\x3c/p\x3e\x3c/div\x3e':
"")+"\x3c/div\x3e"+(a.contributorUser?a.contributorIsSelf?'\x3cdiv class\x3d"attribution"\x3eYou added this item.\x3c/div\x3e':'\x3cdiv class\x3d"attribution"\x3e'+helpers.user.fullNameWLink(a.contributorUser)+" added this item.\x3c/div\x3e":"")+'\x3c/div\x3e\x3cdiv class\x3d"actions"\x3e\x3cspan class\x3d"delete-item link"\x3e\x3c/span\x3e\x3cdiv class\x3d"just-added"\x3ePlace added!\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'};
templates.fourSq.lists.listEditorPageContents=function(a,b){return'\x3cdiv id\x3d"tip-list-creator" class\x3d"twoColumns tiplistPage tiplistEditPage empty loading"\x3e\x3cdiv id\x3d"modal-loading"\x3e\x3c/div\x3e\x3cdiv class\x3d"list-edit-details view"\x3e\x3cdiv class\x3d"left-details wideColumn"\x3e\x3cdiv class\x3d"photo-section"\x3e\x3cdiv class\x3d"photo-picker large '+(a.photoId?"has-photo":"no-photo")+'"\x3e\x3cdiv class\x3d"current-photo-holder"\x3e'+(a.photoId&&a.photoUrl?'\x3cimg class\x3d"list-page-image" src\x3d"'+
soy.$$escapeHtml(a.photoUrl)+'" /\x3e':"")+"\x3c/div\x3e"+(a.isOwner?'\x3cdiv class\x3d"selector-button flatButton"\x3ePhoto \x26#x25BE;\x3c/span\x3e\x3c/div\x3e':"")+'\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"name-desc-section"\x3e\x3cdiv class\x3d"viewer"\x3e\x3cdiv class\x3d"input name"\x3e'+soy.$$escapeHtml(a.listName)+'\x3c/div\x3e\x3cdiv class\x3d"input desc '+(a.listDescription?"has-desc":"no-desc")+'"\x3e'+(a.listDescription?soy.$$escapeHtml(a.listDescription):"")+'\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"editor"\x3e\x3cinput type\x3d"text" class\x3d"input name" maxlength\x3d"50"/\x3e\x3ctextarea class\x3d"input desc"\x3e\x3c/textarea\x3e\x3cdiv class\x3d"buttons"\x3e\x3cspan class\x3d"desc-char-count text-char-count hidden"\x3e\x3c/span\x3e\x3cdiv class\x3d"area save-area"\x3e\x3cdiv class\x3d"greenButton save-link"\x3eSave\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"area cancel-area"\x3e\x3cspan class\x3d"cancel-link"\x3eCancel\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"right-details narrowColumn"\x3e\x3cdiv id\x3d"actionBar" class\x3d"box donesies"\x3e\x3cdiv class\x3d"actionContainer"\x3e\x3ca class\x3d"actionButton greenButton" href\x3d"'+
soy.$$escapeHtml(a.listUri)+'"\x3eFinished Editing\x3c/a\x3e'+(a.isOwner?'\x3ca class\x3d"delete-link actionButton greyButton" title\x3d"Delete this list"\x3eDelete\x3c/a\x3e':"")+'\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"box edit-settings"\x3e'+(a.ownerCollaborationUpsellHtml?soy.$$filterNoAutoescape(a.ownerCollaborationUpsellHtml):"")+'\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"creator-container"\x3e\x3cdiv class\x3d"main-content wideColumn"\x3e\x3cdiv id\x3d"add-by-id"\x3e\x3c/div\x3e\x3cdiv class\x3d"listStickyView" style\x3d"display: none" id\x3d"search-listspacer"\x3e\x3c/div\x3e\x3cdiv class\x3d"listStickyView searchSticky"\x3e\x3cdiv class\x3d"super-search-container"\x3e\x3cdiv class\x3d"super-search-box location-view"\x3e\x3cspan class\x3d"plus"\x3e\x3c/span\x3e\x3cinput type\x3d"text" class\x3d"venue-input formStyle" value\x3d\'Search for a place\' /\x3e\x3cdiv class\x3d"locationer"\x3e\x3cdiv class\x3d"location-view"\x3e'+
(a.initialLocationText?'\x3cspan class\x3d"in"\x3ein \x3c/span\x3e\x3cspan class\x3d"location"\x3e'+soy.$$escapeHtml(a.initialLocationText)+"\x3c/span\x3e":"")+'\x3c/div\x3e\x3cdiv class\x3d"location-edit"\x3e\x3cinput type\x3d"text" class\x3d"location formStyle" value\x3d"" /\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"suggested-venues loading"\x3e\x3cdiv class\x3d"label"\x3e\x3cspan class\x3d"title"\x3eSuggested places:\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"content"\x3e\x3cspan class\x3d"loading"\x3eloading...\x3c/span\x3e\x3cspan class\x3d"no-suggestions"\x3eNo suggestions yet. Try adding some more places!\x3c/span\x3e\x3cspan class\x3d"venues-container"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"more-link"\x3e\x3c/div\x3e\x3cdiv class\x3d"less-link"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"edit-edu"\x3e\x3cimg src\x3d"'+
soy.$$escapeHtml("https://ss1.4sqi.net/img/lists/list_edu_marsbot-2e4042b7e6a940703760907608007972.png")+'" /\x3e\x3ch2\x3eEnter a place name to start building your list\x3c/h2\x3e\x3cp\x3eThe whole world can see this list, so show off all your insider tips!\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"new-list-places"\x3e\x3cdiv class\x3d"tips places-list loading"\x3e\x3cdiv class\x3d"places"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"drag-structions" class\x3d"not-empty-content hidden"\x3e\x3cspan class\x3d"hint"\x3ePro tip: Reorder your list by dragging the items up or down.\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"sidebar narrowColumn mapColumn"\x3e\x3cdiv class\x3d"listStickyView" style\x3d"display: none" id\x3d"map-listspacer"\x3e\x3c/div\x3e\x3cdiv class\x3d"listStickyView"\x3e\x3cdiv id\x3d"listEditMap" class\x3d"map-container"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'};
templates.fourSq.lists.currentListPhotoNode=function(a,b){return helpers.photo.img300x300(soy.$$augmentMap(a.photo,{extraImgClass:"list-page-image"}))};templates.fourSq.lists.listEditorDescriptionLabel=function(a,b){return"Click here to add a description"};templates.fourSq.lists.tipAlreadyOnListWarning=function(a,b){return"Whoa! That tip has already been added to this list."};templates.fourSq.lists.placeAlreadyOnListWarning=function(a,b){return"Whoa! That place has already been added to this list."};
templates.fourSq.lists.maximumNumberOfListItemsWarning=function(a,b){return"Awesome list, but, right now, they can only be 200 places long. Start another one?"};templates.fourSq.lists.confirmTipRemoval=function(a,b){return"Are you sure you want to remove this tip?"};templates.fourSq.lists.uploadPhotoError=function(a,b){return"Upload failed! Check your connection or try a smaller file."};templates.fourSq.lists.addVenuesById=function(a,b){return'Add multiple venues by venueId, one per line\x3cdiv class\x3d"addVenuesById"\x3e\x3cdiv class\x3d"editor"\x3e\x3ctextarea id\x3d"venueIds" class\x3d"input desc"\x3e\x3c/textarea\x3e\x3cdiv class\x3d"buttons"\x3e\x3cdiv class\x3d"greenButton save-link"\x3eSave\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.lists&&(templates.fourSq.lists={});
templates.fourSq.lists.editItemContainer=function(a,b){return'\x3cdiv id\x3d"EditListItemContainer"\x3e\x3ch3\x3eSelect a photo for '+helpers.venue.nameWithLink(soy.$$augmentMap(a,{target:"_blank"}))+"\x3c/h3\x3e\x3ch5\x3eThis photo will appear on your "+helpers.list.nameWithLink(a)+' list.\x3c/h5\x3e\x3chr/\x3e\x3cdiv class\x3d"friends photos"\x3e\x3cp\x3eYou and your friends\' photos\x3c/p\x3e\x3cdiv class\x3d"containerEl"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"community photos"\x3e\x3cp\x3ePhotos from the Foursquare community \x3cspan class\x3d"shuffle link"\x3e(show more)\x3c/span\x3e\x3c/p\x3e\x3cdiv class\x3d"containerEl"\x3e\x3c/div\x3e\x3c/div\x3e'+(a.venue.restricted?
"":helpers.photoupload.photoUploadControl({inputName:"venuePhoto",action:"/__uploadvenuephoto",addButtonHolderClass:"upload greyButton",text:"Upload a photo"}))+"\x3c/div\x3e"};templates.fourSq.lists.editItemDialogPhoto=function(a,b){return"public"==a.photo.visibility?'\x3cspan class\x3d"itemPhoto'+(a.selected?" selected":"")+'" data-pid\x3d"'+soy.$$escapeHtml(a.photo.id)+'"\x3e'+helpers.photo.img100x100(a.photo)+"\x3c/span\x3e":""};templates.fourSq.lists.photosFetchError=function(a,b){return"Uh-oh. There was a problem getting photos for that venue. Try again soon."};
templates.fourSq.lists.listItemPhotoUpdateSuccess=function(a,b){return"The item's photo was updated."};templates.fourSq.lists.listItemPhotoUpdateFailure=function(a,b){return"Uh-oh. There was a problem updating the list item's photo. Try again soon."};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.lists&&(templates.fourSq.lists={});templates.fourSq.lists.listChooserControl=function(a,b){return'\x3cdiv class\x3d"list-chooser hidden"\x3e\x3cdiv class\x3d"arr"\x3e\x3c/div\x3e\x3cdiv class\x3d"chooser-header"\x3e\x3cspan class\x3d"title"\x3eSave this to a list\x3c/span\x3e\x3cspan class\x3d"status-link none"\x3e\x3cspan class\x3d"status-text added"\x3eAdded to \x3ca href\x3d"#" target\x3d"_blank"\x3elist\x3c/a\x3e!\x3c/span\x3e\x3cspan class\x3d"status-text removed"\x3eRemoved from \x3ca href\x3d"#" target\x3d"_blank"\x3elist\x3c/a\x3e!\x3c/span\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"list-chooser-inner"\x3e\x3cdiv class\x3d"lists"\x3e\x3cdiv class\x3d"default-option"\x3e\x3cdiv class\x3d"a-list todo-list"\x3e\x3cinput type\x3d"checkbox"/\x3e\x3cspan class\x3d"label"\x3eMy to-do list\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"scroll-area"\x3e\x3cdiv class\x3d"other-lists loading"\x3e\x3c/div\x3e\x3cdiv class\x3d"new-list loading button"\x3e\x3cdiv class\x3d"creating-indicator"\x3e\x3c/div\x3e\x3cdiv class\x3d"button-container"\x3e\x3cdiv href\x3d"#" class\x3d"reveal-create-button greyButton newGreyButton"\x3e\x3cspan class\x3d"img" /\x3eCreate a new list\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"inputs-container"\x3e\x3cdiv class\x3d"input"\x3e\x3cinput class\x3d"new-list-name" type\x3d"text" maxLength\x3d"50" /\x3e\x3c/div\x3e\x3cdiv class\x3d"loading-submit"\x3e\x3cbutton class\x3d"create-button greenButton newGreenButton disabledButton"\x3eCreate\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'};
templates.fourSq.lists.listControl=function(a,b){return'\x3cdiv class\x3d"list-control"\x3e\x3cspan class\x3d"list-toggle-box add-link-toggle-box"\x3e\x3cspan class\x3d"add-link list-toggle"\x3eSave\x3c/span\x3e\x3c/span\x3e\x3cspan class\x3d"list-toggle-box done-link-toggle-box"\x3e\x3cspan class\x3d"done-link list-toggle"\x3eDone\x3c/span\x3e\x3c/span\x3e\x3c/div\x3e'};templates.fourSq.lists.megaListControl=function(a,b){return'\x3cdiv class\x3d"list-control mega"\x3e\x3cspan class\x3d"list-toggle-box done-link-toggle-box"\x3e\x3cdiv class\x3d"done-link list-toggle"\x3e\x3c/div\x3e\x3c/span\x3e\x3cspan class\x3d"list-toggle-box add-link-toggle-box"\x3e\x3cdiv class\x3d"add-link list-toggle"\x3eSave\x3c/div\x3e\x3c/span\x3e\x3c/div\x3e'};
templates.fourSq.lists.listCreateDialog=function(a,b){return'\x3cdiv class\x3d"new-list-dialog"\x3e\x3cdiv id\x3d"newList"\x3e\x3ch2 class\x3d"newh2"\x3eCreate a new list\x3c/h2\x3e\x3cspan class\x3d"loading-indicator"\x3e\x3c/span\x3e\x3cdiv class\x3d"placeholderWrapper"\x3e\x3cinput id\x3d"createListName" class\x3d"newFormStyle formStyle create-name" placeholder\x3d\'Enter a name, like: '+soy.$$escapeHtml(a.sampleListName)+"' value\x3d'Enter a name, like: "+soy.$$escapeHtml(a.sampleListName)+'\'/\x3e\x3cdiv id\x3d"createListButtonDiv"\x3e\x3cbutton id\x3d"createListButton" class\x3d"formStyle create-button greenButton newGreenButton disabledButton"\x3eCreate\x3c/button\x3e\x3c/div\x3e\x3cdiv class\x3d"error-info"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'};
templates.fourSq.lists.listControlCheckinDoneMessage=function(a,b){return"\x3cspan\x3eWoah, looks like you've checked-in here before. Can't undo what you've already done!\x3c/span\x3e"};templates.fourSq.lists.listControlTooltipSaveButtonWhenUnSaved=function(a,b){return"Add this to a list"};templates.fourSq.lists.listControlTooltipSaveButtonWhenUnDone=function(a,b){return"Mark this as done"};templates.fourSq.lists.newListDialogSampleListName1=function(a,b){return"Favorite coffee shops"};
templates.fourSq.lists.newListDialogSampleListName2=function(a,b){return"Best afterwork bars"};templates.fourSq.lists.newListDialogSampleListName3=function(a,b){return"Favorite date spots"};templates.fourSq.lists.newListDialogNameTooLongError=function(a,b){return"Try a shorter name?"};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.photos&&(templates.fourSq.photos={});templates.fourSq.photos.addedOn=function(a,b){return"Added "+helpers.util.smartDate(a)};templates.fourSq.photos.addTipPlaceholder=function(a,b){a=a||{};return a.venue&&a.venue.name?"Add a tip at "+soy.$$filterNoAutoescape(a.venue.name)+"...":"Add a tip..."};
templates.fourSq.photos.addTipBlock=function(a,b){return'\x3cdiv id\x3d"addTipBlock"\x3e\x3cdiv id\x3d"addTipForm"\x3e\x3cdiv id\x3d"charCount"\x3e\x3c/div\x3e\x3cdiv id\x3d"addTip"\x3e\x3ctextarea id\x3d"tipText" class\x3d"formStyle" placeholder\x3d\''+templates.fourSq.photos.addTipPlaceholder(a)+'\' cols\x3d"55" tabindex\x3d"1" rows\x3d"4"\x3e\x3c/textarea\x3e\x3c/div\x3e\x3cbutton class\x3d"shareButton greenButton"\x3eShare\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e'};
templates.fourSq.photos.miniFlagFrame=function(a,b){return'\x3cdiv class\x3d"likeDislikeControls comboRatingButton hidden"\x3e\x3cdiv class\x3d"comboRatingButtonLike"\x3e\x3cspan class\x3d"icon"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"comboRatingButtonDislike"\x3e\x3cspan class\x3d"icon"\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e'};templates.fourSq.photos.flagFrame=function(a,b){return'\x3cdiv class\x3d"photoflagFrame unknown" style\x3d"display:none"\x3e\x3ch3\x3eFlag this Photo\x3c/h3\x3e\x3cdiv class\x3d"flagForm"\x3e\x3cul\x3e\x3cli\x3e\x3cinput name\x3d"problem" type\x3d"radio" value\x3d"spam_scam" id\x3d"spam_scam"/\x3e \x3clabel for\x3d"spam_scam"\x3eSpam/Scam\x3c/label\x3e\x3c/li\x3e\x3cli\x3e\x3cinput name\x3d"problem" type\x3d"radio" value\x3d"nudity" id\x3d"nudity"/\x3e \x3clabel for\x3d"nudity"\x3eNudity\x3c/label\x3e\x3c/li\x3e\x3cli\x3e\x3cinput name\x3d"problem" type\x3d"radio" value\x3d"hate_violence" id\x3d"hate_violence"/\x3e \x3clabel for\x3d"hate_violence"\x3eHate/Violence\x3c/label\x3e\x3c/li\x3e\x3cli\x3e\x3cinput name\x3d"problem" type\x3d"radio" value\x3d"illegal" id\x3d"illegal"/\x3e \x3clabel for\x3d"illegal"\x3eIllegal\x3c/label\x3e\x3c/li\x3e\x3cli\x3e\x3cinput name\x3d"problem" type\x3d"radio" value\x3d"unrelated" id\x3d"unrelated"/\x3e \x3clabel for\x3d"unrelated"\x3eUnrelated\x3c/label\x3e\x3c/li\x3e\x3cli\x3e\x3cinput name\x3d"problem" type\x3d"radio" value\x3d"blurry" id\x3d"blurry"/\x3e \x3clabel for\x3d"blurry"\x3eBlurry / Low Quality\x3c/label\x3e\x3c/li\x3e\x3c/ul\x3e\x3cp class\x3d"noProblemMessage"\x3ePlease select a problem.\x3c/p\x3e\x3cp\x3e\x3cinput name\x3d"problem" type\x3d"button" name\x3d"submitFlag" value\x3d"Submit Flag" class\x3d"submitFlag greenButton"/\x3e\x3c/p\x3e\x3c/div\x3e\x3cdiv class\x3d"flagStatus"\x3e\x3cdiv class\x3d"status success"\x3e\x3cp\x3eYour flag was submitted successfully.\x3c/p\x3e\x3c/div\x3e\x3cdiv class\x3d"status failure"\x3e\x3cp\x3eYour flag did not submit. Please try again later.\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'};
templates.fourSq.photos.galleryPhoto=function(a,b){var c='\x3cdiv class\x3d"photo'+(a.photo.demoted?" demoted":"")+'" '+(a.photo.id?'id\x3d"'+soy.$$escapeHtml(a.photo.id)+'"':"")+"\x3e\x3cspan\x3e"+(a.photo.demoted?"":(a.showBulkEdit?'\x3cinput class\x3d"bulkEditCheckbox" type\x3d"checkbox" /\x3e':"")+(a.showVoting?'\x3cdiv class\x3d"tools"\x3e'+templates.fourSq.photos.miniFlagFrame(null)+"\x3c/div\x3e":""))+'\x3cdiv class\x3d"meta"\x3e'+(a.showTips&&a.photo.tip||a.showCheckins&&a.photo.checkin&&
a.photo.checkin.shout?'\x3cdiv class\x3d"caption"\x3e'+(a.photo.tip?soy.$$escapeHtml(a.photo.tip.text):a.photo.checkin&&a.photo.checkin.shout?soy.$$escapeHtml(a.photo.checkin.shout):"")+"\x3c/div\x3e":"")+(a.user?helpers.user.image(soy.$$augmentMap(a.user,{size:32,extraImgClass:"userPic"})):a.photo.user?helpers.user.image(soy.$$augmentMap(a.photo.user,{size:32,extraImgClass:"userPic"})):"")+'\x3cdiv class\x3d"nameDate"\x3e'+(a.user?'\x3cdiv class\x3d"name"\x3e'+helpers.user.fullNameWithPrivacy({user:a.user,
relationship:a.user.relationship})+"\x3c/div\x3e":a.photo.user?'\x3cdiv class\x3d"name"\x3e'+helpers.user.fullNameWithPrivacy({user:a.photo.user,relationship:a.photo.user.relationship})+"\x3c/div\x3e":"")+'\x3cdiv class\x3d"date"\x3e'+helpers.util.createdAtSmartDate(a.photo)+"\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e",d=helpers.photo.nearestBigger(soy.$$augmentMap(a.photo,{targetWidth:600})),e=templates.fourSq.photos.venuePhotoGenericAltText(a);return c+='\x3cimg src\x3d"'+soy.$$escapeHtml(d)+'" class\x3d"mainPhoto" alt\x3d"'+
soy.$$escapeHtml(e&&e.contentKind&&e.contentKind==goog.soy.data.SanitizedContentKind.HTML?e:soydata.VERY_UNSAFE.ordainSanitizedHtml(e))+'" /\x3e\x3c/span\x3e\x3c/div\x3e'};
templates.fourSq.photos.venuePhotoGenericAltText=function(a,b){var c="",d=a.venue?soy.$$escapeHtml(a.venue.name):a.photo.venue&&a.photo.venue.name?soy.$$escapeHtml(a.photo.venue.name):"",e=a.user?helpers.user.shortName(a.user):a.photo.user?helpers.user.shortName(a.photo.user):"",f=helpers.util.shortDate({when:a.photo.createdAt,timeZoneOffset:0});return c+=a.photo.tip&&a.showTips?soy.$$escapeHtml(a.photo.tip.text):d&&e&&f?"Photo taken at "+soy.$$escapeHtml(d)+" by "+soy.$$escapeHtml(e)+" on "+soy.$$escapeHtml(f):
""};templates.fourSq.photos.photoRanker=function(a,b){return'\x3cdiv id\x3d"overlayFrameRanker"\x3e\x3cdiv id\x3d"overlayPageRanker" class\x3d"wrap"\x3e\x3ch1\x3eClick which photo better represents this place.\x3c/h1\x3e\x3cp class\x3d"subtitle"\x3eHelp us show people on Foursquare the best photos here.\x3cbr /\x3eYou can also use the arrow keys on your keyboard to select the best photo.\x3c/p\x3e\x3cdiv id\x3d"overlayPhotoRanker"\x3e\x3c/div\x3e\x3cdiv class\x3d"skipPhotoLink link"\x3eNeither photo is good\x3c/div\x3e\x3cdiv id\x3d"photoMessages"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'};
templates.fourSq.photos.photoRankerConfirmation=function(a,b){return"Thanks! We'll use your input to help us choose the best photos to display."};templates.fourSq.photos.photoRankerPhoto=function(a,b){return'\x3cspan class\x3d"photoRankerPhoto"\x3e\x3cimg src\x3d"'+soy.$$escapeHtml(a.src)+'" id\x3d"'+soy.$$escapeHtml(a.id)+'" '+(a.size?'style\x3d"width: '+soy.$$escapeHtml(a.size)+"px; height: "+soy.$$escapeHtml(a.size)+'px"':"")+"/\x3e\x3c/span\x3e"};
templates.fourSq.photos.photoRankerPhotoFlag=function(a,b){a=a||{};return'\x3cspan class\x3d"flagPhotoRank'+(a.first?" first":"")+'"\x3e\x3ca href\x3d"#"\x3eFlag this Photo\x3c/a\x3e\x3c/span\x3e'};templates.fourSq.photos.photoRankerMessage=function(a,b){return'\x3cdiv class\x3d"photoRankerMessage"\x3e'+soy.$$escapeHtml(a.message)+"\x3c/div\x3e"};templates.fourSq.photos.photoRankLink=function(a,b){return'\x3cdiv class\x3d"rankPhotoLink link"\x3eRank these photos\x3c/div\x3e'};
templates.fourSq.photos.visibilityText=function(a,b){var c="";switch(a.visibility){case "public":c+="Public";break;case "friends":c+="Friends";break;case "private":c+="Private"}return c};templates.fourSq.photos.toggleVisibilityError=function(a,b){return"Unable to toggle photo visibility."};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.postLoginActions&&(templates.fourSq.postLoginActions={});templates.fourSq.postLoginActions.genericSuccessTitle=function(a,b){return"Success!"};templates.fourSq.postLoginActions.genericSuccessMessage=function(a,b){return"We completed the action you took before logging in."};templates.fourSq.postLoginActions.genericFailureTitle=function(a,b){return"Whoops. Fail."};
templates.fourSq.postLoginActions.genericFailureMessage=function(a,b){return"You'll need to try that again now that you've logged in. Sorry!"};templates.fourSq.postLoginActions.addFriendSuccessTitle=function(a,b){return helpers.user.friendRequestedTitle(null)};templates.fourSq.postLoginActions.addFriendSuccessMessage=function(a,b){return helpers.user.friendRequestedMessage(null)};templates.fourSq.postLoginActions.addFriendFailureTitle=function(a,b){return"Friend request failed"};
templates.fourSq.postLoginActions.addFriendFailureMessage=function(a,b){return"Whoops. We weren't able to send that friend request at this time. Please try again later."};templates.fourSq.postLoginActions.dislikeVenueSuccessTitle=function(a,b){return"Place disliked"};templates.fourSq.postLoginActions.dislikeVenueSuccessMessage=function(a,b){return"You disliked a place. The more you like and dislike, the more we learn about your tastes."};
templates.fourSq.postLoginActions.dislikeVenueFailureTitle=function(a,b){return"Whoops. Dislike failed."};templates.fourSq.postLoginActions.dislikeVenueFailureMessage=function(a,b){return"We weren't able to dislike that place for you at this time. Please try again later."};templates.fourSq.postLoginActions.okVenueSuccessTitle=function(a,b){return"Place was ok"};templates.fourSq.postLoginActions.okVenueSuccessMessage=function(a,b){return"You thought a place was okay. The more you rate places, the more we learn about your tastes."};
templates.fourSq.postLoginActions.okVenueFailureTitle=function(a,b){return"Whoops. Rating failed."};templates.fourSq.postLoginActions.okVenueFailureMessage=function(a,b){return"We weren't able to rate that place for you at this time. Please try again later."};templates.fourSq.postLoginActions.likePageSuccessTitle=function(a,b){return"You liked a page!"};templates.fourSq.postLoginActions.likePageSuccessMessage=function(a,b){return"What great taste you have."};
templates.fourSq.postLoginActions.likePageFailureTitle=function(a,b){return"Whoops. Like failed."};templates.fourSq.postLoginActions.likePageFailureMessage=function(a,b){return"We weren't able to like that page for you at this time. Please try again later."};templates.fourSq.postLoginActions.likeTipSuccessTitle=function(a,b){return"You liked a tip!"};templates.fourSq.postLoginActions.likeTipSuccessMessage=function(a,b){return"Maybe you should leave some of your own, too!"};
templates.fourSq.postLoginActions.likeTipFailureTitle=function(a,b){return"Whoops. Like failed."};templates.fourSq.postLoginActions.likeTipFailureMessage=function(a,b){return"We weren't able to like that tip for you at this time. Please try again later."};templates.fourSq.postLoginActions.upvoteTipSuccessTitle=function(a,b){return"You upvoted a tip!"};templates.fourSq.postLoginActions.upvoteTipSuccessMessage=function(a,b){return"Maybe you should leave some of your own, too!"};
templates.fourSq.postLoginActions.upvoteTipFailureTitle=function(a,b){return"Whoops. Upvote failed."};templates.fourSq.postLoginActions.upvoteTipFailureMessage=function(a,b){return"We weren't able to upvote that tip for you at this time. Please try again later."};templates.fourSq.postLoginActions.downvoteTipSuccessTitle=function(a,b){return"You downvoted a tip!"};templates.fourSq.postLoginActions.downvoteTipSuccessMessage=function(a,b){return"Maybe you should leave some of your own, too!"};
templates.fourSq.postLoginActions.downvoteTipFailureTitle=function(a,b){return"Whoops. Downvote failed."};templates.fourSq.postLoginActions.downvoteTipFailureMessage=function(a,b){return"We weren't able to downvote that tip for you at this time. Please try again later."};templates.fourSq.postLoginActions.likeVenueSuccessTitle=function(a,b){return"You liked a place!"};templates.fourSq.postLoginActions.likeVenueSuccessMessage=function(a,b){return"Each time you like something, we learn more about your personal tastes which makes our recommendations smarter."};
templates.fourSq.postLoginActions.likeVenueFailureTitle=function(a,b){return"Whoops. Like failed."};templates.fourSq.postLoginActions.likeVenueFailureMessage=function(a,b){return"We weren't able to like that place for you at this time. Please try again later."};templates.fourSq.postLoginActions.saveListSuccessTitle=function(a,b){return"List saved!"};templates.fourSq.postLoginActions.saveListSuccessMessage=function(a,b){return"Now start checking in and crossing places off!"};
templates.fourSq.postLoginActions.saveListFailureTitle=function(a,b){return"Whoops. List wasn't saved."};templates.fourSq.postLoginActions.saveListFailureMessage=function(a,b){return"We werent't able to save that list for you at this time. Please try again later."};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.search&&(templates.fourSq.search={});templates.fourSq.search.noVenueResults=function(a,b){return'\x3cli class\x3d"no-results" style\x3d"display: block; background-color: white"\x3e\x3cdiv class\x3d"heady"\x3eNo matching places in '+soy.$$escapeHtml(a.location)+'\x3c/div\x3e\x3cdiv class\x3d"do-it"\x3eChange the city you\'re searching, check your spelling, or add new places from your phone.\x3c/div\x3e\x3c/li\x3e'};
templates.fourSq.search.venueCompleterHeader=function(a,b){return"All places"};templates.fourSq.search.historyVenueCompleterHeader=function(a,b){return"Places I've been"};templates.fourSq.search.invalidAddressWarning=function(a,b){return"Invalid address, try again?"};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.special&&(templates.fourSq.special={});templates.fourSq.special.activityDetail=function(a,b){return'\x3cdiv class\x3d"specialContainer activityAttachment"\x3e'+templates.fourSq.special.common(a)+"\x3c/div\x3e"};templates.fourSq.special.activityStream=function(a,b){return'\x3cdiv class\x3d"specialContainer activityAttachment"\x3e'+templates.fourSq.special.common(a)+"\x3c/div\x3e"};
templates.fourSq.special.sidebar=function(a,b){return'\x3cdiv id\x3d"specialHere" class\x3d"specialContainer box"\x3e'+templates.fourSq.special.common(a)+"\x3c/div\x3e"};
templates.fourSq.special.common=function(a,b){return'\x3cdiv id\x3d"special-'+soy.$$escapeHtml(a.special.id)+'" class\x3d"specialBox'+(a.special.layout?" "+soy.$$escapeHtml(a.special.layout):"")+'"\x3e'+templates.fourSq.special.maybeSpecialPhoto(a)+'\x3cdiv class\x3d"specialContents"\x3e'+(a.special.icon?'\x3cimg src\x3d"'+helpers.special.iconUrl(a.special)+'" class\x3d"specialIcon" alt\x3d"'+soy.$$escapeHtml(a.special.icon)+'" title\x3d"'+soy.$$escapeHtml(a.special.icon)+'" /\x3e':"")+(a.special.title?
"\x3ch3\x3e"+(a.special.canonicalPath?'\x3ca href\x3d"'+soy.$$escapeHtml(a.special.canonicalPath)+'"\x3e'+soy.$$escapeHtml(a.special.title)+"\x3c/a\x3e":soy.$$escapeHtml(a.special.title))+"\x3c/h3\x3e":"")+(a.special.name&&"load-to-card"!=a.special.redemption?"\x3cspan\x3e\x3ch5\x3e"+soy.$$escapeHtml(a.special.name)+"\x3c/h5\x3e\x3c/span\x3e":"")+("load-to-card"==a.special.redemption?'\x3cp class\x3d"showMoreContent text"\x3e'+soy.$$escapeHtml(a.special.message)+"\x3c/p\x3e":"")+(a.special.text&&
"load-to-card"!=a.special.redemption?'\x3cp class\x3d"showMoreContent text"\x3e'+soy.$$escapeHtml(a.special.text)+"\x3c/p\x3e":"")+templates.fourSq.special.maybeSpecialPurchaseBlock(a)+(a.special.finePrint?'\x3cdiv class\x3d"fineprint"\x3e\x3cp class\x3d"finePrintText showMoreContent"\x3e'+soy.$$escapeHtml(a.special.finePrint)+"\x3c/p\x3e\x3c/div\x3e":"")+(a.canSeeLikeButton&&a.special.likes?'\x3cdiv class\x3d"likeSurround"\x3e\x3cdiv class\x3d"likesContainer"\x3e\x3c/div\x3e'+templates.fourSq.ui.liking.likesGroupedFlyOut({likes:a.special.likes})+
"\x3c/div\x3e":"")+(a.canSeeLikeButton?'\x3cscript type\x3d"text/javascript"\x3e$((function() {var specialId \x3d \''+soy.$$escapeHtml(a.special.id)+"';"+(a.special.like?"var likeStatus \x3d true;":"var likeStatus \x3d false;")+"\n              var containerId \x3d '#special-' + specialId;\n              var specialLikes \x3d "+soy.$$filterNoAutoescape(a.likesJson)+";\n              // TODO: migrate this to a standalone JS file\n              fourSq.likeButton \x3d (new fourSq.ui.liking.LikeButtonWithFallback({\n                el: $(containerId + ' .likesContainer').get(0),\n                template: templates.fourSq.ui.liking.likeLink,\n                likes: specialLikes,\n                summary: specialLikes['summary'],\n                isLiked: likeStatus,\n                controller: new fourSq.api.controllers.SpecialFeedbackController(specialId)\n              })).render();\n              if (specialLikes.count) {\n                $(containerId + ' .likesContainer').hoverPop({\n                  popup: $(containerId + ' .facepileFlyOut'),\n                  offset: { top: -12, left: 0 }\n                });\n              }\n            })());\x3c/script\x3e":
"")+"\x3c/div\x3e\x3c/div\x3e"};templates.fourSq.special.maybeSpecialPhoto=function(a,b){var c="";if(a.special.photo)var d=helpers.photo.nearestBiggerPhoto({photo:a.special.photo,targetWidth:152,targetHeight:152}),c=c+('\x3cdiv class\x3d"specialImage" style\x3d"background-image: url(\''+soy.$$escapeHtml(d)+"')\"\x3e\x3c/div\x3e");return c};
templates.fourSq.special.maybeSpecialPurchaseBlock=function(a,b){var c="";if(a.special.purchase&&"load-to-card"!=a.special.redemption){c+='\x3cdiv class\x3d"specialPurpose"\x3e'+(a.special.purchase.buy?'\x3cdiv class\x3d"buyButton"\x3e\x3ca href\x3d"'+soy.$$escapeHtml(a.special.purchase.buy.uri)+'" class\x3d"greenButton"\x3e\x3cspan\x3e'+(a.special.purchase.buy.text?soy.$$escapeHtml(a.special.purchase.buy.text):"")+"\x3c/span\x3e\x3c/a\x3e\x3c/div\x3e":"")+(a.special.purchase.provider?'\x3cdiv class\x3d"provider"\x3e\x3cspan\x3eProvided by: \x3cimg src\x3d"'+
soy.$$escapeHtml(a.special.purchase.provider)+'" /\x3e\x3c/span\x3e\x3c/div\x3e':"")+'\x3cdiv style\x3d"clear: both;"\x3e\x3c!-- IE6 Sucks --\x3e\x3c/div\x3e';if(a.special.purchase.stats)var d=a.special.purchase.stats,c=c+('\x3cdiv class\x3d"statsBlock"\x3e'+(d.value?'\x3cdiv class\x3d"stat"\x3e\x3cstrong\x3eValue\x3c/strong\x3e\x3cbr /\x3e\x3cspan\x3e'+soy.$$escapeHtml(d.value)+"\x3c/span\x3e\x3c/div\x3e":"")+(d.value?'\x3cdiv class\x3d"stat"\x3e\x3cstrong\x3eSavings\x3c/strong\x3e\x3cbr /\x3e\x3cspan\x3e'+
soy.$$escapeHtml(d.savings)+"\x3c/span\x3e\x3c/div\x3e":"")+(d.value?'\x3cdiv class\x3d"stat"\x3e\x3cstrong\x3eDiscount\x3c/strong\x3e\x3cbr /\x3e\x3cspan\x3e'+soy.$$escapeHtml(d.discount)+"\x3c/span\x3e\x3c/div\x3e":"")+"\x3c/div\x3e");c+="\x3c/div\x3e"}return c};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.tastes&&(templates.fourSq.tastes={});"undefined"==typeof templates.fourSq.tastes.tastegame&&(templates.fourSq.tastes.tastegame={});templates.fourSq.tastes.tastegame.tasteGameContainer=function(a,b){return'\x3cdiv class\x3d"tasteGameContainer"\x3e\x3c/div\x3e'};
templates.fourSq.tastes.tastegame.skeleton=function(a,b){return'\x3cdiv class\x3d"tasteGame '+soy.$$escapeHtml(a.suggestedTastes?"":" loading")+'"\x3e\x3cdiv class\x3d"suggestions"\x3e'+(a.loggedIn?'\x3cdiv class\x3d"viewYourTastes"\x3e\x3c/div\x3e':"")+'\x3cul class\x3d"tasteList onboardingTasteList"\x3e'+(a.suggestedTastes?templates.fourSq.tastes.tastegame.tasteList({tastes:a.suggestedTastes}):"")+'\x3c/ul\x3e\x3cimg src\x3d"'+soy.$$escapeHtml("https://ss0.4sqi.net/img/ajax_spinner-a51c5608d01acf32df728f299767f82b.gif")+
'" height\x3d"25" width\x3d"25" alt\x3d"loading" class\x3d"spinner" /\x3e\x3cdiv class\x3d"loadMore"\x3eShow more\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"yourTastes"\x3e\x3cdiv class\x3d"viewSuggestions"\x3e\x3c/div\x3e\x3cdiv class\x3d"tasteGroups"\x3e\x3c/div\x3e\x3cimg src\x3d"'+soy.$$escapeHtml("https://ss0.4sqi.net/img/ajax_spinner-a51c5608d01acf32df728f299767f82b.gif")+'" height\x3d"25" width\x3d"25" alt\x3d"loading" class\x3d"spinner" /\x3e\x3c/div\x3e\x3c/div\x3e'};
templates.fourSq.tastes.tastegame.userTasteGroups=function(a,b){for(var c="",d=a.groups,e=d.length,f=0;f<e;f++)var g=d[f],c=c+('\x3cdiv class\x3d"group" data-type\x3d"'+soy.$$escapeHtml(g.type)+'"\x3e\x3ch4 class\x3d"groupName"\x3e'+soy.$$escapeHtml(g.name)+'\x3c/h4\x3e\x3cul class\x3d"tasteList"\x3e'+templates.fourSq.tastes.tastegame.tasteList({tastes:g.items})+"\x3c/ul\x3e\x3c/div\x3e");return c};
templates.fourSq.tastes.tastegame.yourTastesLink=function(a,b){return"\x3ch3\x3e"+(0==a.tasteCount?"You have not added any tastes. Add tastes to personalize your search results.":1==a.tasteCount?'You have \x3ca class\x3d"yourTastesLink"\x3e1 taste\x3c/a\x3e. Add tastes to personalize your search results.':'You have \x3ca class\x3d"yourTastesLink"\x3e'+soy.$$escapeHtml(a.tasteCount)+" tastes\x3c/a\x3e. Add tastes to personalize your search results.")+"\x3c/h3\x3e"};
templates.fourSq.tastes.tastegame.yourSuggestionsLink=function(a,b){return"\x3ch3\x3e"+(0==a.tasteCount?'You have \x3cspan class\x3d"yourSuggestionsLink"\x3enot added any tastes\x3c/span\x3e. Click on a taste to remove it from your personalized search results.':1==a.tasteCount?'You have \x3cspan class\x3d"yourSuggestionsLink"\x3e1 taste\x3c/span\x3e. Click on a taste to remove it from your personalized search results.':'You have \x3cspan class\x3d"yourSuggestionsLink"\x3e'+soy.$$escapeHtml(a.tasteCount)+
" tastes\x3c/span\x3e. Click on a taste to remove it from your personalized search results.")+"\x3c/h3\x3e"};
templates.fourSq.tastes.tastegame.tasteList=function(a,b){a=a||{};for(var c="",d=a.tastes,e=d.length,f=0;f<e;f++)var g=d[f],c=c+('\x3cli class\x3d"taste'+soy.$$escapeHtml(g.onUser?" added":"")+'" data-tasteid\x3d"'+soy.$$escapeHtml(g.id)+'" style\x3d" -webkit-animation-delay: '+soy.$$escapeHtml(.02*f)+"s; -moz-animation-delay: "+soy.$$escapeHtml(.02*f)+"s; -o-animation-delay: "+soy.$$escapeHtml(.02*f)+"s; animation-delay: "+soy.$$escapeHtml(.02*f)+'s; " \x3e\x3cdiv class\x3d"pill"\x3e'+soy.$$escapeHtml(g.text)+
"\x3c/div\x3e\x3c/li\x3e");return c};templates.fourSq.tastes.tastegame.allYourTastes=function(a,b){return 0==a.tasteCount?"No tastes":1==a.tasteCount?"1 taste":"All "+soy.$$escapeHtml(a.tasteCount)+" tastes"};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.tip&&(templates.fourSq.tip={});
templates.fourSq.tip.oldStandardTip=function(a,b){return a.tip.venue&&a.tip.venue.categories&&a.tip.venue.name&&a.tip.venue.location?templates.fourSq.tip.tipRendering(soy.$$augmentMap(a,{relationship:null==a.tip.user?null:a.tip.user.relationship,imageContentsHtml:helpers.venue.primaryCategoryIcon({categories:a.tip.venue.categories,size:32}),headerContentsHtml:'\x3ca href\x3d"'+helpers.venue.href(a.tip.venue)+'"\x3e'+soy.$$escapeHtml(a.tip.venue.name)+'\x3c/a\x3e\x3cspan class\x3d"tipDate"\x3e'+helpers.venue.globalLocalAddress({location:a.tip.venue.location})+
" \x26middot; \x3cspan\x3e"+helpers.util.createdAtSmartDate(a.tip)+"\x3c/span\x3e"+(a.showEditLink?'\x3cspan class\x3d"auxActions"\x3e \x26middot; \x3cspan class\x3d"link edit"\x3eEdit\x3c/span\x3e\x3c/span\x3e':"")+"\x3c/span\x3e"})):""};
templates.fourSq.tip.forVenue=function(a,b){return templates.fourSq.tip.tipRendering(soy.$$augmentMap(a,{imageContentsHtml:'\x3ca href\x3d"'+helpers.user.href(a.tip.user)+'"\x3e'+helpers.user.image(soy.$$augmentMap(a.tip.user,{size:30}))+"\x3c/a\x3e",headerContentsHtml:helpers.user.fullNameWLink(a.tip.user)+'\x3cspan class\x3d"tipDate"\x3e \x3cspan'+(a.tip.editedAt?'title\x3d"created '+helpers.util.createdAtSmartDate(a.tip)+'"':"")+"\x3e"+(a.tip.editedAt?"edited "+helpers.util.smartDate({then:a.tip.editedAt}):
helpers.util.createdAtSmartDate(a.tip))+"\x3c/span\x3e"+(a.showEditLink?'\x3cspan class\x3d"auxActions"\x3e \x26middot; \x3cspan class\x3d"link edit"\x3eEdit\x3c/span\x3e\x3c/span\x3e':"")+"\x3c/span\x3e"}))};
templates.fourSq.tip.forUser=function(a,b){return templates.fourSq.tip.tipRendering(soy.$$augmentMap(a,{showActions:!0,showSaveControl:!0,imageContentsHtml:helpers.category.iconOrDefault({icon:null==a.tip.venue.categories?null:null==a.tip.venue.categories[0]?null:a.tip.venue.categories[0].icon,desiredSize:32,transparent:!1}),headerContentsHtml:helpers.venue.nameWithLink(a.tip)+'\x3cspan class\x3d"tipLocation"\x3e'+helpers.venue.cityState(a.tip.venue)+' \x26bull; \x3c/span\x3e\x3cspan class\x3d"tipDate"\x3e\x3cspan'+
(a.tip.editedAt?'title\x3d"created '+helpers.util.createdAtSmartDate(a.tip)+'"':"")+"\x3e"+(a.tip.editedAt?"edited "+helpers.util.smartDate({then:a.tip.editedAt}):helpers.util.createdAtSmartDate(a.tip))+"\x3c/span\x3e\x3c/span\x3e"}))};
templates.fourSq.tip.tipRendering=function(a,b){var c="";null!=a.relationship?soy.$$escapeHtml(a.relationship):soy.$$escapeHtml(null!=(null==a.tip.user?null:a.tip.user.relationship)?null==a.tip.user?null:a.tip.user.relationship:"");return c+='\x3cdiv class\x3d"tip tipContainer clearfix '+("friend"==a.relationship||"followingThem"==a.relationship?"friendTip ":"")+"viewTipMode "+(a.tip.logView?"tipWithLogging ":"")+'" id\x3d"'+soy.$$escapeHtml(a.tip.id)+'" data-id\x3d"'+soy.$$escapeHtml(a.tip.id)+'"\x3e\x3cdiv class\x3d"image"\x3e'+
soy.$$filterNoAutoescape(a.imageContentsHtml)+'\x3c/div\x3e\x3cdiv class\x3d"content"\x3e\x3ch5\x3e'+soy.$$filterNoAutoescape(a.headerContentsHtml)+"\x3c/h5\x3e"+(a.tip.list?'from \x3ca href\x3d"'+soy.$$escapeHtml(a.tip.list.canonicalPath)+'"\x3e'+soy.$$escapeHtml(a.tip.list.name)+"\x3c/a\x3e":"")+"\x3cp\x3e"+(a.tip.photo?'\x3cspan class\x3d"tipPhoto"\x3e'+helpers.photo.img100x100(a.tip.photo)+"\x3c/span\x3e":"")+'\x3cspan class\x3d"tipText"\x3e'+(a.entitiesNotAsLinks?helpers.entities.textWithEntities({text:a.tip.text,
entities:a.tip.entities,dataSource:"tip-text"}):helpers.entities.textWithEntitiesLinks({text:a.tip.text,entities:a.tip.entities,dataSource:"tip-text"}))+"\x3c/span\x3e "+helpers.tip.readMoreLink(a.tip)+'\x3c/p\x3e\x3cdiv class\x3d"actions"\x3e'+(a.showActions?(a.showSaveControl?templates.fourSq.ui.save.saveButton({saved:a.tipIsSaved}):"")+'\x3cspan class\x3d"likeButtonContainer"\x3e\x3c/span\x3e\x3cspan class\x3d"tip_activity_buttons"\x3e'+(a.showDeleteLink?'\x3cspan class\x3d"link delete"\x3e\x3c/span\x3e':
"")+(a.showFlagLink?'\x3cspan class\x3d"flagTipLink"\x3e\x3cspan class\x3d"icon"\x3e\x3c/span\x3eReport\x3c/span\x3e':"")+"\x3c/span\x3e":"")+"\x3c/div\x3e\x3c/div\x3e"+(a.showEditLink?templates.fourSq.tip.tipEditor({tipText:a.tip.text}):"")+"\x3c/div\x3e"};
templates.fourSq.tip.tipEditor=function(a,b){return'\x3cdiv class\x3d"editor"\x3e\x3cdiv class\x3d"charCount"\x3e\x3c/div\x3e\x3cdiv class\x3d"editTip"\x3e\x3ctextarea id\x3d"editText" class\x3d"formStyle" cols\x3d"55" tabindex\x3d"1" rows\x3d"3"\x3e'+soy.$$escapeHtml(a.tipText)+'\x3c/textarea\x3e\x3c/div\x3e\x3cdiv class\x3d"editTipOptions"\x3e\x3cbutton id\x3d"editButton" class\x3d"greenButton"\x3eSave\x3c/button\x3e \x3cspan id\x3d"cancelLink" class\x3d"link"\x3eCancel\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e'};
templates.fourSq.tip.tipPhoto=function(a,b){return'\x3cdiv class\x3d"tipPhoto"\x3e'+helpers.photo.cappedImage(soy.$$augmentMap(a.photo,{capDimension:"width",size:516}))+"\x3c/div\x3e"};templates.fourSq.tip.flagMenu=function(a,b){return'\x3cdiv class\x3d"tipFlagMenu"\x3e\x3cdiv class\x3d"spam"\x3eSpam\x3c/div\x3e\x3cdiv class\x3d"offensive"\x3eOffensive\x3c/div\x3e\x3cdiv class\x3d"notRelevant"\x3eNo longer relevant\x3c/div\x3e\x3c/div\x3e'};
templates.fourSq.tip.tipMoreMenu=function(a,b){return'\x3cdiv class\x3d"tipMoreMenu"\x3e'+(a.venue.permissions.flagTips?'\x3cdiv class\x3d"reportHeader"\x3eReport\x3c/div\x3e\x3cdiv class\x3d"spam menuItem"\x3eSpam\x3c/div\x3e\x3cdiv class\x3d"offensive menuItem"\x3eOffensive\x3c/div\x3e\x3cdiv class\x3d"notRelevant menuItem"\x3eNo longer relevant\x3c/div\x3e':"")+(a.tip.user.id==(null==a.currentUser?null:a.currentUser.id)?(a.venue.permissions.flagTips?"\x3chr\x3e":"")+'\x3cdiv class\x3d"editTipLink menuItem"\x3eEdit\x3c/div\x3e\x3cdiv class\x3d"deleteTipLink menuItem"\x3eDelete\x3c/div\x3e':
"")+"\x3c/div\x3e"};templates.fourSq.tip.flagSpamSuccess=function(a,b){return"Reported tip as spam"};templates.fourSq.tip.flagOffensiveSuccess=function(a,b){return"Reported tip as offensive"};templates.fourSq.tip.flagNotRelevantSuccess=function(a,b){return"Reported tip as not relevant"};templates.fourSq.tip.errorFlaggingTip=function(a,b){return"Error reporting tip, please try again"};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.ui&&(templates.fourSq.ui={});"undefined"==typeof templates.fourSq.ui.beenhere&&(templates.fourSq.ui.beenhere={});templates.fourSq.ui.beenhere.beenHereButton=function(a,b){return'\x3cdiv class\x3d"been-here-button'+(a.been?" active":"")+'"\x3e\x3cspan class\x3d"icon"\x3e\x3c/span\x3e\x3cspan class\x3d"label"\x3eBeen here\x3c/span\x3e\x3c/div\x3e'};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.ui&&(templates.fourSq.ui={});"undefined"==typeof templates.fourSq.ui.dialog&&(templates.fourSq.ui.dialog={});
templates.fourSq.ui.dialog.modalDialog=function(a,b){return'\x3cdiv id\x3d"modalDialogBox" class\x3d"'+soy.$$escapeHtml(a.className)+'"\x3e\x3cdiv class\x3d"popup"\x3e'+(a.hasCloseButton?templates.fourSq.ui.dialog.xButton(null):"")+'\x3cdiv class\x3d"content '+soy.$$escapeHtml(a.contentClassName)+'"\x3e'+(a.title?templates.fourSq.ui.dialog.modalTitle(a):"")+'\x3cdiv class\x3d"modalLoadingContainer"\x3e\x3cdiv class\x3d"contents"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'};
templates.fourSq.ui.dialog.modalTitle=function(a,b){return'\x3cdiv id\x3d"modalDialogTitle"\x3e\x3ch2 class\x3d"title"\x3e'+soy.$$escapeHtml(a.title)+"\x3c/h2\x3e\x3c/div\x3e"};templates.fourSq.ui.dialog.xButton=function(a,b){return'\x3cdiv id\x3d"xButton"\x3e\x3cspan class\x3d"close link"\x3e\x3c/span\x3e\x3c/div\x3e'};templates.fourSq.ui.dialog.modalOverlay=function(a,b){return'\x3cdiv id\x3d"modalOverlay" class\x3d"modalHide modalOverlayBG '+soy.$$escapeHtml(a.overlayClass)+'"\x3e\x3c/div\x3e'};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.ui&&(templates.fourSq.ui={});"undefined"==typeof templates.fourSq.ui.tip&&(templates.fourSq.ui.tip={});
templates.fourSq.ui.tip.renderTip=function(a,b){return'\x3cdiv class\x3d"authorImage"\x3e'+helpers.user.xsmallImageWLink(a.tip.user)+"\x3c/div\x3e"+(a.tip.photo?helpers.photo.img100x100(soy.$$augmentMap(a.tip.photo,{extraImgClass:"tipPhoto"})):"")+'\x3cdiv class\x3d"tipContents'+(a.tip.photo?" hasPhoto":"")+'"\x3e\x3cdiv class\x3d"tipText"\x3e'+helpers.tip.textWithReadMoreLink(a)+'\x3c/div\x3e\x3cdiv class\x3d"tipInfo"\x3e\x3cspan class\x3d"userName"\x3e'+helpers.user.fullNameWLink(a.tip.user)+'\x3c/span\x3e \x26middot; \x3cspan class\x3d"tipDate"\x3e'+
helpers.util.createdAtSmartDate(a.tip)+"\x3c/span\x3e"+(a.tip.list?' \x26middot; \x3cspan class\x3d"tipList"\x3efrom \x3ca href\x3d"'+soy.$$escapeHtml(a.tip.list.canonicalPath)+'"\x3e'+soy.$$escapeHtml(a.tip.list.name)+"\x3c/a\x3e\x3c/span\x3e":"")+"\x3c/div\x3e"+(a.hideActions?"":'\x3cdiv class\x3d"actionButtons"\x3e'+templates.fourSq.ui.save.saveButton({saved:!1})+'\x3cspan class\x3d"likeButtonContainer"\x3e\x3c/span\x3e'+(a.tip.user.id==(null==a.currentUser?null:a.currentUser.id)?'\x3ca class\x3d"editTipLink" href\x3d"'+
soy.$$escapeHtml(a.tip.canonicalPath)+'"\x3eEdit\x3c/a\x3e':"")+(a.venue.permissions.flagTips?'\x3cspan class\x3d"flagTipLink"\x3e\x3cspan class\x3d"icon"\x3e\x3c/span\x3eReport\x3c/span\x3e':"")+(a.tip.user.id==(null==a.currentUser?null:a.currentUser.id)?'\x3cspan class\x3d"deleteTipLink"\x3eDelete\x3c/span\x3e':"")+"\x3c/div\x3e")+"\x3c/div\x3e"};
templates.fourSq.ui.tip.renderTipUpvotes=function(a,b){return'\x3cdiv class\x3d"authorImage"\x3e'+helpers.user.xsmallImageWLink(a.tip.user)+(a.tip.authorInteractionType?helpers.tip.tipAuthorInteraction({tipAuthorInteraction:a.tip.authorInteractionType}):"")+'\x3c/div\x3e\x3cdiv class\x3d"tipContents"\x3e\x3cdiv class\x3d"tipHeaderRow"\x3e\x3cspan class\x3d"userName"\x3e'+helpers.user.fullNameWLink(a.tip.user)+'\x3c/span\x3e\x3cspan class\x3d"tipDate"\x3e'+helpers.util.createdAtSmartDate(a.tip)+'\x3c/span\x3e\x3cdiv class\x3d"tipAuthorJustification"\x3e'+
helpers.tip.tipAuthorJustification(a)+'\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"tipText"\x3e'+helpers.tip.textWithReadMoreLink(a)+"\x3c/div\x3e"+(a.tip.photo?helpers.photo.rectangleImage(soy.$$augmentMap(a.tip.photo,{extraImgClass:"tipPhoto",width:558,height:200})):"")+(a.hideActions?"":'\x3cdiv class\x3d"actionButtons"\x3e'+(a.venue.permissions.flagTips||a.tip.user.id==(null==a.currentUser?null:a.currentUser.id)?'\x3cspan class\x3d"tipMoreFlyout"\x3e\x3cspan class\x3d"icon"\x3e\x3c/span\x3e\x3cspan class\x3d"moreLabel"\x3eMore\x3c/span\x3e\x3c/span\x3e':
"")+'\x3cspan class\x3d"lastVoteTime"\x3e'+(a.tip.lastVoteText?soy.$$escapeHtml(a.tip.lastVoteText):"")+"\x3c/span\x3e\x3c/div\x3e")+"\x3c/div\x3e"};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.ui&&(templates.fourSq.ui={});"undefined"==typeof templates.fourSq.ui.downloadDialog&&(templates.fourSq.ui.downloadDialog={});
templates.fourSq.ui.downloadDialog.desktopDownloadModal=function(a,b){for(var c='\x3cdiv class\x3d"richDownloadModalContent"\x3e\x3ch2\x3eOpen in the Foursquare app to see all '+soy.$$escapeHtml(a.tipCount)+" tips at "+soy.$$escapeHtml(a.venue.name)+'.\x3c/h2\x3e\x3cdiv class\x3d"mainContent"\x3e\x3cul class\x3d"tips"\x3e',d=a.tips,e=d.length,f=0;f<e;f++)c+='\x3cli class\x3d"tip"\x3e'+templates.fourSq.ui.tip.renderTip({currentUser:null,venue:a.venue,tip:d[f],hideActions:!0})+"\x3c/li\x3e";return c+
'\x3c/ul\x3e\x3cdiv class\x3d"modalActions"\x3e\x3cdiv class\x3d"modalAction"\x3e\x3cdiv class\x3d"downloadAppButton"\x3eContinue\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"modalAction"\x3e\x3cdiv class\x3d"noThanksButton"\x3eNo, thanks\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'};
templates.fourSq.ui.downloadDialog.standard=function(a,b){return'\x3cdiv id\x3d"downloadDialog"\x3e\x3ch3\x3eDiscover and share great places with friends on Foursquare.\x3c/h3\x3e\x3cdiv class\x3d"sendToPhone"\x3e\x3cdiv class\x3d"successMessage"\x3e'+helpers.download.getTheAppSuccess(null)+'\x3c/div\x3e\x3cform\x3e\x3cp\x3eSend the download link to your phone\x3c/p\x3e\x3cinput class\x3d"formStyle phoneEmail" name\x3d"phone" placeholder\x3d"Enter your phone number or email"/\x3e\x3cinput type\x3d"submit" class\x3d"greenButton" value\x3d"Send"/\x3e\x3cdiv class\x3d"disclaimer"\x3eMessaging and data rates may apply.\x3c/div\x3e\x3cdiv class\x3d"validationMessage"\x3e\x3c/div\x3e\x3c/form\x3e\x3c/div\x3e\x3cdiv class\x3d"downloadButtons"\x3e\x3cp\x3eor download from your computer\x3c/p\x3e\x3cdiv class\x3d"downloadLinksContainer"\x3e\x3cul class\x3d"downloadLinks"\x3e\x3cli class\x3d"apple"\x3e\x3ca href\x3d"/get/DesktopDownloadDialog?os\x3diphone"\x3eApple App Store\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"google"\x3e\x3ca href\x3d"/get/DesktopDownloadDialog?os\x3dandroid"\x3eGoogle App Store\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"windows"\x3e\x3ca href\x3d"/get/DesktopDownloadDialog?os\x3dwindowsphone"\x3eWindows Phone App\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.ui&&(templates.fourSq.ui={});"undefined"==typeof templates.fourSq.ui.flyout&&(templates.fourSq.ui.flyout={});templates.fourSq.ui.flyout.flyOut=function(a,b){return'\x3cdiv class\x3d"flyOut hidden'+(a.extraClasses?" "+soy.$$escapeHtml(a.extraClasses):"")+'"\x3e\x3cdiv class\x3d"arr"\x3e\x3c/div\x3e\x3cdiv class\x3d"contents"\x3e'+soy.$$filterNoAutoescape(a.contentsHtml)+"\x3c/div\x3e\x3c/div\x3e"};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.ui&&(templates.fourSq.ui={});"undefined"==typeof templates.fourSq.ui.imageUpload&&(templates.fourSq.ui.imageUpload={});templates.fourSq.ui.imageUpload.errorMsg=function(a,b){return"This does not look like a valid image."};templates.fourSq.ui.imageUpload.addHiddenField=function(a,b){return'\x3cinput type\x3d"hidden" class\x3d"'+soy.$$escapeHtml(a.className)+'" name\x3d"'+soy.$$escapeHtml(a.name)+'"\x3e'};
templates.fourSq.ui.imageUpload.attachedPhotoPlaceholder=function(a,b){return'\x3cdiv class\x3d"photoPlaceholder"\x3ePhoto loaded\x3c/div\x3e'};templates.fourSq.ui.imageUpload.attachedPhoto=function(a,b){return'\x3cdiv class\x3d"photoAttachmentContainer"\x3e\x3cdiv class\x3d"photoAttachmentClip"\x3e\x3cimg class\x3d"photoAttachmentPreview" /\x3e\x3c/div\x3e\x3c/div\x3e'};templates.fourSq.ui.imageUpload.removeAttachmentButton=function(a,b){return'\x3ca href\x3d"#" class\x3d"removeAttachment delete"\x3eRemove\x3c/a\x3e'};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.ui&&(templates.fourSq.ui={});
templates.fourSq.ui.inlineTipAddDialog=function(a,b){return'\x3cdiv id\x3d"addTipPopup" class\x3d"popover"\x3e\x3cdiv class\x3d"header"\x3e\x3ch4\x3eLeave a tip for \x3cstrong class\x3d"venueName"\x3e'+soy.$$escapeHtml(a.venueName)+'\x3c/strong\x3e\x3c/h4\x3e\x3cspan class\x3d"link close closeButton"\x3ex\x3c/span\x3e\x3c/div\x3e\x3cspan class\x3d"loading-indicator"\x3e\x3c/span\x3e\x3cdiv id\x3d"addTipErrorContainer" class\x3d"errorbox"\x3e\x3ctextarea name\x3d"note" id\x3d"note" class\x3d"tip-input formStyle" placeholder\x3d"'+soy.$$escapeHtml(a.placeholder)+
'"\x3e'+soy.$$escapeHtml(a.placeholder)+'\x3c/textarea\x3e\x3cdiv id\x3d"addTipErrorMessage" class\x3d"errormsg"/\x3e\x3c/div\x3e\x3cspan title\x3d\'Add a link\' class\x3d"link addLink"\x3e\x3cimg src\x3d"'+soy.$$escapeHtml("https://ss0.4sqi.net/img/icon-grey-link-578061970634420cbe2544e90723a127.png")+'" /\x3e\x3c/span\x3e\x3cspan id\x3d"tipLink"\x3e\x3cinput class\x3d"formStyle" type\x3d"text" maxlength\x3d"255" /\x3e\x3c/span\x3e\x3cdiv class\x3d"buttons"\x3e\x3cdiv id\x3d"submitButton"\x3e\x3cdiv class\x3d"greenButton disabledButton submit-button"\x3eAdd Tip\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"count"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.languageselector&&(templates.fourSq.languageselector={});
templates.fourSq.languageselector.languageSelectorList=function(a,b){for(var c='\x3cdiv id\x3d"languagesContainer"\x3e\x3cdiv class\x3d"languageContents"\x3e\x3cp\x3eDo none of the words on this site make sense to you? Select your favorite language below for greater clarity:\x3c/p\x3e\x3cul class\x3d"languages"\x3e',d=a.languages,e=d.length,f=0;f<e;f++)var g=d[f],c=c+('\x3cli\x3e\x3cspan class\x3d"link langSelect" data-lang\x3d"'+soy.$$escapeHtml(g.lang)+'"\x3e'+soy.$$escapeHtml(g.name)+"\x3c/span\x3e\x3c/li\x3e");
return c+"\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e"};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.ui&&(templates.fourSq.ui={});"undefined"==typeof templates.fourSq.ui.liking&&(templates.fourSq.ui.liking={});templates.fourSq.ui.liking.likeItemSignupModalTitle=function(a,b){return"Don't miss out! Join Foursquare to share your opinion about this place."};
templates.fourSq.ui.liking.venueLikeDislike=function(a,b){a=a||{};return'\x3cdiv class\x3d"likeDislikeControls comboRatingButton"\x3e\x3cdiv class\x3d"comboRatingButtonLike like '+(a.like?"active":"")+'"'+(a.noTooltip?"":'title\x3d"I liked this place!"')+'\x3e\x3cspan class\x3d"icon"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"comboRatingButtonOk ok '+(a.ok?"active":"")+'"'+(a.noTooltip?"":'title\x3d"I thought this place was ok."')+'\x3e\x3cspan class\x3d"icon"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"comboRatingButtonDislike dislike '+
(a.dislike?"active":"")+'"'+(a.noTooltip?"":'title\x3d"I didn\'t like this place! :("')+'\x3e\x3cspan class\x3d"icon"\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e'};
templates.fourSq.ui.liking.microLikeButton=function(a,b){return'\x3cdiv class\x3d"likeButton microButton"\x3e\x3cdiv class\x3d"icon"\x3e\x3cimg width\x3d"16" height\x3d"16" src\x3d"'+soy.$$escapeHtml(fourSq.retina.isRetina()?"https://ss0.4sqi.net/img/button_icon_heart@2x-50841d34a4838792d4303f591e6f8be2.png":"https://ss1.4sqi.net/img/button_icon_heart-867354611744be6d0146ffca1b3bdad6.png")+'" alt\x3d"Like" data-retina-url\x3d"'+soy.$$escapeHtml("https://ss0.4sqi.net/img/button_icon_heart@2x-50841d34a4838792d4303f591e6f8be2.png")+
'" /\x3e\x3c/div\x3e\x3c/div\x3e'};templates.fourSq.ui.liking.likeButton=function(a,b){return templates.fourSq.ui.inputs.iconButton({iconUrl:"https://ss1.4sqi.net/img/button_icon_heart-867354611744be6d0146ffca1b3bdad6.png",contents:templates.fourSq.ui.liking.likeText({selected:!1}),buttonClass:"likeButton"})};templates.fourSq.ui.liking.basicLikeLink=function(a,b){return'\x3cspan class\x3d"like"\x3e\x3cspan class\x3d"link"\x3e\x3cspan class\x3d"icon"\x3e\x3c/span\x3e\x3cspan class\x3d"label"\x3e\x3c/span\x3e\x3c/span\x3e\x3c/span\x3e'};
templates.fourSq.ui.liking.likeLink=function(a,b){return' \x3cspan class\x3d"like"\x3e\x3cspan class\x3d"link"\x3e\x3cspan class\x3d"icon"\x3e\x3c/span\x3e\x3cspan class\x3d"label"\x3e\x3c/span\x3e\x3c/span\x3e'+(a.likes&&!a.likes.summary?'\x3cspan class\x3d"separator" style\x3d"display: none"\x3e \u00b7 \x3c/span\x3e':'\x3cspan class\x3d"separator"\x3e \u00b7 \x3c/span\x3e')+'\x3cspan class\x3d"likeSummary"\x3e'+(a.likes&&a.likes.summary?soy.$$escapeHtml(a.likes.summary):"")+"\x3c/span\x3e\x3c/span\x3e"};
templates.fourSq.ui.liking.likeText=function(a,b){return(a.selected?"Liked":a.forTip?"Like this tip":"Like")+" "+(a.count&&0<a.count?"- "+(1==a.count?soy.$$escapeHtml(a.count)+" like":soy.$$escapeHtml(a.count)+" likes"):"")};templates.fourSq.ui.liking.dislikeText=function(a,b){return a.selected?"Disliked":"Dislike"};
templates.fourSq.ui.liking.likeCount=function(a,b){return a.includingYou?0==a.count?"\x3cspan\x3eYou\x3c/span\x3e like this":1==a.count?"\x3cspan\x3eYou\x3c/span\x3e like this":2==a.count?"\x3cspan\x3eYou and 1 person\x3c/span\x3e like this":"\x3cspan\x3eYou and "+fourSq.i18n.formatNumber(a.count-1,"decimal",void 0,"")+" people\x3c/span\x3e like this":0==a.count?"\x3cspan\x3e0 people\x3c/span\x3e like this":1==a.count?"\x3cspan\x3e1 person\x3c/span\x3e likes this":"\x3cspan\x3e"+fourSq.i18n.formatNumber(a.count,
"decimal",void 0,"")+" people\x3c/span\x3e like this"};templates.fourSq.ui.liking.likeCountWithFriends=function(a,b){for(var c=templates.fourSq.ui.liking.likeCount(a),d=a.groups,e=d.length,f=0;f<e;f++)var g=d[f],c=c+("friends"==g.type&&g.count&&0<g.count?" "+(1==g.count?"(1 friend)":"("+soy.$$escapeHtml(g.count)+" friends)"):"");return c};
templates.fourSq.ui.liking.detailLikesGroupedFacepile=function(a,b){return templates.fourSq.ui.liking.likesFacepile(soy.$$augmentMap(a.likesAndLike,{withIcon:!0,currentUser:a.currentUser}))};
templates.fourSq.ui.liking.likesGroupedFlyOut=function(a,b){return'\x3cdiv class\x3d"facepileFlyOut" style\x3d"display: none;"\x3e\x3cimg class\x3d"flyOutUpArrow" src\x3d"'+soy.$$escapeHtml("https://ss0.4sqi.net/img/facepileFlyOut-carat-b4b4af31ccb546ab837f4219c8b105f6.png")+'" alt\x3d"" height\x3d"6" width\x3d"10" /\x3e'+templates.fourSq.ui.liking.likesFacepile(a)+"\x3c/div\x3e"};
templates.fourSq.ui.liking.mobileLikesSection=function(a,b){return a.likes.count&&0<a.likes.count?'\x3cdiv id\x3d"likes"\x3e\x3cdiv class\x3d"section wrap"\x3e'+templates.fourSq.ui.liking.likesFacepile(soy.$$augmentMap(a,{withIcon:!0,size:32}))+"\x3c/div\x3e\x3c/div\x3e":""};
templates.fourSq.ui.liking.likesFacepile=function(a,b){var c="",d=a.like&&null!=a.currentUser,e=!d&&null!=a.likes.groups&&1==a.likes.groups.length&&0==a.likes.groups[0].items.length;if(a.likes.groups){for(var c=c+('\x3cdiv class\x3d"likes facepile friendsOthers '+(e?"noFaces":"")+'"\x3e\x3cdiv class\x3d"summary"\x3e'+(a.withIcon?'\x3cimg src\x3d"'+soy.$$escapeHtml("https://ss0.4sqi.net/img/icon-likes-ab5bc3c65971ae0198e9200d08834a1f.png")+'" alt\x3d"Likes" class\x3d"leaderImage" /\x3e':"")+templates.fourSq.ui.liking.likeCountWithFriends(soy.$$augmentMap(a.likes,
{includingYou:a.like}))+'\x3c/div\x3e\x3cdiv class\x3d"faces"\x3e'+(d?'\x3cdiv class\x3d"friend"\x3e'+helpers.user.imageWLink(soy.$$augmentMap(a.currentUser,{size:a.size}))+"\x3c/div\x3e":"")),d=a.likes.groups,e=d.length,f=0;f<e;f++){var g=d[f];if("friends"==g.type)for(var g=g.items,h=g.length,l=0;l<h;l++)c+='\x3cdiv class\x3d"friend"\x3e'+helpers.user.imageWLink(soy.$$augmentMap(g[l],{size:a.size}))+"\x3c/div\x3e"}d=a.likes.groups;e=d.length;for(f=0;f<e;f++)if(g=d[f],"others"==g.type)for(g=g.items,
h=g.length,l=0;l<h;l++)c+='\x3cdiv class\x3d"other"\x3e'+helpers.user.imageWLink(soy.$$augmentMap(g[l],{size:a.size}))+"\x3c/div\x3e";c+=templates.fourSq.ui.liking.remainingLikesBox(a)+"\x3c/div\x3e\x3c/div\x3e"}return c};templates.fourSq.ui.liking.remainingLikesBox=function(a,b){return templates.fourSq.ui.liking.remainingLikes_({groups:a.likes.groups,index:0,remaining:a.like?a.likes.count-1:a.likes.count,total:a.like?a.likes.count-1:a.likes.count})};
templates.fourSq.ui.liking.remainingLikes_=function(a,b){return a.index<a.groups.length?templates.fourSq.ui.liking.remainingLikes_({groups:a.groups,index:a.index+1,remaining:a.remaining-a.groups[a.index].items.length,total:a.total}):a.remaining&&a.remaining<a.total?'\x3cdiv class\x3d"remaining '+(1E3<=a.remaining?"longNumber":"")+'"\x3e+'+soy.$$escapeHtml(a.remaining)+"\x3c/div\x3e":""};
templates.fourSq.ui.liking.rateButton=function(a,b){return templates.fourSq.ui.inputs.simpleIconButton({iconUrl:fourSq.retina.isRetina()?"https://ss1.4sqi.net/img/icon_edit_gray@2x-2d8fbaf813ba013d7beeb0b23d2a70c0.png":"https://ss0.4sqi.net/img/icon_edit_gray-d931b8c7863e54374e0568b24cdad30e.png",contents:"Rate",buttonClass:"rateButton",size:16})};
templates.fourSq.ui.liking.shareButton=function(a,b){return templates.fourSq.ui.inputs.simpleIconButton({iconUrl:fourSq.retina.isRetina()?"https://ss1.4sqi.net/img/icon_edit_gray@2x-2d8fbaf813ba013d7beeb0b23d2a70c0.png":"https://ss0.4sqi.net/img/icon_edit_gray-d931b8c7863e54374e0568b24cdad30e.png",contents:"Share",buttonClass:"shareButton",size:16})};
templates.fourSq.ui.liking.tipUpvoteDownvoteButton=function(a,b){a=a||{};return'\x3cdiv class\x3d"tipUpvoteDownvoteButton"\x3e\x3cspan class\x3d"tipUpvoteContainer '+(a.upvoted?"active":"")+'"\x3e\x3cspan class\x3d"icon"\x3e\x3c/span\x3e\x3cspan class\x3d"tipUpvoteText"\x3eUpvote\x3c/span\x3e\x3cspan class\x3d"tipUpvoteCount"\x3e'+(0<a.upvote?fourSq.i18n.formatNumber(a.upvote,"decimal",void 0,""):"")+'\x3c/span\x3e\x3c/span\x3e\x3cspan class\x3d"tipDownvoteContainer '+(a.downvoted?"active":"")+'"\x3e\x3cspan class\x3d"icon"\x3e\x3c/span\x3e\x3cspan class\x3d"tipDownvoteText"\x3eDownvote\x3c/span\x3e\x3cspan class\x3d"tipDownvoteCount"\x3e'+
(0<a.downvote?fourSq.i18n.formatNumber(a.downvote,"decimal",void 0,""):"")+"\x3c/span\x3e\x3c/span\x3e\x3c/div\x3e"};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.ui&&(templates.fourSq.ui={});"undefined"==typeof templates.fourSq.ui.notification&&(templates.fourSq.ui.notification={});templates.fourSq.ui.notification.genericServerError=function(a,b){return"We\u2019re having trouble connecting. Try that again in a second."};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.ui&&(templates.fourSq.ui={});"undefined"==typeof templates.fourSq.ui.notificationstray&&(templates.fourSq.ui.notificationstray={});templates.fourSq.ui.notificationstray.noNotificationsNotice=function(a,b){return'\x3cli class\x3d"empty"\x3eKeep up with the latest!\x3cbr /\x3e\x3cspan\x3eFresh comments, bonus points, and friend info will all show up here, in the new Notification Tray.\x3c/span\x3e\x3c/li\x3e'};
templates.fourSq.ui.notificationstray.errorNotice=function(a,b){return'\x3cli class\x3d"empty"\x3eWhoops, there was problem fetching your notifications. Try again in a few.\x3c/li\x3e'};templates.fourSq.ui.notificationstray.loadingNotice=function(a,b){return'\x3cli class\x3d"loading"\x3eLoading...\x3c/li\x3e'};
templates.fourSq.ui.notificationstray.activityTemplate=function(a,b){return'\x3cli class\x3d"notrans unread_'+soy.$$escapeHtml(a.activity.unread)+" image_type_"+(a.activity.type?soy.$$escapeHtml(a.activity.type):"none")+"\"\x3e\x3ca href\x3d'"+helpers.activity.targetUrl(a.activity)+"' class\x3d\"target_"+(a.activity.target?soy.$$escapeHtml(a.activity.target.type):"none")+'"\x3e'+(a.activity.image?'\x3cimg class\x3d"catImg" src\x3d\''+helpers.image.imagePath({image:a.activity.image})+'\' height\x3d"32" width\x3d"32" /\x3e':
"")+"\x3cp\x3e"+helpers.entities.textWithEntities(a.activity)+"\x3c/p\x3e\x3c/a\x3e\x3c/li\x3e"};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.ui&&(templates.fourSq.ui={});
templates.fourSq.ui.photoViewer=function(a,b){a=a||{};return'\x3cdiv id\x3d"overlayFrame"\x3e\x3cdiv id\x3d"overlayPage"\x3e\x3cdiv id\x3d"photoDetails"\x3e\x3cdiv class\x3d"wrap"\x3e\x3cimg id\x3d"next" class\x3d"navControl" src\x3d"'+soy.$$escapeHtml("https://ss0.4sqi.net/img/gallery-next-4fe893b7a611387276ef45cd74632759.png")+'" alt\x3d"" width\x3d"32" height\x3d"32" /\x3e\x3cimg id\x3d"previous" class\x3d"navControl" src\x3d"'+soy.$$escapeHtml("https://ss1.4sqi.net/img/gallery-prev-6da401eecb2e8a276e2a89bea5ac3819.png")+
'" alt\x3d"" width\x3d"32" height\x3d"32" /\x3e\x3cimg id\x3d"userPic" src\x3d"'+soy.$$escapeHtml("https://ss0.4sqi.net/img/blank_boy-82b50670208ac7994bba547c50a6ad80.png")+'" alt\x3d"" height\x3d"32" width\x3d"32" /\x3e\x3ch5 id\x3d"userName"\x3e\x3ca href\x3d"#"\x3e\x3c/a\x3e\x3c/h5\x3e\x3cspan id\x3d"userAt"\x3e\x3c/span\x3e\x3ch5 id\x3d"venueName"\x3e\x3ca href\x3d"#"\x3e\x3c/a\x3e\x3c/h5\x3e\x3cp\x3e\x3cspan id\x3d"date"\x3e\x3c/span\x3e'+(a.showVisibility?'\x3cspan class\x3d"visibilityDetails"\x3e | \x3cspan class\x3d"visibility" title\x3d"Toggle visibility"\x3e\x3c/span\x3e\x3c/span\x3e':
"")+'\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"mainPhoto"\x3e'+(a.loggedIn?a.enableLeaveTip?'\x3cdiv class\x3d"tipTextAndIcon"\x3e\x3cdiv class\x3d"leaveTip link"\x3e\x3cdiv class\x3d"icon"\x3e\x3c/div\x3eLeave Tip\x3c/div\x3e\x3c/div\x3e':"":"")+(a.showVoting?'\x3cdiv class\x3d"voteOnPhotos"\x3e\x3cspan class\x3d"upvotePhoto button" title\x3d"This is a photo of good quality; a user would think this photo represents the venue well."\x3eGood\x3c/span\x3e\x3cspan class\x3d"downvotePhotoOther button" title\x3d"This photo is of low quality; a user would not think this photo represents the venue well."\x3eLow Quality \x3c/span\x3e\x3cspan class\x3d"downvotePhotoFace button" title\x3d"Photo prominently features faces of people who are not directly associated with the venue"\x3eHas Face\x3c/span\x3e\x3cspan class\x3d"downvotePhotoBlurry button" title\x3d"This photo is blurry and should not be publicly visible"\x3eBlurry\x3c/span\x3e\x3cspan class\x3d"downvotePhotoUnrelated button" title\x3d"This photo is unrelated to the venue and should not be publicly visible"\x3eUnrelated\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"voteThanks"\x3eThanks for voting!\x3c/div\x3e':
"")+(a.loggedIn&&!a.hideActions?a.showVoting?'\x3cdiv class\x3d"photoFlagging"\x3e\x3cdiv class\x3d"flagLink button" title\x3d"This photo displays violence / hate speech / nudity / illegal activity and should be removed"\x3eInappropriate / Illegal\x3c/div\x3e\x3cdiv class\x3d"flagConfirmation"\x3e\x3cdiv class\x3d"confirmText"\x3eAre you sure you want to report this content as inappropriate/illegal?\x3c/div\x3e\x3cdiv class\x3d"yesFlag button"\x3eYes, Inappropriate\x3c/div\x3e\x3cdiv class\x3d"noFlag button"\x3eCancel\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e':
'\x3cdiv class\x3d"flagPhoto"\x3e\x3ca href\x3d"#"\x3eFlag this Photo\x3c/a\x3e\x3c/div\x3e':"")+(a.isContentModerator&&!a.hideActions?'\x3cdiv class\x3d"suPhotoActions"\x3e\x3cspan class\x3d"demotePhoto link"\x3eDemote Photo\x3c/span\x3e |\x3cspan class\x3d"banPhotoSilently link"\x3e Ban Silently\x3c/span\x3e |\x3cspan class\x3d"banPhotoAndNotify link"\x3e Ban And Notify\x3c/span\x3e |'+(a.enablePhotoBoosters?'\x3cspan class\x3d"blessPhoto link"\x3e Bless\x3c/span\x3e':"")+"\x3c/div\x3e":"")+'\x3cdiv class\x3d"deletePhoto"\x3e\x3ca href\x3d"#"\x3e Delete Photo\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'};
templates.fourSq.ui.suInfoOverlay=function(a,b){return'\x3cdiv class\x3d"suInfo"\x3e\x3ch4\x3e'+soy.$$escapeHtml(a.suInfo)+"\x3c/h4\x3e\x3c/div\x3e"};templates.fourSq.ui.flagSuccess=function(a,b){return"Thanks for flagging this photo"};templates.fourSq.ui.flagFailure=function(a,b){return"There was a problem flagging this photo, please try again in a few minutes."};templates.fourSq.ui.deletePhotoSuccess=function(a,b){return"The photo has been successfully deleted."};
templates.fourSq.ui.deletePhotoFail=function(a,b){return"Something went wrong. Please try to delete the photo again later."};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.ui&&(templates.fourSq.ui={});"undefined"==typeof templates.fourSq.ui.phoneemailinput&&(templates.fourSq.ui.phoneemailinput={});templates.fourSq.ui.phoneemailinput.internationalInput=function(a,b){return'\x3cinput class\x3d"phoneEmail formStyle" placeholder\x3d"'+templates.fourSq.ui.phoneemailinput.defaultPlaceholderText(null)+'" /\x3e'};
templates.fourSq.ui.phoneemailinput.defaultPlaceholderText=function(a,b){return"Enter your phone number or email"};templates.fourSq.ui.phoneemailinput.empty=function(a,b){return"Please enter your phone number or email"};templates.fourSq.ui.phoneemailinput.invalid=function(a,b){return"Whoops! Looks like you entered an invalid email address or phone number. Try again?"};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.ui&&(templates.fourSq.ui={});"undefined"==typeof templates.fourSq.ui.save&&(templates.fourSq.ui.save={});
templates.fourSq.ui.save.doubleSaveButton=function(a,b){return'\x3cdiv class\x3d"saveButton saveToListAction inactive" title\x3d"Save to my saved places!"\x3e\x3cspan class\x3d"buttonLeft"\x3e\x3cimg src\x3d"'+soy.$$escapeHtml(fourSq.retina.isRetina()?"https://ss1.4sqi.net/img/lists/button_icon_saveribbon@2x-d809e5af932a66d1725c40dfddcc2855.png":"https://ss0.4sqi.net/img/lists/button_icon_saveribbon-9c5999c47028ca670954422ee53e7d96.png")+'" height\x3d"16" width\x3d"16" data-retina-url\x3d"'+soy.$$escapeHtml("https://ss1.4sqi.net/img/lists/button_icon_saveribbon@2x-d809e5af932a66d1725c40dfddcc2855.png")+
'" /\x3e\x3c/span\x3e\x3cspan class\x3d"buttonRight unsaved"\x3e\x3cspan class\x3d"label"\x3e'+templates.fourSq.ui.save.unsavedButtonCopy(null)+"\x3c/span\x3e\x3c/span\x3e\x3c/div\x3e"};
templates.fourSq.ui.save.microSaveButton=function(a,b){return'\x3cdiv class\x3d"saveButton microButton"\x3e\x3cdiv class\x3d"icon"\x3e\x3cimg width\x3d"16" height\x3d"16" src\x3d"'+soy.$$escapeHtml(fourSq.retina.isRetina()?"https://ss0.4sqi.net/img/button_icon_save@2x-e78772197465406b21f3971b03544393.png":"https://ss1.4sqi.net/img/button_icon_save-183203d8753c65295f45ff3e56b7be0a.png")+'" alt\x3d"Like" data-retina-url\x3d"'+soy.$$escapeHtml("https://ss0.4sqi.net/img/button_icon_save@2x-e78772197465406b21f3971b03544393.png")+
'" /\x3e\x3c/div\x3e\x3c/div\x3e'};templates.fourSq.ui.save.unsavedButtonCopy=function(a,b){a=a||{};return a.forTip?"Save this tip":a.forVenue?"Save this place":a.forList?"Follow this list":"Save"};templates.fourSq.ui.save.unsavingButtonCopy=function(a,b){return"Unsaving"};templates.fourSq.ui.save.savingButtonCopy=function(a,b){a=a||{};return a.forList?"Following...":"Saving..."};templates.fourSq.ui.save.savedButtonCopy=function(a,b){a=a||{};return a.forList?"Followed":"Saved"};
templates.fourSq.ui.save.saveButtonCopyWithCount=function(a,b){return 0==a.savedCount?"Save":1==a.savedCount?"1 Save":soy.$$escapeHtml(a.savedCount)+" Saves"};
templates.fourSq.ui.save.saveButton=function(a,b){a=a||{};return'\x3cdiv class\x3d"save-button '+(a.saved?" active":" inactive")+'"\x3e\x3cspan class\x3d"icon"\x3e\x3c/span\x3e\x3cspan class\x3d"label"\x3e'+(a.includeSavedCount?templates.fourSq.ui.save.saveButtonCopyWithCount(a):a.saved?templates.fourSq.ui.save.savedButtonCopy(a):templates.fourSq.ui.save.unsavedButtonCopy(a))+"\x3c/span\x3e\x3c/div\x3e"};
templates.fourSq.ui.save.saveLink=function(a,b){a=a||{};return'\x3cspan class\x3d"save-button save link'+(a.saved?" active":" inactive")+'"\x3e\x3cspan class\x3d"icon"\x3e\x3c/span\x3e\x3cspan class\x3d"label"\x3e'+(a.saved?templates.fourSq.ui.save.savedButtonCopy(a):templates.fourSq.ui.save.unsavedButtonCopy(a))+"\x3c/span\x3e\x3c/span\x3e"};templates.fourSq.ui.save.listsMenu=function(a,b){return'\x3cdiv class\x3d"listsMenu"\x3e\x3cdiv class\x3d"myListsContainer"\x3e\x3c/div\x3e\x3cdiv class\x3d"createNewSection"\x3eCreate a new list...\x3c/div\x3e\x3c/div\x3e'};
templates.fourSq.ui.save.listMenuItem=function(a,b){a=a||{};return'\x3cdiv class\x3d"listMenuItem'+(a.selected?" selected":"")+'"\x3e\x3cspan class\x3d"checkIcon"\x3e\x3c/span\x3e\x3cspan class\x3d"loadingIcon"\x3e\x3c/span\x3e\x3cspan class\x3d"listName"\x3e'+(a.isTodo?"My saved places":soy.$$escapeHtml(a.name))+"\x3c/span\x3e\x3c/div\x3e"};templates.fourSq.ui.save.createListsPromo=function(a,b){return'\x3cdiv class\x3d"noListsPromo message"\x3e\x3ch5\x3eShare and organize\x3c/h5\x3e\x3cdiv class\x3d"body"\x3eCreate lists to share with your friends or keep track of where to go next.\x3cbr /\x3e\x3cdiv class\x3d"link createListLink"\x3eStart a new list\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'};
templates.fourSq.ui.save.itemAddedToListMessage=function(a,b){return'\x3cspan\x3eOkay! Saved to \x3ca href\x3d"'+soy.$$escapeHtml(a.listUrl)+'"\x3e'+soy.$$escapeHtml(a.listName)+"\x3c/a\x3e!\x3c/span\x3e"};templates.fourSq.ui.save.itemAddedToTodoListMessage=function(a,b){return'\x3cspan\x3eOkay! Saved to \x3ca href\x3d"/todos"\x3eMy saved places\x3c/a\x3e!\x3c/span\x3e'};templates.fourSq.ui.save.listsFetchErrorMessage=function(a,b){return'\x3cdiv class\x3d"message"\x3eSorry, there was a problem loading your lists.\x3c/div\x3e'};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.ui&&(templates.fourSq.ui={});"undefined"==typeof templates.fourSq.ui.sharesocial&&(templates.fourSq.ui.sharesocial={});
templates.fourSq.ui.sharesocial.sidebar=function(a,b){a=a||{};return'\x3cdiv class\x3d"shareSocial box"\x3e\x3cdiv class\x3d"share-settings"\x3e'+(a.dontShareFoursquare?"":'\x3cdiv class\x3d"shareLink shareFoursquare"\x3e\x3cdiv class\x3d"iconPart"\x3e\x3c/div\x3e\x3cdiv class\x3d"textPart"\x3eShare with Foursquare friends\x3c/div\x3e\x3c/div\x3e')+(a.dontShareFacebook?"":'\x3cdiv class\x3d"shareLink shareFacebook"\x3e\x3cdiv class\x3d"iconPart"\x3e\x3c/div\x3e\x3cdiv class\x3d"textPart"\x3eShare via Facebook\x3c/div\x3e\x3c/div\x3e')+
(a.dontShareTwitter?"":'\x3cdiv class\x3d"shareLink shareTwitter"\x3e\x3cdiv class\x3d"iconPart"\x3e\x3c/div\x3e\x3cdiv class\x3d"textPart"\x3eShare via Twitter\x3c/div\x3e\x3c/div\x3e')+(a.dontShareEmail?"":'\x3cdiv class\x3d"shareLink shareEmail"\x3e\x3cdiv class\x3d"iconPart"\x3e\x3c/div\x3e\x3cdiv class\x3d"textPart"\x3eShare via Email\x3c/div\x3e\x3c/div\x3e')+"\x3c/div\x3e\x3c/div\x3e"};
templates.fourSq.ui.sharesocial.shareSocialDialog=function(a,b){a=a||{};return'\x3cdiv class\x3d"shareSocialFacebox"\x3e\x3cdiv class\x3d"header"\x3e\x3ch5\x3eShare with others\x3c/h5\x3e\x3cspan class\x3d"link close closeButton"\x3eClose\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"tabs"\x3e\x3cul\x3e'+(a.dontShareFoursquare?"":'\x3cli class\x3d"foursquare"\x3e\x3cspan class\x3d"link"\x3evia foursquare\x3c/span\x3e\x3cdiv class\x3d"arrow"\x3e\x3c/div\x3e\x3c/li\x3e')+(a.dontShareFacebook?"":'\x3cli class\x3d"facebook"\x3e\x3cspan class\x3d"link"\x3eon Facebook\x3c/span\x3e\x3cdiv class\x3d"arrow"\x3e\x3c/div\x3e\x3c/li\x3e')+
(a.dontShareTwitter?"":'\x3cli class\x3d"twitter"\x3e\x3cspan class\x3d"link"\x3eon Twitter\x3c/span\x3e\x3cdiv class\x3d"arrow"\x3e\x3c/div\x3e\x3c/li\x3e')+(a.dontShareEmail?"":'\x3cli class\x3d"email"\x3e\x3cspan class\x3d"link"\x3evia Email\x3c/span\x3e\x3cdiv class\x3d"arrow"\x3e\x3c/div\x3e\x3c/li\x3e')+'\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"shareSocialContent"\x3e'+(a.dontShareFoursquare?"":templates.fourSq.ui.sharesocial.shareSocialFoursquare(a))+(a.dontShareFacebook?"":templates.fourSq.ui.sharesocial.shareSocialFacebook(a))+
(a.dontShareTwitter?"":templates.fourSq.ui.sharesocial.shareSocialTwitter(a))+(a.dontShareEmail?"":templates.fourSq.ui.sharesocial.shareSocialEmail(a))+"\x3c/div\x3e\x3c/div\x3e"};
templates.fourSq.ui.sharesocial.shareSocialFoursquare=function(a,b){return'\x3cdiv class\x3d"shareSocialFoursquare shareSocialSite"\x3e\x3cdiv class\x3d"foursqFriendsInput postMsg"\x3eEnter your foursquare friends\' names\x3c/div\x3e\x3ctextarea class\x3d"newFormStyle formStyle"\x3e\x3c/textarea\x3e\x3cdiv class\x3d"postMsg"\x3eOptional message\x3c/div\x3e\x3cspan class\x3d"messageCharCount"\x3e200\x3c/span\x3e\x3ctextarea cols\x3d"50" class\x3d"newFormStyle formStyle"rows\x3d"3" tabindex\x3d"2"\x3e'+soy.$$escapeHtml(a.defaultSendMessage)+
'\x3c/textarea\x3e\x3cinput class\x3d"greenButton submitButton foursquare" type\x3d"submit" value\x3d\'Share\' tabindex\x3d"3" /\x3e\x3c/div\x3e'};
templates.fourSq.ui.sharesocial.shareSocialFacebook=function(a,b){return'\x3cdiv class\x3d"shareSocialFacebook shareSocialSite'+(a.isFacebookLinked?" linked":" unlinked")+'"\x3e\x3cdiv class\x3d"linked"\x3e\x3cdiv class\x3d"facebookInput"\x3e\x3cdiv class\x3d"facebookShare"\x3e\x3cdiv class\x3d"facebookWallPost"\x3e'+templates.fourSq.ui.sharesocial.previewFacebookWallPost(a)+'\x3c/div\x3e\x3cdiv class\x3d"postMsg"\x3eAdd a note\x3c/div\x3e\x3ctextarea name\x3d"message" cols\x3d"50" class\x3d"shareTextFacebook newFormStyle formStyle" rows\x3d"3" tabindex\x3d"2"\x3e'+
soy.$$escapeHtml(a.defaultSendMessage)+'\x3c/textarea\x3e\x3cinput tabindex\x3d"3" value\x3d\'Share\' type\x3d"submit" class\x3d"greenButton submitButton facebook"\x3e\x3cspan class\x3d"messageCharCount"\x3e200\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"unlinked"\x3e\x3cdiv class\x3d"fbLinkForm"\x3e\x3cdiv class\x3d"statusBar facebookConnect"\x3e\x3cdiv class\x3d"signInWarning"\x3eYou need to link to Facebook first!\x3c/div\x3e\x3cspan class\x3d"linkFacebook"\x3eSign in with Facebook\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'};
templates.fourSq.ui.sharesocial.shareSocialTwitter=function(a,b){return'\x3cdiv class\x3d"shareSocialTwitter shareSocialSite'+(a.isTwitterLinked?" linked":" unlinked")+'"\x3e\x3cdiv class\x3d"unlinked"\x3e\x3cdiv class\x3d"twitterConnect statusBar"\x3e\x3cdiv class\x3d"signInWarning"\x3eYou need to link to Twitter first!\x3c/div\x3e\x3cspan class\x3d"linkTwitter"\x3eLink to Twitter\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"linked"\x3e\x3cdiv class\x3d"twitterInput"\x3e\x3cdiv class\x3d"twitterShare"\x3e\x3cdiv class\x3d"postMsg"\x3eAdd a note\x3c/div\x3e\x3ctextarea name\x3d"message" cols\x3d"50" class\x3d"newFormStyle formStyle shareTextTweet" rows\x3d"3" tabindex\x3d"2"\x3e'+
soy.$$escapeHtml(a.twitterMessage)+'\x3c/textarea\x3e\x3cinput class\x3d"greenButton submitButton twitter" type\x3d"submit" value\x3d\'Share\' tabindex\x3d"3" /\x3e\x3cspan class\x3d"messageCharCount"\x3e140\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'};
templates.fourSq.ui.sharesocial.shareSocialEmail=function(a,b){return'\x3cdiv class\x3d"shareSocialEmail shareSocialSite"\x3e\x3cdiv class\x3d"emailShare"\x3e\x3cdiv class\x3d"postMsg"\x3eTo\x3c/div\x3e\x3cdiv class\x3d"emailInput"\x3e\x3ctextarea name\x3d"userIds" class\x3d"emailAddresses2 newFormStyle formStyle"\x3e\x3c/textarea\x3e\x3c/div\x3e\x3cdiv class\x3d"postMsg"\x3eAdd a note\x3c/div\x3e\x3ctextarea name\x3d"message" cols\x3d"50" class\x3d"newFormStyle formStyle shareTextEmail" rows\x3d"3" tabindex\x3d"2"\x3e'+soy.$$escapeHtml(a.defaultSendMessage)+
'\x3c/textarea\x3e\x3cinput tabindex\x3d"3" value\x3d\'Share\' type\x3d"submit" class\x3d"submitButton greyButton email"\x3e\x3cspan class\x3d"messageCharCount"\x3e200\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e'};
templates.fourSq.ui.sharesocial.previewFacebookWallPost=function(a,b){var c='\x3cdiv class\x3d"facebookWallPost"\x3e'+(a.facebookPostImage?'\x3cimg src\x3d"'+soy.$$escapeHtml(a.facebookPostImage)+'" class\x3d"wallPostImage" /\x3e':"")+'\x3cdiv class\x3d"wallPostContent"\x3e';switch(a.facebookPostType){case "tip":c+=templates.fourSq.ui.sharesocial.composeFacebookPostCaptionTip(a);break;case "list":c+=templates.fourSq.ui.sharesocial.composeFacebookPostCaptionList(a);break;case "venue":c+=templates.fourSq.ui.sharesocial.composeFacebookPostCaptionVenue(a);
break;case "broadcast":c+=templates.fourSq.ui.sharesocial.composeFacebookPostCaptionBroadcast(a)}return c+"\x3c/div\x3e\x3c/div\x3e"};
templates.fourSq.ui.sharesocial.composeFacebookPostCaptionTip=function(a,b){return'\x3cdiv class\x3d"wallPostTitle"\x3e\x3cstrong\x3e\x3cspan\x3eA tip at '+soy.$$escapeHtml(a.facebookVenueName)+'\x3c/span\x3e\x3c/strong\x3e\x3c/div\x3e\x3cdiv class\x3d"wallPostItem"\x3e'+soy.$$escapeHtml(a.facebookTipText)+'\x3c/div\x3e\x3cdiv class\x3d"wallPostItem"\x3ePlace: '+soy.$$escapeHtml(a.facebookVenueName)+'\x3c/div\x3e\x3cdiv class\x3d"wallPostItem"\x3eCreator: '+soy.$$escapeHtml(a.facebookUser)+'\x3c/div\x3e\x3cdiv class\x3d"wallPostItem"\x3eCategory: '+
soy.$$escapeHtml(a.facebookVenueCategory)+"\x3c/div\x3e"};
templates.fourSq.ui.sharesocial.composeFacebookPostCaptionList=function(a,b){return'\x3cdiv class\x3d"wallPostTitle"\x3e\x3cstrong\x3e\x3cspan\x3e'+soy.$$escapeHtml(a.facebookPostTitle)+'\x3c/span\x3e\x3c/strong\x3e\x3c/div\x3e\x3cdiv class\x3d"wallPostItem"\x3e'+soy.$$escapeHtml(a.facebookPostListDescription)+'\x3c/div\x3e\x3cdiv class\x3d"wallPostItem"\x3eNumber of places: '+soy.$$escapeHtml(a.facebookNumberOfPlaces)+'\x3c/div\x3e\x3cdiv class\x3d"wallPostItem"\x3eCreator: '+soy.$$escapeHtml(a.facebookUser)+
'\x3c/div\x3e\x3cdiv class\x3d"wallPostItem"\x3eFollowers: '+soy.$$escapeHtml(a.facebookFollowerCount)+"\x3c/div\x3e"};
templates.fourSq.ui.sharesocial.composeFacebookPostCaptionVenue=function(a,b){return'\x3cdiv class\x3d"wallPostTitle"\x3e\x3cstrong\x3e\x3cspan\x3e'+soy.$$escapeHtml(a.facebookVenueName)+'\x3c/span\x3e\x3c/strong\x3e\x3c/div\x3e\x3cdiv class\x3d"wallPostItem"\x3e'+(a.facebookVenueCategory?soy.$$escapeHtml(a.facebookVenueCategory):"")+"in "+soy.$$escapeHtml(a.facebookVenueCityState)+'\x3c/div\x3e\x3cdiv class\x3d"wallPostItem"\x3e'+soy.$$escapeHtml(a.facebookVenueAddress)+"\x3c/div\x3e"};
templates.fourSq.ui.sharesocial.composeFacebookPostCaptionBroadcast=function(a,b){return"An update from "+soy.$$escapeHtml(a.facebookVenueName)};templates.fourSq.ui.sharesocial.composeFacebookPostCaptionDeliverable=function(a,b){return"An update from "+soy.$$escapeHtml(a.facebookVenueName)};templates.fourSq.ui.sharesocial.facebookSuccessNotifierMessage=function(a,b){return"Posted on Facebook!"};templates.fourSq.ui.sharesocial.twitterSuccessNotifierMessage=function(a,b){return"Posted on Twitter!"};
templates.fourSq.ui.sharesocial.emailSuccessNotifierMessage=function(a,b){return"Sent to Friends!"};templates.fourSq.ui.sharesocial.failureNotifierMessage=function(a,b){return"Nooooo. Sending failed. Try again?"};templates.fourSq.ui.sharesocial.defaultShareMessage=function(a,b){return"Check out what I found on foursquare!"};templates.fourSq.ui.sharesocial.emailsOrFriendsRequired=function(a,b){return"Please add some friends you want to share with"};
templates.fourSq.ui.sharesocial.tokenInputNoResults=function(a,b){return"No friends found, try typing an email address"};templates.fourSq.ui.sharesocial.tokenInputPrompt=function(a,b){return"Enter your friends' names or email addresses"};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.ui&&(templates.fourSq.ui={});"undefined"==typeof templates.fourSq.ui.signupmenu&&(templates.fourSq.ui.signupmenu={});
templates.fourSq.ui.signupmenu.menu=function(a,b){return'\x3cdiv id\x3d"signupButtonMenu"\x3e\x3cdiv class\x3d"facebookButton"\x3e\x3cimg width\x3d"18" height\x3d"18" src\x3d"'+soy.$$escapeHtml(fourSq.retina.isRetina()?"https://ss1.4sqi.net/img/facebook_white_18@2x-09c9016a274d402baa09dea3db57bee9.png":"https://ss1.4sqi.net/img/facebook_white_18-6875722153c5cc272e8c0a35bd2300aa.png")+'" /\x3eSign up with Facebook\x3c/div\x3e\x3cdiv class\x3d"googlePlusSignupButton"\x3eSign up with Google\x3c/div\x3e\x3ca class\x3d"emailSignup" '+
(a.signupModal?"":'href\x3d"/signup/join'+(a.origin?"?"+soy.$$escapeHtml(a.origin):""))+'"\x3eOr use your email\x3c/a\x3e'+templates.fourSq.ui.signupmenu.legal(a)+"\x3c/div\x3e"};
templates.fourSq.ui.signupmenu.legal=function(a,b){a=a||{};return'\x3cp class\x3d"legal"\x3eBy signing up for Foursquare you agree to the \x3ca href\x3d"/legal/terms" target\x3d"_blank" class\x3d"tos"\x3eTerms of Service\x3c/a\x3e and \x3ca href\x3d"/legal/privacy" target\x3d"_blank" class\x3d"privacy"\x3ePrivacy Policy\x3c/a\x3e.\x3c/p\x3e'+(a.isEU?'\x3cp class\x3d"legal"\x3e\x3c/p\x3e':"")};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.signup&&(templates.fourSq.signup={});"undefined"==typeof templates.fourSq.signup.page&&(templates.fourSq.signup.page={});"undefined"==typeof templates.fourSq.signup.page.inlinesignupmodal&&(templates.fourSq.signup.page.inlinesignupmodal={});templates.fourSq.signup.page.inlinesignupmodal.tooYoung=function(a,b){return'\x3cdiv class\x3d"tooYoung legal"\x3eSorry, but you can not join Foursquare at this time because of your age.\x3c/div\x3e'};
templates.fourSq.signup.page.inlinesignupmodal.describeFoursquareHeader=function(a,b){return"\x3ch2\x3eFoursquare learns what you like and leads you to places you'll love.\x3c/h2\x3e"};
templates.fourSq.signup.page.inlinesignupmodal.inlineSignupModal=function(a,b){return'\x3cdiv id\x3d"signupForFoursquareRichModal" class\x3d"loginSignup modal signupSection signupModal"\x3e'+templates.fourSq.signup.page.inlinesignupmodal.describeFoursquareHeader(null)+'\x3cdiv class\x3d"inner signUp"\x3e\x3ch3 class\x3d"genericSignupMsg"\x3eSign up for Foursquare\x3c/h3\x3e'+(a.serverError?'\x3cdiv class\x3d"error"\x3eLooks like something went wrong. Please try submitting again.\x3c/div\x3e':"")+
'\x3cform class\x3d"inlineSignupForm"\x3e'+templates.fourSq.signup.page.signupsection.formContents({prefill:a.prefill,isEU:a.isEU,isUS:a.isUS,useMobileForm:!1,shouldShowCAPTCHA:a.shouldShowCAPTCHA,captchaApiKey:a.captchaApiKey,shouldShowCAPTCHAError:a.shouldShowCAPTCHAError})+'\x3cbutton class\x3d"signupButton" id\x3d"signupButton" type\x3d"submit"\x3e\x3cdiv class\x3d"text"\x3eSign up\x3ci class\x3d"icon"\x3e\x3c/i\x3e\x3c/div\x3e\x3c/button\x3e\x3cdiv class\x3d"spinner"\x3e\x3c/div\x3e\x3c/form\x3e\x3cimg id\x3d"hiddenImageHolder"\x3e\x3c/div\x3e\x3c/div\x3e'};
templates.fourSq.signup.page.inlinesignupmodal.inlineTasteGame=function(a,b){a=a||{};var c;c=null!=a.savedTastes?a.savedTastes:!1;return c=""+('\x3cdiv id\x3d"inlineTastesRichModal" class\x3d"signupModal"\x3e\x3cdiv id\x3d"tastesOnboardingEdu"\x3e\x3ch2\x3e'+(c?a.name?"\x3cp\x3eHi "+soy.$$escapeHtml(a.name)+"! We saved your "+soy.$$escapeHtml(a.savedTastes)+" tastes, so you can start getting personalized recommendations.\x3c/p\x3e":"\x3cp\x3eWe saved your "+soy.$$escapeHtml(a.savedTastes)+" tastes, so you can start getting personalized recommendations.\x3c/p\x3e":
a.name?"Hi "+soy.$$escapeHtml(a.name)+'! Love \x3cspan class\x3d"tasteHighlight"\x3esushi\x3c/span\x3e or \x3cspan class\x3d"tasteHighlight"\x3echocolate cake\x3c/span\x3e? We\u2019ll find the best places that match your personal tastes.':'Love \x3cspan class\x3d"tasteHighlight"\x3esushi\x3c/span\x3e or \x3cspan class\x3d"tasteHighlight"\x3echocolate cake\x3c/span\x3e? We\u2019ll find the best places that match your personal tastes.')+"\x3c/h2\x3e\x3ch3\x3e"+(c?"Care to add a few more tastes you like?":
"Click a few tastes you like:")+"\x3c/h3\x3e\x3c/div\x3e"+templates.fourSq.tastes.tastegame.tasteGameContainer(null)+'\x3cbutton class\x3d"signupButton proceed" id\x3d"finishedTastesButton"\x3e'+(c?"Done":"Skip")+"\x3c/button\x3e\x3c/div\x3e")};
templates.fourSq.signup.page.inlinesignupmodal.inlineEmailPrompt=function(a,b){return'\x3cdiv id\x3d"inlineEmailPrompt" class\x3d"signUp signupModal"\x3e\x3cdiv class\x3d"emailPromptEdu"\x3e\x3ch2\x3e'+(a.name?"Hi "+soy.$$escapeHtml(a.name)+". Please enter your email to finish signing up.":"Please enter your email to finish signing up.")+'\x3c/h2\x3e\x3c/div\x3e\x3cform class\x3d"emailPromptForm"\x3e'+templates.fourSq.signup.page.signupsection.emailField(null)+'\x3cdiv class\x3d"buttonRow"\x3e'+(a.allowSkip?
'\x3cbutton class\x3d"signupCloseButton" id\x3d"skipButton" type\x3d"button"\x3eSkip\x3c/button\x3e':"")+'\x3cbutton class\x3d"signupButton" id\x3d"signupButton" type\x3d"submit"\x3eSign up\x3c/button\x3e\x3c/div\x3e\x3cimg src\x3d"'+soy.$$escapeHtml("https://ss0.4sqi.net/img/ajax_spinner-a51c5608d01acf32df728f299767f82b.gif")+'" height\x3d"25" width\x3d"25" alt\x3d"loading" class\x3d"spinner" /\x3e\x3c/form\x3e\x3c/div\x3e'};
templates.fourSq.signup.page.inlinesignupmodal.inlineSignupPrompt=function(a,b){return'\x3cdiv id\x3d"inlineSignupPrompt" class\x3d"signupModal"\x3e'+templates.fourSq.signup.page.inlinesignupmodal.describeFoursquareHeader(null)+'\x3ch3\x3eCreate an account in seconds.\x3c/h3\x3e\x3cdiv class\x3d"signupButtons"\x3e\x3cdiv class\x3d"buttonRow"\x3e\x3cbutton class\x3d"signupButton facebookButton"\x3e\x3cdiv class\x3d"facebookButtonText"\x3eSign up with Facebook\x3c/div\x3e\x3c/button\x3e\x3cbutton class\x3d"signupCloseButton emailButton"\x3eSign up with email\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e'+
templates.fourSq.ui.signupmenu.legal(a)+"\x3c/div\x3e"};
templates.fourSq.signup.page.inlinesignupmodal.inlineSuccessPage=function(a,b){var c;c=0<a.tastes.length;return c=""+('\x3cdiv id\x3d"inlineSuccessModal" class\x3d"signupModal"\x3e\x3cdiv class\x3d"signupSummary"\x3e\x3ch2\x3e'+(c?a.fromTastesGame?"You're all set!":a.name?"Welcome to Foursquare, "+soy.$$escapeHtml(a.name)+"! We found great places that match your tastes.":"Welcome to Foursquare! We found great places that match your tastes.":a.name?"Welcome to Foursquare, "+soy.$$escapeHtml(a.name)+
"! You can personalize your search results by adding tastes to your profile.":"You're all finished! You can personalize your search results by adding tastes to your profile.")+"\x3c/h2\x3e"+(a.fromTastesGame?'\x3ch3 class\x3d"subtitle"\x3eWe\u2019ll always highlight your tastes so you never miss out, and you can search for a specific taste (or add more!) when the mood strikes.\x3c/h3\x3e':"")+'\x3c/div\x3e\x3cdiv class\x3d"checkmarkImage"\x3e\x3c/div\x3e\x3cdiv class\x3d"buttonRow"\x3e'+(a.fromTastesGame?
'\x3cbutton class\x3d"signupButton" id\x3d"finishButton"\x3eStart exploring now\x3c/button\x3e':c?'\x3cbutton class\x3d"signupCloseButton" id\x3d"closeButton"\x3eClose\x3c/button\x3e\x3cbutton class\x3d"signupButton" id\x3d"finishButton"\x3eShow me\x3c/button\x3e':'\x3cbutton class\x3d"signupButton" id\x3d"closeButton"\x3eFinished\x3c/button\x3e')+"\x3c/div\x3e\x3c/div\x3e")};templates.fourSq.signup.page.inlinesignupmodal.tastesAdvanceText=function(a,b){return"Next"};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.ui&&(templates.fourSq.ui={});"undefined"==typeof templates.fourSq.ui.signupmodal&&(templates.fourSq.ui.signupmodal={});templates.fourSq.ui.signupmodal.discoverShareSave_=function(a,b){return"Discover, share, save - don't miss out! Sign up now."};templates.fourSq.ui.signupmodal.foursquareLearnsDiscovery_=function(a,b){return"Foursquare learns what you like and leads you to places you\u2019ll love. Sign up now to discover new places and save your favorites."};
templates.fourSq.ui.signupmodal.foursquareLearnsPersonalized_=function(a,b){return"Foursquare learns what you like and leads you to places you\u2019ll love. Sign up now to get personalized recommendations."};templates.fourSq.ui.signupmodal.saveToListSignupTitle=function(a,b){return"Don't miss out! Sign up now to save lists of your favorite places."};templates.fourSq.ui.signupmodal.beenHereSignupTitle=function(a,b){return"Don't miss out! Join Foursquare to keep track of places you've been."};
templates.fourSq.ui.signupmodal.followListSignupTitle=function(a,b){return templates.fourSq.ui.signupmodal.discoverShareSave_(null)};templates.fourSq.ui.signupmodal.shareWithFriendsSignupTitle=function(a,b){return"Don't miss out! Sign up now to share this with your friends."};templates.fourSq.ui.signupmodal.createListSignupTitle=function(a,b){return"Don't miss out! Join Foursquare to create and save lists of your favorites."};templates.fourSq.ui.signupmodal.markAsDoneSignupTitle=function(a,b){return"Don't miss out! Join Foursquare to mark this as done."};
templates.fourSq.ui.signupmodal.checkinLikeSignupTitle=function(a,b){return"Don't miss out! Join Foursquare to like this check-in."};templates.fourSq.ui.signupmodal.friendSignupTitle=function(a,b){return a.isFollow?"Don't miss out! Join Foursquare to follow "+soy.$$escapeHtml(a.userName)+".":"Join Foursquare to friend "+soy.$$escapeHtml(a.userName)+"."};templates.fourSq.ui.signupmodal.exploreHaveBeenFilterSignupTitle=function(a,b){return templates.fourSq.ui.signupmodal.discoverShareSave_(null)};
templates.fourSq.ui.signupmodal.exploreHaveNotBeenFilterSignupTitle=function(a,b){return templates.fourSq.ui.signupmodal.discoverShareSave_(null)};templates.fourSq.ui.signupmodal.exploreFriendsHaveBeenFilterSignupTitle=function(a,b){return templates.fourSq.ui.signupmodal.discoverShareSave_(null)};templates.fourSq.ui.signupmodal.exploreHaveBeenFilterSignupBody=function(a,b){return templates.fourSq.ui.signupmodal.foursquareLearnsPersonalized_(null)};
templates.fourSq.ui.signupmodal.exploreLikedFilterSignupTitle=function(a,b){return templates.fourSq.ui.signupmodal.discoverShareSave_(null)};templates.fourSq.ui.signupmodal.exploreLikedFilterSignupBody=function(a,b){return templates.fourSq.ui.signupmodal.foursquareLearnsPersonalized_(null)};templates.fourSq.ui.signupmodal.exploreSavedFilterSignupTitle=function(a,b){return templates.fourSq.ui.signupmodal.discoverShareSave_(null)};
templates.fourSq.ui.signupmodal.exploreSavedFilterSignupBody=function(a,b){return templates.fourSq.ui.signupmodal.foursquareLearnsDiscovery_(null)};templates.fourSq.ui.signupmodal.exploreHaveNotBeenFilterSignupBody=function(a,b){return templates.fourSq.ui.signupmodal.foursquareLearnsPersonalized_(null)};templates.fourSq.ui.signupmodal.exploreFriendsHaveBeenFilterSignupBody=function(a,b){return templates.fourSq.ui.signupmodal.foursquareLearnsPersonalized_(null)};
templates.fourSq.ui.signupmodal.venueLikeSignupBody=function(a,b){return"Foursquare learns what you like and leads you to places you'll love. Sign up now to save and share your favorite venues."};templates.fourSq.ui.signupmodal.tipLikeSignupBody=function(a,b){return"Foursquare learns what you like and leads you to places you'll love. Sign up now to save and share your favorite tips."};templates.fourSq.ui.signupmodal.pageLikeSignupBody=function(a,b){return templates.fourSq.ui.signupmodal.foursquareLearnsDiscovery_(null)};
templates.fourSq.ui.signupmodal.savePlaceOrTipSignupBody=function(a,b){return templates.fourSq.ui.signupmodal.foursquareLearnsPersonalized_(null)};templates.fourSq.ui.signupmodal.saveListSignupBody=function(a,b){return"Foursquare learns what you like and leads you to places you'll love."};templates.fourSq.ui.signupmodal.defaultSignupPromptBody=function(a,b){return"Never miss out! Sign up now to discover new places and save your favorites."};
templates.fourSq.ui.signupmodal.richSignupModal=function(a,b){return'\x3cdiv id\x3d"signupForFoursquareRichModal" class\x3d"loginSignup modal signupModal'+(a.modalClass?" "+soy.$$escapeHtml(a.modalClass):"")+'"\x3e\x3ch2\x3e'+(a.titleHtml?soy.$$escapeHtml(a.titleHtml):a.title?soy.$$escapeHtml(a.title):templates.fourSq.ui.signupPrompt.standardSignupHeader(null))+'\x3c/h2\x3e\x3cform action\x3d"/signup/pre-signup" method\x3d"POST" class\x3d"preSignupForm"\x3e'+(a.actionKey?'\x3cinput id\x3d"loginActionKey" name\x3d"actionKey" type\x3d"hidden" value\x3d"'+
soy.$$escapeHtml(a.actionKey)+'"/\x3e':"")+(a.continueTo?'\x3cinput id\x3d"loginContinue" name\x3d"continue" type\x3d"hidden" value\x3d"'+soy.$$escapeHtml(a.continueTo)+'"/\x3e':"")+(a.origin?'\x3cinput name\x3d"origin" type\x3d"hidden" value\x3d"'+soy.$$escapeHtml(a.origin)+'"/\x3e':"")+'\x3cinput type\x3d"submit" style\x3d"display:none;" name\x3d"emailSignupSubmit" /\x3e\x3cinput type\x3d"submit" style\x3d"display:none;" name\x3d"loginSubmit"/\x3e\x3c/form\x3e\x3cp\x3e'+(a.bodyText?soy.$$escapeHtml(a.bodyText):
templates.fourSq.ui.signupmodal.defaultSignupPromptBody(null))+'\x3c/p\x3e\x3cdiv class\x3d"signup"\x3e\x3cdiv class\x3d"signupLinks"\x3e\x3cp\x3e\x3cspan class\x3d"emailSignupLink link"\x3eSign up with Email\x3c/span\x3e or\x3cbr\x3e\x3cspan class\x3d"facebookButton"\x3e\x3cimg width\x3d"18" height\x3d"18" src\x3d"'+soy.$$escapeHtml(fourSq.retina.isRetina()?"https://ss1.4sqi.net/img/facebook_white_18@2x-09c9016a274d402baa09dea3db57bee9.png":"https://ss1.4sqi.net/img/facebook_white_18-6875722153c5cc272e8c0a35bd2300aa.png")+
'" /\x3eSign up with Facebook\x3c/span\x3e\x3c/p\x3e\x3c/div\x3e\x3cdiv class\x3d"facepile"\x3e'+templates.fourSq.facebook.facepile({fbAppId:a.fbAppId,width:300})+'\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"loginAlternative"\x3e\x3cstrong\x3eAlready on Foursquare?\x3c/strong\x3e \x3cspan class\x3d"loginLink link"\x3eLog in\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e'};templates.fourSq.ui.signupmodal.swarmUpsellTitle=function(a,b){return"Want to keep up with "+soy.$$escapeHtml(a.firstName)+"?"};
templates.fourSq.ui.signupmodal.swarmUpsellModalOnFoursquare=function(a,b){a=a||{};return"control"==a.scidmExperimentGroup?templates.fourSq.ui.signupmodal.scidmControl(a):"experiment"==a.scidmExperimentGroup?templates.fourSq.ui.signupmodal.scidmExperiment(a):templates.fourSq.ui.signupmodal.scidmControl(a)};
templates.fourSq.ui.signupmodal.scidmControl=function(a,b){a=a||{};return'\x3cdiv id\x3d"signupForSwarmRichModal" class\x3d"loginSignup modal'+(a.modalClass?" "+soy.$$escapeHtml(a.modalClass):"")+'"\x3e\x3ch2\x3e'+templates.fourSq.ui.signupmodal.swarmUpsellTitle(a)+" Download Swarm by Foursquare.\x3c/h2\x3e"+templates.fourSq.ui.signupmodal.swarmAppDownloadBadgeImages(a)+'\x3cdiv class\x3d"story"\x3e\x3cdiv class\x3d"chapter"\x3e\x3cdiv class\x3d"img"\x3e\x3cimg src\x3d"'+soy.$$escapeHtml(fourSq.retina.isRetina()?
"https://ss0.4sqi.net/img/swarm/screenshots/swarmScreenshotOne@2x-eefa4ac30f37bd85ce5b4397e3df3501.png":"https://ss1.4sqi.net/img/swarm/screenshots/swarmScreenshotOne-bcf9787aedbeb403bd84c74ce05c58f0.png")+'" alt\x3d"" data-retina-url\x3d"'+soy.$$escapeHtml("https://ss0.4sqi.net/img/swarm/screenshots/swarmScreenshotOne@2x-eefa4ac30f37bd85ce5b4397e3df3501.png")+'" width\x3d"190px" /\x3e\x3c/div\x3e\x3ch3\x3eChecking in is faster and more fun than ever.\x3c/h3\x3e\x3cp\x3eYou can also see where your friends are at-a-glance.\x3c/p\x3e\x3c/div\x3e\x3cdiv class\x3d"chapter"\x3e\x3cdiv class\x3d"img"\x3e\x3cimg src\x3d"'+
soy.$$escapeHtml(fourSq.retina.isRetina()?"https://ss0.4sqi.net/img/swarm/screenshots/swarmScreenshotTwo@2x-e0f8d4d73a1d683e2602061d6a608979.png":"https://ss0.4sqi.net/img/swarm/screenshots/swarmScreenshotTwo-77dfa089730dbaec9e38e1c60c438092.png")+'" alt\x3d"" data-retina-url\x3d"'+soy.$$escapeHtml("https://ss0.4sqi.net/img/swarm/screenshots/swarmScreenshotTwo@2x-e0f8d4d73a1d683e2602061d6a608979.png")+'" width\x3d"190px" /\x3e\x3c/div\x3e\x3ch3\x3eGot an idea for something to do later?\x3c/h3\x3e\x3cp\x3eMake a plan that all of your nearby friends can see.\x3c/p\x3e\x3c/div\x3e\x3cdiv class\x3d"chapter"\x3e\x3cdiv class\x3d"img"\x3e\x3cimg src\x3d"'+
soy.$$escapeHtml(fourSq.retina.isRetina()?"https://ss0.4sqi.net/img/swarm/screenshots/swarmScreenshotThree@2x-7965b1e85b6483f33a8d16cc1af57698.png":"https://ss0.4sqi.net/img/swarm/screenshots/swarmScreenshotThree-747cfdd841b39f7ad5d042315db2cd6e.png")+'" alt\x3d"" data-retina-url\x3d"'+soy.$$escapeHtml("https://ss0.4sqi.net/img/swarm/screenshots/swarmScreenshotThree@2x-7965b1e85b6483f33a8d16cc1af57698.png")+'" width\x3d"190px" /\x3e\x3c/div\x3e\x3ch3\x3eWant to keep up with friends?\x3c/h3\x3e\x3cp\x3eNeighborhood sharing makes it easy.\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"bee"\x3e\x3cimg src\x3d"'+
soy.$$escapeHtml(fourSq.retina.isRetina()?"https://ss1.4sqi.net/img/swarm/bee@2x-5a81599b26be9a55df347b5af5ac490f.png":"https://ss1.4sqi.net/img/swarm/bee-ecb1a4c7d6b5ac9bececae2fbaf36c37.png")+'" data-retina-url\x3d"'+soy.$$escapeHtml("https://ss1.4sqi.net/img/swarm/bee@2x-5a81599b26be9a55df347b5af5ac490f.png")+'" alt\x3d"Swarm Logo" class\x3d"mark" width\x3d"108px" /\x3e\x3cdiv class\x3d"trail"\x3e\x3cdiv class\x3d"dot one"\x3e\x3c/div\x3e\x3cdiv class\x3d"dot two"\x3e\x3c/div\x3e\x3cdiv class\x3d"dot three"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'};
templates.fourSq.ui.signupmodal.scidmExperiment=function(a,b){a=a||{};return'\x3cdiv id\x3d"signupForSwarmRichModal" class\x3d"loginSignup modal'+(a.modalClass?" "+soy.$$escapeHtml(a.modalClass):"")+'"\x3e\x3ch2\x3eGo out. Check in. Have fun.\x3cbr /\x3e Download Swarm by Foursquare.\x3c/h2\x3e'+templates.fourSq.ui.signupmodal.swarmAppDownloadBadgeImages(a)+'\x3cdiv class\x3d"story"\x3e\x3cdiv class\x3d"chapter"\x3e\x3cdiv class\x3d"img"\x3e\x3cimg src\x3d"'+soy.$$escapeHtml(fourSq.retina.isRetina()?
"https://ss1.4sqi.net/img/swarm/screenshots/aug15/one@2x-88a382aa69922b64d0a14ff798f2eff0.png":"https://ss0.4sqi.net/img/swarm/screenshots/aug15/one-7269b92085ebe08c265fe3d2d5c20e89.png")+'" alt\x3d"" data-retina-url\x3d"'+soy.$$escapeHtml("https://ss1.4sqi.net/img/swarm/screenshots/aug15/one@2x-88a382aa69922b64d0a14ff798f2eff0.png")+'" width\x3d"190px" /\x3e\x3c/div\x3e\x3ch3\x3eEarn prizes based on the places you go.\x3c/h3\x3e\x3c/div\x3e\x3cdiv class\x3d"chapter"\x3e\x3cdiv class\x3d"img"\x3e\x3cimg src\x3d"'+
soy.$$escapeHtml(fourSq.retina.isRetina()?"https://ss1.4sqi.net/img/swarm/screenshots/aug15/two@2x-8ffb0a82d0825482f6c4660ba50a41c1.png":"https://ss0.4sqi.net/img/swarm/screenshots/aug15/two-2671eccc881afb02e6a56a5d4cdcf8ef.png")+'" alt\x3d"" data-retina-url\x3d"'+soy.$$escapeHtml("https://ss1.4sqi.net/img/swarm/screenshots/aug15/two@2x-8ffb0a82d0825482f6c4660ba50a41c1.png")+'" width\x3d"190px" /\x3e\x3c/div\x3e\x3ch3\x3eCompete with your friends to see who\'s having the best week.\x3c/h3\x3e\x3c/div\x3e\x3cdiv class\x3d"chapter"\x3e\x3cdiv class\x3d"img"\x3e\x3cimg src\x3d"'+
soy.$$escapeHtml(fourSq.retina.isRetina()?"https://ss0.4sqi.net/img/swarm/screenshots/aug15/three@2x-403f795b672295c1190ac0b9dff624bd.png":"https://ss1.4sqi.net/img/swarm/screenshots/aug15/three-216362c0e766994c174c30a75eab1887.png")+'" alt\x3d"" data-retina-url\x3d"'+soy.$$escapeHtml("https://ss0.4sqi.net/img/swarm/screenshots/aug15/three@2x-403f795b672295c1190ac0b9dff624bd.png")+'" width\x3d"190px" /\x3e\x3c/div\x3e\x3ch3\x3eThe more friends who play, the bigger the prizes!\x3c/h3\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"bee"\x3e\x3cimg src\x3d"'+
soy.$$escapeHtml(fourSq.retina.isRetina()?"https://ss1.4sqi.net/img/swarm/bee@2x-5a81599b26be9a55df347b5af5ac490f.png":"https://ss1.4sqi.net/img/swarm/bee-ecb1a4c7d6b5ac9bececae2fbaf36c37.png")+'" data-retina-url\x3d"'+soy.$$escapeHtml("https://ss1.4sqi.net/img/swarm/bee@2x-5a81599b26be9a55df347b5af5ac490f.png")+'" alt\x3d"Swarm Logo" class\x3d"mark" width\x3d"108px" /\x3e\x3cdiv class\x3d"trail"\x3e\x3cdiv class\x3d"dot one"\x3e\x3c/div\x3e\x3cdiv class\x3d"dot two"\x3e\x3c/div\x3e\x3cdiv class\x3d"dot three"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'};
templates.fourSq.ui.signupmodal.chooseAnotherStoreCopy=function(a,b){return"Choose another store"};
templates.fourSq.ui.signupmodal.swarmAppDownloadBadgeImages=function(a,b){a=a||{};var c;c=a.suppressTarget?"":'target\x3d"_blank"';var d=null==a.onlyShowPlatform||"android"==a.onlyShowPlatform,e=null!=a.appsflyerId?a.appsflyerId:"swarmcid";return c='\x3cdiv class\x3d"download"\x3e\x3cdiv class\x3d"downloadLinks"\x3e\x3cp\x3e\x3cdiv class\x3d"appStores"\x3e'+((null==a.onlyShowPlatform||"iphone"==a.onlyShowPlatform?'\x3ca id\x3d"iosStoreLink" href\x3d"/get?os\x3diphone\x26appsflyerId\x3d'+soy.$$escapeHtml(e)+
'" '+soy.$$escapeHtml(c)+'\x3e\x3cimg src\x3d"'+soy.$$escapeHtml(fourSq.retina.isRetina()?"https://ss0.4sqi.net/img/swarm/homepage/5.0/appStores/apple@2x-f7f50e93ba4eba7a1a889180d5cece0e.png":"https://ss0.4sqi.net/img/swarm/homepage/5.0/appStores/apple-c47b0ee3d781b3e4e25c29eef9effbbe.png")+'" alt\x3d"iOS App Store" data-retina-url\x3d"'+soy.$$escapeHtml("https://ss0.4sqi.net/img/swarm/homepage/5.0/appStores/apple@2x-f7f50e93ba4eba7a1a889180d5cece0e.png")+'" width\x3d"135px" /\x3e\x3c/a\x3e':"")+
(d?'\x3ca id\x3d"androidStoreLink" href\x3d"/get?os\x3dandroid\x26appsflyerId\x3d'+soy.$$escapeHtml(e)+'" '+soy.$$escapeHtml(c)+'\x3e\x3cimg src\x3d"'+soy.$$escapeHtml(fourSq.retina.isRetina()?"https://ss0.4sqi.net/img/swarm/homepage/5.0/appStores/android@2x-722d1949a059933ec801fcb0fd8b9603.png":"https://ss1.4sqi.net/img/swarm/homepage/5.0/appStores/android-b9f3c424b2bcc882445567ff1d35e9a3.png")+'" alt\x3d"Google Play Store" data-retina-url\x3d"'+soy.$$escapeHtml("https://ss0.4sqi.net/img/swarm/homepage/5.0/appStores/android@2x-722d1949a059933ec801fcb0fd8b9603.png")+
'" width\x3d"136px" /\x3e\x3c/a\x3e':"")+"\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e")};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.ui&&(templates.fourSq.ui={});"undefined"==typeof templates.fourSq.ui.signupPrompt&&(templates.fourSq.ui.signupPrompt={});templates.fourSq.ui.signupPrompt.prompt=function(a,b){a=a||{};return'\x3cdiv id\x3d"signupPrompt" class\x3d"wrap '+soy.$$escapeHtml(a.klass)+'"\x3e\x3ch3\x3e'+templates.fourSq.ui.signupPrompt.standardSignupHeader(null)+"\x3c/h3\x3e"+templates.fourSq.ui.signupPrompt.promptBody(a)+"\x3c/div\x3e"};
templates.fourSq.ui.signupPrompt.standard=function(a,b){return templates.fourSq.ui.signupPrompt.prompt({facepileHtml:templates.fourSq.facebook.facepile({fbAppId:a.fbAppId,width:450}),queryString:a.queryString,showEmail:!0})};
templates.fourSq.ui.signupPrompt.mapPage=function(a,b){var c="",d=templates.fourSq.ui.signupPrompt.addQueryString({baseUrl:"/signup/join",queryString:a.queryString});return c+='\x3cdiv id\x3d"mapPageSignupPrompt"\x3e\x3cp class\x3d"tagLine"\x3e'+templates.fourSq.ui.signupPrompt.standardSignupHeader(null)+'\x3c/p\x3e\x3cdiv class\x3d"actions"\x3e\x3cdiv class\x3d"email"\x3e\x3ca href\x3d"'+soy.$$escapeHtml(d)+'" class\x3d"emailSignup"\x3eSign up with your email\x3c/a\x3e\x3cspan class\x3d"conjunction"\x3eor\x3c/span\x3e\x3c/div\x3e\x3cbutton class\x3d"facebookButton"\x3eSign up with Facebook\x3c/button\x3e\x3cdiv class\x3d"fbAssurance"\x3eWe\'ll never post without your permission\x3c/div\x3e\x3c/div\x3e'+
(a.fbAppId?'\x3cdiv class\x3d"fbFacepile"\x3e'+templates.fourSq.facebook.facepile({fbAppId:a.fbAppId,width:300})+"\x3c/div\x3e":"")+"\x3c/div\x3e"};templates.fourSq.ui.signupPrompt.explore=function(a,b){return templates.fourSq.ui.signupPrompt.sideBoxPrompt({headerText:"Discover places that your friends and experts love",fbAppId:a.fbAppId,queryString:a.queryString,facepileWidth:460})};
templates.fourSq.ui.signupPrompt.cityPage=function(a,b){return templates.fourSq.ui.signupPrompt.sideBoxPrompt({headerText:templates.fourSq.ui.signupPrompt.standardSignupHeader(null),fbAppId:a.fbAppId,queryString:a.queryString,facepileWidth:270})};
templates.fourSq.ui.signupPrompt.newHomepage=function(a,b){return'\x3cdiv class\x3d"signupPrompt"\x3e\x3ch3\x3eDiscover places that your friends and experts love.\x3c/h3\x3e\x3cdiv class\x3d"signupButtons"\x3e'+templates.fourSq.ui.signupPrompt.signupButtons(a)+'\x3c/div\x3e\x3cdiv class\x3d"facebookFacepile"\x3e'+templates.fourSq.facebook.facepile({fbAppId:a.fbAppId,width:340})+"\x3c/div\x3e\x3c/div\x3e"};
templates.fourSq.ui.signupPrompt.homepageBanner=function(a,b){return'\x3cdiv class\x3d"newFoursquareBanner"\x3e\x3cdiv class\x3d"wrap"\x3e\x3cdiv class\x3d"logo"\x3e\x3cimg class\x3d"mark" width\x3d"116" src\x3d"'+soy.$$escapeHtml(fourSq.retina.isRetina()?"https://ss1.4sqi.net/img/homepage/_allNewFoursquare/f@2x-b6bf97dbd28878b902234975a503e355.png":"https://ss0.4sqi.net/img/homepage/_allNewFoursquare/f-9744b9730c4ff74e4c9b7dbeb24daf32.png")+'" /\x3e\x3cimg class\x3d"shadow" width\x3d"130" src\x3d"'+
soy.$$escapeHtml(fourSq.retina.isRetina()?"https://ss0.4sqi.net/img/homepage/_allNewFoursquare/teaserbanner_shadow@2x-bf6e9c456dc9982cc494a59d68657a59.png":"https://ss0.4sqi.net/img/homepage/_allNewFoursquare/teaserbanner_shadow-e0725f63f3ebc0798d75094a7fb6d101.png")+'" /\x3e\x3cimg class\x3d"rings" width\x3d"991" src\x3d"'+soy.$$escapeHtml(fourSq.retina.isRetina()?"https://ss1.4sqi.net/img/homepage/_allNewFoursquare/rings@2x-aa6224754be256424d1130854423c88a.png":"https://ss0.4sqi.net/img/homepage/_allNewFoursquare/rings-67be3e9cc4e4f417b56317775ca64ac1.png")+
'" /\x3e\x3c/div\x3e\x3cdiv class\x3d"text"\x3e\x3ch1 class\x3d"reducedTopMargin"\x3eIntroducing the all\x26#45;new Foursquare, which learns what you like and leads you to places you\x26#146;ll love.\x3c/h1\x3e\x3cul class\x3d"social"\x3e\x3cli class\x3d"facebook" id\x3d"facebookButton"\x3eSign in with Facebook\x3c/li\x3e\x3cli class\x3d"email"\x3e\x3ca href\x3d"'+templates.fourSq.ui.signupPrompt.addQueryString({baseUrl:"/signup/join",queryString:a.queryString})+'" class\x3d"emailSignup" \x3eSign up via Email\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'};
templates.fourSq.ui.signupPrompt.venuePage=function(a,b){var c="",d=templates.fourSq.ui.signupPrompt.venuePageTitle(a);return c+=templates.fourSq.ui.signupPrompt.sideBoxPrompt({headerText:d&&d.contentKind&&d.contentKind==goog.soy.data.SanitizedContentKind.HTML?d:soydata.VERY_UNSAFE.ordainSanitizedHtml(d),fbAppId:a.fbAppId,queryString:a.queryString,facepileWidth:270})};
templates.fourSq.ui.signupPrompt.venuePageTitle=function(a,b){return"See what your friends are saying about "+soy.$$escapeHtml(a.venue.name)+"."};
templates.fourSq.ui.signupPrompt.signupButtons=function(a,b){var c="",d=templates.fourSq.ui.signupPrompt.addQueryString({baseUrl:"/signup/join",queryString:a.queryString});return c+='\x3cbutton class\x3d"facebookButton inline"\x3e\x3cimg width\x3d"16" height\x3d"16" src\x3d"'+soy.$$escapeHtml(fourSq.retina.isRetina()?"https://ss0.4sqi.net/img/facebook_white_16@2x-64d345dcc672ac8c958ac59faa969008.png":"https://ss1.4sqi.net/img/facebook_white_16-6bbfb11fa257bfaf546775c5fdab176b.png")+'" /\x3eSign up with Facebook\x3c/button\x3e'+
(a.includeGoogleSignupButton?'\x3cbutton class\x3d"googlePlusSignupButton"\x3eSign up with Google\x3c/button\x3e':"")+'\x3cspan class\x3d"conjunctionAndEmail"\x3e\x3cspan class\x3d"conjunction"\x3eor\x3c/span\x3e\x3ca href\x3d"'+soy.$$escapeHtml(d)+'" class\x3d"emailSignup"\x3e\x3cimg width\x3d"16" height\x3d"16" src\x3d"'+soy.$$escapeHtml(fourSq.retina.isRetina()?"https://ss1.4sqi.net/img/signup_email_16@2x-54589eca74fd582718af728147851159.png":"https://ss1.4sqi.net/img/signup_email_16-52de57d26402277a1a2f83f0acf0ca18.png")+
'" /\x3eSign up with email\x3c/a\x3e\x3c/span\x3e'};templates.fourSq.ui.signupPrompt.localQueryPage=function(a,b){return'\x3cdiv class\x3d"inner"\x3e\x3cdiv class\x3d"caption"\x3eSign up to tell us what you like, and never miss a beat on finding the best places \x3cem\x3efor you\x3c/em\x3e.\x3c/div\x3e'+templates.fourSq.ui.signupPrompt.signupButtons(a)+"\x3c/div\x3e"};
templates.fourSq.ui.signupPrompt.invite=function(a,b){var c="",d=helpers.user.fullName(a.invitingUser);return c+='\x3cdiv class\x3d"signupPrompt sideBox inviteSignupPrompt'+(a.withTopMargin?" withTopMargin":"")+'"\x3e\x3cdiv class\x3d"invitingUserPhoto"\x3e'+helpers.photo.squareImage(soy.$$augmentMap(a.invitingUser.photo,{size:65}))+'\x3c/div\x3e\x3cdiv class\x3d"copy"\x3e\x3ch3\x3eWant to see all the places \x3cstrong\x3e'+soy.$$escapeHtml(d&&d.contentKind&&d.contentKind==goog.soy.data.SanitizedContentKind.HTML?
d:soydata.VERY_UNSAFE.ordainSanitizedHtml(d))+"\x3c/strong\x3e likes? Sign up now!\x3c/h3\x3e\x3ch4\x3eUse Foursquare to find new places and share recommendations with friends.\x3c/h4\x3e\x3c/div\x3e"+templates.fourSq.ui.signupPrompt.signupButtons(a)+"\x3c/div\x3e"};templates.fourSq.ui.signupPrompt.standardSignupHeader=function(a,b){return"Join over 50 million people using Foursquare to get tips tailored to your tastes."};
templates.fourSq.ui.signupPrompt.sideBoxPrompt=function(a,b){return'\x3cdiv class\x3d"signupPrompt sideBox"\x3e\x3cimg class\x3d"signupPromptCircle" width\x3d"46" height\x3d"46" src\x3d"'+soy.$$escapeHtml(fourSq.retina.isRetina()?"https://ss0.4sqi.net/img/upsell_bgcircle_f@2x-7b1f60e7a131f11010ccc9ed38efbadc.png":"https://ss1.4sqi.net/img/upsell_bgcircle_f-b8512198dd547659d7a12a2344a22b0c.png")+'" /\x3e\x3ch3\x3e'+soy.$$escapeHtml(a.headerText)+'\x3c/h3\x3e\x3cdiv class\x3d"signupPromptText"\x3eBy creating an account you are able to follow friends and experts you trust and see the places they\u2019ve recommended.\x3c/div\x3e\x3cdiv class\x3d"close"\x3e\x3c/div\x3e\x3cdiv class\x3d"facebookFacepile"\x3e'+
templates.fourSq.facebook.facepile({fbAppId:a.fbAppId,width:a.facepileWidth})+"\x3c/div\x3e"+templates.fourSq.ui.signupPrompt.signupButtons(a)+"\x3c/div\x3e"};templates.fourSq.ui.signupPrompt.addQueryString=function(a,b){return soy.$$escapeHtml(a.baseUrl)+(a.queryString?"?"+soy.$$escapeHtml(a.queryString):"")};
templates.fourSq.ui.signupPrompt.promptBody=function(a,b){var c='\x3cdiv id\x3d"facebookPrompt"\x3e'+soy.$$filterNoAutoescape(a.facepileHtml)+'\x3cspan id\x3d"facebookButton"\x3eSign up with Facebook\x3c/span\x3e\x3cspan id\x3d"facebookDisclaimer"\x3e(It takes one click, and we\'ll never post or add friends without permission.)\x3c/span\x3e';if(a.showEmail)var d=templates.fourSq.ui.signupPrompt.addQueryString({baseUrl:"/signup/join",queryString:a.queryString}),c=c+('\x3ch5\x3eOr take the scenic route: \x3ca href\x3d"'+
soy.$$filterNoAutoescape(d)+'" class\x3d"emailSignup"\x3eSign up with Email\x3c/a\x3e\x3c/h5\x3e');return c+"\x3c/div\x3e"};templates.fourSq.ui.signupPrompt.standardTasteHeader=function(a,b){return"Almost there! Sign up to save your tastes."};templates.fourSq.ui.signupPrompt.standardTasteBody=function(a,b){return"Now that you\u2019ve told us what you like, sign up to start getting personalized recommendations. You\u2019ll never miss a beat on the best places for you."};
templates.fourSq.ui.signupPrompt.standardTop50Header=function(a,b){return"Almost there! Sign up to save your list."};templates.fourSq.ui.signupPrompt.standardTop50Body=function(a,b){return"You've experienced some of the top 50 things to do in your city, now sign up to start getting personalized recommendations. You\u2019ll never miss a beat on the best places for you."};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.ui&&(templates.fourSq.ui={});"undefined"==typeof templates.fourSq.ui.notifier&&(templates.fourSq.ui.notifier={});
templates.fourSq.ui.notifier.item=function(a,b){return'\x3cdiv class\x3d"notifierItemWrapper'+(a.withLink?" withLink":"")+(a.className?" "+soy.$$escapeHtml(a.className):"")+'"\x3e\x3cdiv class\x3d"notifierItem"\x3e\x3cdiv class\x3d"notifierClose"\x3e\x3c/div\x3e'+(a.image?'\x3cimg src\x3d"'+soy.$$escapeHtml(a.image)+'" class\x3d"notifierImage" /\x3e':"")+'\x3cdiv class\x3d"notifierText"\x3e\x3cspan class\x3d"notifierTitle"\x3e'+(a.title?soy.$$escapeHtml(a.title):"")+"\x3c/span\x3e"+(a.text?"\x3cp\x3e"+
soy.$$escapeHtml(a.text)+"\x3c/p\x3e":"")+"\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e"};templates.fourSq.ui.notifier.wrapper=function(a,b){return'\x3cdiv id\x3d"notifierNoticeWrapper"\x3e\x3c/div\x3e'};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.signup&&(templates.fourSq.signup={});"undefined"==typeof templates.fourSq.signup.page&&(templates.fourSq.signup.page={});"undefined"==typeof templates.fourSq.signup.page.signupsection&&(templates.fourSq.signup.page.signupsection={});
templates.fourSq.signup.page.signupsection.signupSection=function(a,b){return'\x3cdiv class\x3d"signupSection"\x3e'+(a.tooYoung?templates.fourSq.signup.page.signupsection.tooYoung(null):'\x3cdiv class\x3d"signupBox"\x3e'+(a.isDeveloper?'\x3ch3 class\x3d"genericSignupMsg"\x3eSign up for Foursquare\x3c/h3\x3e':"")+templates.fourSq.signup.page.signupsection.signup(a)+(a.isDeveloper?"":templates.fourSq.signup.page.signupsection.alternativeSignUp({loginUrl:"/login",suppressGoogleAndFBButtons:a.useMobileForm}))+
"\x3c/div\x3e")+"\x3c/div\x3e"};templates.fourSq.signup.page.signupsection.tooYoung=function(a,b){return'\x3cdiv class\x3d"tooYoung legal"\x3eSorry, but you can not join Foursquare at this time because of your age.\x3c/div\x3e'};
templates.fourSq.signup.page.signupsection.signup=function(a,b){return'\x3cdiv class\x3d"signUpSection inner"\x3e'+(a.error?'\x3cdiv class\x3d"error"\x3eLooks like something went wrong. Please try submitting again.\x3c/div\x3e':"")+'\x3cform method\x3d"post" autocomplete\x3d"off" encoding\x3d"multipart/form-data" enctype\x3d"multipart/form-data"\x3e'+templates.fourSq.signup.page.signupsection.formContents(a)+templates.fourSq.ui.formInputs.formField(a.formSignature)+(a.isDeveloper?'\x3cdiv class\x3d"signupButtons"\x3e\x3cbutton class\x3d"signupButton" type\x3d"submit"\x3e\x3cdiv class\x3d"text"\x3eSign up\x3ci class\x3d"icon"\x3e\x3c/i\x3e\x3c/div\x3e\x3c/button\x3e\x3ca class\x3d"logInLink" href\x3d"/developers/login"\x3eLog in\x3ci class\x3d"icon"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/div\x3e':
'\x3cdiv class\x3d"userSubmit"\x3e\x3cinput class\x3d"greenButton" type\x3d"submit" value\x3d"Sign Up" tabindex\x3d"12" /\x3e\x3c/div\x3e')+"\x3c/form\x3e\x3c/div\x3e"};
templates.fourSq.signup.page.signupsection.formContents=function(a,b){return templates.fourSq.signup.page.signupsection.hiddenFields(a)+(a.useMobileForm?templates.fourSq.signup.page.signupsection.mobileForm(a):templates.fourSq.signup.page.signupsection.standardForm(a))+(a.shouldShowCAPTCHA?'\x3cdiv class\x3d"rowEl"\x3e\x3cdiv class\x3d"colCaptcha"\x3e\x3cscript src\x3d"https://www.google.com/recaptcha/api.js" async defer\x3e\x3c/script\x3e\x3cdiv class\x3d"g-recaptcha" data-sitekey\x3d"'+soy.$$escapeHtml(a.captchaApiKey)+
'" \x3e\x3c/div\x3e'+(a.shouldShowCAPTCHAError?'\x3cdiv class\x3d"failure message"\x3e'+templates.fourSq.signup.page.signupsection.invalidCAPTCHA(null)+"\x3c/div\x3e":"")+"\x3c/div\x3e\x3c/div\x3e":"")+templates.fourSq.signup.page.signupsection.legal(null)+(a.isEU?templates.fourSq.signup.page.signupsection.privacyPolicyField(null):"")};
templates.fourSq.signup.page.signupsection.standardForm=function(a,b){return'\x3cdiv class\x3d"rowEl"\x3e\x3cdiv class\x3d"col"\x3e'+templates.fourSq.signup.page.signupsection.emailField({email:null!=(null==a.prefill?null:a.prefill.email)?null==a.prefill?null:a.prefill.email:""})+'\x3c/div\x3e\x3cdiv class\x3d"col"\x3e'+templates.fourSq.signup.page.signupsection.passwordField(null)+'\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"rowEl"\x3e\x3cdiv class\x3d"col"\x3e'+templates.fourSq.signup.page.signupsection.nameField({firstName:null!=
(null==a.prefill?null:a.prefill.firstName)?null==a.prefill?null:a.prefill.firstName:"",lastName:null!=(null==a.prefill?null:a.prefill.lastName)?null==a.prefill?null:a.prefill.lastName:""})+'\x3c/div\x3e\x3cdiv class\x3d"col"\x3e'+templates.fourSq.signup.page.signupsection.birthdayField(a)+'\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"rowEl"\x3e\x3cdiv class\x3d"col"\x3e'+templates.fourSq.signup.page.signupsection.genderField({gender:null!=a.prefill?a.prefill:""})+'\x3c/div\x3e\x3cdiv class\x3d"col"\x3e'+
templates.fourSq.signup.page.signupsection.photoField(null)+"\x3c/div\x3e\x3c/div\x3e"};
templates.fourSq.signup.page.signupsection.mobileForm=function(a,b){return'\x3cdiv class\x3d"rowEl"\x3e\x3cdiv class\x3d"col"\x3e'+templates.fourSq.signup.page.signupsection.emailField({email:null!=(null==a.prefill?null:a.prefill.email)?null==a.prefill?null:a.prefill.email:""})+'\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"rowEl"\x3e\x3cdiv class\x3d"col"\x3e'+templates.fourSq.signup.page.signupsection.passwordField(null)+'\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"rowEl"\x3e\x3cdiv class\x3d"col"\x3e'+
templates.fourSq.signup.page.signupsection.nameField({firstName:null!=(null==a.prefill?null:a.prefill.firstName)?null==a.prefill?null:a.prefill.firstName:"",lastName:null!=(null==a.prefill?null:a.prefill.lastName)?null==a.prefill?null:a.prefill.lastName:""})+'\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"rowEl"\x3e\x3cdiv class\x3d"col"\x3e'+templates.fourSq.signup.page.signupsection.birthdayField(a)+'\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"rowEl"\x3e'+templates.fourSq.signup.page.signupsection.genderField({gender:null!=
a.prefill?a.prefill:""})+"\x3c/div\x3e"};
templates.fourSq.signup.page.signupsection.threeColShortenedForm=function(a,b){return'\x3cdiv class\x3d"rowEl"\x3e\x3cdiv class\x3d"col"\x3e'+templates.fourSq.signup.page.signupsection.emailField({email:null!=(null==a.prefill?null:a.prefill.email)?null==a.prefill?null:a.prefill.email:""})+'\x3c/div\x3e\x3cdiv class\x3d"col names"\x3e'+templates.fourSq.signup.page.signupsection.nameField({firstName:null!=(null==a.prefill?null:a.prefill.firstName)?null==a.prefill?null:a.prefill.firstName:"",lastName:null!=
(null==a.prefill?null:a.prefill.lastName)?null==a.prefill?null:a.prefill.lastName:""})+'\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"rowEl"\x3e\x3cdiv class\x3d"col"\x3e'+templates.fourSq.signup.page.signupsection.passwordField(null)+'\x3c/div\x3e\x3cdiv class\x3d"col"\x3e'+templates.fourSq.signup.page.signupsection.birthdayField(a)+'\x3c/div\x3e\x3cdiv class\x3d"col"\x3e'+templates.fourSq.signup.page.signupsection.genderField({gender:null!=a.prefill?a.prefill:""})+"\x3c/div\x3e\x3c/div\x3e"};
templates.fourSq.signup.page.signupsection.hiddenFields=function(a,b){a=a||{};return'\x3cinput type\x3d"hidden" value\x3d"'+soy.$$escapeHtml(null!=(null==a.prefill?null:a.prefill.origin)?null==a.prefill?null:a.prefill.origin:"")+'" name\x3d"origin" class\x3d"origin"/\x3e\x3cinput type\x3d"hidden" value\x3d"'+soy.$$escapeHtml(null!=(null==a.prefill?null:a.prefill.referrer)?null==a.prefill?null:a.prefill.referrer:"")+'" name\x3d"referrer" class\x3d"referrer"/\x3e\x3cinput type\x3d"hidden" value\x3d"'+
soy.$$escapeHtml(null!=(null==a.prefill?null:a.prefill.fromFacebookAppCenter)?null==a.prefill?null:a.prefill.fromFacebookAppCenter:"")+'" name\x3d"fromFacebookAppCenter" class\x3d"fromFacebookAppCenter" /\x3e\x3cinput type\x3d"hidden" value\x3d"'+soy.$$escapeHtml(null!=(null==a.prefill?null:a.prefill.landingPage)?null==a.prefill?null:a.prefill.landingPage:"")+'" name\x3d"landingPage" class\x3d"landingPage"/\x3e\x3cinput type\x3d"hidden" value\x3d"'+soy.$$escapeHtml(null!=(null==a.prefill?null:a.prefill.refSource)?
null==a.prefill?null:a.prefill.refSource:"")+'" name\x3d"refSource" class\x3d"refSource"/\x3e'};
templates.fourSq.signup.page.signupsection.emailField=function(a,b){a=a||{};return'\x3cdiv class\x3d"emailContainer"\x3e\x3clabel for\x3d"inputEmail"\x3eEmail*\x3c/label\x3e\x3cdiv class\x3d"decor"\x3e\x3cinput id\x3d"inputEmail" class\x3d"email validate" name\x3d"email" type\x3d"text" tabindex\x3d"'+soy.$$escapeHtml(null!=a.tabIndex?a.tabIndex:1)+'" maxlength\x3d50 value\x3d"'+soy.$$escapeHtml(null!=a.email?a.email:"")+'" /\x3e'+templates.fourSq.signup.page.signupsection.validationIndicators(null)+
'\x3c/div\x3e\x3cdiv class\x3d"validation message invalidEmail"\x3e'+templates.fourSq.signup.page.signupsection.invalidEmailAddress(null)+"\x3c/div\x3e"+(a.alreadyRegisteredElement?soy.$$escapeHtml(a.alreadyRegisteredElement):templates.fourSq.signup.page.signupsection.alreadyRegistered(null))+"\x3c/div\x3e"};
templates.fourSq.signup.page.signupsection.passwordField=function(a,b){a=a||{};return'\x3cdiv class\x3d"passwordContainer"\x3e\x3clabel for\x3d"inputPassword"\x3ePassword*\x3c/label\x3e\x3cdiv class\x3d"decor"\x3e\x3cinput id\x3d"inputPassword" class\x3d"password validate" name\x3d"password" type\x3d"password" tabindex\x3d"'+soy.$$escapeHtml(null!=a.tabIndex?a.tabIndex:2)+'" /\x3e'+templates.fourSq.signup.page.signupsection.validationIndicators(null)+"\x3c/div\x3e"+templates.fourSq.signup.page.signupsection.validationFailureMessage({message:templates.fourSq.signup.page.signupsection.invalidPassword(null)})+
"\x3c/div\x3e"};
templates.fourSq.signup.page.signupsection.nameField=function(a,b){a=a||{};return'\x3cdiv class\x3d"namesContainer"\x3e'+(a.unifiedLabel?'\x3clabel for\x3d"inputFirstName"\x3eName*\x3c/label\x3e':"")+'\x3cul\x3e\x3cli class\x3d"firstNameContainer"\x3e'+(a.unifiedLabel?"":'\x3clabel for\x3d"inputFirstName"\x3eFirst Name*\x3c/label\x3e')+'\x3cdiv class\x3d"decor"\x3e\x3cinput id\x3d"inputFirstName" class\x3d"firstName validate" name\x3d"firstName" type\x3d"text" tabindex\x3d"'+soy.$$escapeHtml(null!=a.firstNameTabIndex?
a.firstNameTabIndex:3)+'" maxlength\x3d100 value\x3d"'+soy.$$escapeHtml(null!=a.firstName?a.firstName:"")+'" /\x3e'+templates.fourSq.signup.page.signupsection.validationIndicators(null)+"\x3c/div\x3e"+templates.fourSq.signup.page.signupsection.validationFailureMessage({message:templates.fourSq.signup.page.signupsection.invalidFirstName(null)})+'\x3c/li\x3e\x3cli class\x3d"lastNameContainer"\x3e'+(a.unifiedLabel?"":'\x3clabel for\x3d"inputLastName"\x3eLast Name\x3c/label\x3e')+'\x3cdiv class\x3d"decor"\x3e\x3cinput id\x3d"inputLastName" class\x3d"lastName" name\x3d"lastName" type\x3d"text" tabindex\x3d"'+
soy.$$escapeHtml(null!=a.lastNameTabIndex?a.lastNameTabIndex:4)+'" maxlength\x3d"100" value\x3d"'+soy.$$escapeHtml(null!=a.lastName?a.lastName:"")+'" /\x3e'+templates.fourSq.signup.page.signupsection.validationIndicators(null)+"\x3c/div\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e"};
templates.fourSq.signup.page.signupsection.birthdayField=function(a,b){return'\x3cdiv class\x3d"birthdayContainer"\x3e\x3clabel for\x3d"inputBirthDate"\x3e'+(a.customBirthdayLabel?soy.$$escapeHtml(a.customBirthdayLabel)+"* ":"Birthday* ")+'\x3cspan class\x3d"labelTip" title\x3d"Foursquare requires all users to provide their real date of birth to provide only age-appropriate access to content. This information will not be shared with other Foursquare users."\x3e?\x3c/span\x3e\x3c/label\x3e\x3cdiv class\x3d"decor"\x3e'+
(a.isUS?templates.fourSq.signup.page.signupsection.birthMonth(soy.$$augmentMap(a,{tabIndex:5})):templates.fourSq.signup.page.signupsection.birthDate(soy.$$augmentMap(a,{tabIndex:5})))+"\x3cspan\x3e/\x3c/span\x3e"+(a.isUS?templates.fourSq.signup.page.signupsection.birthDate(soy.$$augmentMap(a,{tabIndex:6})):templates.fourSq.signup.page.signupsection.birthMonth(soy.$$augmentMap(a,{tabIndex:6})))+"\x3cspan\x3e/\x3c/span\x3e"+templates.fourSq.signup.page.signupsection.birthYear(a)+templates.fourSq.signup.page.signupsection.validationIndicators(null)+
"\x3c/div\x3e"+templates.fourSq.signup.page.signupsection.validationFailureMessage({message:a.isUS?templates.fourSq.signup.page.signupsection.invalidBirthdayUS(null):templates.fourSq.signup.page.signupsection.invalidBirthday(null)})+"\x3c/div\x3e"};
templates.fourSq.signup.page.signupsection.birthDate=function(a,b){return'\x3cinput id\x3d"inputBirthDate" class\x3d"day" name\x3d"birthDate" type\x3d"text" placeholder\x3d"DD" maxlength\x3d2 tabindex\x3d"'+soy.$$escapeHtml(a.tabIndex)+'" value\x3d"'+soy.$$escapeHtml(null!=(null==a.prefill?null:a.prefill.birthDate)?null==a.prefill?null:a.prefill.birthDate:"")+'" /\x3e'};
templates.fourSq.signup.page.signupsection.birthMonth=function(a,b){return'\x3cinput id\x3d"inputBirthMonth" class\x3d"month" name\x3d"birthMonth" type\x3d"text" placeholder\x3d"MM" maxlength\x3d2 tabindex\x3d"'+soy.$$escapeHtml(a.tabIndex)+'" value\x3d"'+soy.$$escapeHtml(null!=(null==a.prefill?null:a.prefill.birthMonth)?null==a.prefill?null:a.prefill.birthMonth:"")+'" /\x3e'};
templates.fourSq.signup.page.signupsection.birthYear=function(a,b){a=a||{};return'\x3cinput id\x3d"inputBirthYear" class\x3d"year" name\x3d"birthYear" type\x3d"text" placeholder\x3d"YYYY" maxlength\x3d4 tabindex\x3d"7" value\x3d"'+soy.$$escapeHtml(null!=(null==a.prefill?null:a.prefill.birthYear)?null==a.prefill?null:a.prefill.birthYear:"")+'" /\x3e'};
templates.fourSq.signup.page.signupsection.genderField=function(a,b){a=a||{};return'\x3cdiv class\x3d"genderContainer"\x3e\x3clabel for\x3d"inputGender"\x3eGender*\x3c/label\x3e\x3cdiv class\x3d"decor"\x3e\x3cinput id\x3d"inputFemale" type\x3d"radio" name\x3d"gender" value\x3d"female" tabindex\x3d"'+soy.$$escapeHtml(null!=a.baseTabIndex?a.baseTabIndex:8)+'"'+soy.$$escapeHtml("female"==a.gender?"checked":"")+'\x3e\x3clabel for\x3d"inputFemale"\x3eFemale\x3c/label\x3e\x3cinput id\x3d"inputMale" type\x3d"radio" name\x3d"gender" value\x3d"male" tabindex\x3d"'+
soy.$$escapeHtml((null!=a.baseTabIndex?a.baseTabIndex:8)+1)+'"'+soy.$$escapeHtml("male"==a.gender?"checked":"")+'\x3e\x3clabel for\x3d"inputMale"\x3eMale\x3c/label\x3e\x3cinput id\x3d"inputUnspecifiedGender" type\x3d"radio" name\x3d"gender" value\x3d"unspecified" tabindex\x3d"'+soy.$$escapeHtml((null!=a.baseTabIndex?a.baseTabIndex:8)+2)+'"'+soy.$$escapeHtml("male"!=a.gender&&"female"!=a.gender?"checked":"")+'\x3e\x3clabel for\x3d"inputUnspecifiedGender"\x3eRather not say\x3c/label\x3e\x3c/div\x3e\x3c/div\x3e'};
templates.fourSq.signup.page.signupsection.photoField=function(a,b){return'\x3cdiv class\x3d"photoContainer"\x3e\x3clabel for\x3d"inputProfilePhoto"\x3eProfile Photo\x3c/label\x3e\x3cdiv class\x3d"decor"\x3e\x3cinput id\x3d"inputProfilePhoto" name\x3d"photo" type\x3d"file" accept\x3d"image/jpeg,image/gif,image/png" title\x3d"User profile avatar" tabindex\x3d"11" /\x3e\x3c/div\x3e\x3c/div\x3e'};
templates.fourSq.signup.page.signupsection.privacyPolicyField=function(a,b){return'\x3cdiv class\x3d"ppContainer"\x3e\x3cdiv class\x3d"ppInput"\x3e\x3cinput class\x3d"validate" id\x3d"ppCheckBox" type\x3d"checkbox" name\x3d"ppChecked" tabindex\x3d"12"\x3e\x3clabel class\x3d"ppLabel"\x3eI acknowledge and accept the \x3ca href\x3d"/legal/privacy" target\x3d"blank"\x3ePrivacy Policy\x3c/a\x3e\x3c/label\x3e\x3c/div\x3e'+templates.fourSq.signup.page.signupsection.validationFailureMessage({message:templates.fourSq.signup.page.signupsection.missingPrivacyPolicy(null)})+
"\x3c/div\x3e"};templates.fourSq.signup.page.signupsection.legal=function(a,b){return'\x3cp class\x3d"legal"\x3eBy using Foursquare you agree to the \x3ca href\x3d"/legal/terms" target\x3d"_blank"\x3eTerms of Service\x3c/a\x3e, \x3ca href\x3d"/legal/privacy" target\x3d"blank"\x3ePrivacy Policy\x3c/a\x3e and \x3ca href\x3d"/legal/cookiepolicy" target\x3d"blank"\x3eCookie Policy\x3c/a\x3e.\x3c/p\x3e'};
templates.fourSq.signup.page.signupsection.alternativeSignUp=function(a,b){return'\x3cdiv class\x3d"alternativeSignUp"\x3e'+(a.suppressGoogleAndFBButtons?"":'\x3cul\x3e\x3cli class\x3d"facebook"\x3e\x3cdiv\x3e\x3c/div\x3eSign up with Facebook\x3c/li\x3e\x3cli class\x3d"googlePlus"\x3e\x3cspan\x3e\x3cdiv\x3e\x3c/div\x3eSign up with Google\x26#43;\x3c/span\x3e\x3c/li\x3e\x3c/ul\x3e')+'\x3cp\x3e\x3ca class\x3d"login" href\x3d"'+soy.$$escapeHtml(a.loginUrl)+'"\x3e'+templates.fourSq.signup.page.signupsection.alreadyHaveAnAccountMessage(null)+
"\x3c/a\x3e\x3c/p\x3e\x3c/div\x3e"};templates.fourSq.signup.page.signupsection.alreadyHaveAnAccountMessage=function(a,b){return"Already have an account? Log in."};templates.fourSq.signup.page.signupsection.validationIndicators=function(a,b){return'\x3cdiv class\x3d"validation success icon"\x3e\x3c/div\x3e\x3cdiv class\x3d"validation failure icon"\x3e\x3c/div\x3e'};templates.fourSq.signup.page.signupsection.alreadyRegistered=function(a,b){return'\x3cdiv class\x3d"validation message alreadyRegistered"\x3eThis email address has already been registered.\x26nbsp;\x3ca href\x3d"/login" class\x3d"login"\x3eLog in\x3c/a\x3e instead. \x3ca href\x3d"/forgot_password" class\x3d"forgotPassword"\x3eI forgot my password\x3c/a\x3e.\x3c/div\x3e'};
templates.fourSq.signup.page.signupsection.googleSignupNotice=function(a,b){return'\x3cdiv class\x3d"googleSignupNotice"\x3eGreat! Just a few more fields and you\'ll be all set.\x3c/div\x3e'};templates.fourSq.signup.page.signupsection.validationFailureMessage=function(a,b){return'\x3cdiv class\x3d"validation failure message"\x3e'+soy.$$escapeHtml(a.message)+"\x3c/div\x3e"};templates.fourSq.signup.page.signupsection.invalidEmailAddress=function(a,b){return"Hm, that address is invalid. Check for typos?"};
templates.fourSq.signup.page.signupsection.invalidPassword=function(a,b){return"Your password must be at least 6 characters."};templates.fourSq.signup.page.signupsection.invalidFirstName=function(a,b){return"Please enter your first name."};templates.fourSq.signup.page.signupsection.invalidBirthday=function(a,b){return"Please use this format: DD/MM/YYYY"};templates.fourSq.signup.page.signupsection.invalidBirthdayUS=function(a,b){return"Please use this format: MM/DD/YYYY"};
templates.fourSq.signup.page.signupsection.invalidCAPTCHA=function(a,b){return"Unable to verify captcha"};templates.fourSq.signup.page.signupsection.missingPrivacyPolicy=function(a,b){return"Please accept the Privacy Policy"};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.signup&&(templates.fourSq.signup={});"undefined"==typeof templates.fourSq.signup.page&&(templates.fourSq.signup.page={});"undefined"==typeof templates.fourSq.signup.page.findfriendsstep&&(templates.fourSq.signup.page.findfriendsstep={});
templates.fourSq.signup.page.findfriendsstep.findFriendsStep=function(a,b){return'\x3cdiv class\x3d"step findFriendsStep"\x3e'+templates.fourSq.signup.page.findfriendsstep.heading(a)+'\x3cdiv class\x3d"inner"\x3e\x3cdiv class\x3d"accordionPadding"\x3e'+templates.fourSq.signup.page.findfriendsstep.splash(a)+(a.unified?'\x3cdiv class\x3d"innerContent"\x3e'+templates.fourSq.signup.page.findfriendsstep.finder(a)+"\x3c/div\x3e":templates.fourSq.signup.page.findfriendsstep.finder(a))+"\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e"};
templates.fourSq.signup.page.findfriendsstep.heading=function(a,b){return a.unified?'\x3cdiv class\x3d"heading"\x3e\x3ch2\x3e'+(a.isBatman?"Follow people":"Find your friends")+"\x3c/h2\x3e\x3c/div\x3e":""};templates.fourSq.signup.page.findfriendsstep.splash=function(a,b){return'\x3cdiv class\x3d"innerContent"\x3e\x3cdiv class\x3d"splash"\x3e'+templates.fourSq.signup.page.findfriendsstep.device(a)+templates.fourSq.signup.page.findfriendsstep.intro(a)+"\x3c/div\x3e\x3c/div\x3e"};
templates.fourSq.signup.page.findfriendsstep.device=function(a,b){a=a||{};return'\x3cdiv class\x3d"device iPhone"\x3e\x3cimg src\x3d"'+soy.$$escapeHtml("https://ss0.4sqi.net/img/signUp/devices/iPhone-192bb870d54d8f74ac912489d62d70fe.png")+'" /\x3e\x3cdiv class\x3d"screenshot"\x3e'+(a.isBatman?'\x3cimg width\x3d"165" height\x3d"293" src\x3d"'+soy.$$escapeHtml(fourSq.retina.isRetina()?"https://ss0.4sqi.net/img/signUp/devices/screenshots/iphone8@2x-b3b4572846b461ace0ec83afc0e9cf5f.png":"https://ss0.4sqi.net/img/signUp/devices/screenshots/iphone8-32c0ea1663a87645e93d392efcbcca90.png")+
'" /\x3e':'\x3cimg width\x3d"165" height\x3d"293" src\x3d"'+soy.$$escapeHtml(fourSq.retina.isRetina()?"https://ss0.4sqi.net/img/signUp/devices/screenshots/iphone@2x-991dcb9eb637a9c2ffc52d0f4ea39baf.png":"https://ss0.4sqi.net/img/signUp/devices/screenshots/iphone-f1d1aff24011b75672a621f94dfca4f1.png")+'" /\x3e')+"\x3c/div\x3e\x3c/div\x3e"};
templates.fourSq.signup.page.findfriendsstep.intro=function(a,b){return'\x3cdiv class\x3d"intro"\x3e\x3cdiv class\x3d"copy"\x3e\x3ch2\x3e'+(a.isBatman?"Foursquare is better with friends and experts.":"Foursquare is better with friends.")+"\x3c/h2\x3e\x3cp\x3e"+(a.isBatman?"Connect with friends and experts to discover their favorite spots and get insider tips.":"Connect with your friends to discover their favorite spots, get their insider tips, and keep up with their adventures.")+'\x3c/p\x3e\x3c/div\x3e\x3cp class\x3d"facebook network" data-network\x3d"facebook"\x3e\x3cspan\x3eFind Facebook Friends\x3c/span\x3e\x3c/p\x3e\x3cdiv class\x3d"orUse"\x3e\x3cp\x3eOr use\x3c/p\x3e\x3cul\x3e\x3cli class\x3d"twitter network" data-network\x3d"twitter"\x3e\x3cspan\x3eSign up with Twitter\x3c/span\x3e\x3c/li\x3e\x3cli class\x3d"google network" data-network\x3d"gmail"\x3e\x3cspan\x3eSign up with Google Plus\x3c/span\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e'};
templates.fourSq.signup.page.findfriendsstep.finder=function(a,b){return'\x3cdiv class\x3d"finder"\x3e'+templates.fourSq.signup.page.findfriendsstep.finderIntro(a)+templates.fourSq.signup.page.findfriendsstep.progress(a)+templates.fourSq.signup.page.findfriendsstep.friendsContainer(null)+templates.fourSq.signup.page.findfriendsstep.nextStepButton(a)+"\x3c/div\x3e"};
templates.fourSq.signup.page.findfriendsstep.alreadyUsing=function(a,b){return"\x3ch3\x3e"+(a.isBatman?"These people are already using Foursquare, connect with them...":"These friends are already using Foursquare, connect with them...")+"\x3c/h3\x3e"};
templates.fourSq.signup.page.findfriendsstep.finderIntro=function(a,b){return'\x3cdiv class\x3d"intro"\x3e\x3cdiv class\x3d"text"\x3e\x3ch2\x3e'+(a.isBatman?"Foursquare is better with friends and experts.":"Foursquare is better with friends.")+"\x3c/h2\x3e\x3cp\x3e"+(a.isBatman?"Connect with friends and experts to discover their favorite spots and get insider tips.":"Connect with your friends to discover their favorite spots, get their insider tips, and keep up with their adventures.")+"\x3c/p\x3e\x3c/div\x3e"+
templates.fourSq.signup.page.findfriendsstep.alreadyUsing(a)+"\x3c/div\x3e"};
templates.fourSq.signup.page.findfriendsstep.progress=function(a,b){return'\x3cdiv class\x3d"progress"\x3e\x3cdiv class\x3d"networks"\x3e\x3cul\x3e\x3cli class\x3d"facebook" data-network\x3d"facebook"\x3e\x3c/li\x3e\x3cli class\x3d"twitter" data-network\x3d"twitter"\x3e\x3c/li\x3e\x3cli class\x3d"google" data-network\x3d"gmail"\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"status"\x3e\x3c/div\x3e\x3cdiv class\x3d"actions"\x3e\x3cdiv class\x3d"greenButton addAll"\x3eAdd All\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"progressBar"\x3e\x3cdiv class\x3d"caret"\x3e\x3c/div\x3e\x3cdiv class\x3d"barContainer"\x3e\x3cdiv class\x3d"bar"\x3e\x3c/div\x3e\x3cdiv class\x3d"statusMessage"\x3e'+templates.fourSq.signup.page.findfriendsstep.progressBarStatusMessage({requestCount:0,
isBatman:a.isBatman})+'\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"nextStepPrompt"\x3eAwesome! You\'re all set to \x3ca href\x3d"/signup/post-signup"\x3estart using Foursquare\x3c/a\x3e.\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'};
templates.fourSq.signup.page.findfriendsstep.progressBarStatusMessage=function(a,b){return a.isBatman?0==a.requestCount?"Foursquare is better when you follow friends and experts.":1==a.requestCount?"You've followed one person!":"You've followed "+soy.$$escapeHtml(a.requestCount)+" people!":0==a.requestCount?"Foursquare is better with friends.":1==a.requestCount?"You've added one friend!":"You've added "+soy.$$escapeHtml(a.requestCount)+" friends!"};
templates.fourSq.signup.page.findfriendsstep.facebookProgressStatusMessage=function(a,b){return a.isBatman?0==a.foursquareUserCount?"":1==a.foursquareUserCount?"One of your Facebook friends is using Foursquare. Follow their tips.":soy.$$escapeHtml(a.foursquareUserCount)+" of your Facebook friends are using Foursquare. Follow their tips.":0==a.foursquareUserCount?"":1==a.foursquareUserCount?"One of your Facebook friends is using Foursquare. Add them as a friend.":soy.$$escapeHtml(a.foursquareUserCount)+
" of your Facebook friends are using Foursquare. Add them as friends."};
templates.fourSq.signup.page.findfriendsstep.twitterProgressStatusMessage=function(a,b){return a.isBatman?0==a.foursquareUserCount?"":1==a.foursquareUserCount?"A person you follow on Twitter is using Foursquare. Follow their tips.":soy.$$escapeHtml(a.foursquareUserCount)+" people you follow on Twitter are using Foursquare. Follow their tips.":0==a.foursquareUserCount?"":1==a.foursquareUserCount?"A person you follow on Twitter is using Foursquare. Add them as a friend.":soy.$$escapeHtml(a.foursquareUserCount)+
" people you follow on Twitter are using Foursquare. Add them as friends."};
templates.fourSq.signup.page.findfriendsstep.gmailProgressStatusMessage=function(a,b){return a.isBatman?0==a.foursquareUserCount?"":1==a.foursquareUserCount?"One of your Gmail contacts is using Foursquare. Follow their tips.":soy.$$escapeHtml(a.foursquareUserCount)+" of your Gmail contacts are using Foursquare. Follow their tips.":0==a.foursquareUserCount?"":1==a.foursquareUserCount?"One of your Gmail contacts is using Foursquare. Add them as a friend.":soy.$$escapeHtml(a.foursquareUserCount)+" of your Gmail contacts are using Foursquare. Add them as friends."};
templates.fourSq.signup.page.findfriendsstep.friendsContainer=function(a,b){return'\x3cdiv class\x3d"friendsContainer"\x3e\x3cdiv class\x3d"friends"\x3e\x3cdiv class\x3d"facebook"\x3e\x3c/div\x3e\x3cdiv class\x3d"twitter"\x3e\x3c/div\x3e\x3cdiv class\x3d"gmail"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"infoWindow"\x3e\x3c/div\x3e\x3cdiv class\x3d"gradientBottom"\x3e\x3c/div\x3e\x3cdiv class\x3d"gradientTop"\x3e\x3c/div\x3e\x3c/div\x3e'};
templates.fourSq.signup.page.findfriendsstep.renderUsers=function(a,b){for(var c="",d=a.users,e=d.length,f=0;f<e;f++)c+=templates.fourSq.signup.page.findfriendsstep.userCard_(d[f]);return c};
templates.fourSq.signup.page.findfriendsstep.userCard_=function(a,b){return'\x3cdiv class\x3d"friend"\x3e\x3cdiv class\x3d"innerContent"\x3e'+helpers.user.xsmallImage(a)+'\x3cdiv class\x3d"content"\x3e\x3cdiv class\x3d"name"\x3e'+helpers.user.fullName(a)+'\x3c/div\x3e\x3cdiv class\x3d"homeCity"\x3e'+soy.$$escapeHtml(a.homeCity)+"\x3c/div\x3e"+helpers.user.addFriendButton(null)+"\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e"};templates.fourSq.signup.page.findfriendsstep.loader=function(a,b){return'\x3cdiv class\x3d"loader syncInfo"\x3eFinding your friends...\x3c/div\x3e'};
templates.fourSq.signup.page.findfriendsstep.facebookSyncInfoWindow=function(a,b){return'\x3cdiv class\x3d"facebookSyncInfoWindow syncInfo"\x3eSyncing with Facebook. If you aren\'t sent to Facebook to connect your account, \x3cspan class\x3d"syncFacebook link"\x3eclick here\x3c/span\x3e. You may need to disable your pop-up blocker to connect your account.\x3c/div\x3e'};templates.fourSq.signup.page.findfriendsstep.twitterSyncInfoWindow=function(a,b){return'\x3cdiv class\x3d"twitterSyncInfoWindow syncInfo"\x3eSyncing with Twitter. If you aren\'t sent to Twitter to connect your account, \x3cspan class\x3d"syncTwitter link"\x3eclick here\x3c/span\x3e. You may need to disable your pop-up blocker to connect your account.\x3c/div\x3e'};
templates.fourSq.signup.page.findfriendsstep.gmailSyncInfoWindow=function(a,b){return'\x3cdiv class\x3d"gmailSyncInfoWindow syncInfo"\x3eSyncing with Gmail. If you aren\'t sent to Gmail to connect your account, \x3cspan class\x3d"syncGmail link"\x3eclick here\x3c/span\x3e. You may need to disable your pop-up blocker to connect your account.\x3c/div\x3e'};templates.fourSq.signup.page.findfriendsstep.noFacebookFriendsInfoWindow=function(a,b){return'\x3cdiv class\x3d"noFacebookFriends noFriends"\x3eWe couldn\'t find any of your Facebook friends on Foursquare. Try looking for friends from \x3cspan class\x3d"syncTwitter link"\x3eTwitter\x3c/span\x3e or \x3cspan class\x3d"syncGmail link"\x3eGmail\x3c/span\x3e.\x3c/div\x3e'};
templates.fourSq.signup.page.findfriendsstep.noTwitterFriendsInfoWindow=function(a,b){return'\x3cdiv class\x3d"noTwitterFriends noFriends"\x3eWe couldn\'t find any of your Twitter friends on Foursquare. Try looking for friends from \x3cspan class\x3d"syncFacebook link"\x3eFacebook\x3c/span\x3e or \x3cspan class\x3d"syncGmail link"\x3eGmail\x3c/span\x3e.\x3c/div\x3e'};templates.fourSq.signup.page.findfriendsstep.noGmailFriendsInfoWindow=function(a,b){return'\x3cdiv class\x3d"noGmailFriends noFriends"\x3eWe couldn\'t find any of your Gmail contacts on Foursquare. Try looking for friends from \x3cspan class\x3d"syncFacebook link"\x3eFacebook\x3c/span\x3e or \x3cspan class\x3d"syncTwitter link"\x3eTwitter\x3c/span\x3e.\x3c/div\x3e'};
templates.fourSq.signup.page.findfriendsstep.facebookAuthFailureInfoWindow=function(a,b){return'\x3cdiv class\x3d"facebookAuthFailure authFail"\x3eThere was an error connecting to your Facebook account. \x3cspan class\x3d"syncFacebook link"\x3eTry again\x3c/span\x3e\x3c/div\x3e'};templates.fourSq.signup.page.findfriendsstep.twitterAuthFailureInfoWindow=function(a,b){return'\x3cdiv class\x3d"twitterAuthFailure authFail"\x3eThere was an error connecting to your Twitter account. \x3cspan class\x3d"syncTwitter link"\x3eTry again\x3c/span\x3e\x3c/div\x3e'};
templates.fourSq.signup.page.findfriendsstep.gmailAuthFailureInfoWindow=function(a,b){return'\x3cdiv class\x3d"gmailAuthFailure authFail"\x3eThere was an error connecting to your Gmail account. \x3cspan class\x3d"syncGmail link"\x3eTry again\x3c/span\x3e\x3c/div\x3e'};
templates.fourSq.signup.page.findfriendsstep.nextStepButton=function(a,b){return'\x3cdiv class\x3d"submitButton"\x3e\x3ca href\x3d"/signup/post-signup" class\x3d"blueButton"\x3e'+(a.isBatman?"Okay, I\u2019m done following friends and experts.":"Okay, I'm done adding friends.")+"\x3c/a\x3e\x3c/div\x3e"};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.signup&&(templates.fourSq.signup={});"undefined"==typeof templates.fourSq.signup.page&&(templates.fourSq.signup.page={});"undefined"==typeof templates.fourSq.signup.page.tastegamestep&&(templates.fourSq.signup.page.tastegamestep={});
templates.fourSq.signup.page.tastegamestep.tasteGameStep=function(a,b){return'\x3cdiv class\x3d"step tasteGameStep"\x3e\x3cdiv class\x3d"heading"\x3e\x3ch2\x3eAdd tastes\x3c/h2\x3e\x3c/div\x3e\x3cdiv class\x3d"inner"\x3e\x3cdiv class\x3d"accordionPadding"\x3e\x3ch2\x3eClick a few tastes you like:\x3c/h2\x3e'+templates.fourSq.tastes.tastegame.tasteGameContainer(null)+'\x3cdiv class\x3d"submitButton"\x3e\x3ca href\x3d"/" class\x3d"blueButton"\x3eFinished!\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.venuePicker&&(templates.fourSq.venuePicker={});templates.fourSq.venuePicker.numLocationsLabel=function(a,b){return 0==a.num?"0 locations":1==a.num?"1 location":fourSq.i18n.formatNumber(a.num,"decimal",void 0,"")+" locations"};
templates.fourSq.venuePicker.scopeStatusBar=function(a,b){return'\x3cdiv id\x3d"scopeStatusBar"\x3e\x3cspan class\x3d"pageIcon"\x3e'+helpers.user.image(soy.$$augmentMap(a.page,{size:a.imageSize?a.imageSize:48}))+"\x3c/span\x3e"+(a.consumerViewUri?"venue"==a.managementType?'\x3ca class\x3d"previewPageButton greyButton" href\x3d"'+soy.$$escapeHtml(a.consumerViewUri)+'"\x3ePreview location\x3c/a\x3e':'\x3ca class\x3d"previewPageButton greyButton" href\x3d"'+soy.$$escapeHtml(a.consumerViewUri)+'"\x3ePreview page\x3c/a\x3e':
"")+'\x3cdiv class\x3d"pageOrVenueInfo"\x3e'+(0==a.numSelectableVenues?'\x3ch3 class\x3d"pageOrVenueName"\x3e'+soy.$$escapeHtml(a.manageAsShortName)+"\x3c/h3\x3e":1==a.numSelectableVenues?templates.fourSq.venuePicker.singleVenueScopeStatusHeader({name:a.manageAsShortName,addressCityState:a.addressOpt?a.addressOpt:"",storeId:a.storeIdOpt}):'\x3ch3 class\x3d"pageOrVenueName"\x3e'+("group"==a.managementType?soy.$$escapeHtml(a.page.firstName)+" - "+soy.$$filterNoAutoescape(a.manageAsShortName):soy.$$escapeHtml(a.page.firstName))+
'\x3c/h3\x3e\x3cspan class\x3d"pageDetails"\x3e'+templates.fourSq.venuePicker.numLocationsLabel({num:a.numSelectedOpenVenues})+"\x3c/span\x3e")+"\x3c/div\x3e\x3c/div\x3e"};templates.fourSq.venuePicker.searchText=function(a,b){return"Type to filter this list"};
templates.fourSq.venuePicker.barSearchForm=function(a,b){return'\x3cdiv class\x3d"venuePickerSearch '+soy.$$escapeHtml(a.type)+'Search"\x3e \x3c!-- submit action disabled in Javascript --\x3e\x3cdiv class\x3d"venuePickerSearchControls"\x3e\x3cinput type\x3d"text" name\x3d"q" placeholder\x3d"'+templates.fourSq.venuePicker.searchText(null)+'" class\x3d"venuePickerSearchTextBox formStyle" /\x3e\x3c/div\x3e\x3cdiv class\x3d"resultsContainer"\x3e\x3c/div\x3e\x3cdiv class\x3d"moreResultsContainer"\x3eThere are more venues than displayed. Filter to see more.\x3c/div\x3e\x3c/div\x3e'};
templates.fourSq.venuePicker.storeInfoFormatted=function(a,b){a=a||{};return a.storeId?'\x3cspan class\x3d"supplementalInfo"\x3e (store #'+soy.$$escapeHtml(a.storeId)+")\x3c/span\x3e":""};
templates.fourSq.venuePicker.venueSingleSelectionCompletion=function(a,b){return'\x3cdiv\x3e\x3cdiv class\x3d"name"\x3e'+soy.$$escapeHtml(a.name)+templates.fourSq.venuePicker.storeInfoFormatted(a)+"\x3c/div\x3e"+(a.addressCityState?'\x3cdiv class\x3d"detail"\x3e'+soy.$$escapeHtml(a.addressCityState)+"\x3c/div\x3e":"")+"\x3c/div\x3e"};
templates.fourSq.venuePicker.singleVenueScopeStatusHeader=function(a,b){return'\x3cdiv\x3e\x3ch3 class\x3d"pageOrVenueName"\x3e'+soy.$$escapeHtml(a.name)+templates.fourSq.venuePicker.storeInfoFormatted(a)+"\x3c/h3\x3e"+(a.addressCityState?'\x3cdiv class\x3d"venueDetails"\x3e'+soy.$$escapeHtml(a.addressCityState)+"\x3c/div\x3e":"")+"\x3c/div\x3e"};
templates.fourSq.venuePicker.venueGroupSelectionCompletion=function(a,b){return'\x3cdiv class\x3d"name"\x3e'+soy.$$escapeHtml(a.name)+"\x3c/div\x3e"+(a.numVenues?'\x3cdiv class\x3d"detail"\x3e'+templates.fourSq.venuePicker.numLocationsLabel({num:a.numVenues})+"\x3c/div\x3e":"")};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.venue&&(templates.fourSq.venue={});"undefined"==typeof templates.fourSq.venue.hours&&(templates.fourSq.venue.hours={});templates.fourSq.venue.hours.daySliders=function(a,b){return'\x3cdiv class\x3d"day" id\x3d"day-'+soy.$$escapeHtml(a.day)+'"\x3e\x3cdiv class\x3d"dayHeader"\x3e\x3cdiv class\x3d"dayName"\x3e'+helpers.util.dayOfWeekAbbreviated({day:a.day%7})+' - \x3cspan class\x3d"dayClosed"\x3eClosed\x3c/span\x3e\x3cspan class\x3d"dayOpen"\x3eOpen\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3ca href\x3d"" class\x3d"dayAdd" title\x3d"e.g. if a restaurant is open for lunch from 11am-2pm and dinner from 5pm-9pm and closed in between"\x3eAdd a second set of open hours\x3c/a\x3e\x3c/div\x3e'};
templates.fourSq.venue.hours.editorModal=function(a,b){return'\x3cspan href\x3d"#" id\x3d"hoursEditorModalLauncher" class\x3d"link"\x3e'+((null==a.hours.hours?0:a.hours.hours.timeframes)?"Edit hours":"Add hours")+'\x3c/span\x3e\x3cdiv id\x3d"hoursEditorModal" style\x3d"display: none;"\x3e'+templates.fourSq.venue.hours.editor({venue:a.venue,hours:a.hours.hours,showFreeForm:!0})+"\x3c/div\x3e"};
templates.fourSq.venue.hours.editorWithWrapper=function(a,b){a=a||{};return'\x3cdiv id\x3d"hoursEditorModal"\x3e'+templates.fourSq.venue.hours.editor({venue:a.venue,hours:a.hours,showFreeForm:!0,suppressButtons:a.suppressButtons,forManager:a.forManager})+"\x3c/div\x3e"};
templates.fourSq.venue.hours.editor=function(a,b){a=a||{};return'\x3cdiv id\x3d"editVenueHours" class\x3d"hoursEditor"\x3e'+(a.venue?'\x3ch3 class\x3d"hoursEditorHeader"\x3e'+(a.forManager?"Edit hours":"Edit hours for "+soy.$$escapeHtml(a.venue.name))+"\x3c/h3\x3e":"")+'\x3cp class\x3d"hoursMergeNote"\x3eAdd the time frames that this location is currently open. Note that if multiple time frames overlap, they will be merged together when you click save.\x3c/p\x3e\x3cdiv class\x3d"hoursEditorList"\x3e'+
templates.fourSq.venue.hours.list({hours:a.hours,editable:!0})+"\x3c/div\x3e"+templates.fourSq.venue.hours.add(null)+(a.showFreeForm?'\x3cdiv class\x3d"hoursEditorSection"\x3e\x3cdiv class\x3d"toggleEditorMode"\x3e\x3ca class\x3d"toggleFreeformEditor"\x3e'+(a.forManager?"Or, copy and paste business hours in text form!":"Or, copy and paste business hours in text form! (Hint: their website should have this info)")+'\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"freeformEditor"\x3e\x3ctextarea class\x3d"freeFormTimeframes formStyle" name\x3d"freeformHours" placeholder\x3d"M-F 10:00am-11:00pm, Sat to Sun Noon-2am" rows\x3d"5"\x3e\x3c/textarea\x3e\x3cp class\x3d"freeformError error"\x3e\x3c/p\x3e\x3c/div\x3e\x3cdiv class\x3d"toggleEditorMode"\x3e\x3ca class\x3d"toggleStructuredEditor"\x3eOr switch back to manually adding hours.\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e':
"")+(a.suppressButtons?"":templates.fourSq.venue.hours.buttons(null))+"\x3c/div\x3e"};
templates.fourSq.venue.hours.compactEditor=function(a,b){a=a||{};return'\x3cdiv id\x3d"compactEditVenueHours" class\x3d"hoursEditor"\x3e\x3cdiv class\x3d"hoursRighCol"\x3e'+templates.fourSq.venue.hours.addCompact(a)+'\x3cdiv class\x3d"hoursEditorSection"\x3e\x3cdiv class\x3d"freeformEditor"\x3e\x3ctextarea class\x3d"freeFormTimeframes formStyle" name\x3d"freeformHours" placeholder\x3d"M-F 10:00am-11:00pm, Sat to Sun Noon-2am" rows\x3d"5"\x3e\x3c/textarea\x3e\x3cp class\x3d"freeformError error"\x3e\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"toggleEditorMode"\x3e\x3ca class\x3d"toggleFreeformEditor"\x3eOr you can just copy and paste hours, if you have them.\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"toggleEditorMode"\x3e\x3ca class\x3d"toggleStructuredEditor"\x3eOr switch back to manually adding hours.\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e'+(a.showSeasonalHoursEditor?
'\x3cdiv class\x3d"seasonalHoursEditorList"\x3e'+templates.fourSq.venue.hours.seasonalList({hours:a.seasonalHours,editable:!0})+"\x3c/div\x3e":"")+'\x3cdiv class\x3d"hoursEditorList"\x3e'+templates.fourSq.venue.hours.list({hours:a.defaultHours,editable:!0})+"\x3c/div\x3e\x3c/div\x3e"+(a.showSeasonalHoursEditor?'\x3cdiv\x3e\x3cspan class\x3d"hoverInfoTip hoursTip"\x3e(?)\x3c/span\x3e\x3cdiv class\x3d"hoursLink"\x3e\x3cdiv class\x3d"link editSeasonalHours"\x3eEdit seasonal hours\x3c/div\x3e\x3cdiv class\x3d"link editDefaultHours"\x3eEdit default hours\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e':
"")};templates.fourSq.venue.hours.hoursHelp=function(a,b){return'\x3cdiv class\x3d"hoursHelp"\x3eDoes this place have different hours during certain times of the year (e.g. a zoo or ice cream shop open longer in the summer)? Enter seasonal hours and the dates between which they apply. Default hours apply the rest of the year.\x3c/div\x3e'};
templates.fourSq.venue.hours.addCompact=function(a,b){a=a||{};return'\x3cdiv id\x3d"hoursInputs" class\x3d"timeframeEditor"\x3e\x3cdiv class\x3d"dateEditor"\x3e'+(a.showSeasonalHoursEditor?'\x3cdiv class\x3d"startDateEditor"\x3e'+templates.fourSq.venue.hours.startSeasonalMonthInput_(null)+templates.fourSq.venue.hours.startSeasonalDayInput_(null)+'\x3c/div\x3e\x3cdiv class\x3d"endDateEditor"\x3e'+templates.fourSq.venue.hours.endSeasonalDayInput_(null)+templates.fourSq.venue.hours.endSeasonalMonthInput_(null)+
"\x3c/div\x3e":"")+'\x3c/div\x3e\x3cform class\x3d"timeframeEditorForm"\x3e'+templates.fourSq.venue.hours.dayToggles({compact:!1})+'\x3cdiv class\x3d"times"\x3e\x3cspan class\x3d"labeledTimeInputContainer fromTime"\x3e'+templates.fourSq.ui.inputs.timeInput({inputName:"fromTime",placeholder:"9:00 am"})+'\x3c/span\x3e\x3cspan\x3eto\x3c/span\x3e\x3cspan class\x3d"labeledTimeInputContainer toTime"\x3e'+templates.fourSq.ui.inputs.timeInput({inputName:"toTime",placeholder:"5:00 pm"})+'\x3c/span\x3e\x3cinput type\x3d"submit" disabled\x3d"disabled" value\x3d"Add" class\x3d"timeframeEditorSubmit disabledButton" /\x3e\x3c/div\x3e\x3cdiv class\x3d"timeframeEditorSummary"\x3e\x3cdiv class\x3d"timeframeEditorStatus"\x3e\x3c/div\x3e\x3cdiv class\x3d"timeframeEditorPreview hoursList"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/form\x3e\x3cp class\x3d"timeframeError error"\x3e\x3c/p\x3e\x3cdiv class\x3d"clear"\x3e\x3c!-- empty --\x3e\x3c/div\x3e\x3c/div\x3e'};
templates.fourSq.venue.hours.add=function(a,b){return'\x3cdiv id\x3d"hoursInputs" class\x3d"timeframeEditor"\x3e\x3cform class\x3d"timeframeEditorForm"\x3e'+templates.fourSq.venue.hours.dayToggles({compact:!1})+'\x3cdiv class\x3d"times"\x3e'+templates.fourSq.venue.hours.fromTimeInput_({inputName:"fromTime",placeholder:"9:00 am"})+templates.fourSq.venue.hours.toTimeInput_({inputName:"toTime",placeholder:"5:00 pm"})+'\x3c/div\x3e\x3cdiv class\x3d"timeframeEditorSummary"\x3e\x3cinput type\x3d"submit" disabled\x3d"disabled" value\x3d"Add Time Frame" class\x3d"timeframeEditorSubmit disabledButton" /\x3e\x3cdiv class\x3d"timeframeEditorStatus"\x3e\x3c/div\x3e\x3cdiv class\x3d"timeframeEditorPreview hoursList"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/form\x3e\x3cp class\x3d"timeframeError error"\x3e\x3c/p\x3e\x3cdiv class\x3d"clear"\x3e\x3c!-- empty --\x3e\x3c/div\x3e\x3c/div\x3e'};
templates.fourSq.venue.hours.buttons=function(a,b){return'\x3cdiv class\x3d"hoursEditorButtons"\x3e\x3cdiv id\x3d"validationError" class\x3d"errorDisplay"\x3e\x3c/div\x3e\x3ca class\x3d"hoursEditorCancel"\x3eCancel\x3c/a\x3e\x3ca class\x3d"hoursEditorSave disabledButton"\x3eSave Hours\x3c/a\x3e\x3c/div\x3e'};
templates.fourSq.venue.hours.dayToggles=function(a,b){for(var c='\x3cdiv id\x3d"dayToggles" class\x3d"dayToggles"\x3e',d=1;8>d;d++)c+=templates.fourSq.ui.inputs.basicToggle({contents:a.compact?helpers.util.dayOfWeekInitial({day:d%7}):helpers.util.dayOfWeekAbbreviated({day:d%7}),checkboxName:d,dataParam:"data-index\x3d"+soy.$$escapeHtml(d)});return c+"\x3c/div\x3e"};
templates.fourSq.venue.hours.namedRange=function(a,b){return'\x3cdiv id\x3d"namedRange'+soy.$$escapeHtml(a.rangeNumber)+'" class\x3d"range" style\x3d"display: none;"\x3e\x3cdiv class\x3d"nameContainer"\x3e\x3cinput class\x3d"rangeName" type\x3d"text" name\x3d"rangeName" tabindex\x3d"'+soy.$$escapeHtml(a.startingTabIndex)+'" placeholder\x3d"Name" /\x3e\x3cdiv class\x3d"completions"\x3e\x3c/div\x3e\x3c/div\x3e'+templates.fourSq.venue.hours.fromTimeInput_({inputName:"namedRangeFrom"+soy.$$escapeHtml(a.rangeNumber),
tabindex:a.startingTabIndex+1,placeholder:"1:00 pm"})+templates.fourSq.venue.hours.toTimeInput_({inputName:"namedRangeTo"+soy.$$escapeHtml(a.rangeNumber),tabindex:a.startingTabIndex+2,placeholder:"2:00 pm"})+'\x3ca class\x3d"deleteRange"\x3e\x3cimg src\x3d"'+soy.$$escapeHtml("https://ss1.4sqi.net/img/icon-delete-5e654699e212267863ac7e65fe087a77.png")+'" alt\x3d"Delete Range"/\x3e\x3c/a\x3e\x3c/div\x3e'};
templates.fourSq.venue.hours.list=function(a,b){a=a||{};var c='\x3cdiv class\x3d"fullHoursList hoursList"\x3e';if(null==a.hours?0:a.hours.timeframes)for(var d=a.hours.timeframes,e=d.length,f=0;f<e;f++)c+=helpers.venue.hours.hoursItem({timeframe:d[f],blurred:!1,editable:a.editable});return c+"\x3c/div\x3e"};
templates.fourSq.venue.hours.seasonalList=function(a,b){a=a||{};var c='\x3cdiv class\x3d"fullHoursList hoursList"\x3e';if(a.hours)for(var d=a.hours,e=d.length,f=0;f<e;f++)c+=templates.fourSq.venue.hours.seasonalRangeHours({seasonalHour:d[f],editable:a.editable});return c+"\x3c/div\x3e"};
templates.fourSq.venue.hours.seasonalRangeHours=function(a,b){a=a||{};for(var c='\x3cdiv class\x3d"seasonalRange"\x3e\x3cdiv class\x3d"range"\x3e'+soy.$$escapeHtml(a.seasonalHour.seasonalRange)+"\x3c/div\x3e",d=a.seasonalHour.timeframes,e=d.length,f=0;f<e;f++)c+=templates.fourSq.venue.hours.seasonalHoursItem({timeframe:d[f],editable:a.editable});return c+"\x3c/div\x3e"};
templates.fourSq.venue.hours.seasonalHoursItem=function(a,b){for(var c='\x3cdiv class\x3d"timespan"\x3e'+(a.editable?'\x3ca class\x3d"deleteHours"\x3e\x3cimg src\x3d"'+soy.$$escapeHtml("https://ss1.4sqi.net/img/icon-delete-5e654699e212267863ac7e65fe087a77.png")+'" alt\x3d"Delete Hours" /\x3e\x3c/a\x3e':"")+'\x3cdiv class\x3d"openTime"\x3e\x3cdiv class\x3d"days"\x3e'+soy.$$escapeHtml(a.timeframe.days)+"\x3c/div\x3e",d=a.timeframe.open,e=d.length,f=0;f<e;f++)c+='\x3cspan class\x3d"hours"\x3e '+soy.$$escapeHtml(d[f].renderedTime)+
"\x3c/span\x3e";return c+"\x3c/div\x3e\x3c/div\x3e"};templates.fourSq.venue.hours.fromTimeInput_=function(a,b){return'\x3cdiv class\x3d"labeledTimeInputContainer fromTime"\x3e\x3cstrong\x3eFrom\x3c/strong\x3e'+templates.fourSq.ui.inputs.timeInput(a)+"\x3c/div\x3e"};
templates.fourSq.venue.hours.toTimeInput_=function(a,b){return'\x3cdiv class\x3d"labeledTimeInputContainer toTime" '+(a.containerId?'id\x3d"'+soy.$$escapeHtml(a.containerId)+'"':"")+"\x3e\x3cstrong\x3eTo\x3c/strong\x3e"+templates.fourSq.ui.inputs.timeInput(a)+"\x3c/div\x3e"};templates.fourSq.venue.hours.monthPicker=function(a,b){return'\x3cdiv\x3e\x3cselect name\x3d"month" class\x3d"monthPicker"\x3e\x3coption value\x3d"1"\x3eJanuary\x3c/option\x3e\x3coption value\x3d"2"\x3eFebruary\x3c/option\x3e\x3coption value\x3d"3"\x3eMarch\x3c/option\x3e\x3coption value\x3d"4"\x3eApril\x3c/option\x3e\x3coption value\x3d"5"\x3eMay\x3c/option\x3e\x3coption value\x3d"6"\x3eJune\x3c/option\x3e\x3coption value\x3d"7"\x3eJuly\x3c/option\x3e\x3coption value\x3d"8"\x3eAugust\x3c/option\x3e\x3coption value\x3d"9"\x3eSeptember\x3c/option\x3e\x3coption value\x3d"10"\x3eOctober\x3c/option\x3e\x3coption value\x3d"11"\x3eNovember\x3c/option\x3e\x3coption value\x3d"12"\x3eDecember\x3c/option\x3e\x3c/select\x3e\x3c/div\x3e'};
templates.fourSq.venue.hours.dayPicker=function(a,b){return'\x3cdiv\x3e\x3cselect name\x3d"day" class\x3d"dayPicker"\x3e\x3c/select\x3e\x3c/div\x3e'};templates.fourSq.venue.hours.startSeasonalMonthInput_=function(a,b){return'\x3cdiv class\x3d"startMonth"\x3e'+templates.fourSq.venue.hours.monthPicker(null)+"\x3c/div\x3e"};templates.fourSq.venue.hours.startSeasonalDayInput_=function(a,b){return'\x3cdiv class\x3d"startDay"\x3e'+templates.fourSq.venue.hours.dayPicker(null)+"\x3c/div\x3e"};
templates.fourSq.venue.hours.endSeasonalMonthInput_=function(a,b){return'\x3cdiv class\x3d"endMonth"\x3e'+templates.fourSq.venue.hours.monthPicker(null)+"\x3c/div\x3e"};templates.fourSq.venue.hours.endSeasonalDayInput_=function(a,b){return'\x3cdiv class\x3d"endDay"\x3e'+templates.fourSq.venue.hours.dayPicker(null)+"\x3c/div\x3e"};templates.fourSq.venue.hours.mondayAliases=function(a,b){return"mondays,monday,monda,mond,mon,mo,m"};templates.fourSq.venue.hours.tuesdayAliases=function(a,b){return"tuesdays,tuesday,tuesd,tues,tue,tu"};
templates.fourSq.venue.hours.wednesdayAliases=function(a,b){return"wednesdays,wednesday,wednes,wedne,wedn,wed,we,w"};templates.fourSq.venue.hours.thursdayAliases=function(a,b){return"thursdays,thursday,thurs,thur,thu,th"};templates.fourSq.venue.hours.fridayAliases=function(a,b){return"fridays,friday,frida,frid,fri,fr,f"};templates.fourSq.venue.hours.saturdayAliases=function(a,b){return"saturdays,saturday,satur,satu,sat,sa"};templates.fourSq.venue.hours.sundayAliases=function(a,b){return"sundays,sunday,sunda,sund,sun,su"};
templates.fourSq.venue.hours.weekendAliases=function(a,b){return"weekends,weekend,week end,week ends,week-end,week-ends"};templates.fourSq.venue.hours.weekdayAliases=function(a,b){return"weekdays,weekday,week day,week days,week-day,week-days"};templates.fourSq.venue.hours.successNotification=function(a,b){return"Thanks for adding hours. Our community will review your addition, and you'll likely see it on this page soon!"};templates.fourSq.venue.hours.managerSuccessNotification=function(a,b){return"Thanks for editing the hours of your location!"};
templates.fourSq.venue.hours.failureNotification=function(a,b){return"Something went wrong. Please try again later."};templates.fourSq.venue.hours.parseFailureMessage=function(a,b){return"Oops, something went wrong. Try reformatting the text or switch back to manually adding hours."};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.newdrag&&(templates.fourSq.newdrag={});"undefined"==typeof templates.fourSq.newdrag.ui&&(templates.fourSq.newdrag.ui={});"undefined"==typeof templates.fourSq.newdrag.ui.share&&(templates.fourSq.newdrag.ui.share={});
templates.fourSq.newdrag.ui.share.facebookShareButton=function(a,b){a=a||{};return'\x3cdiv class\x3d"facebook-share-button"\x3e\x3cdiv class\x3d"facebook-share-button-inner"\x3e\x3cimg class\x3d"facebook-share-img" width\x3d"14" height\x3d"14" src\x3d"'+soy.$$escapeHtml(fourSq.retina.isRetina()?"https://ss1.4sqi.net/img/facebook_white_18@2x-09c9016a274d402baa09dea3db57bee9.png":"https://ss1.4sqi.net/img/facebook_white_18-6875722153c5cc272e8c0a35bd2300aa.png")+'" /\x3e\x3cspan class\x3d"share-text"\x3e'+
(a.longText?"Share on Facebook":"Share")+"\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e"};
templates.fourSq.newdrag.ui.share.facebookShareIcon=function(a,b){return'\x3cspan class\x3d"facebook-share-icon"\x3e\x3cimg class\x3d"facebook-share-img" width\x3d"'+soy.$$escapeHtml(a.size)+'" height\x3d"'+soy.$$escapeHtml(a.size)+'" src\x3d"'+soy.$$escapeHtml(fourSq.retina.isRetina()?"https://ss0.4sqi.net/img/facebook_32@2x-7175251f6b209add245088514a209b90.png":"https://ss0.4sqi.net/img/facebook_32-743bb681c3d801ceeb80a504ecab9dc4.png")+'" /\x3e\x3c/span\x3e'};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.newdrag&&(templates.fourSq.newdrag={});"undefined"==typeof templates.fourSq.newdrag.ui&&(templates.fourSq.newdrag.ui={});"undefined"==typeof templates.fourSq.newdrag.ui.share&&(templates.fourSq.newdrag.ui.share={});
templates.fourSq.newdrag.ui.share.twitterTweetButton=function(a,b){a=a||{};return'\x3ca class\x3d"twitter-tweet-button"\x3e\x3cdiv class\x3d"twitter-tweet-button-inner"\x3e\x3cimg class\x3d"twitter-tweet-img" width\x3d"14" height\x3d"14" src\x3d"'+soy.$$escapeHtml(fourSq.retina.isRetina()?"https://ss0.4sqi.net/img/twitter_white_20@2x-b11b394a4fc08d20562ce6727f1e5c54.png":"https://ss0.4sqi.net/img/twitter_white_20-dddc8e223ea8cdef536fb8e9997eea92.png")+'" /\x3e\x3cspan class\x3d"tweet-text"\x3e'+(a.longText?
"Share on Twitter":"Tweet")+"\x3c/span\x3e\x3c/div\x3e\x3c/a\x3e"};
templates.fourSq.newdrag.ui.share.twitterTweetIcon=function(a,b){return'\x3ca class\x3d"twitter-tweet-icon"\x3e\x3cimg class\x3d"twitter-tweet-img" width\x3d"'+soy.$$escapeHtml(a.size)+'" height\x3d"'+soy.$$escapeHtml(a.size)+'" src\x3d"'+soy.$$escapeHtml(fourSq.retina.isRetina()?"https://ss1.4sqi.net/img/twitter_32@2x-dc92e065a3248de916045fa51836272d.png":"https://ss0.4sqi.net/img/twitter_32-0bf33b0d2b892bed53a30f37544a52fa.png")+'" /\x3e\x3c/a\x3e'};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.newdrag&&(templates.fourSq.newdrag={});"undefined"==typeof templates.fourSq.newdrag.ui&&(templates.fourSq.newdrag.ui={});"undefined"==typeof templates.fourSq.newdrag.ui.share&&(templates.fourSq.newdrag.ui.share={});
templates.fourSq.newdrag.ui.share.branchBanner=function(a,b){return"\x3cscript type\x3d\"text/javascript\"\x3ebranch.init('key_live_nmm2Ae8J1GbSQXu22I7FTohhuwnTL9R0'); branch.banner({icon: '"+soy.$$escapeHtml(fourSq.retina.isRetina()?"https://ss0.4sqi.net/img/metaIcons/touch-icon-72@2x-c84cda602c571f82f0a39c1635049de4.png":"https://ss1.4sqi.net/img/metaIcons/touch-icon-72-cf2d6cd44afc49e9889ad54e33e69f31.png")+"', title: '', description: 'Find the best places to eat, drink, shop and visit.', rating: 4.5, position: 'bottom', openAppButtonText: 'Get the App!', downloadAppButtonText: 'Get the App!', sendLinkText: 'TEXT ME THE APP', phonePreviewText: '+123 456 7890', showiOS: false, showiPad: false, showAndroid: false, showBlackberry: false, showWindowsPhone: false, showKindle: false, showDesktop: true, iframe: true, disableHide: false, forgetHide: false, respectDNT: true, mobileSticky: false, desktopSticky: true, make_new_link: false, open_app: false, customCSS: '#branch-banner .content { background: #14339C; font-family: Helvetica Neue, Helvetica, Verdana, Arial, sans-serif } #branch-banner .icon img { border-radius: 10px; height: 45px; width: 45px; margin: 10px; } #branch-banner .title { width: 100px; height: 15px; font-size: 14px; color: #14339C; background-image: url(\\\""+
soy.$$escapeHtml(fourSq.retina.isRetina()?"https://ss0.4sqi.net/img/superusermarketinglanding/nav/foursquareLogo@2x-b07ff7d141fb6966f602ffeae4a78e8c.png":"https://ss1.4sqi.net/img/superusermarketinglanding/nav/foursquareLogo-3ef04a4f7d4cf37cfa372938fed5956b.png")+"\"); background-repeat: no-repeat; background-location: left; background-size: 100%; vertical-align: center; margin-left: 118px;} #branch-banner .description { font-size: 12px; color: #FFFFFF} #branch-banner input {font-size: 16px; margin-right: 30px;} #branch-banner .button { border: 1px solid #89CC58; background: #89CC58; color: #FFFFFF; font-size: 16px; padding: 5px 35px;} #branch-banner-close { color: #FFFFFF; font-family: Helvetica Neue, Helvetica, Verdana, Arial, sans-serif; font-size: 30px; margin-left: 10px; top: 10px;} #branch-banner .reviews { color: #FFFFFF } #branch-banner .reviews .star svg { fill: #F4B73F; }'}, {channel: 'Desktop Text Me The App', campaign: 'Text Me the App', tags: ['',''], data: {'$deeplink_path': window.location.pathname}});\x3c/script\x3e"+
templates.fourSq.newdrag.ui.share.branchEvents(null)};templates.fourSq.newdrag.ui.share.branchEvents=function(a,b){return"\x3cscript type\x3d\"text/javascript\"\x3evar listener \x3d function(event, data) {data \x3d data || {}; if (event \x3d\x3d\x3d 'didShowBanner') {event \x3d 'Banner Shown';} else if (event \x3d\x3d\x3d 'didCloseBanner') {event \x3d 'Banner Close'} else if (event \x3d\x3d\x3d 'willSendBannerSMS') {event \x3d 'Banner SMS Phone Number Successful'} else if (event \x3d\x3d\x3d 'sendBannerSMSError') {event \x3d 'Banner SMS Error'} else if (event \x3d\x3d\x3d 'didSendBannerSMS') {event \x3d 'Banner SMS Sent'} else if (event \x3d\x3d\x3d 'didDownloadApp') {event \x3d 'Branch Web - App Cookie Updated'} else if (event \x3d\x3d\x3d 'willShowJourney') {event \x3d 'Branch Journeys - Will Show Journey'} else if (event \x3d\x3d\x3d 'didShowJourney') {event \x3d 'Branch Journeys - Journey Impression'} else if (event \x3d\x3d\x3d 'willNotShowJourney') {event \x3d 'Branch Journeys - Will Not Show Journey'} else if (event \x3d\x3d\x3d 'didClickJourneyCTA') {event \x3d 'Branch Journeys - Journey CTA Click'} else if (event \x3d\x3d\x3d 'didClickJourneyClose') {event \x3d 'Branch Journeys - Journey Close button Click'} else if (event \x3d\x3d\x3d 'willCloseJourney') {event \x3d 'Branch Journeys - Journey Close Pending'} else if (event \x3d\x3d\x3d 'didCloseJourney') {event \x3d 'Branch Journeys - Journey Closed'} else if (event \x3d\x3d\x3d 'didCallJourneyClose') {event \x3d 'Branch Journeys - Programmatic Journey Close'}; if (window.mParticle) {window.mParticle.logEvent(event, mParticle.EventType.Navigation, data.journey_link_data);}}; branch.addListener('didShowBanner', listener); branch.addListener('didCloseBanner', listener); branch.addListener('willSendBannerSMS', listener); branch.addListener('sendBannerSMSError', listener); branch.addListener('didSendBannerSMS', listener); branch.addListener('didDownloadApp', listener); branch.addListener('willShowJourney', listener); branch.addListener('didShowJourney', listener); branch.addListener('willNotShowJourney', listener); branch.addListener('didClickJourneyCTA', listener); branch.addListener('didClickJourneyClose', listener); branch.addListener('willCloseJourney', listener); branch.addListener('didCloseJourney', listener); branch.addListener('didCallJourneyClose', listener);\x3c/script\x3e"};"undefined"==typeof templates.fourSq&&(templates.fourSq={});"undefined"==typeof templates.fourSq.ui&&(templates.fourSq.ui={});"undefined"==typeof templates.fourSq.ui.richform&&(templates.fourSq.ui.richform={});
templates.fourSq.ui.richform.inputArea=function(a,b){var c='\x3cdiv class\x3d"addItemArea '+soy.$$escapeHtml(a.className)+'"\x3e\x3ctextarea class\x3d"formStyle" placeholder\x3d"'+soy.$$escapeHtml(a.placeholder)+'" cols\x3d"55" tabindex\x3d"1" rows\x3d"4"\x3e\x3c/textarea\x3e\x3cspan class\x3d"charCount"\x3e\x3c/span\x3e\x3cp class\x3d"inputError"\x3e\x3c/p\x3e\x3cdiv class\x3d"photoLinkButtons"\x3e'+helpers.photoupload.photoUploadControl({inputName:a.inputName,action:a.action,addButtonHolderClass:"photoAddButtonHolder"});
a.includeLink&&(c+='\x3cspan title\x3d"'+soy.$$escapeHtml("Add a link")+'" class\x3d"addLink"\x3e\x3c/span\x3e');return c+"\x3c/div\x3e\x3c/div\x3e"};